{"version":3,"file":"ktui.min.js","mappings":"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","sources":["webpack://@keenthemes/ktui/webpack/universalModuleDefinition","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/createPopper.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/contains.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getWindow.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/enums.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/modifiers/applyStyles.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/modifiers/arrow.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/modifiers/computeStyles.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/modifiers/eventListeners.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/modifiers/flip.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/modifiers/hide.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/modifiers/offset.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/popper-lite.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/popper.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/computeOffsets.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/debounce.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/detectOverflow.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/expandToHashMap.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/getAltAxis.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/getBasePlacement.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/getVariation.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/math.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/mergeByName.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/orderModifiers.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/rectToClientRect.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/userAgent.js","webpack://@keenthemes/ktui/./node_modules/@popperjs/core/lib/utils/within.js","webpack://@keenthemes/ktui/./src/components/accordion/accordion.ts","webpack://@keenthemes/ktui/./src/components/accordion/index.ts","webpack://@keenthemes/ktui/./src/components/collapse/collapse.ts","webpack://@keenthemes/ktui/./src/components/collapse/index.ts","webpack://@keenthemes/ktui/./src/components/component.ts","webpack://@keenthemes/ktui/./src/components/datatable/datatable-checkbox.ts","webpack://@keenthemes/ktui/./src/components/datatable/datatable-sort.ts","webpack://@keenthemes/ktui/./src/components/datatable/datatable.ts","webpack://@keenthemes/ktui/./src/components/datatable/index.ts","webpack://@keenthemes/ktui/./src/components/datepicker/calendar.ts","webpack://@keenthemes/ktui/./src/components/datepicker/config.ts","webpack://@keenthemes/ktui/./src/components/datepicker/datepicker.ts","webpack://@keenthemes/ktui/./src/components/datepicker/dropdown.ts","webpack://@keenthemes/ktui/./src/components/datepicker/events.ts","webpack://@keenthemes/ktui/./src/components/datepicker/index.ts","webpack://@keenthemes/ktui/./src/components/datepicker/keyboard.ts","webpack://@keenthemes/ktui/./src/components/datepicker/locales.ts","webpack://@keenthemes/ktui/./src/components/datepicker/templates.ts","webpack://@keenthemes/ktui/./src/components/datepicker/types.ts","webpack://@keenthemes/ktui/./src/components/datepicker/utils.ts","webpack://@keenthemes/ktui/./src/components/dismiss/dismiss.ts","webpack://@keenthemes/ktui/./src/components/dismiss/index.ts","webpack://@keenthemes/ktui/./src/components/drawer/drawer.ts","webpack://@keenthemes/ktui/./src/components/drawer/index.ts","webpack://@keenthemes/ktui/./src/components/dropdown/dropdown.ts","webpack://@keenthemes/ktui/./src/components/dropdown/index.ts","webpack://@keenthemes/ktui/./src/components/image-input/image-input.ts","webpack://@keenthemes/ktui/./src/components/image-input/index.ts","webpack://@keenthemes/ktui/./src/components/modal/index.ts","webpack://@keenthemes/ktui/./src/components/modal/modal.ts","webpack://@keenthemes/ktui/./src/components/reparent/index.ts","webpack://@keenthemes/ktui/./src/components/reparent/reparent.ts","webpack://@keenthemes/ktui/./src/components/scrollable/index.ts","webpack://@keenthemes/ktui/./src/components/scrollable/scrollable.ts","webpack://@keenthemes/ktui/./src/components/scrollspy/index.ts","webpack://@keenthemes/ktui/./src/components/scrollspy/scrollspy.ts","webpack://@keenthemes/ktui/./src/components/scrollto/index.ts","webpack://@keenthemes/ktui/./src/components/scrollto/scrollto.ts","webpack://@keenthemes/ktui/./src/components/select/combobox.ts","webpack://@keenthemes/ktui/./src/components/select/config.ts","webpack://@keenthemes/ktui/./src/components/select/dropdown.ts","webpack://@keenthemes/ktui/./src/components/select/index.ts","webpack://@keenthemes/ktui/./src/components/select/option.ts","webpack://@keenthemes/ktui/./src/components/select/remote.ts","webpack://@keenthemes/ktui/./src/components/select/search.ts","webpack://@keenthemes/ktui/./src/components/select/select.ts","webpack://@keenthemes/ktui/./src/components/select/tags.ts","webpack://@keenthemes/ktui/./src/components/select/templates.ts","webpack://@keenthemes/ktui/./src/components/select/utils.ts","webpack://@keenthemes/ktui/./src/components/stepper/index.ts","webpack://@keenthemes/ktui/./src/components/stepper/stepper.ts","webpack://@keenthemes/ktui/./src/components/sticky/index.ts","webpack://@keenthemes/ktui/./src/components/sticky/sticky.ts","webpack://@keenthemes/ktui/./src/components/tabs/index.ts","webpack://@keenthemes/ktui/./src/components/tabs/tabs.ts","webpack://@keenthemes/ktui/./src/components/theme-switch/index.ts","webpack://@keenthemes/ktui/./src/components/theme-switch/theme-switch.ts","webpack://@keenthemes/ktui/./src/components/toast/index.ts","webpack://@keenthemes/ktui/./src/components/toast/toast.ts","webpack://@keenthemes/ktui/./src/components/toggle-password/index.ts","webpack://@keenthemes/ktui/./src/components/toggle-password/toggle-password.ts","webpack://@keenthemes/ktui/./src/components/toggle/index.ts","webpack://@keenthemes/ktui/./src/components/toggle/toggle.ts","webpack://@keenthemes/ktui/./src/components/tooltip/index.ts","webpack://@keenthemes/ktui/./src/components/tooltip/tooltip.ts","webpack://@keenthemes/ktui/./src/helpers/data.ts","webpack://@keenthemes/ktui/./src/helpers/dom.ts","webpack://@keenthemes/ktui/./src/helpers/event-handler.ts","webpack://@keenthemes/ktui/./src/helpers/utils.ts","webpack://@keenthemes/ktui/./src/index.ts","webpack://@keenthemes/ktui/webpack/bootstrap","webpack://@keenthemes/ktui/webpack/runtime/define property getters","webpack://@keenthemes/ktui/webpack/runtime/hasOwnProperty shorthand","webpack://@keenthemes/ktui/webpack/runtime/make namespace object","webpack://@keenthemes/ktui/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update  it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update  it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases  research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow };","import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTEventHandler from '../../helpers/event-handler';\nimport KTComponent from '../component';\nimport { KTAccordionInterface, KTAccordionConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_ACCORDION_INITIALIZED: boolean;\n\t\tKTAccordion: typeof KTAccordion;\n\t}\n}\n\nexport class KTAccordion extends KTComponent implements KTAccordionInterface {\n\tprotected override _name: string = 'accordion';\n\tprotected override _defaultConfig: KTAccordionConfigInterface = {\n\t\thiddenClass: 'hidden',\n\t\tactiveClass: 'active',\n\t\texpandAll: false,\n\t};\n\tprotected override _config: KTAccordionConfigInterface = this._defaultConfig;\n\tprotected _accordionElements: NodeListOf<HTMLElement>;\n\n\tconstructor(element: HTMLElement, config?: KTAccordionConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\t\tthis._handlers();\n\t}\n\n\tprotected _handlers(): void {\n\t\tKTEventHandler.on(\n\t\t\tthis._element,\n\t\t\t'[data-kt-accordion-toggle]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst accordionElement = target.closest(\n\t\t\t\t\t'[data-kt-accordion-item]',\n\t\t\t\t) as HTMLElement;\n\n\t\t\t\tif (accordionElement) this._toggle(accordionElement);\n\t\t\t},\n\t\t);\n\t}\n\n\tprotected _toggle(accordionElement: HTMLElement): void {\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('toggle', payload);\n\t\tthis._dispatchEvent('toggle', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (accordionElement.classList.contains('active')) {\n\t\t\tthis._hide(accordionElement);\n\t\t} else {\n\t\t\tthis._show(accordionElement);\n\t\t}\n\t}\n\n\tprotected _show(accordionElement: HTMLElement): void {\n\t\tif (\n\t\t\taccordionElement.hasAttribute('animating') ||\n\t\t\taccordionElement.classList.contains(\n\t\t\t\tthis._getOption('activeClass') as string,\n\t\t\t)\n\t\t)\n\t\t\treturn;\n\n\t\tconst toggleElement = KTDom.child(\n\t\t\taccordionElement,\n\t\t\t'[data-kt-accordion-toggle]',\n\t\t);\n\t\tif (!toggleElement) return;\n\n\t\tconst contentElement = KTDom.getElement(\n\t\t\t`#${toggleElement.getAttribute('aria-controls')}`,\n\t\t);\n\t\tif (!contentElement) return;\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('show', payload);\n\t\tthis._dispatchEvent('show', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((this._getOption('expandAll') as boolean) === false) {\n\t\t\tthis._hideSiblings(accordionElement);\n\t\t}\n\n\t\taccordionElement.setAttribute('aria-expanded', 'true');\n\t\taccordionElement.classList.add(this._getOption('activeClass') as string);\n\n\t\taccordionElement.setAttribute('animating', 'true');\n\t\tcontentElement.classList.remove(this._getOption('hiddenClass') as string);\n\t\tcontentElement.style.height = `0px`;\n\t\tKTDom.reflow(contentElement);\n\t\tcontentElement.style.height = `${contentElement.scrollHeight}px`;\n\n\t\tKTDom.transitionEnd(contentElement, () => {\n\t\t\taccordionElement.removeAttribute('animating');\n\t\t\tcontentElement.style.height = '';\n\n\t\t\tthis._fireEvent('shown');\n\t\t\tthis._dispatchEvent('shown');\n\t\t});\n\t}\n\n\tprotected _hide(accordionElement: HTMLElement): void {\n\t\tif (\n\t\t\taccordionElement.hasAttribute('animating') ||\n\t\t\t!accordionElement.classList.contains(\n\t\t\t\tthis._getOption('activeClass') as string,\n\t\t\t)\n\t\t)\n\t\t\treturn;\n\n\t\tconst toggleElement = KTDom.child(\n\t\t\taccordionElement,\n\t\t\t'[data-kt-accordion-toggle]',\n\t\t);\n\t\tif (!toggleElement) return;\n\n\t\tconst contentElement = KTDom.getElement(\n\t\t\t`#${toggleElement.getAttribute('aria-controls')}`,\n\t\t);\n\t\tif (!contentElement) return;\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('hide', payload);\n\t\tthis._dispatchEvent('hide', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\taccordionElement.setAttribute('aria-expanded', 'false');\n\n\t\tcontentElement.style.height = `${contentElement.scrollHeight}px`;\n\t\tKTDom.reflow(contentElement);\n\t\tcontentElement.style.height = '0px';\n\t\taccordionElement.setAttribute('animating', 'true');\n\n\t\tKTDom.transitionEnd(contentElement, () => {\n\t\t\taccordionElement.removeAttribute('animating');\n\t\t\taccordionElement.classList.remove(\n\t\t\t\tthis._getOption('activeClass') as string,\n\t\t\t);\n\t\t\tcontentElement.classList.add(this._getOption('hiddenClass') as string);\n\n\t\t\tthis._fireEvent('hidden');\n\t\t\tthis._dispatchEvent('hidden');\n\t\t});\n\t}\n\n\tprotected _hideSiblings(accordionElement: HTMLElement): void {\n\t\tconst siblings = KTDom.siblings(accordionElement);\n\n\t\tsiblings?.forEach((sibling) => {\n\t\t\tthis._hide(sibling as HTMLElement);\n\t\t});\n\t}\n\n\tpublic show(accordionElement: HTMLElement): void {\n\t\tthis._show(accordionElement);\n\t}\n\n\tpublic hide(accordionElement: HTMLElement): void {\n\t\tthis._hide(accordionElement);\n\t}\n\n\tpublic toggle(accordionElement: HTMLElement): void {\n\t\tthis._toggle(accordionElement);\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTAccordion {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'accordion')) {\n\t\t\treturn KTData.get(element, 'accordion') as KTAccordion;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-accordion-initialized') === 'true') {\n\t\t\treturn new KTAccordion(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTAccordionConfigInterface,\n\t): KTAccordion {\n\t\treturn this.getInstance(element) || new KTAccordion(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-accordion]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTAccordion(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTAccordion.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTAccordion = KTAccordion;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTAccordion } from './accordion';\nexport type { KTAccordionConfigInterface, KTAccordionInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n/* eslint-disable max-len */\n/* eslint-disable require-jsdoc */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTComponent from '../component';\nimport { KTCollapseInterface, KTCollapseConfigInterface } from './types';\n\nexport class KTCollapse extends KTComponent implements KTCollapseInterface {\n\tprotected override _name: string = 'collapse';\n\tprotected override _defaultConfig: KTCollapseConfigInterface = {\n\t\thiddenClass: 'hidden',\n\t\tactiveClass: 'active',\n\t\ttarget: '',\n\t};\n\tprotected override _config: KTCollapseConfigInterface = this._defaultConfig;\n\tprotected _isAnimating: boolean = false;\n\tprotected _targetElement: HTMLElement;\n\n\tconstructor(element: HTMLElement, config?: KTCollapseConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tthis._targetElement = this._getTargetElement();\n\t\tif (!this._targetElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handlers();\n\t}\n\n\tprivate _getTargetElement(): HTMLElement | null {\n\t\treturn (\n\t\t\tKTDom.getElement(\n\t\t\t\tthis._element.getAttribute('data-kt-collapse') as string,\n\t\t\t) || KTDom.getElement(this._getOption('target') as string)\n\t\t);\n\t}\n\n\tprotected _isOpen(): boolean {\n\t\treturn this._targetElement.classList.contains(\n\t\t\tthis._getOption('activeClass') as string,\n\t\t);\n\t}\n\n\tprotected _handlers(): void {\n\t\tthis._element.addEventListener('click', (event: Event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis._toggle();\n\t\t});\n\t}\n\n\tprotected _expand(): void {\n\t\tif (this._isAnimating || this._isOpen()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('expand', payload);\n\t\tthis._dispatchEvent('expand', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._element) {\n\t\t\tthis._element.setAttribute('aria-expanded', 'true');\n\t\t\tthis._element.classList.add(this._getOption('activeClass') as string);\n\t\t}\n\t\tthis._targetElement.classList.remove(\n\t\t\tthis._getOption('hiddenClass') as string,\n\t\t);\n\t\tthis._targetElement.classList.add(this._getOption('activeClass') as string);\n\n\t\tthis._targetElement.style.height = '0px';\n\t\tthis._targetElement.style.overflow = 'hidden';\n\t\tKTDom.reflow(this._targetElement);\n\t\tthis._targetElement.style.height = `${this._targetElement.scrollHeight}px`;\n\t\tthis._isAnimating = true;\n\n\t\tKTDom.transitionEnd(this._targetElement, () => {\n\t\t\tthis._isAnimating = false;\n\t\t\tthis._targetElement.style.height = '';\n\t\t\tthis._targetElement.style.overflow = '';\n\n\t\t\tthis._fireEvent('expanded');\n\t\t\tthis._dispatchEvent('expanded');\n\t\t});\n\t}\n\n\tprotected _collapse(): void {\n\t\tif (this._isAnimating || !this._isOpen()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('collapse', payload);\n\t\tthis._dispatchEvent('collapse', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._element) return;\n\t\tthis._element.setAttribute('aria-expanded', 'false');\n\t\tthis._element.classList.remove(this._getOption('activeClass') as string);\n\t\tthis._targetElement.classList.remove(\n\t\t\tthis._getOption('activeClass') as string,\n\t\t);\n\n\t\tthis._targetElement.style.height = `${this._targetElement.scrollHeight}px`;\n\t\tKTDom.reflow(this._targetElement);\n\t\tthis._targetElement.style.height = `0px`;\n\t\tthis._targetElement.style.overflow = 'hidden';\n\t\tthis._isAnimating = true;\n\n\t\tKTDom.transitionEnd(this._targetElement, () => {\n\t\t\tthis._isAnimating = false;\n\t\t\tthis._targetElement.classList.add(\n\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t);\n\t\t\tthis._targetElement.style.overflow = '';\n\n\t\t\tthis._fireEvent('collapsed');\n\t\t\tthis._dispatchEvent('collapsed');\n\t\t});\n\t}\n\n\tprotected _toggle(): void {\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('toggle', payload);\n\t\tthis._dispatchEvent('toggle', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isOpen()) {\n\t\t\tthis._collapse();\n\t\t} else {\n\t\t\tthis._expand();\n\t\t}\n\t}\n\n\tpublic expand(): void {\n\t\treturn this._expand();\n\t}\n\n\tpublic collapse(): void {\n\t\treturn this._collapse();\n\t}\n\n\tpublic isOpen(): boolean {\n\t\treturn this._isOpen();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTCollapse {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'collapse')) {\n\t\t\treturn KTData.get(element, 'collapse') as KTCollapse;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-collapse')) {\n\t\t\treturn new KTCollapse(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTCollapseConfigInterface,\n\t): KTCollapse {\n\t\treturn this.getInstance(element) || new KTCollapse(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-collapse]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTCollapse(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTCollapse.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTCollapse = KTCollapse;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTCollapse } from './collapse';\nexport type { KTCollapseConfigInterface, KTCollapseInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n/* eslint-disable guard-for-in */\n/* eslint-disable max-len */\n/* eslint-disable require-jsdoc */\n\ndeclare global {\n\tinterface Window {\n\t\tKTGlobalComponentsConfig: object;\n\t}\n}\n\nimport KTData from '../helpers/data';\nimport KTDom from '../helpers/dom';\nimport KTUtils from '../helpers/utils';\nimport { KTOptionType } from '../types';\n\nexport default class KTComponent {\n\tprotected _dataOptionPrefix: string = 'kt-';\n\tprotected _name: string;\n\tprotected _defaultConfig: object;\n\tprotected _config: object;\n\tprotected _events: Map<string, Map<string, CallableFunction>>;\n\tprotected _uid: string | null = null;\n\tprotected _element: HTMLElement | null = null;\n\n\tprotected _init(element: HTMLElement | null) {\n\t\telement = KTDom.getElement(element);\n\n\t\tif (!element) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._element = element;\n\t\tthis._events = new Map();\n\t\tthis._uid = KTUtils.geUID(this._name);\n\n\t\tthis._element.setAttribute(`data-kt-${this._name}-initialized`, 'true');\n\n\t\tKTData.set(this._element, this._name, this);\n\t}\n\n\tprotected _fireEvent(eventType: string, payload: object = null): void {\n\t\tthis._events.get(eventType)?.forEach((callable) => {\n\t\t\tcallable(payload);\n\t\t});\n\t}\n\n\tprotected _dispatchEvent(eventType: string, payload: object = null): void {\n\t\tconst event = new CustomEvent(eventType, {\n\t\t\tdetail: { payload },\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t\tcomposed: false,\n\t\t});\n\n\t\tif (!this._element) return;\n\t\tthis._element.dispatchEvent(event);\n\t}\n\n\tprotected _getOption(name: string): KTOptionType {\n\t\tconst value = this._config[name as keyof object];\n\t\tconst reponsiveValue = KTDom.getCssProp(\n\t\t\tthis._element,\n\t\t\t`--kt-${this._name}-${KTUtils.camelReverseCase(name)}`,\n\t\t);\n\n\t\treturn reponsiveValue || value;\n\t}\n\n\tprotected _getGlobalConfig(): object {\n\t\tif (\n\t\t\twindow.KTGlobalComponentsConfig &&\n\t\t\t(window.KTGlobalComponentsConfig as object)[this._name as keyof object]\n\t\t) {\n\t\t\treturn (window.KTGlobalComponentsConfig as object)[\n\t\t\t\tthis._name as keyof object\n\t\t\t] as object;\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t}\n\n\tprotected _buildConfig(config: object = {}): void {\n\t\tif (!this._element) return;\n\n\t\tthis._config = {\n\t\t\t...this._defaultConfig,\n\t\t\t...this._getGlobalConfig(),\n\t\t\t...KTDom.getDataAttributes(\n\t\t\t\tthis._element,\n\t\t\t\tthis._dataOptionPrefix + this._name,\n\t\t\t),\n\t\t\t...config,\n\t\t};\n\t}\n\n\tpublic dispose(): void {\n\t\tif (!this._element) return;\n\n\t\tthis._element.removeAttribute(`data-kt-${this._name}-initialized`);\n\t\tKTData.remove(this._element, this._name);\n\t}\n\n\tpublic on(eventType: string, callback: CallableFunction): string {\n\t\tconst eventId = KTUtils.geUID();\n\n\t\tif (!this._events.get(eventType)) {\n\t\t\tthis._events.set(eventType, new Map());\n\t\t}\n\n\t\tthis._events.get(eventType).set(eventId, callback);\n\n\t\treturn eventId;\n\t}\n\n\tpublic off(eventType: string, eventId: string): void {\n\t\tthis._events.get(eventType)?.delete(eventId);\n\t}\n\n\tpublic getOption(name: string): KTOptionType {\n\t\treturn this._getOption(name as keyof object);\n\t}\n\n\tpublic getElement(): HTMLElement {\n\t\tif (!this._element) return null;\n\t\treturn this._element;\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n// Checkbox logic for KTDataTable\n\nimport {\n\tKTDataTableConfigInterface,\n\tKTDataTableCheckChangePayloadInterface,\n} from './types';\nimport KTEventHandler from '../../helpers/event-handler';\n\nexport interface KTDataTableCheckboxAPI {\n\tinit(): void;\n\tcheck(): void;\n\tuncheck(): void;\n\ttoggle(): void;\n\tisChecked(): boolean;\n\tgetChecked(): string[];\n\tupdateState(): void;\n}\n\n// Main function to create checkbox logic for a datatable instance\nexport function createCheckboxHandler(\n\telement: HTMLElement,\n\tconfig: KTDataTableConfigInterface,\n\tfireEvent: (eventName: string, eventData?: any) => void,\n): KTDataTableCheckboxAPI {\n\tlet headerChecked = false;\n\tlet headerCheckElement: HTMLInputElement | null = null;\n\tlet targetElements: NodeListOf<HTMLInputElement> = null;\n\n\t// Default: preserve selection across all pages\n\tconst preserveSelection = config.checkbox?.preserveSelection !== false;\n\n\t// Helper: get selectedRows from state, always as string[]\n\tfunction getSelectedRows(): string[] {\n\t\tif (!config._state) config._state = {} as any;\n\t\tif (!Array.isArray(config._state.selectedRows))\n\t\t\tconfig._state.selectedRows = [];\n\t\treturn config._state.selectedRows.map(String);\n\t}\n\n\t// Helper: set selectedRows in state\n\tfunction setSelectedRows(rows: string[]) {\n\t\tif (!config._state) config._state = {} as any;\n\t\tconfig._state.selectedRows = Array.from(new Set(rows.map(String)));\n\t}\n\n\t// Helper: get all visible row IDs (values)\n\tfunction getVisibleRowIds(): string[] {\n\t\tif (!targetElements) return [];\n\t\treturn Array.from(targetElements)\n\t\t\t.map((el) => el.value)\n\t\t\t.filter((v) => v != null && v !== '');\n\t}\n\n\t// Listener for header checkbox\n\tconst checkboxListener = (event: MouseEvent) => {\n\t\tcheckboxToggle(event);\n\t};\n\n\tfunction init() {\n\t\theaderCheckElement = element.querySelector<HTMLInputElement>(\n\t\t\tconfig.attributes.check,\n\t\t);\n\t\tif (!headerCheckElement) return;\n\t\theaderChecked = headerCheckElement.checked;\n\t\ttargetElements = element.querySelectorAll(\n\t\t\tconfig.attributes.checkbox,\n\t\t) as NodeListOf<HTMLInputElement>;\n\t\tcheckboxHandler();\n\t\treapplyCheckedStates();\n\t\tupdateHeaderCheckboxState();\n\t}\n\n\tfunction checkboxHandler() {\n\t\tif (!headerCheckElement) return;\n\t\theaderCheckElement.addEventListener('click', checkboxListener);\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\tconfig.attributes.checkbox,\n\t\t\t'input',\n\t\t\t(event: Event) => {\n\t\t\t\thandleRowCheckboxChange(event as InputEvent);\n\t\t\t},\n\t\t);\n\t}\n\n\t// When a row checkbox is changed\n\tfunction handleRowCheckboxChange(event: Event) {\n\t\tconst input = event.target as HTMLInputElement;\n\t\tif (!input) return;\n\t\tconst value = input.value;\n\t\tlet selectedRows = getSelectedRows();\n\t\tif (input.checked) {\n\t\t\tif (!selectedRows.includes(value)) selectedRows.push(value);\n\t\t} else {\n\t\t\tselectedRows = selectedRows.filter((v) => v !== value);\n\t\t}\n\t\tsetSelectedRows(selectedRows);\n\t\tupdateHeaderCheckboxState();\n\t\tfireEvent('changed');\n\t}\n\n\t// When the header checkbox is toggled\n\tfunction checkboxToggle(event?: Event) {\n\t\tconst checked = !isChecked();\n\t\tconst eventType = checked ? 'checked' : 'unchecked';\n\t\tfireEvent(eventType);\n\t\tchange(checked);\n\t}\n\n\t// Change all visible checkboxes and update selectedRows\n\tfunction change(checked: boolean) {\n\t\tconst payload: KTDataTableCheckChangePayloadInterface = { cancel: false };\n\t\tfireEvent('change', payload);\n\t\tif (payload.cancel === true) return;\n\t\theaderChecked = checked;\n\t\tif (headerCheckElement) headerCheckElement.checked = checked;\n\t\tif (targetElements) {\n\t\t\tconst visibleIds = getVisibleRowIds();\n\t\t\tlet selectedRows = getSelectedRows();\n\t\t\tif (checked) {\n\t\t\t\t// Add all visible IDs to selectedRows\n\t\t\t\tselectedRows = preserveSelection\n\t\t\t\t\t? Array.from(new Set([...selectedRows, ...visibleIds]))\n\t\t\t\t\t: visibleIds;\n\t\t\t} else {\n\t\t\t\t// Remove all visible IDs from selectedRows\n\t\t\t\tselectedRows = preserveSelection\n\t\t\t\t\t? selectedRows.filter((v) => !visibleIds.includes(v))\n\t\t\t\t\t: [];\n\t\t\t}\n\t\t\tsetSelectedRows(selectedRows);\n\t\t\t// Update visible checkboxes\n\t\t\ttargetElements.forEach((element: HTMLInputElement) => {\n\t\t\t\tif (element) {\n\t\t\t\t\telement.checked = checked;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tupdateHeaderCheckboxState();\n\t\tfireEvent('changed');\n\t}\n\n\t// Reapply checked state to visible checkboxes based on selectedRows\n\tfunction reapplyCheckedStates() {\n\t\tconst selectedRows = getSelectedRows();\n\t\tif (!targetElements) return;\n\t\ttargetElements.forEach((element: HTMLInputElement) => {\n\t\t\tif (!element) return;\n\t\t\tconst value = element.value;\n\t\t\telement.checked = selectedRows.includes(value);\n\t\t\t// Update row class\n\t\t\tconst row = element.closest('tr');\n\t\t\tif (row && config.checkbox?.checkedClass) {\n\t\t\t\tif (element.checked) {\n\t\t\t\t\trow.classList.add(config.checkbox.checkedClass);\n\t\t\t\t} else {\n\t\t\t\t\trow.classList.remove(config.checkbox.checkedClass);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t// Update header checkbox state (checked/indeterminate/unchecked)\n\tfunction updateHeaderCheckboxState() {\n\t\tif (!headerCheckElement || !targetElements) return;\n\t\tconst total = targetElements.length;\n\t\tlet checked = 0;\n\t\tfor (let i = 0; i < total; i++) {\n\t\t\tif (targetElements[i].checked) checked++;\n\t\t}\n\t\tif (checked === 0) {\n\t\t\theaderCheckElement.indeterminate = false;\n\t\t\theaderCheckElement.checked = false;\n\t\t\theaderChecked = false;\n\t\t} else if (checked > 0 && checked < total) {\n\t\t\theaderCheckElement.indeterminate = true;\n\t\t\theaderCheckElement.checked = false;\n\t\t\theaderChecked = false;\n\t\t} else if (checked === total) {\n\t\t\theaderCheckElement.indeterminate = false;\n\t\t\theaderCheckElement.checked = true;\n\t\t\theaderChecked = true;\n\t\t}\n\t}\n\n\t// Fix: isChecked() implementation\n\tfunction isChecked(): boolean {\n\t\treturn headerChecked;\n\t}\n\n\tfunction getChecked(): string[] {\n\t\treturn getSelectedRows();\n\t}\n\n\tfunction check() {\n\t\tchange(true);\n\t\treapplyCheckedStates();\n\t\tupdateHeaderCheckboxState();\n\t}\n\n\tfunction uncheck() {\n\t\tchange(false);\n\t\treapplyCheckedStates();\n\t\tupdateHeaderCheckboxState();\n\t}\n\n\tfunction toggle() {\n\t\tcheckboxToggle();\n\t\treapplyCheckedStates();\n\t\tupdateHeaderCheckboxState();\n\t}\n\n\tfunction updateState() {\n\t\t// Called after redraw/pagination\n\t\ttargetElements = element.querySelectorAll(\n\t\t\tconfig.attributes.checkbox,\n\t\t) as NodeListOf<HTMLInputElement>;\n\t\treapplyCheckedStates();\n\t\tupdateHeaderCheckboxState();\n\t}\n\n\treturn {\n\t\tinit,\n\t\tcheck,\n\t\tuncheck,\n\t\ttoggle,\n\t\tisChecked,\n\t\tgetChecked,\n\t\tupdateState,\n\t};\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n// Sorting logic for KTDataTable\n\nimport {\n\tKTDataTableConfigInterface,\n\tKTDataTableSortOrderInterface,\n\tKTDataTableDataInterface,\n} from './types';\n\nexport interface KTDataTableSortAPI<T = KTDataTableDataInterface> {\n\tinitSort(): void;\n\tsortData(\n\t\tdata: T[],\n\t\tsortField: keyof T | number,\n\t\tsortOrder: KTDataTableSortOrderInterface,\n\t): T[];\n\ttoggleSortOrder(\n\t\tcurrentField: keyof T | number,\n\t\tcurrentOrder: KTDataTableSortOrderInterface,\n\t\tnewField: keyof T | number,\n\t): KTDataTableSortOrderInterface;\n\tsetSortIcon(\n\t\tsortField: keyof T,\n\t\tsortOrder: KTDataTableSortOrderInterface,\n\t): void;\n}\n\nexport function createSortHandler<T = KTDataTableDataInterface>(\n\tconfig: KTDataTableConfigInterface,\n\ttheadElement: HTMLTableSectionElement,\n\tgetState: () => {\n\t\tsortField: keyof T | number;\n\t\tsortOrder: KTDataTableSortOrderInterface;\n\t},\n\tsetState: (\n\t\tfield: keyof T | number,\n\t\torder: KTDataTableSortOrderInterface,\n\t) => void,\n\tfireEvent: (eventName: string, eventData?: any) => void,\n\tdispatchEvent: (eventName: string, eventData?: any) => void,\n\tupdateData: () => void,\n): KTDataTableSortAPI<T> {\n\t// Helper to compare values for sorting\n\tfunction compareValues(\n\t\ta: unknown,\n\t\tb: unknown,\n\t\tsortOrder: KTDataTableSortOrderInterface,\n\t): number {\n\t\tconst aText = String(a).replace(/<[^>]*>|&nbsp;/g, '');\n\t\tconst bText = String(b).replace(/<[^>]*>|&nbsp;/g, '');\n\t\treturn aText > bText\n\t\t\t? sortOrder === 'asc'\n\t\t\t\t? 1\n\t\t\t\t: -1\n\t\t\t: aText < bText\n\t\t\t\t? sortOrder === 'asc'\n\t\t\t\t\t? -1\n\t\t\t\t\t: 1\n\t\t\t\t: 0;\n\t}\n\n\tfunction sortData(\n\t\tdata: T[],\n\t\tsortField: keyof T | number,\n\t\tsortOrder: KTDataTableSortOrderInterface,\n\t): T[] {\n\t\treturn data.sort((a, b) => {\n\t\t\tconst aValue = a[sortField as keyof T] as unknown;\n\t\t\tconst bValue = b[sortField as keyof T] as unknown;\n\t\t\treturn compareValues(aValue, bValue, sortOrder);\n\t\t});\n\t}\n\n\tfunction toggleSortOrder(\n\t\tcurrentField: keyof T | number,\n\t\tcurrentOrder: KTDataTableSortOrderInterface,\n\t\tnewField: keyof T | number,\n\t): KTDataTableSortOrderInterface {\n\t\tif (currentField === newField) {\n\t\t\tswitch (currentOrder) {\n\t\t\t\tcase 'asc':\n\t\t\t\t\treturn 'desc';\n\t\t\t\tcase 'desc':\n\t\t\t\t\treturn '';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'asc';\n\t\t\t}\n\t\t}\n\t\treturn 'asc';\n\t}\n\n\tfunction setSortIcon(\n\t\tsortField: keyof T,\n\t\tsortOrder: KTDataTableSortOrderInterface,\n\t): void {\n\t\tconst sortClass = sortOrder\n\t\t\t? sortOrder === 'asc'\n\t\t\t\t? config.sort?.classes?.asc || ''\n\t\t\t\t: config.sort?.classes?.desc || ''\n\t\t\t: '';\n\t\tconst th =\n\t\t\ttypeof sortField === 'number'\n\t\t\t\t? theadElement.querySelectorAll('th')[sortField]\n\t\t\t\t: (theadElement.querySelector(\n\t\t\t\t\t\t`th[data-kt-datatable-column=\"${String(sortField)}\"], th[data-kt-datatable-column-sort=\"${String(sortField)}\"]`,\n\t\t\t\t\t) as HTMLElement);\n\t\tif (th) {\n\t\t\tconst sortElement = th.querySelector(\n\t\t\t\t`.${config.sort?.classes?.base}`,\n\t\t\t) as HTMLElement;\n\t\t\tif (sortElement) {\n\t\t\t\tsortElement.className =\n\t\t\t\t\t`${config.sort?.classes?.base} ${sortClass}`.trim();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction initSort(): void {\n\t\tif (!theadElement) return;\n\t\t// Set the initial sort icon\n\t\tsetSortIcon(getState().sortField as keyof T, getState().sortOrder);\n\t\t// Get all the table headers\n\t\tconst headers = Array.from(theadElement.querySelectorAll('th'));\n\t\theaders.forEach((header) => {\n\t\t\t// If the sort class is not found, it's not a sortable column\n\t\t\tif (!header.querySelector(`.${config.sort?.classes?.base}`)) return;\n\t\t\tconst sortAttribute =\n\t\t\t\theader.getAttribute('data-kt-datatable-column-sort') ||\n\t\t\t\theader.getAttribute('data-kt-datatable-column');\n\t\t\tconst sortField = sortAttribute\n\t\t\t\t? (sortAttribute as keyof T)\n\t\t\t\t: (header.cellIndex as keyof T);\n\t\t\theader.addEventListener('click', () => {\n\t\t\t\tconst state = getState();\n\t\t\t\tconst sortOrder = toggleSortOrder(\n\t\t\t\t\tstate.sortField,\n\t\t\t\t\tstate.sortOrder,\n\t\t\t\t\tsortField,\n\t\t\t\t);\n\t\t\t\tsetSortIcon(sortField, sortOrder);\n\t\t\t\tsetState(sortField, sortOrder);\n\t\t\t\tfireEvent('sort', { field: sortField, order: sortOrder });\n\t\t\t\tdispatchEvent('sort', { field: sortField, order: sortOrder });\n\t\t\t\tupdateData();\n\t\t\t});\n\t\t});\n\t}\n\n\treturn { initSort, sortData, toggleSortOrder, setSortIcon };\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTComponent from '../component';\nimport {\n\tKTDataTableDataInterface,\n\tKTDataTableInterface,\n\tKTDataTableConfigInterface as KTDataTableConfigInterface,\n\tKTDataTableSortOrderInterface,\n\tKTDataTableStateInterface,\n\tKTDataTableColumnFilterInterface,\n\tKTDataTableAttributeInterface,\n} from './types';\nimport KTUtils from '../../helpers/utils';\nimport KTComponents from '../../index';\nimport KTData from '../../helpers/data';\nimport {\n\tcreateCheckboxHandler,\n\tKTDataTableCheckboxAPI,\n} from './datatable-checkbox';\nimport { createSortHandler, KTDataTableSortAPI } from './datatable-sort';\n\n/**\n * Custom DataTable plugin class with server-side API, pagination, and sorting\n * @classdesc A custom KTComponent class that integrates server-side API, pagination, and sorting functionality into a table.\n * It supports fetching data from a server-side API, pagination, and sorting of the fetched data.\n * @class\n * @extends {KTComponent}\n * @param {HTMLElement} element The table element\n * @param {KTDataTableConfigInterface} [config] Additional configuration options\n */\nexport class KTDataTable<T extends KTDataTableDataInterface>\n\textends KTComponent\n\timplements KTDataTableInterface\n{\n\tprotected override _name: string = 'datatable';\n\tprotected override _config: KTDataTableConfigInterface;\n\tprotected override _defaultConfig: KTDataTableConfigInterface;\n\n\tprivate _tableElement: HTMLTableElement;\n\tprivate _tbodyElement: HTMLTableSectionElement;\n\tprivate _theadElement: HTMLTableSectionElement;\n\tprivate _originalTbodyClass: string = ''; // Store original tbody class\n\tprivate _originalTrClasses: string[] = []; // Store original tr classes\n\tprivate _originalTheadClass: string = ''; // Store original thead class\n\tprivate _originalTdClasses: string[][] = []; // Store original td classes as a 2D array [row][col]\n\tprivate _originalThClasses: string[] = []; // Store original th classes\n\n\tprivate _infoElement: HTMLElement;\n\tprivate _sizeElement: HTMLSelectElement;\n\tprivate _paginationElement: HTMLElement;\n\n\tprivate _checkbox: KTDataTableCheckboxAPI;\n\tprivate _sortHandler: KTDataTableSortAPI<T>;\n\n\tprivate _data: T[] = [];\n\tprivate _isFetching: boolean = false;\n\n\tconstructor(element: HTMLElement, config?: KTDataTableConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._defaultConfig = this._initDefaultConfig(config);\n\n\t\tthis._init(element);\n\t\tthis._buildConfig();\n\n\t\t// Store the instance directly on the element\n\t\t(element as any).instance = this;\n\n\t\tthis._initElements();\n\n\t\t// Initialize checkbox handler\n\t\tthis._checkbox = createCheckboxHandler(\n\t\t\tthis._element,\n\t\t\tthis._config,\n\t\t\t(eventName: string, eventData?: any) => {\n\t\t\t\tthis._fireEvent(eventName, eventData);\n\t\t\t\tthis._dispatchEvent(eventName, eventData);\n\t\t\t},\n\t\t);\n\n\t\t// Initialize sort handler\n\t\tthis._sortHandler = createSortHandler(\n\t\t\tthis._config,\n\t\t\tthis._theadElement,\n\t\t\t() => ({\n\t\t\t\tsortField: this.getState().sortField,\n\t\t\t\tsortOrder: this.getState().sortOrder,\n\t\t\t}),\n\t\t\t(field, order) => {\n\t\t\t\tthis._config._state.sortField = field as never;\n\t\t\t\tthis._config._state.sortOrder = order;\n\t\t\t},\n\t\t\tthis._fireEvent.bind(this),\n\t\t\tthis._dispatchEvent.bind(this),\n\t\t\tthis._updateData.bind(this),\n\t\t);\n\n\t\tthis._sortHandler.initSort();\n\n\t\tif (this._config.stateSave === false) {\n\t\t\tthis._deleteState();\n\t\t}\n\n\t\tif (this._config.stateSave) {\n\t\t\tthis._loadState();\n\t\t}\n\n\t\tthis._updateData();\n\n\t\tthis._fireEvent('init');\n\t\tthis._dispatchEvent('init');\n\t}\n\n\t/**\n\t * Initialize default configuration for the datatable\n\t * @param config User-provided configuration options\n\t * @returns Default configuration merged with user-provided options\n\t */\n\tprivate _initDefaultConfig(\n\t\tconfig?: KTDataTableConfigInterface,\n\t): KTDataTableConfigInterface {\n\t\treturn {\n\t\t\t/**\n\t\t\t * HTTP method for server-side API call\n\t\t\t */\n\t\t\trequestMethod: 'GET',\n\t\t\t/**\n\t\t\t * Custom HTTP headers for the API request\n\t\t\t */\n\t\t\trequestHeaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t},\n\t\t\t/**\n\t\t\t * Pagination info template\n\t\t\t */\n\t\t\tinfo: '{start}-{end} of {total}',\n\t\t\t/**\n\t\t\t * Info text when there is no data\n\t\t\t */\n\t\t\tinfoEmpty: 'No records found',\n\t\t\t/**\n\t\t\t * Available page sizes\n\t\t\t */\n\t\t\tpageSizes: [5, 10, 20, 30, 50],\n\t\t\t/**\n\t\t\t * Default page size\n\t\t\t */\n\t\t\tpageSize: 10,\n\t\t\t/**\n\t\t\t * Enable or disable pagination more button\n\t\t\t */\n\t\t\tpageMore: true,\n\t\t\t/**\n\t\t\t * Maximum number of pages before enabling pagination more button\n\t\t\t */\n\t\t\tpageMoreLimit: 3,\n\t\t\t/**\n\t\t\t * Pagination button templates\n\t\t\t */\n\t\t\tpagination: {\n\t\t\t\tnumber: {\n\t\t\t\t\t/**\n\t\t\t\t\t * CSS classes to be added to the pagination button\n\t\t\t\t\t */\n\t\t\t\t\tclass: 'kt-datatable-pagination-button',\n\t\t\t\t\t/**\n\t\t\t\t\t * Text to be displayed in the pagination button\n\t\t\t\t\t */\n\t\t\t\t\ttext: '{page}',\n\t\t\t\t},\n\t\t\t\tprevious: {\n\t\t\t\t\t/**\n\t\t\t\t\t * CSS classes to be added to the previous pagination button\n\t\t\t\t\t */\n\t\t\t\t\tclass: 'kt-datatable-pagination-button kt-datatable-pagination-prev',\n\t\t\t\t\t/**\n\t\t\t\t\t * Text to be displayed in the previous pagination button\n\t\t\t\t\t */\n\t\t\t\t\ttext: `\n\t\t\t\t\t\t<svg class=\"rtl:transform rtl:rotate-180 size-3.5 shrink-0\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t<path d=\"M8.86501 16.7882V12.8481H21.1459C21.3724 12.8481 21.5897 12.7581 21.7498 12.5979C21.91 12.4378 22 12.2205 22 11.994C22 11.7675 21.91 11.5503 21.7498 11.3901C21.5897 11.2299 21.3724 11.1399 21.1459 11.1399H8.86501V7.2112C8.86628 7.10375 8.83517 6.9984 8.77573 6.90887C8.7163 6.81934 8.63129 6.74978 8.53177 6.70923C8.43225 6.66869 8.32283 6.65904 8.21775 6.68155C8.11267 6.70405 8.0168 6.75766 7.94262 6.83541L2.15981 11.6182C2.1092 11.668 2.06901 11.7274 2.04157 11.7929C2.01413 11.8584 2 11.9287 2 11.9997C2 12.0707 2.01413 12.141 2.04157 12.2065C2.06901 12.272 2.1092 12.3314 2.15981 12.3812L7.94262 17.164C8.0168 17.2417 8.11267 17.2953 8.21775 17.3178C8.32283 17.3403 8.43225 17.3307 8.53177 17.2902C8.63129 17.2496 8.7163 17.18 8.77573 17.0905C8.83517 17.001 8.86628 16.8956 8.86501 16.7882Z\" fill=\"currentColor\"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t`,\n\t\t\t\t},\n\t\t\t\tnext: {\n\t\t\t\t\t/**\n\t\t\t\t\t * CSS classes to be added to the next pagination button\n\t\t\t\t\t */\n\t\t\t\t\tclass: 'kt-datatable-pagination-button kt-datatable-pagination-next',\n\t\t\t\t\t/**\n\t\t\t\t\t * Text to be displayed in the next pagination button\n\t\t\t\t\t */\n\t\t\t\t\ttext: `\n\t\t\t\t\t\t<svg class=\"rtl:transform rtl:rotate-180 size-3.5 shrink-0\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t<path d=\"M15.135 7.21144V11.1516H2.85407C2.62756 11.1516 2.41032 11.2415 2.25015 11.4017C2.08998 11.5619 2 11.7791 2 12.0056C2 12.2321 2.08998 12.4494 2.25015 12.6096C2.41032 12.7697 2.62756 12.8597 2.85407 12.8597H15.135V16.7884C15.1337 16.8959 15.1648 17.0012 15.2243 17.0908C15.2837 17.1803 15.3687 17.2499 15.4682 17.2904C15.5677 17.3309 15.6772 17.3406 15.7822 17.3181C15.8873 17.2956 15.9832 17.242 16.0574 17.1642L21.8402 12.3814C21.8908 12.3316 21.931 12.2722 21.9584 12.2067C21.9859 12.1412 22 12.0709 22 11.9999C22 11.9289 21.9859 11.8586 21.9584 11.7931C21.931 11.7276 21.8908 11.6683 21.8402 11.6185L16.0574 6.83565C15.9832 6.75791 15.8873 6.70429 15.7822 6.68179C15.6772 6.65929 15.5677 6.66893 15.4682 6.70948C15.3687 6.75002 15.2837 6.81959 15.2243 6.90911C15.1648 6.99864 15.1337 7.10399 15.135 7.21144Z\" fill=\"currentColor\"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t`,\n\t\t\t\t},\n\t\t\t\tmore: {\n\t\t\t\t\t/**\n\t\t\t\t\t * CSS classes to be added to the pagination more button\n\t\t\t\t\t */\n\t\t\t\t\tclass: 'kt-datatable-pagination-button kt-datatable-pagination-more',\n\t\t\t\t\t/**\n\t\t\t\t\t * Text to be displayed in the pagination more button\n\t\t\t\t\t */\n\t\t\t\t\ttext: '...',\n\t\t\t\t},\n\t\t\t},\n\t\t\t/**\n\t\t\t * Sorting options\n\t\t\t */\n\t\t\tsort: {\n\t\t\t\t/**\n\t\t\t\t * CSS classes to be added to the sortable headers\n\t\t\t\t */\n\t\t\t\tclasses: {\n\t\t\t\t\tbase: 'kt-table-col',\n\t\t\t\t\tasc: 'asc',\n\t\t\t\t\tdesc: 'desc',\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * Local sorting callback function\n\t\t\t\t * Sorts the data array based on the sort field and order\n\t\t\t\t * @param data Data array to be sorted\n\t\t\t\t * @param sortField Property name of the data object to be sorted by\n\t\t\t\t * @param sortOrder Sorting order (ascending or descending)\n\t\t\t\t * @returns Sorted data array\n\t\t\t\t */\n\t\t\t\tcallback: (\n\t\t\t\t\tdata: T[],\n\t\t\t\t\tsortField: keyof T | number,\n\t\t\t\t\tsortOrder: KTDataTableSortOrderInterface,\n\t\t\t\t): T[] => {\n\t\t\t\t\treturn this._sortHandler\n\t\t\t\t\t\t? this._sortHandler.sortData(data, sortField, sortOrder)\n\t\t\t\t\t\t: data;\n\t\t\t\t},\n\t\t\t},\n\t\t\tsearch: {\n\t\t\t\t/**\n\t\t\t\t * Delay in milliseconds before the search function is applied to the data array\n\t\t\t\t * @default 500\n\t\t\t\t */\n\t\t\t\tdelay: 500, // ms\n\t\t\t\t/**\n\t\t\t\t * Local search callback function\n\t\t\t\t * Filters the data array based on the search string\n\t\t\t\t * @param data Data array to be filtered\n\t\t\t\t * @param search Search string used to filter the data array\n\t\t\t\t * @returns Filtered data array\n\t\t\t\t */\n\t\t\t\tcallback: (data: T[], search: string): T[] => {\n\t\t\t\t\tif (!data || !search) {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn data.filter((item: T) => {\n\t\t\t\t\t\tif (!item) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Object.values(item).some(\n\t\t\t\t\t\t\t(value: string | number | boolean) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\ttypeof value !== 'string' &&\n\t\t\t\t\t\t\t\t\ttypeof value !== 'number' &&\n\t\t\t\t\t\t\t\t\ttypeof value !== 'boolean'\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst valueText = String(value)\n\t\t\t\t\t\t\t\t\t.replace(/<[^>]*>|&nbsp;/g, '')\n\t\t\t\t\t\t\t\t\t.toLowerCase();\n\t\t\t\t\t\t\t\treturn valueText.includes(search.toLowerCase());\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\t/**\n\t\t\t * Loading spinner options\n\t\t\t */\n\t\t\tloading: {\n\t\t\t\t/**\n\t\t\t\t * Template to be displayed during data fetching process\n\t\t\t\t */\n\t\t\t\ttemplate: `\n\t\t\t\t\t<div class=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\">\n\t\t\t\t\t\t<div class=\"kt-datatable-loading\">\n\t\t\t\t\t\t\t<svg class=\"animate-spin -ml-1 h-5 w-5 text-gray-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t<circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"3\"></circle>\n\t\t\t\t\t\t\t\t<path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t{content}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\t/**\n\t\t\t\t * Loading text to be displayed in the template\n\t\t\t\t */\n\t\t\t\tcontent: 'Loading...',\n\t\t\t},\n\t\t\t/**\n\t\t\t * Selectors of the elements to be targeted\n\t\t\t */\n\t\t\tattributes: {\n\t\t\t\t/**\n\t\t\t\t * Data table element\n\t\t\t\t */\n\t\t\t\ttable: 'table[data-kt-datatable-table=\"true\"]',\n\t\t\t\t/**\n\t\t\t\t * Pagination info element\n\t\t\t\t */\n\t\t\t\tinfo: '[data-kt-datatable-info=\"true\"]',\n\t\t\t\t/**\n\t\t\t\t * Page size dropdown element\n\t\t\t\t */\n\t\t\t\tsize: '[data-kt-datatable-size=\"true\"]',\n\t\t\t\t/**\n\t\t\t\t * Pagination element\n\t\t\t\t */\n\t\t\t\tpagination: '[data-kt-datatable-pagination=\"true\"]',\n\t\t\t\t/**\n\t\t\t\t * Spinner element\n\t\t\t\t */\n\t\t\t\tspinner: '[data-kt-datatable-spinner=\"true\"]',\n\t\t\t\t/**\n\t\t\t\t * Checkbox element\n\t\t\t\t */\n\t\t\t\tcheck: '[data-kt-datatable-check=\"true\"]',\n\t\t\t\tcheckbox: '[data-kt-datatable-row-check=\"true\"]',\n\t\t\t},\n\t\t\t/**\n\t\t\t * Enable or disable state saving\n\t\t\t */\n\t\t\tstateSave: true,\n\t\t\tcheckbox: {\n\t\t\t\tcheckedClass: 'checked',\n\t\t\t},\n\t\t\t/**\n\t\t\t * Private properties\n\t\t\t */\n\t\t\t_state: {} as KTDataTableStateInterface,\n\t\t\tloadingClass: 'loading',\n\t\t\t...config,\n\t\t} as KTDataTableConfigInterface;\n\t}\n\n\t/**\n\t * Initialize table, tbody, thead, info, size, and pagination elements\n\t * @returns {void}\n\t */\n\tprivate _initElements(): void {\n\t\t/**\n\t\t * Data table element\n\t\t */\n\t\tthis._tableElement = this._element.querySelector<HTMLTableElement>(\n\t\t\tthis._config.attributes.table,\n\t\t)!;\n\t\t/**\n\t\t * Table body element\n\t\t */\n\t\tthis._tbodyElement =\n\t\t\tthis._tableElement.tBodies[0] || this._tableElement.createTBody();\n\t\t/**\n\t\t * Table head element\n\t\t */\n\t\tthis._theadElement = this._tableElement.tHead!;\n\n\t\t// Store original classes\n\t\tthis._storeOriginalClasses();\n\n\t\t/**\n\t\t * Pagination info element\n\t\t */\n\t\tthis._infoElement = this._element.querySelector<HTMLElement>(\n\t\t\tthis._config.attributes.info,\n\t\t)!;\n\t\t/**\n\t\t * Page size dropdown element\n\t\t */\n\t\tthis._sizeElement = this._element.querySelector<HTMLSelectElement>(\n\t\t\tthis._config.attributes.size,\n\t\t)!;\n\t\t/**\n\t\t * Pagination element\n\t\t */\n\t\tthis._paginationElement = this._element.querySelector<HTMLElement>(\n\t\t\tthis._config.attributes.pagination,\n\t\t)!;\n\t}\n\n\t/**\n\t * Store original classes from table elements\n\t * @returns {void}\n\t */\n\tprivate _storeOriginalClasses(): void {\n\t\t// Store tbody class\n\t\tif (this._tbodyElement) {\n\t\t\tthis._originalTbodyClass = this._tbodyElement.className || '';\n\t\t}\n\n\t\t// Store thead class and th classes\n\t\tif (this._theadElement) {\n\t\t\tthis._originalTheadClass = this._theadElement.className || '';\n\n\t\t\t// Store th classes\n\t\t\tconst thElements =\n\t\t\t\tthis._theadElement.querySelectorAll<HTMLTableCellElement>('th');\n\t\t\tthis._originalThClasses = Array.from(thElements).map(\n\t\t\t\t(th) => th.className || '',\n\t\t\t);\n\t\t}\n\n\t\t// Store tr and td classes\n\t\tif (this._tbodyElement) {\n\t\t\tconst originalRows =\n\t\t\t\tthis._tbodyElement.querySelectorAll<HTMLTableRowElement>('tr');\n\t\t\tthis._originalTrClasses = Array.from(originalRows).map(\n\t\t\t\t(row) => row.className || '',\n\t\t\t);\n\n\t\t\t// Store td classes as a 2D array\n\t\t\tthis._originalTdClasses = [];\n\t\t\tArray.from(originalRows).forEach((row, rowIndex) => {\n\t\t\t\tconst tdElements = row.querySelectorAll<HTMLTableCellElement>('td');\n\t\t\t\tthis._originalTdClasses[rowIndex] = Array.from(tdElements).map(\n\t\t\t\t\t(td) => td.className || '',\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Fetch data from the server or from the DOM if `apiEndpoint` is not defined.\n\t * @returns {Promise<void>} Promise which is resolved after data has been fetched and checkbox plugin initialized.\n\t */\n\tprivate async _updateData(): Promise<void> {\n\t\tif (this._isFetching) return; // Prevent duplicate fetches\n\t\tthis._isFetching = true;\n\t\ttry {\n\t\t\tthis._showSpinner(); // Show spinner before fetching data\n\n\t\t\t// Fetch data from the DOM and initialize the checkbox plugin\n\t\t\treturn typeof this._config.apiEndpoint === 'undefined'\n\t\t\t\t? this._fetchDataFromLocal().then(\n\t\t\t\t\t\tthis._finalize.bind(this) as () => Promise<void>,\n\t\t\t\t\t)\n\t\t\t\t: this._fetchDataFromServer().then(\n\t\t\t\t\t\tthis._finalize.bind(this) as () => Promise<void>,\n\t\t\t\t\t);\n\t\t} finally {\n\t\t\tthis._isFetching = false;\n\t\t}\n\t}\n\n\t/**\n\t * Finalize data table after data has been fetched\n\t * @returns {void}\n\t */\n\tprivate _finalize(): void {\n\t\tthis._element.classList.add('datatable-initialized');\n\n\t\t// Initialize checkbox logic\n\t\tthis._checkbox.init();\n\n\t\tthis._attachSearchEvent();\n\n\t\tif (typeof KTComponents !== 'undefined') {\n\t\t\tKTComponents.init();\n\t\t}\n\n\t\t/**\n\t\t * Hide spinner\n\t\t */\n\t\tthis._hideSpinner();\n\t}\n\n\t/**\n\t * Attach search event to the search input element\n\t * @returns {void}\n\t */\n\tprivate _attachSearchEvent(): void {\n\t\tconst tableId: string = this._tableId();\n\t\tconst searchElement: HTMLInputElement | null =\n\t\t\tdocument.querySelector<HTMLInputElement>(\n\t\t\t\t`[data-kt-datatable-search=\"#${tableId}\"]`,\n\t\t\t);\n\n\t\t// Get search state\n\t\tconst { search } = this.getState();\n\t\t// Set search value\n\t\tif (searchElement) {\n\t\t\tsearchElement.value =\n\t\t\t\tsearch === undefined || search === null ? '' : typeof search === 'string' ? search : String(search);\n\t\t}\n\n\t\tif (searchElement) {\n\t\t\t// Check if a debounced search function already exists\n\t\t\tif ((searchElement as any)._debouncedSearch) {\n\t\t\t\t// Remove the existing debounced event listener\n\t\t\t\tsearchElement.removeEventListener(\n\t\t\t\t\t'keyup',\n\t\t\t\t\t(searchElement as any)._debouncedSearch,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Create a new debounced search function\n\t\t\tconst debouncedSearch = this._debounce(() => {\n\t\t\t\tthis.search(searchElement.value);\n\t\t\t}, this._config.search.delay);\n\n\t\t\t// Store the new debounced function as a property of the element\n\t\t\t(searchElement as any)._debouncedSearch = debouncedSearch;\n\n\t\t\t// Add the new debounced event listener\n\t\t\tsearchElement.addEventListener('keyup', debouncedSearch);\n\t\t}\n\t}\n\n\t/**\n\t * Fetch data from the DOM\n\t * Fetch data from the table element and save it to the `originalData` state property.\n\t * This method is used when the data is not fetched from the server via an API endpoint.\n\t */\n\tprivate async _fetchDataFromLocal(): Promise<void> {\n\t\tthis._fireEvent('fetch');\n\t\tthis._dispatchEvent('fetch');\n\n\t\tconst { sortField, sortOrder, page, pageSize, search } = this.getState();\n\t\tlet { originalData } = this.getState();\n\n\t\t// If the table element or the original data is not defined, bail\n\t\tif (\n\t\t\t!this._tableElement ||\n\t\t\toriginalData === undefined ||\n\t\t\tthis._tableConfigInvalidate() ||\n\t\t\tthis._localTableHeaderInvalidate() ||\n\t\t\tthis._localTableContentInvalidate()\n\t\t) {\n\t\t\tthis._deleteState();\n\n\t\t\tconst { originalData, originalDataAttributes } =\n\t\t\t\tthis._localExtractTableContent();\n\n\t\t\tthis._config._state.originalData = originalData;\n\t\t\tthis._config._state.originalDataAttributes = originalDataAttributes;\n\t\t}\n\n\t\t// Update the original data variable\n\t\toriginalData = this.getState().originalData;\n\n\t\t// Clone the original data\n\t\tlet _temp = (this._data = [...originalData] as T[]);\n\n\t\tif (search) {\n\t\t\t_temp = this._data = this._config.search.callback.call(\n\t\t\t\tthis,\n\t\t\t\tthis._data,\n\t\t\t\tsearch,\n\t\t\t) as T[];\n\t\t}\n\n\t\t// If sorting is defined, sort the data\n\t\tif (\n\t\t\tsortField !== undefined &&\n\t\t\tsortOrder !== undefined &&\n\t\t\tsortOrder !== ''\n\t\t) {\n\t\t\tif (typeof this._config.sort.callback === 'function') {\n\t\t\t\tthis._data = this._config.sort.callback.call(\n\t\t\t\t\tthis,\n\t\t\t\t\tthis._data,\n\t\t\t\t\tsortField as string,\n\t\t\t\t\tsortOrder,\n\t\t\t\t) as T[];\n\t\t\t}\n\t\t}\n\n\t\t// If there is data, slice it to the current page size\n\t\tif (this._data?.length > 0) {\n\t\t\t// Calculate the start and end indices for the current page\n\t\t\tconst startIndex = (page - 1) * pageSize;\n\t\t\tconst endIndex = startIndex + pageSize;\n\n\t\t\tthis._data = this._data.slice(startIndex, endIndex) as T[];\n\t\t}\n\n\t\t// Determine number of total rows\n\t\tthis._config._state.totalItems = _temp.length;\n\n\t\t// Draw the data\n\t\tawait this._draw();\n\t\tthis._fireEvent('fetched');\n\t\tthis._dispatchEvent('fetched');\n\t}\n\n\t/**\n\t * Checks if the table content has been invalidated by comparing the current checksum of the table body\n\t * with the stored checksum in the state. If the checksums are different, the state is updated with the\n\t * new checksum and `true` is returned. Otherwise, `false` is returned.\n\t *\n\t * @returns {boolean} `true` if the table content has been invalidated, `false` otherwise.\n\t */\n\tprivate _localTableContentInvalidate(): boolean {\n\t\tconst checksum: string = KTUtils.checksum(\n\t\t\tJSON.stringify(this._tbodyElement.innerHTML),\n\t\t);\n\t\tif (this.getState()._contentChecksum !== checksum) {\n\t\t\tthis._config._state._contentChecksum = checksum;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _tableConfigInvalidate(): boolean {\n\t\t// Remove _data and _state from config\n\t\tconst { _data, _state, ...restConfig } = this._config;\n\t\tconst checksum: string = KTUtils.checksum(JSON.stringify(restConfig));\n\t\tif (_state._configChecksum !== checksum) {\n\t\t\tthis._config._state._configChecksum = checksum;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Extract the table content and returns it as an object containing an array of original data and an array of original data attributes.\n\t *\n\t * @returns {{originalData: T[], originalDataAttributes: KTDataTableAttributeInterface[]}} - An object containing an array of original data and an array of original data attributes.\n\t */\n\tprivate _localExtractTableContent(): {\n\t\toriginalData: T[];\n\t\toriginalDataAttributes: KTDataTableAttributeInterface[];\n\t} {\n\t\tconst originalData: T[] = [];\n\t\tconst originalDataAttributes: KTDataTableAttributeInterface[] = [];\n\n\t\tthis._storeOriginalClasses();\n\n\t\tconst rows = this._tbodyElement.querySelectorAll<HTMLTableRowElement>('tr');\n\t\tconst ths: NodeListOf<HTMLTableCellElement> = this._theadElement\n\t\t\t? this._theadElement.querySelectorAll('th')\n\t\t\t: ([] as unknown as NodeListOf<HTMLTableCellElement>);\n\n\t\trows.forEach((row: HTMLTableRowElement) => {\n\t\t\tconst dataRow: T = {} as T;\n\t\t\tconst dataRowAttribute: KTDataTableAttributeInterface =\n\t\t\t\t{} as KTDataTableAttributeInterface;\n\n\t\t\trow.querySelectorAll<HTMLTableCellElement>('td').forEach((td, index) => {\n\t\t\t\tconst colName = ths[index]?.getAttribute('data-kt-datatable-column');\n\t\t\t\tif (colName) {\n\t\t\t\t\tdataRow[colName as keyof T] = td.innerHTML?.trim() as T[keyof T];\n\t\t\t\t} else {\n\t\t\t\t\t// Store the original HTML for fallback\n\t\t\t\t\tdataRow[index as keyof T] = td.innerHTML?.trim() as T[keyof T];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (Object.keys(dataRow).length > 0) {\n\t\t\t\toriginalData.push(dataRow);\n\t\t\t\toriginalDataAttributes.push(dataRowAttribute);\n\t\t\t}\n\t\t});\n\n\t\treturn { originalData, originalDataAttributes };\n\t}\n\n\t/**\n\t * Check if the table header is invalidated\n\t * @returns {boolean} - Returns true if the table header is invalidated, false otherwise\n\t */\n\tprivate _localTableHeaderInvalidate(): boolean {\n\t\tconst { originalData } = this.getState();\n\t\tconst currentTableHeaders = this._theadElement\n\t\t\t? this._theadElement.querySelectorAll('th').length\n\t\t\t: 0;\n\t\tconst totalColumns = originalData.length\n\t\t\t? Object.keys(originalData[0]).length\n\t\t\t: 0;\n\n\t\treturn currentTableHeaders !== totalColumns;\n\t}\n\n\t/**\n\t * Fetch data from the server\n\t */\n\tprivate async _fetchDataFromServer(): Promise<void> {\n\t\tthis._fireEvent('fetch');\n\t\tthis._dispatchEvent('fetch');\n\n\t\tconst queryParams = this._getQueryParamsForFetchRequest();\n\t\tconst response = await this._performFetchRequest(queryParams);\n\n\t\tlet responseData = null;\n\n\t\ttry {\n\t\t\tresponseData = await response.json();\n\t\t} catch (error) {\n\t\t\tthis._noticeOnTable(\n\t\t\t\t'Error parsing API response as JSON: ' + String(error),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._fireEvent('fetched', { response: responseData });\n\t\tthis._dispatchEvent('fetched', { response: responseData });\n\n\t\t// Use the mapResponse function to transform the data if provided\n\t\tif (typeof this._config.mapResponse === 'function') {\n\t\t\tresponseData = this._config.mapResponse.call(this, responseData);\n\t\t}\n\n\t\tthis._data = responseData.data;\n\n\t\tthis._config._state.totalItems = responseData.totalCount;\n\n\t\tawait this._draw();\n\t\tthis._fireEvent('fetched');\n\t\tthis._dispatchEvent('fetched');\n\t}\n\n\t/**\n\t * Get the query params for a fetch request\n\t * @returns The query params for the fetch request\n\t */\n\tprivate _getQueryParamsForFetchRequest(): URLSearchParams {\n\t\t// Get the current state of the datatable\n\t\tconst { page, pageSize, sortField, sortOrder, filters, search } =\n\t\t\tthis.getState();\n\n\t\t// Create a new URLSearchParams object to store the query params\n\t\tlet queryParams = new URLSearchParams();\n\n\t\t// Add the current page number and page size to the query params\n\t\tqueryParams.set('page', String(page));\n\t\tqueryParams.set('size', String(pageSize));\n\n\t\t// If there is a sort order and field set, add them to the query params\n\t\tif (sortOrder !== undefined) {\n\t\t\tqueryParams.set('sortOrder', String(sortOrder));\n\t\t}\n\n\t\tif (sortField !== undefined) {\n\t\t\tqueryParams.set('sortField', String(sortField));\n\t\t}\n\n\t\t// If there are any filters set, add them to the query params\n\t\tif (Array.isArray(filters) && filters.length) {\n\t\t\tqueryParams.set(\n\t\t\t\t'filters',\n\t\t\t\tJSON.stringify(\n\t\t\t\t\tfilters.map((filter: KTDataTableColumnFilterInterface) => ({\n\t\t\t\t\t\t// Map the filter object to a simpler object with just the necessary properties\n\t\t\t\t\t\tcolumn: filter.column,\n\t\t\t\t\t\ttype: filter.type,\n\t\t\t\t\t\tvalue: filter.value,\n\t\t\t\t\t})),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tif (search) {\n\t\t\tqueryParams.set(\n\t\t\t\t'search',\n\t\t\t\ttypeof search === 'object' ? JSON.stringify(search) : search,\n\t\t\t);\n\t\t}\n\n\t\t// If a mapRequest function is provided, call it with the query params object\n\t\tif (typeof this._config.mapRequest === 'function') {\n\t\t\tqueryParams = this._config.mapRequest.call(this, queryParams);\n\t\t}\n\n\t\t// Return the query params object\n\t\treturn queryParams;\n\t}\n\n\tprivate async _performFetchRequest(\n\t\tqueryParams: URLSearchParams,\n\t): Promise<Response> {\n\t\tlet requestMethod: RequestInit['method'] = this._config.requestMethod;\n\t\tlet requestBody: RequestInit['body'] | undefined = undefined;\n\n\t\t// If the request method is POST, send the query params as the request body\n\t\tif (requestMethod === 'POST') {\n\t\t\trequestBody = queryParams;\n\t\t} else if (requestMethod === 'GET') {\n\t\t\t// If the request method is GET, append the query params to the API endpoint\n\t\t\tconst apiEndpointWithQueryParams = this._createUrl(\n\t\t\t\tthis._config.apiEndpoint,\n\t\t\t);\n\t\t\tapiEndpointWithQueryParams.search = queryParams.toString();\n\t\t\tthis._config.apiEndpoint = apiEndpointWithQueryParams.toString();\n\t\t}\n\n\t\treturn fetch(this._config.apiEndpoint, {\n\t\t\tmethod: requestMethod,\n\t\t\tbody: requestBody,\n\t\t\theaders: this._config.requestHeaders,\n\t\t}).catch((error) => {\n\t\t\t// Trigger an error event\n\t\t\tthis._fireEvent('error', { error });\n\t\t\tthis._dispatchEvent('error', { error });\n\n\t\t\tthis._noticeOnTable('Error performing fetch request: ' + String(error));\n\t\t\tthrow error;\n\t\t});\n\t}\n\n\t/**\n\t * Creates a complete URL from a relative path or a full URL.\n\t *\n\t * This method accepts a string that can be either a relative path or a full URL.\n\t * If the string is a complete URL (i.e., it contains a valid protocol), a URL\n\t * object based on that string is returned. Otherwise, it ensures the path starts\n\t * with a \"/\" and combines it with the provided base URL (or the current window's origin)\n\t * to form a complete URL.\n\t *\n\t * @param {string} pathOrUrl - The path or URL to process.\n\t * @param {string | null} [baseUrl=window.location.origin] - The base URL for resolving the relative path.\n\t *                                                           Defaults to the current window's origin.\n\t * @returns {URL} The resulting URL object.\n\t */\n\n\tprivate _createUrl(\n\t\tpathOrUrl: string,\n\t\tbaseUrl: string | null = window.location.origin,\n\t) : URL {\n\t\t// Regular expression to check if the input is a full URL\n\t\tconst isFullUrl = /^[a-zA-Z][a-zA-Z\\d+\\-.]*:\\/\\//.test(pathOrUrl);\n\n\t\tif (isFullUrl) {\n\t\t\treturn new URL(pathOrUrl); // Return full URL as URL object\n\t\t}\n\n\t\t// Ensure path starts with a slash to avoid incorrect concatenation\n\t\tconst normalizedPath = pathOrUrl.startsWith('/')\n\t\t\t? pathOrUrl\n\t\t\t: `/${pathOrUrl}`;\n\n\t\treturn new URL(normalizedPath, baseUrl);\n\t}\n\n\t/**\n\t * Update the table and pagination controls with new data\n\t * @returns {Promise<void>} A promise that resolves when the table and pagination controls are updated\n\t */\n\tprivate async _draw(): Promise<void> {\n\t\tthis._config._state.totalPages =\n\t\t\tMath.ceil(this.getState().totalItems / this.getState().pageSize) || 0;\n\n\t\tthis._fireEvent('draw');\n\t\tthis._dispatchEvent('draw');\n\n\t\tthis._dispose();\n\n\t\t// Update the table and pagination controls\n\t\tif (this._theadElement && this._tbodyElement) {\n\t\t\tthis._updateTable();\n\t\t}\n\n\t\tif (this._infoElement && this._paginationElement) {\n\t\t\tthis._updatePagination();\n\t\t}\n\n\t\tthis._fireEvent('drew');\n\t\tthis._dispatchEvent('drew');\n\n\t\tthis._hideSpinner(); // Hide spinner after data is fetched\n\n\t\tif (this._config.stateSave) {\n\t\t\tthis._saveState();\n\t\t}\n\t}\n\n\t/**\n\t * Update the HTML table with new data\n\t * @returns {HTMLTableSectionElement} The new table body element\n\t */\n\tprivate _updateTable(): HTMLTableSectionElement {\n\t\t// Clear the existing table contents using a more efficient method\n\t\twhile (this._tableElement.tBodies.length) {\n\t\t\tthis._tableElement.removeChild(this._tableElement.tBodies[0]);\n\t\t}\n\n\t\t// Create the table body with the new data\n\t\tconst tbodyElement =\n\t\t\tthis._tableElement.createTBody() as HTMLTableSectionElement;\n\n\t\t// Apply the original class to the new tbody element\n\t\tif (this._originalTbodyClass) {\n\t\t\ttbodyElement.className = this._originalTbodyClass;\n\t\t}\n\n\t\tthis._updateTableContent(tbodyElement);\n\n\t\treturn tbodyElement;\n\t}\n\n\t/**\n\t * Update the table content\n\t * @param tbodyElement The table body element\n\t * @returns {HTMLTableSectionElement} The updated table body element\n\t */\n\tprivate _updateTableContent(\n\t\ttbodyElement: HTMLTableSectionElement,\n\t): HTMLTableSectionElement {\n\t\tconst fragment = document.createDocumentFragment();\n\n\t\ttbodyElement.textContent = ''; // Clear the tbody element\n\n\t\tif (this._data.length === 0) {\n\t\t\tthis._noticeOnTable(this._config.infoEmpty || '');\n\t\t\treturn tbodyElement;\n\t\t}\n\n\t\tconst ths: NodeListOf<HTMLTableCellElement> = this._theadElement\n\t\t\t? this._theadElement.querySelectorAll('th')\n\t\t\t: ([] as unknown as NodeListOf<HTMLTableCellElement>);\n\n\t\tthis._data.forEach((item: T, rowIndex: number) => {\n\t\t\tconst row = document.createElement('tr');\n\n\t\t\t// Apply original tr class if available\n\t\t\tif (this._originalTrClasses && this._originalTrClasses[rowIndex]) {\n\t\t\t\trow.className = this._originalTrClasses[rowIndex];\n\t\t\t}\n\n\t\t\tif (!this._config.columns) {\n\t\t\t\tconst dataRowAttributes = this.getState().originalDataAttributes\n\t\t\t\t\t? this.getState().originalDataAttributes[rowIndex]\n\t\t\t\t\t: null;\n\n\t\t\t\t// Use the order of <th> elements to render <td>s in the correct order\n\t\t\t\tths.forEach((th, colIndex) => {\n\t\t\t\t\tconst colName = th.getAttribute('data-kt-datatable-column');\n\t\t\t\t\tconst td = document.createElement('td');\n\t\t\t\t\tlet value: any;\n\t\t\t\t\tif (colName && Object.prototype.hasOwnProperty.call(item, colName)) {\n\t\t\t\t\t\tvalue = item[colName as keyof T];\n\t\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(item, colIndex)) {\n\t\t\t\t\t\tvalue = item[colIndex as keyof T];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = '';\n\t\t\t\t\t}\n\t\t\t\t\ttd.innerHTML = value as string;\n\n\t\t\t\t\t// Apply original td class if available\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis._originalTdClasses &&\n\t\t\t\t\t\tthis._originalTdClasses[rowIndex] &&\n\t\t\t\t\t\tthis._originalTdClasses[rowIndex][colIndex]\n\t\t\t\t\t) {\n\t\t\t\t\t\ttd.className = this._originalTdClasses[rowIndex][colIndex];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dataRowAttributes && dataRowAttributes[colIndex]) {\n\t\t\t\t\t\tfor (const attr in dataRowAttributes[colIndex]) {\n\t\t\t\t\t\t\ttd.setAttribute(attr, dataRowAttributes[colIndex][attr]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\trow.appendChild(td);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tObject.keys(this._config.columns).forEach(\n\t\t\t\t\t(key: keyof T, colIndex: number) => {\n\t\t\t\t\t\tconst td = document.createElement('td');\n\t\t\t\t\t\tconst columnDef = this._config.columns[key as string];\n\n\t\t\t\t\t\t// Apply original td class if available\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis._originalTdClasses &&\n\t\t\t\t\t\t\tthis._originalTdClasses[rowIndex] &&\n\t\t\t\t\t\t\tthis._originalTdClasses[rowIndex][colIndex]\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttd.className = this._originalTdClasses[rowIndex][colIndex];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof columnDef.render === 'function') {\n\t\t\t\t\t\t\tconst result = columnDef.render.call(this, item[key], item, this);\n\t\t\t\t\t\t\tif (result instanceof HTMLElement || result instanceof DocumentFragment) {\n\t\t\t\t\t\t\t\ttd.appendChild(result);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (typeof result === 'string') {\n\t\t\t\t\t\t\t\ttd.innerHTML = result as string;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttd.textContent = item[key] as string;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof columnDef.createdCell === 'function') {\n\t\t\t\t\t\t\tcolumnDef.createdCell.call(this, td, item[key], item, row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.appendChild(td);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfragment.appendChild(row);\n\t\t});\n\n\t\ttbodyElement.appendChild(fragment);\n\t\treturn tbodyElement;\n\t}\n\n\t/**\n\t * Show a notice on the table\n\t * @param message The message to show. If empty, the message will be removed\n\t * @returns {void}\n\t */\n\tprivate _noticeOnTable(message: string = ''): void {\n\t\tconst row = this._tableElement.tBodies[0].insertRow();\n\t\tconst cell = row.insertCell();\n\t\tcell.colSpan = this._theadElement\n\t\t\t? this._theadElement.querySelectorAll('th').length\n\t\t\t: 0;\n\t\tcell.innerHTML = message;\n\t}\n\n\tprivate _updatePagination(): void {\n\t\tthis._removeChildElements(this._sizeElement);\n\t\tthis._createPageSizeControls(this._sizeElement);\n\n\t\tthis._removeChildElements(this._paginationElement);\n\t\tthis._createPaginationControls(this._infoElement, this._paginationElement);\n\t}\n\n\t/**\n\t * Removes all child elements from the given container element.\n\t * @param container The container element to remove the child elements from.\n\t */\n\tprivate _removeChildElements(container: HTMLElement): void {\n\t\tif (!container) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Loop through all child elements of the container and remove them one by one\n\t\twhile (container.firstChild) {\n\t\t\t// Remove the first child element (which is the first element in the list of child elements)\n\t\t\tcontainer.removeChild(container.firstChild);\n\t\t}\n\t}\n\n\t/**\n\t * Creates a container element for the items per page selector.\n\t * @param _sizeElement The element to create the page size controls in.\n\t * @returns The container element.\n\t */\n\tprivate _createPageSizeControls(\n\t\t_sizeElement: HTMLSelectElement,\n\t): HTMLSelectElement {\n\t\t// If no element is provided, return early\n\t\tif (!_sizeElement) {\n\t\t\treturn _sizeElement;\n\t\t}\n\n\t\t// Wait for the element to be attached to the DOM\n\t\tsetTimeout(() => {\n\t\t\t// Create <option> elements for each page size option\n\t\t\tconst options = this._config.pageSizes.map((size: number) => {\n\t\t\t\tconst option = document.createElement('option') as HTMLOptionElement;\n\t\t\t\toption.value = String(size);\n\t\t\t\toption.text = String(size);\n\t\t\t\toption.selected = this.getState().pageSize === size;\n\t\t\t\treturn option;\n\t\t\t});\n\n\t\t\t// Add the <option> elements to the provided element\n\t\t\t_sizeElement.append(...options);\n\t\t}, 100);\n\n\t\t// Create an event listener for the \"change\" event on the element\n\t\tconst _pageSizeControlsEvent = (event: Event) => {\n\t\t\t// When the element changes, reload the page with the new page size and page number 1\n\t\t\tthis._reloadPageSize(\n\t\t\t\tNumber((event.target as HTMLSelectElement).value),\n\t\t\t\t1,\n\t\t\t);\n\t\t};\n\n\t\t// Bind the event listener to the component instance\n\t\t_sizeElement.onchange = _pageSizeControlsEvent.bind(this);\n\n\t\t// Return the element\n\t\treturn _sizeElement;\n\t}\n\n\t/**\n\t * Reloads the data with the specified page size and optional page number.\n\t * @param pageSize The new page size.\n\t * @param page The new page number (optional, defaults to 1).\n\t */\n\tprivate _reloadPageSize(pageSize: number, page: number = 1): void {\n\t\t// Update the page size and page number in the state\n\t\tthis._config._state.pageSize = pageSize;\n\t\tthis._config._state.page = page;\n\n\t\t// Update the data with the new page size and page number\n\t\tthis._updateData();\n\t}\n\n\t/**\n\t * Creates the pagination controls for the component.\n\t * @param _infoElement The element to set the info text in.\n\t * @param _paginationElement The element to create the pagination controls in.\n\t * @return {HTMLElement} The element containing the pagination controls.\n\t */\n\tprivate _createPaginationControls(\n\t\t_infoElement: HTMLElement,\n\t\t_paginationElement: HTMLElement,\n\t): HTMLElement {\n\t\tif (!_infoElement || !_paginationElement || this._data.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis._setPaginationInfoText(_infoElement);\n\t\tconst paginationContainer =\n\t\t\tthis._createPaginationContainer(_paginationElement);\n\n\t\tif (paginationContainer) {\n\t\t\tthis._createPaginationButtons(paginationContainer);\n\t\t}\n\n\t\treturn paginationContainer;\n\t}\n\n\t/**\n\t * Sets the info text for the pagination controls.\n\t * @param _infoElement The element to set the info text in.\n\t */\n\tprivate _setPaginationInfoText(_infoElement: HTMLElement): void {\n\t\t_infoElement.textContent = this._config.info\n\t\t\t.replace(\n\t\t\t\t'{start}',\n\t\t\t\t(this.getState().page - 1) * this.getState().pageSize + 1 + '',\n\t\t\t)\n\t\t\t.replace(\n\t\t\t\t'{end}',\n\t\t\t\tMath.min(\n\t\t\t\t\tthis.getState().page * this.getState().pageSize,\n\t\t\t\t\tthis.getState().totalItems,\n\t\t\t\t) + '',\n\t\t\t)\n\t\t\t.replace('{total}', this.getState().totalItems + '');\n\t}\n\n\t/**\n\t * Creates the container element for the pagination controls.\n\t * @param _paginationElement The element to create the pagination controls in.\n\t * @return {HTMLElement} The container element.\n\t */\n\tprivate _createPaginationContainer(\n\t\t_paginationElement: HTMLElement,\n\t): HTMLElement {\n\t\t// No longer create a wrapping div. Just return the pagination element itself.\n\t\treturn _paginationElement;\n\t}\n\n\t/**\n\t * Creates the pagination buttons for the component.\n\t * @param paginationContainer The container element for the pagination controls.\n\t */\n\tprivate _createPaginationButtons(paginationContainer: HTMLElement): void {\n\t\tconst { page: currentPage, totalPages } = this.getState();\n\t\tconst { previous, next, number, more } = this._config.pagination;\n\n\t\t// Helper function to create a button\n\t\tconst createButton = (\n\t\t\ttext: string,\n\t\t\tclassName: string,\n\t\t\tdisabled: boolean,\n\t\t\thandleClick: () => void,\n\t\t): HTMLButtonElement => {\n\t\t\tconst button = document.createElement('button') as HTMLButtonElement;\n\t\t\tbutton.className = className;\n\t\t\tbutton.innerHTML = text;\n\t\t\tbutton.disabled = disabled;\n\t\t\tbutton.onclick = handleClick;\n\t\t\treturn button;\n\t\t};\n\n\t\t// Add Previous Button\n\t\tpaginationContainer.appendChild(\n\t\t\tcreateButton(\n\t\t\t\tprevious.text,\n\t\t\t\t`${previous.class}${currentPage === 1 ? ' disabled' : ''}`,\n\t\t\t\tcurrentPage === 1,\n\t\t\t\t() => this._paginateData(currentPage - 1),\n\t\t\t),\n\t\t);\n\n\t\t// Calculate range of pages\n\t\tconst pageMoreEnabled = this._config.pageMore;\n\n\t\tif (pageMoreEnabled) {\n\t\t\tconst maxButtons = this._config.pageMoreLimit;\n\t\t\tconst range = this._calculatePageRange(\n\t\t\t\tcurrentPage,\n\t\t\t\ttotalPages,\n\t\t\t\tmaxButtons,\n\t\t\t);\n\n\t\t\t// Add start ellipsis\n\t\t\tif (range.start > 1) {\n\t\t\t\tpaginationContainer.appendChild(\n\t\t\t\t\tcreateButton(more.text, more.class, false, () =>\n\t\t\t\t\t\tthis._paginateData(Math.max(1, range.start - 1)),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add page buttons\n\t\t\tfor (let i = range.start; i <= range.end; i++) {\n\t\t\t\tpaginationContainer.appendChild(\n\t\t\t\t\tcreateButton(\n\t\t\t\t\t\tnumber.text.replace('{page}', i.toString()),\n\t\t\t\t\t\t`${number.class}${currentPage === i ? ' active disabled' : ''}`,\n\t\t\t\t\t\tcurrentPage === i,\n\t\t\t\t\t\t() => this._paginateData(i),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add end ellipsis\n\t\t\tif (pageMoreEnabled && range.end < totalPages) {\n\t\t\t\tpaginationContainer.appendChild(\n\t\t\t\t\tcreateButton(more.text, more.class, false, () =>\n\t\t\t\t\t\tthis._paginateData(Math.min(totalPages, range.end + 1)),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\t// Add page buttons\n\t\t\tfor (let i = 1; i <= totalPages; i++) {\n\t\t\t\tpaginationContainer.appendChild(\n\t\t\t\t\tcreateButton(\n\t\t\t\t\t\tnumber.text.replace('{page}', i.toString()),\n\t\t\t\t\t\t`${number.class}${currentPage === i ? ' active disabled' : ''}`,\n\t\t\t\t\t\tcurrentPage === i,\n\t\t\t\t\t\t() => this._paginateData(i),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Add Next Button\n\t\tpaginationContainer.appendChild(\n\t\t\tcreateButton(\n\t\t\t\tnext.text,\n\t\t\t\t`${next.class}${currentPage === totalPages ? ' disabled' : ''}`,\n\t\t\t\tcurrentPage === totalPages,\n\t\t\t\t() => this._paginateData(currentPage + 1),\n\t\t\t),\n\t\t);\n\t}\n\n\t// New helper method to calculate page range\n\tprivate _calculatePageRange(\n\t\tcurrentPage: number,\n\t\ttotalPages: number,\n\t\tmaxButtons: number,\n\t): { start: number; end: number } {\n\t\tlet startPage: number, endPage: number;\n\t\tconst halfMaxButtons = Math.floor(maxButtons / 2);\n\n\t\tif (totalPages <= maxButtons) {\n\t\t\tstartPage = 1;\n\t\t\tendPage = totalPages;\n\t\t} else {\n\t\t\tstartPage = Math.max(currentPage - halfMaxButtons, 1);\n\t\t\tendPage = Math.min(startPage + maxButtons - 1, totalPages);\n\t\t\tif (endPage - startPage < maxButtons - 1) {\n\t\t\t\tstartPage = Math.max(endPage - maxButtons + 1, 1);\n\t\t\t}\n\t\t}\n\n\t\treturn { start: startPage, end: endPage };\n\t}\n\n\t/**\n\t * Method for handling pagination\n\t * @param page - The page number to navigate to\n\t */\n\tprivate _paginateData(page: number): void {\n\t\tif (page < 1 || !Number.isInteger(page)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._fireEvent('pagination', { page: page });\n\t\tthis._dispatchEvent('pagination', { page: page });\n\n\t\tif (page >= 1 && page <= this.getState().totalPages) {\n\t\t\tthis._config._state.page = page;\n\t\t\tthis._updateData();\n\t\t}\n\t}\n\n\t// Method to show the loading spinner\n\tprivate _showSpinner(): void {\n\t\tconst spinner =\n\t\t\tthis._element.querySelector<HTMLElement>(\n\t\t\t\tthis._config.attributes.spinner,\n\t\t\t) || this._createSpinner();\n\t\tif (spinner) {\n\t\t\tspinner.style.display = 'block';\n\t\t}\n\t\tthis._element.classList.add(this._config.loadingClass);\n\t}\n\n\t// Method to hide the loading spinner\n\tprivate _hideSpinner(): void {\n\t\tconst spinner = this._element.querySelector<HTMLElement>(\n\t\t\tthis._config.attributes.spinner,\n\t\t);\n\t\tif (spinner) {\n\t\t\tspinner.style.display = 'none';\n\t\t}\n\t\tthis._element.classList.remove(this._config.loadingClass);\n\t}\n\n\t// Method to create a spinner element if it doesn't exist\n\tprivate _createSpinner(): HTMLElement {\n\t\tif (typeof this._config.loading === 'undefined') {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst template = document.createElement('template');\n\t\ttemplate.innerHTML = this._config.loading.template\n\t\t\t.trim()\n\t\t\t.replace('{content}', this._config.loading.content);\n\t\tconst spinner = template.content.firstChild as HTMLElement;\n\t\tspinner.setAttribute('data-kt-datatable-spinner', 'true');\n\n\t\tthis._tableElement.appendChild(spinner);\n\n\t\treturn spinner;\n\t}\n\n\t/**\n\t * Saves the current state of the table to local storage.\n\t * @returns {void}\n\t */\n\tprivate _saveState(): void {\n\t\tthis._fireEvent('stateSave');\n\t\tthis._dispatchEvent('stateSave');\n\n\t\tconst ns: string = this._tableNamespace();\n\n\t\tif (ns) {\n\t\t\tlocalStorage.setItem(\n\t\t\t\tns,\n\t\t\t\tJSON.stringify(this.getState() as KTDataTableStateInterface),\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Loads the saved state of the table from local storage, if it exists.\n\t * @returns {Object} The saved state of the table, or null if no saved state exists.\n\t */\n\tprivate _loadState(): KTDataTableStateInterface | null {\n\t\tconst stateString = localStorage.getItem(this._tableNamespace());\n\t\tif (!stateString) return null;\n\n\t\ttry {\n\t\t\tconst state = JSON.parse(stateString) as KTDataTableStateInterface;\n\t\t\tif (state) this._config._state = state;\n\t\t\treturn state;\n\t\t} catch {} // eslint-disable-line no-empty\n\n\t\treturn null;\n\t}\n\n\tprivate _deleteState(): void {\n\t\tconst ns = this._tableNamespace();\n\n\t\tif (ns) {\n\t\t\tlocalStorage.removeItem(ns);\n\t\t}\n\t}\n\n\t/**\n\t * Gets the namespace for the table's state.\n\t * If a namespace is specified in the config, it is used.\n\t * Otherwise, if the table element has an ID, it is used.\n\t * Otherwise, if the component element has an ID, it is used.\n\t * Finally, the component's UID is used.\n\t * @returns {string} The namespace for the table's state.\n\t */\n\tprivate _tableNamespace(): string {\n\t\t// Use the specified namespace, if one is given\n\t\tif (this._config.stateNamespace) {\n\t\t\treturn this._config.stateNamespace;\n\t\t}\n\n\t\t// Fallback to the component's UID\n\t\treturn this._tableId() ?? this._name;\n\t}\n\n\tprivate _tableId(): string {\n\t\tlet id: string = null;\n\t\t// If the table element has an ID, use that\n\t\tif (this._tableElement?.getAttribute('id')) {\n\t\t\tid = this._tableElement.getAttribute('id') as string;\n\t\t}\n\n\t\t// If the component element has an ID, use that\n\t\tif (this._element?.getAttribute('id')) {\n\t\t\tid = this._element.getAttribute('id') as string;\n\t\t}\n\n\t\treturn id;\n\t}\n\n\tprivate _dispose() {\n\t\t// Remove all event listeners and clean up resources\n\t}\n\n\tprivate _debounce(func: Function, wait: number) {\n\t\tlet timeout: number | undefined;\n\t\treturn function (...args: any[]) {\n\t\t\tconst later = () => {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\tfunc(...args);\n\t\t\t};\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = window.setTimeout(later, wait);\n\t\t};\n\t}\n\n\t/**\n\t * Gets the current state of the table.\n\t * @returns {KTDataTableStateInterface} The current state of the table.\n\t */\n\tpublic getState(): KTDataTableStateInterface {\n\t\treturn {\n\t\t\t/**\n\t\t\t * The current page number.\n\t\t\t */\n\t\t\tpage: 1,\n\t\t\t/**\n\t\t\t * The field that the data is sorted by.\n\t\t\t */\n\t\t\tsortField: null,\n\t\t\t/**\n\t\t\t * The sort order (ascending or descending).\n\t\t\t */\n\t\t\tsortOrder: '',\n\t\t\t/**\n\t\t\t * The number of rows to display per page.\n\t\t\t */\n\t\t\tpageSize: this._config.pageSize,\n\n\t\t\tfilters: [],\n\n\t\t\t/**\n\t\t\t * Any additional state that may have been stored in the config.\n\t\t\t */\n\t\t\t...this._config._state,\n\t\t};\n\t}\n\n\t/**\n\t * Sorts the data in the table by the specified field.\n\t * @param field The field to sort by.\n\t */\n\tpublic sort(field: keyof T | number): void {\n\t\t// Use the sort handler to update state and trigger sorting\n\t\tconst state = this.getState();\n\t\tconst sortOrder = this._sortHandler.toggleSortOrder(\n\t\t\tstate.sortField,\n\t\t\tstate.sortOrder,\n\t\t\tfield,\n\t\t);\n\t\tthis._sortHandler.setSortIcon(field as keyof T, sortOrder);\n\t\tthis._config._state.sortField = field as never;\n\t\tthis._config._state.sortOrder = sortOrder;\n\t\tthis._fireEvent('sort', { field, order: sortOrder });\n\t\tthis._dispatchEvent('sort', { field, order: sortOrder });\n\t\tthis._updateData();\n\t}\n\n\t/**\n\t * Navigates to the specified page in the data table.\n\t * @param page The page number to navigate to.\n\t */\n\tpublic goPage(page: number): void {\n\t\tif (page < 1 || !Number.isInteger(page)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Navigate to the specified page\n\t\tthis._paginateData(page);\n\t}\n\n\t/**\n\t * Set the page size of the data table.\n\t * @param pageSize The new page size.\n\t */\n\tpublic setPageSize(pageSize: number): void {\n\t\tif (!Number.isInteger(pageSize)) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * Reload the page size of the data table.\n\t\t * @param pageSize The new page size.\n\t\t */\n\t\tthis._reloadPageSize(pageSize);\n\t}\n\n\t/**\n\t * Reloads the data from the server and updates the table.\n\t * Triggers the 'reload' event and the 'kt.datatable.reload' custom event.\n\t */\n\tpublic reload(): void {\n\t\tthis._fireEvent('reload');\n\t\tthis._dispatchEvent('reload');\n\n\t\t// Fetch the data from the server using the current sort and filter settings\n\t\tthis._updateData();\n\t}\n\n\tpublic redraw(page: number = 1): void {\n\t\tthis._fireEvent('redraw');\n\t\tthis._dispatchEvent('redraw');\n\n\t\tthis._paginateData(page);\n\t}\n\n\t/**\n\t * Show the loading spinner of the data table.\n\t */\n\tpublic showSpinner(): void {\n\t\t/**\n\t\t * Show the loading spinner of the data table.\n\t\t */\n\t\tthis._showSpinner();\n\t}\n\n\t/**\n\t * Hide the loading spinner of the data table.\n\t */\n\tpublic hideSpinner(): void {\n\t\t/**\n\t\t * Hide the loading spinner of the data table.\n\t\t */\n\t\tthis._hideSpinner();\n\t}\n\n\t/**\n\t * Filter data using the specified filter object.\n\t * Replaces the existing filter object for the column with the new one.\n\t * @param filter Filter object containing the column name and its value.\n\t * @returns The KTDataTable instance.\n\t * @throws Error if the filter object is null or undefined.\n\t */\n\tpublic setFilter(filter: KTDataTableColumnFilterInterface): KTDataTable<T> {\n\t\tthis._config._state.filters = [\n\t\t\t...(this.getState().filters || []).filter(\n\t\t\t\t(f) => f.column !== filter.column,\n\t\t\t),\n\t\t\tfilter,\n\t\t];\n\t\treturn this;\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._dispose();\n\t}\n\n\tpublic search(query: string | object): void {\n\t\tthis._config._state.search = query;\n\t\tthis.reload();\n\t}\n\n\t/**\n\t * Static variables\n\t */\n\tprivate static _instances = new Map<\n\t\tHTMLElement,\n\t\tKTDataTable<KTDataTableDataInterface>\n\t>();\n\n\t/**\n\t * Create KTDataTable instances for all elements with a data-kt-datatable=\"true\" attribute.\n\t *\n\t * This function should be called after the control(s) have been\n\t * loaded and parsed by the browser. It will create instances of\n\t * KTDataTable for all elements with a data-kt-datatable=\"true\" attribute.\n\t */\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll<HTMLElement>(\n\t\t\t'[data-kt-datatable=\"true\"]',\n\t\t);\n\n\t\telements.forEach((element) => {\n\t\t\tif (\n\t\t\t\telement.hasAttribute('data-kt-datatable') &&\n\t\t\t\t!element.classList.contains('datatable-initialized')\n\t\t\t) {\n\t\t\t\t/**\n\t\t\t\t * Create an instance of KTDataTable for the given element\n\t\t\t\t * @param element The element to create an instance for\n\t\t\t\t */\n\t\t\t\tconst instance = new KTDataTable(element);\n\t\t\t\tthis._instances.set(element, instance);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Get the KTDataTable instance for a given element.\n\t *\n\t * @param element The element to retrieve the instance for\n\t * @returns The KTDataTable instance or undefined if not found\n\t */\n\tpublic static getInstance(\n\t\telement: HTMLElement,\n\t): KTDataTable<KTDataTableDataInterface> | undefined {\n\t\treturn this._instances.get(element);\n\t}\n\n\t/**\n\t * Initializes all KTDataTable instances on the page.\n\t *\n\t * This function should be called after the control(s) have been\n\t * loaded and parsed by the browser.\n\t */\n\tpublic static init(): void {\n\t\t// Create instances of KTDataTable for all elements with a\n\t\t// data-kt-datatable=\"true\" attribute\n\t\tKTDataTable.createInstances();\n\t}\n\n\t/**\n\t * Check if all visible rows are checked (header checkbox state)\n\t * @returns {boolean}\n\t */\n\tpublic isChecked(): boolean {\n\t\treturn this._checkbox.isChecked();\n\t}\n\n\t/**\n\t * Toggle all visible row checkboxes (header checkbox)\n\t * @returns {void}\n\t */\n\tpublic toggle(): void {\n\t\tthis._checkbox.toggle();\n\t}\n\n\t/**\n\t * Check all visible row checkboxes\n\t * @returns {void}\n\t */\n\tpublic check(): void {\n\t\tthis._checkbox.check();\n\t\tthis._fireEvent('checked');\n\t\tthis._dispatchEvent('checked');\n\t}\n\n\t/**\n\t * Uncheck all visible row checkboxes\n\t * @returns {void}\n\t */\n\tpublic uncheck(): void {\n\t\tthis._checkbox.uncheck();\n\t\tthis._fireEvent('unchecked');\n\t\tthis._dispatchEvent('unchecked');\n\t}\n\n\t/**\n\t * Get all checked row IDs (across all pages if preserveSelection is true)\n\t * @returns {string[]}\n\t */\n\tpublic getChecked(): string[] {\n\t\treturn this._checkbox.getChecked();\n\t}\n\n\t/**\n\t * Reapply checked state to visible checkboxes (after redraw/pagination)\n\t * @returns {void}\n\t */\n\tpublic update(): void {\n\t\tthis._checkbox.updateState();\n\t}\n\n\t// Other plugin methods can be added here\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTDataTable = KTDataTable;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTDataTable } from './datatable';\nexport type {\n\tKTDataTableSortOrderInterface,\n\tKTDataTableDataInterface,\n\tKTDataTableStateInterface as KTDataTableState,\n\tKTDataTableInterface,\n\tKTDataTableResponseDataInterface,\n\tKTDataTableConfigInterface,\n\tKTDataTableColumnFilterTypeInterface,\n\tKTDataTableColumnFilterInterface,\n\tKTDataTableCheckConfigInterface,\n\tKTDataTableCheckInterface,\n\tKTDataTableCheckChangePayloadInterface,\n} from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTDatepickerStateManager } from './config';\nimport {\n\tcalendarGridTemplate,\n\tdayTemplate,\n\tdatepickerContainerTemplate,\n\tmonthYearSelectTemplate,\n\tmonthSelectionTemplate,\n\tyearSelectionTemplate,\n} from './templates';\nimport {\n\tgenerateCalendarMonth,\n\tgetLocaleConfig,\n\tisSameDay,\n\tisDateDisabled,\n\tisDateBetween,\n\tisWeekend,\n\tformatDate,\n\tparseDate,\n\tisValidDate,\n\tgetDaysInMonth,\n\tisDateEqual,\n\tisDateInRange,\n} from './utils';\nimport {\n\tCalendarDayCellInterface,\n\tDateRangeInterface,\n\tKTDatepickerEvents,\n} from './types';\nimport { KTDatepickerDropdown } from './dropdown';\nimport { KTDatepickerEventManager, KTDatepickerEventName } from './events';\n\n/**\n * Calendar component for the KTDatepicker\n * Handles rendering and interactions with the calendar\n */\nexport class KTDatepickerCalendar {\n\tprivate _element: HTMLElement;\n\tprivate _stateManager: KTDatepickerStateManager;\n\tprivate _eventManager: KTDatepickerEventManager;\n\tprivate _calendarContainer: HTMLElement | null = null;\n\tprivate _dropdownElement: HTMLElement | null = null;\n\tprivate _dropdownManager: KTDatepickerDropdown | null = null;\n\tprivate _isVisible: boolean = false;\n\tprivate _currentViewMonth: number;\n\tprivate _currentViewYear: number;\n\n\t/**\n\t * Constructor for the KTDatepickerCalendar class\n\t *\n\t * @param element - The datepicker element\n\t * @param stateManager - State manager for the datepicker\n\t */\n\tconstructor(element: HTMLElement, stateManager: KTDatepickerStateManager) {\n\t\tthis._element = element;\n\t\tthis._stateManager = stateManager;\n\t\tthis._eventManager = stateManager.getEventManager();\n\n\t\t// Get current date/time\n\t\tconst now = new Date();\n\t\tthis._currentViewMonth = now.getMonth();\n\t\tthis._currentViewYear = now.getFullYear();\n\n\t\tthis._initializeCalendar();\n\t\tthis._setupEventListeners();\n\t}\n\n\t/**\n\t * Initialize the calendar\n\t */\n\tprivate _initializeCalendar(): void {\n\t\tconst config = this._stateManager.getConfig();\n\t\tconst locale = getLocaleConfig(config);\n\n\t\t// Create calendar container\n\t\tthis._dropdownElement = document.createElement('div');\n\t\tthis._dropdownElement.className = 'kt-datepicker-dropdown';\n\t\tthis._dropdownElement.setAttribute('role', 'dialog');\n\t\tthis._dropdownElement.setAttribute('aria-modal', 'true');\n\t\tthis._dropdownElement.setAttribute('aria-label', 'Calendar');\n\n\t\t// Hidden by default\n\t\tthis._dropdownElement.classList.add('hidden');\n\t\tthis._dropdownElement.setAttribute('aria-hidden', 'true');\n\n\t\t// Create header for navigation\n\t\tconst headerElement = document.createElement('div');\n\t\theaderElement.className = 'kt-datepicker-calendar-header';\n\n\t\t// Left navigation button\n\t\tconst leftNavButton = document.createElement('button');\n\t\tleftNavButton.type = 'button';\n\t\tleftNavButton.className = 'kt-datepicker-calendar-left-nav-btn';\n\t\tleftNavButton.setAttribute('aria-label', 'Previous month');\n\t\tleftNavButton.innerHTML =\n\t\t\t'<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /></svg>';\n\t\tleftNavButton.addEventListener('click', () => this._navigateMonth(-1));\n\n\t\t// Month and Year selector (center)\n\t\tconst headerCenter = document.createElement('div');\n\t\theaderCenter.className = 'kt-datepicker-datepicker-header-middle';\n\n\t\t// Right navigation button\n\t\tconst rightNavButton = document.createElement('button');\n\t\trightNavButton.type = 'button';\n\t\trightNavButton.className = 'kt-dropdown-calendar-right-nav-btn';\n\t\trightNavButton.setAttribute('aria-label', 'Next month');\n\t\trightNavButton.innerHTML =\n\t\t\t'<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clip-rule=\"evenodd\" /></svg>';\n\t\trightNavButton.addEventListener('click', () => this._navigateMonth(1));\n\n\t\t// Assemble header\n\t\theaderElement.appendChild(leftNavButton);\n\t\theaderElement.appendChild(headerCenter);\n\t\theaderElement.appendChild(rightNavButton);\n\t\tthis._dropdownElement.appendChild(headerElement);\n\n\t\t// Create calendar content container\n\t\tthis._calendarContainer = document.createElement('div');\n\t\tthis._calendarContainer.className = 'kt-datepicker-calendar-container';\n\t\tthis._dropdownElement.appendChild(this._calendarContainer);\n\n\t\t// Add calendar footer with action buttons\n\t\tconst footerElement = document.createElement('div');\n\t\tfooterElement.className = 'kt-datepicker-calendar-footer';\n\n\t\t// Today button\n\t\tconst todayButton = document.createElement('button');\n\t\ttodayButton.type = 'button';\n\t\ttodayButton.className = 'kt-datepicker-calendar-today-btn';\n\t\ttodayButton.textContent = 'Today';\n\t\ttodayButton.addEventListener('click', () => this._goToToday());\n\n\t\t// Clear button\n\t\tconst clearButton = document.createElement('button');\n\t\tclearButton.type = 'button';\n\t\tclearButton.className = 'kt-datepicker-calendar-clear-btn';\n\t\tclearButton.textContent = 'Clear';\n\t\tclearButton.addEventListener('click', () => this._clearSelection());\n\n\t\t// Apply button\n\t\tconst applyButton = document.createElement('button');\n\t\tapplyButton.type = 'button';\n\t\tapplyButton.className = 'kt-datepicker-calendar-clear-btn';\n\t\tapplyButton.textContent = 'Apply';\n\t\tapplyButton.addEventListener('click', () => this._applySelection());\n\n\t\t// Assemble footer\n\t\tfooterElement.appendChild(todayButton);\n\n\t\tconst rightFooter = document.createElement('div');\n\t\trightFooter.className = 'kt-datepicker-calendar-footer-right';\n\t\trightFooter.appendChild(clearButton);\n\t\trightFooter.appendChild(applyButton);\n\t\tfooterElement.appendChild(rightFooter);\n\n\t\tthis._dropdownElement.appendChild(footerElement);\n\n\t\t// Add to document\n\t\tthis._element.appendChild(this._dropdownElement);\n\n\t\t// Initialize dropdown manager\n\t\tthis._initDropdownManager();\n\n\t\t// Initialize calendar view\n\t\tthis._renderCalendarView();\n\t}\n\n\t/**\n\t * Initialize the dropdown manager\n\t */\n\tprivate _initDropdownManager(): void {\n\t\tconst config = this._stateManager.getConfig();\n\n\t\t// Use the display element rather than the input element\n\t\tconst displayElement = this._element.querySelector(\n\t\t\t'[data-kt-datepicker-display]',\n\t\t) as HTMLElement;\n\t\tconst inputElement = this._element.querySelector(\n\t\t\t'[data-kt-datepicker-input]',\n\t\t) as HTMLElement;\n\t\tconst triggerElement = displayElement || inputElement;\n\n\t\tif (triggerElement && this._dropdownElement) {\n\t\t\tthis._dropdownManager = new KTDatepickerDropdown(\n\t\t\t\tthis._element,\n\t\t\t\ttriggerElement,\n\t\t\t\tthis._dropdownElement,\n\t\t\t\tconfig,\n\t\t\t);\n\n\t\t\t// Add keyboard event listener to the trigger element\n\t\t\ttriggerElement.addEventListener('keydown', (e) => {\n\t\t\t\tif (e.key === 'Enter' || e.key === ' ' || e.key === 'ArrowDown') {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (!this._isVisible) {\n\t\t\t\t\t\t// Open the dropdown\n\t\t\t\t\t\tthis._stateManager.setOpen(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Set up event listeners for calendar interactions\n\t */\n\tprivate _setupEventListeners(): void {\n\t\tif (!this._dropdownElement) return;\n\n\t\t// Get elements\n\t\tconst prevMonthBtn = this._dropdownElement.querySelector(\n\t\t\t'button[aria-label=\"Previous Month\"]',\n\t\t);\n\t\tconst nextMonthBtn = this._dropdownElement.querySelector(\n\t\t\t'button[aria-label=\"Next Month\"]',\n\t\t);\n\n\t\t// Find buttons by text content instead of using jQuery-style selectors\n\t\tconst buttons = this._dropdownElement.querySelectorAll('button');\n\t\tlet todayBtn: HTMLButtonElement | null = null;\n\t\tlet clearBtn: HTMLButtonElement | null = null;\n\t\tlet applyBtn: HTMLButtonElement | null = null;\n\n\t\tbuttons.forEach((btn) => {\n\t\t\tconst btnText = btn.textContent?.trim();\n\t\t\tif (btnText === 'Today') todayBtn = btn as HTMLButtonElement;\n\t\t\telse if (btnText === 'Clear') clearBtn = btn as HTMLButtonElement;\n\t\t\telse if (btnText === 'Apply') applyBtn = btn as HTMLButtonElement;\n\t\t});\n\n\t\tconst monthYearText = this._dropdownElement.querySelector(\n\t\t\t'.kt-datepicker-calendar-monthyear-text',\n\t\t);\n\n\t\t// Month navigation\n\t\tif (prevMonthBtn) {\n\t\t\tprevMonthBtn.addEventListener('click', () => this._navigateMonth(-1));\n\t\t}\n\n\t\tif (nextMonthBtn) {\n\t\t\tnextMonthBtn.addEventListener('click', () => this._navigateMonth(1));\n\t\t}\n\n\t\t// Month/year view toggle\n\t\tif (monthYearText) {\n\t\t\tmonthYearText.addEventListener('click', () =>\n\t\t\t\tthis._toggleMonthYearView(),\n\t\t\t);\n\t\t}\n\n\t\t// Today, Clear, Apply buttons\n\t\tif (todayBtn) {\n\t\t\ttodayBtn.addEventListener('click', () => this._goToToday());\n\t\t}\n\n\t\tif (clearBtn) {\n\t\t\tclearBtn.addEventListener('click', () => this._clearSelection());\n\t\t}\n\n\t\tif (applyBtn) {\n\t\t\tapplyBtn.addEventListener('click', () => this._applySelection());\n\t\t}\n\n\t\t// Handle day selection through event delegation\n\t\tif (this._calendarContainer) {\n\t\t\tthis._calendarContainer.addEventListener('click', (e) => {\n\t\t\t\tconst target = e.target as HTMLElement;\n\t\t\t\tconst dayButton = target.closest('button[data-date]') as HTMLElement;\n\n\t\t\t\tif (dayButton && !dayButton.hasAttribute('disabled')) {\n\t\t\t\t\t// Get the date ID directly from the clicked button (YYYY-MM-DD format)\n\t\t\t\t\tconst dateIdAttr = dayButton.getAttribute('data-date-id');\n\n\t\t\t\t\tif (dateIdAttr) {\n\t\t\t\t\t\t// Parse the ISO date string to get exact year, month, day\n\t\t\t\t\t\tconst [year, month, day] = dateIdAttr\n\t\t\t\t\t\t\t.split('-')\n\t\t\t\t\t\t\t.map((part) => parseInt(part, 10));\n\n\t\t\t\t\t\t// Create the date object from the parsed components\n\t\t\t\t\t\tconst clickedDate = new Date(year, month - 1, day); // Month is 0-indexed in JS\n\t\t\t\t\t\tclickedDate.setHours(0, 0, 0, 0); // Set to midnight\n\n\t\t\t\t\t\t// Handle this date directly instead of using day number\n\t\t\t\t\t\tthis._handleDateSelection(clickedDate, dayButton);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Fallback to old method using day number if date-id is not present\n\t\t\t\t\t\tconst dateAttr = dayButton.getAttribute('data-date');\n\t\t\t\t\t\tif (dateAttr) {\n\t\t\t\t\t\t\tconst day = parseInt(dateAttr, 10);\n\t\t\t\t\t\t\tthis._handleDaySelection(day);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add hover effect for range selection\n\t\t\tthis._calendarContainer.addEventListener('mouseover', (e) => {\n\t\t\t\tconst state = this._stateManager.getState();\n\t\t\t\tconst config = this._stateManager.getConfig();\n\n\t\t\t\t// Only apply hover effect in range mode when start date is selected but end date is not\n\t\t\t\tif (\n\t\t\t\t\t!config.range ||\n\t\t\t\t\t!state.selectedDateRange ||\n\t\t\t\t\t!state.selectedDateRange.startDate ||\n\t\t\t\t\tstate.selectedDateRange.endDate\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst target = e.target as HTMLElement;\n\t\t\t\tconst dayButton = target.closest('button[data-date]');\n\n\t\t\t\tif (dayButton && !dayButton.hasAttribute('disabled')) {\n\t\t\t\t\t// Clear any existing hover classes\n\t\t\t\t\tthis._clearRangeHoverClasses();\n\n\t\t\t\t\t// Get the proper date from the data-date-id attribute\n\t\t\t\t\tconst dateIdAttr = dayButton.getAttribute('data-date-id');\n\n\t\t\t\t\tif (dateIdAttr) {\n\t\t\t\t\t\t// Parse the ISO date string (YYYY-MM-DD)\n\t\t\t\t\t\tconst [year, month, day] = dateIdAttr\n\t\t\t\t\t\t\t.split('-')\n\t\t\t\t\t\t\t.map((part) => parseInt(part, 10));\n\t\t\t\t\t\tconst hoverDate = new Date(year, month - 1, day); // Month is 0-indexed in JS Date\n\n\t\t\t\t\t\t// Apply hover effect between start date and current hover date\n\t\t\t\t\t\tthis._applyRangeHoverEffect(\n\t\t\t\t\t\t\tstate.selectedDateRange.startDate,\n\t\t\t\t\t\t\thoverDate,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Fallback to old method if data-date-id is not present\n\t\t\t\t\t\tconst dateAttr = dayButton.getAttribute('data-date');\n\t\t\t\t\t\tif (dateAttr) {\n\t\t\t\t\t\t\tconst day = parseInt(dateAttr, 10);\n\t\t\t\t\t\t\tconst hoverDate = new Date(state.currentDate);\n\t\t\t\t\t\t\thoverDate.setDate(day);\n\n\t\t\t\t\t\t\t// Apply hover effect between start date and current hover date\n\t\t\t\t\t\t\tthis._applyRangeHoverEffect(\n\t\t\t\t\t\t\t\tstate.selectedDateRange.startDate,\n\t\t\t\t\t\t\t\thoverDate,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Clear hover effect when mouse leaves the calendar\n\t\t\tthis._calendarContainer.addEventListener('mouseleave', () => {\n\t\t\t\tthis._clearRangeHoverClasses();\n\t\t\t});\n\t\t}\n\n\t\t// Listen for state changes\n\t\tthis._eventManager.addEventListener(\n\t\t\tKTDatepickerEventName.STATE_CHANGE,\n\t\t\t(e: CustomEvent) => {\n\t\t\t\tconst detail = e.detail?.payload;\n\t\t\t\tconst config = this._stateManager.getConfig();\n\n\t\t\t\t// For range selection, check if we need to keep the dropdown open\n\t\t\t\tif (config.range && detail && detail.selectedDateRange) {\n\t\t\t\t\tconst { startDate, endDate } = detail.selectedDateRange;\n\n\t\t\t\t\t// If start date is set but no end date, keep dropdown open\n\t\t\t\t\tif (startDate && !endDate) {\n\t\t\t\t\t\tthis._stateManager.getState().isRangeSelectionInProgress = true;\n\t\t\t\t\t} else if (startDate && endDate) {\n\t\t\t\t\t\tthis._stateManager.getState().isRangeSelectionInProgress = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Update calendar view\n\t\t\t\tthis._updateCalendarView();\n\t\t\t},\n\t\t);\n\n\t\t// Listen for other state changes\n\t\tthis._eventManager.addEventListener(KTDatepickerEventName.VIEW_CHANGE, () =>\n\t\t\tthis._updateViewMode(),\n\t\t);\n\t\tthis._eventManager.addEventListener(KTDatepickerEventName.OPEN, () =>\n\t\t\tthis.show(),\n\t\t);\n\t\tthis._eventManager.addEventListener(KTDatepickerEventName.CLOSE, () =>\n\t\t\tthis.hide(),\n\t\t);\n\t\tthis._eventManager.addEventListener(KTDatepickerEventName.UPDATE, () =>\n\t\t\tthis._updateCalendarView(),\n\t\t);\n\n\t\t// Time inputs\n\t\tconst timeContainer = this._dropdownElement.querySelector(\n\t\t\t'.kt-datepicker-calendar-time-container',\n\t\t);\n\t\tif (timeContainer) {\n\t\t\tconst hourInput = timeContainer.querySelector(\n\t\t\t\t'input[aria-label=\"Hour\"]',\n\t\t\t) as HTMLInputElement;\n\t\t\tconst minuteInput = timeContainer.querySelector(\n\t\t\t\t'input[aria-label=\"Minute\"]',\n\t\t\t) as HTMLInputElement;\n\t\t\tconst secondInput = timeContainer.querySelector(\n\t\t\t\t'input[aria-label=\"Second\"]',\n\t\t\t) as HTMLInputElement;\n\t\t\tconst amButton = timeContainer.querySelector(\n\t\t\t\t'button[aria-label=\"AM\"]',\n\t\t\t) as HTMLButtonElement;\n\t\t\tconst pmButton = timeContainer.querySelector(\n\t\t\t\t'button[aria-label=\"PM\"]',\n\t\t\t) as HTMLButtonElement;\n\n\t\t\t// Update AM/PM button texts\n\t\t\tconst config = this._stateManager.getConfig();\n\t\t\tif (amButton) amButton.textContent = config.am;\n\t\t\tif (pmButton) pmButton.textContent = config.pm;\n\n\t\t\t// Time input listeners\n\t\t\tif (hourInput) {\n\t\t\t\thourInput.addEventListener('change', () => this._handleTimeChange());\n\t\t\t}\n\n\t\t\tif (minuteInput) {\n\t\t\t\tminuteInput.addEventListener('change', () => this._handleTimeChange());\n\t\t\t}\n\n\t\t\tif (secondInput) {\n\t\t\t\tsecondInput.addEventListener('change', () => this._handleTimeChange());\n\t\t\t}\n\n\t\t\t// AM/PM selection\n\t\t\tif (amButton) {\n\t\t\t\tamButton.addEventListener('click', () => this._setAmPm('AM'));\n\t\t\t}\n\n\t\t\tif (pmButton) {\n\t\t\t\tpmButton.addEventListener('click', () => this._setAmPm('PM'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Render the calendar view based on current state\n\t */\n\tprivate _renderCalendarView(): void {\n\t\tif (!this._calendarContainer) return;\n\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\t\tconst locale = getLocaleConfig(config);\n\n\t\t// Clear existing content\n\t\tthis._calendarContainer.innerHTML = '';\n\n\t\t// Set up proper container classes for multiple months view\n\t\tif (config.visibleMonths > 1) {\n\t\t\t// For multiple months, use a flex container with no wrapping\n\t\t\tthis._calendarContainer.className = 'kt-datepicker-calendar-container-mt';\n\t\t} else {\n\t\t\tthis._calendarContainer.className = 'kt-datepicker-calendar-container';\n\t\t}\n\n\t\t// Render based on view mode\n\t\tswitch (state.viewMode) {\n\t\t\tcase 'days':\n\t\t\t\t// For each visible month, create a calendar\n\t\t\t\tfor (let i = 0; i < config.visibleMonths; i++) {\n\t\t\t\t\t// Calculate the month to display\n\t\t\t\t\tconst tempDate = new Date(state.currentDate);\n\t\t\t\t\ttempDate.setMonth(state.currentDate.getMonth() + i);\n\n\t\t\t\t\tconst month = tempDate.getMonth();\n\t\t\t\t\tconst year = tempDate.getFullYear();\n\n\t\t\t\t\t// Create month container\n\t\t\t\t\tconst monthContainer = document.createElement('div');\n\n\t\t\t\t\t// Set appropriate class based on number of months\n\t\t\t\t\tif (config.visibleMonths > 1) {\n\t\t\t\t\t\t// For multiple months, use fixed width and properly spaced\n\t\t\t\t\t\tmonthContainer.className = 'kt-datepicker-calendar-month-mt';\n\t\t\t\t\t\tmonthContainer.setAttribute('data-month-id', `${month}-${year}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmonthContainer.className = 'kt-datepicker-calendar-month';\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add month header\n\t\t\t\t\tconst monthHeader = document.createElement('div');\n\t\t\t\t\tmonthHeader.className = 'kt-datepicker-calendar-month-header';\n\t\t\t\t\tmonthHeader.textContent = `${locale.monthNames[month]} ${year}`;\n\t\t\t\t\tmonthContainer.appendChild(monthHeader);\n\n\t\t\t\t\t// Generate calendar grid\n\t\t\t\t\tmonthContainer.innerHTML += calendarGridTemplate(\n\t\t\t\t\t\tlocale,\n\t\t\t\t\t\tconfig.weekDays,\n\t\t\t\t\t);\n\n\t\t\t\t\t// Get days for the month\n\t\t\t\t\tconst calendarMatrix = generateCalendarMonth(year, month, config);\n\n\t\t\t\t\t// Render days\n\t\t\t\t\tconst daysBody = monthContainer.querySelector('tbody');\n\t\t\t\t\tif (daysBody) {\n\t\t\t\t\t\tdaysBody.innerHTML = this._renderDays(calendarMatrix, month, year);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add to container\n\t\t\t\t\tthis._calendarContainer.appendChild(monthContainer);\n\t\t\t\t}\n\n\t\t\t\t// Update the month/year display in header\n\t\t\t\tthis._updateMonthYearDisplay();\n\t\t\t\tbreak;\n\n\t\t\tcase 'months':\n\t\t\t\t// Render month selection view with current month\n\t\t\t\tconst currentMonth = state.currentDate.getMonth();\n\t\t\t\tthis._calendarContainer.innerHTML = monthSelectionTemplate(\n\t\t\t\t\tlocale,\n\t\t\t\t\tcurrentMonth,\n\t\t\t\t);\n\n\t\t\t\t// Add click events to month buttons\n\t\t\t\tconst monthButtons =\n\t\t\t\t\tthis._calendarContainer.querySelectorAll('button[data-month]');\n\t\t\t\tmonthButtons.forEach((btn) => {\n\t\t\t\t\tbtn.addEventListener('click', (e) => {\n\t\t\t\t\t\tconst target = e.target as HTMLElement;\n\t\t\t\t\t\tconst monthIdx = target.getAttribute('data-month');\n\t\t\t\t\t\tif (monthIdx) {\n\t\t\t\t\t\t\tthis._selectMonth(parseInt(monthIdx, 10));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase 'years':\n\t\t\t\t// Get current year and calculate year range\n\t\t\t\tconst currentYear = state.currentDate.getFullYear();\n\t\t\t\tconst startYear = currentYear - Math.floor(config.visibleYears / 2);\n\t\t\t\tconst endYear = startYear + config.visibleYears - 1;\n\n\t\t\t\t// Render year selection view\n\t\t\t\tthis._calendarContainer.innerHTML = yearSelectionTemplate(\n\t\t\t\t\tstartYear,\n\t\t\t\t\tendYear,\n\t\t\t\t\tcurrentYear,\n\t\t\t\t);\n\n\t\t\t\t// Add click events to year buttons\n\t\t\t\tconst yearButtons =\n\t\t\t\t\tthis._calendarContainer.querySelectorAll('button[data-year]');\n\t\t\t\tyearButtons.forEach((btn) => {\n\t\t\t\t\tbtn.addEventListener('click', (e) => {\n\t\t\t\t\t\tconst target = e.target as HTMLElement;\n\t\t\t\t\t\tconst year = target.getAttribute('data-year');\n\t\t\t\t\t\tif (year) {\n\t\t\t\t\t\t\tthis._selectYear(parseInt(year, 10));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// Add navigation for year ranges\n\t\t\t\tconst prevYearsBtn = this._calendarContainer.querySelector(\n\t\t\t\t\t'button[data-year-nav=\"prev\"]',\n\t\t\t\t);\n\t\t\t\tif (prevYearsBtn) {\n\t\t\t\t\tprevYearsBtn.addEventListener('click', () => {\n\t\t\t\t\t\tconst newYear = startYear - config.visibleYears;\n\t\t\t\t\t\tconst newDate = new Date(state.currentDate);\n\t\t\t\t\t\tnewDate.setFullYear(newYear);\n\t\t\t\t\t\tthis._stateManager.setCurrentDate(newDate);\n\t\t\t\t\t\tthis._renderCalendarView();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tconst nextYearsBtn = this._calendarContainer.querySelector(\n\t\t\t\t\t'button[data-year-nav=\"next\"]',\n\t\t\t\t);\n\t\t\t\tif (nextYearsBtn) {\n\t\t\t\t\tnextYearsBtn.addEventListener('click', () => {\n\t\t\t\t\t\tconst newYear = endYear + 1;\n\t\t\t\t\t\tconst newDate = new Date(state.currentDate);\n\t\t\t\t\t\tnewDate.setFullYear(newYear);\n\t\t\t\t\t\tthis._stateManager.setCurrentDate(newDate);\n\t\t\t\t\t\tthis._renderCalendarView();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Render days for a calendar month\n\t *\n\t * @param calendarMatrix - Matrix of dates for the month\n\t * @param currentMonth - Current month\n\t * @param currentYear - Current year\n\t * @returns HTML string for the days\n\t */\n\tprivate _renderDays(\n\t\tcalendarMatrix: Date[][],\n\t\tcurrentMonth: number,\n\t\tcurrentYear: number,\n\t): string {\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\t\tconst today = new Date();\n\t\ttoday.setHours(0, 0, 0, 0);\n\n\t\tlet html = '';\n\n\t\t// Loop through each week\n\t\tfor (const week of calendarMatrix) {\n\t\t\thtml += '<tr>';\n\n\t\t\t// Loop through each day in the week\n\t\t\tfor (const date of week) {\n\t\t\t\t// Determine cell properties\n\t\t\t\tconst isCurrentMonth = date.getMonth() === currentMonth;\n\t\t\t\tconst isToday = isSameDay(date, today);\n\t\t\t\tlet isSelected = false;\n\t\t\t\tlet isRangeStart = false;\n\t\t\t\tlet isRangeEnd = false;\n\t\t\t\tlet isInRange = false;\n\n\t\t\t\t// Check if date is selected\n\t\t\t\tif (state.selectedDate && isSameDay(date, state.selectedDate)) {\n\t\t\t\t\tisSelected = true;\n\t\t\t\t}\n\n\t\t\t\t// Check if date is in range for range selection\n\t\t\t\tif (config.range && state.selectedDateRange) {\n\t\t\t\t\tconst { startDate, endDate } = state.selectedDateRange;\n\n\t\t\t\t\tif (startDate && isSameDay(date, startDate)) {\n\t\t\t\t\t\tisRangeStart = true;\n\t\t\t\t\t\tisSelected = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (endDate && isSameDay(date, endDate)) {\n\t\t\t\t\t\tisRangeEnd = true;\n\t\t\t\t\t\tisSelected = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (startDate && endDate && isDateBetween(date, startDate, endDate)) {\n\t\t\t\t\t\tisInRange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Check if date is in multi-date selection\n\t\t\t\tif (config.multiDateSelection && state.selectedDates.length > 0) {\n\t\t\t\t\tisSelected = state.selectedDates.some((d) => isSameDay(date, d));\n\t\t\t\t}\n\n\t\t\t\t// Check if date is disabled\n\t\t\t\tconst isDisabled = isDateDisabled(date, config);\n\n\t\t\t\t// Check if weekend\n\t\t\t\tconst isWeekendDay = isWeekend(date);\n\n\t\t\t\t// Get the actual month and year of this date (may differ from currentMonth/currentYear for adjacent months)\n\t\t\t\tconst actualMonth = date.getMonth();\n\t\t\t\tconst actualYear = date.getFullYear();\n\n\t\t\t\t// Generate day cell\n\t\t\t\thtml += dayTemplate(\n\t\t\t\t\tdate.getDate(),\n\t\t\t\t\tactualMonth,\n\t\t\t\t\tactualYear,\n\t\t\t\t\tisCurrentMonth,\n\t\t\t\t\tisToday,\n\t\t\t\t\tisSelected,\n\t\t\t\t\tisDisabled,\n\t\t\t\t\tisRangeStart,\n\t\t\t\t\tisRangeEnd,\n\t\t\t\t\tisInRange,\n\t\t\t\t\tisWeekendDay,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\thtml += '</tr>';\n\t\t}\n\n\t\treturn html;\n\t}\n\n\t/**\n\t * Update the month and year display in the header\n\t */\n\tprivate _updateMonthYearDisplay(): void {\n\t\tif (!this._dropdownElement) return;\n\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\t\tconst locale = getLocaleConfig(config);\n\n\t\t// Find the calendar header\n\t\tconst calendarHeader = this._dropdownElement.querySelector(\n\t\t\t'.kt-datepicker-calendar-header',\n\t\t);\n\t\tif (!calendarHeader) return;\n\n\t\tconst currentMonth = state.currentDate.getMonth();\n\t\tconst currentYear = state.currentDate.getFullYear();\n\n\t\t// Update the header with month/year selectors\n\t\tcalendarHeader.innerHTML = monthYearSelectTemplate(\n\t\t\tlocale,\n\t\t\tcurrentMonth,\n\t\t\tcurrentYear,\n\t\t);\n\n\t\t// Add event listeners to the month and year selectors\n\t\tconst monthSelector = calendarHeader.querySelector(\n\t\t\t'.kt-datepicker-calendar-month-selector',\n\t\t);\n\t\tconst yearSelector = calendarHeader.querySelector(\n\t\t\t'.kt-datepicker-calendar-year-selector',\n\t\t);\n\n\t\tif (monthSelector) {\n\t\t\tmonthSelector.addEventListener('click', () => {\n\t\t\t\t// Switch to months view\n\t\t\t\tthis._stateManager.setViewMode('months');\n\t\t\t\tthis._renderCalendarView();\n\t\t\t});\n\t\t}\n\n\t\tif (yearSelector) {\n\t\t\tyearSelector.addEventListener('click', () => {\n\t\t\t\t// Switch to years view\n\t\t\t\tthis._stateManager.setViewMode('years');\n\t\t\t\tthis._renderCalendarView();\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Navigate to a different month\n\t *\n\t * @param offset - Number of months to offset by\n\t */\n\tprivate _navigateMonth(offset: number): void {\n\t\tconst state = this._stateManager.getState();\n\t\tconst newDate = new Date(state.currentDate);\n\t\tnewDate.setMonth(newDate.getMonth() + offset);\n\n\t\tthis._stateManager.setCurrentDate(newDate);\n\t\tthis._renderCalendarView();\n\t}\n\n\t/**\n\t * Handle direct date selection (new method that takes the actual date object)\n\t *\n\t * @param selectedDate - The exact date that was selected\n\t * @param clickedButton - The button element that was clicked\n\t */\n\tprivate _handleDateSelection(\n\t\tselectedDate: Date,\n\t\tclickedButton: HTMLElement,\n\t): void {\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\n\t\t// Check if the date is disabled (outside min/max range or explicitly disabled)\n\t\tif (isDateDisabled(selectedDate, config)) {\n\t\t\tconsole.log(\n\t\t\t\t'Date is disabled, ignoring selection:',\n\t\t\t\tselectedDate.toISOString(),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Create a new date object set to noon of the selected date in local timezone\n\t\t// This prevents timezone shifts causing the wrong date to be selected\n\t\tconst localSelectedDate = new Date(selectedDate);\n\t\tlocalSelectedDate.setHours(12, 0, 0, 0);\n\n\t\t// Set time if enabled\n\t\tif (config.enableTime && state.selectedTime) {\n\t\t\tlocalSelectedDate.setHours(\n\t\t\t\tstate.selectedTime.hours,\n\t\t\t\tstate.selectedTime.minutes,\n\t\t\t\tstate.selectedTime.seconds,\n\t\t\t\t0,\n\t\t\t);\n\t\t}\n\n\t\t// Get the current range state before updating\n\t\tconst currentRange = state.selectedDateRange;\n\t\tconst isStartingNewRange =\n\t\t\t!currentRange ||\n\t\t\t!currentRange.startDate ||\n\t\t\t(currentRange.startDate && currentRange.endDate);\n\n\t\t// Determine if we're in a month different from the currently displayed one\n\t\tconst selectedMonth = localSelectedDate.getMonth();\n\t\tconst currentViewMonth = state.currentDate.getMonth();\n\t\tconst isInDifferentMonth = selectedMonth !== currentViewMonth;\n\n\t\tconsole.log(\n\t\t\t'Selected date:',\n\t\t\tlocalSelectedDate.toISOString(),\n\t\t\t'Month:',\n\t\t\tselectedMonth,\n\t\t\t'Current view month:',\n\t\t\tcurrentViewMonth,\n\t\t\t'Day of month:',\n\t\t\tlocalSelectedDate.getDate(),\n\t\t);\n\n\t\t// Call the state manager's setSelectedDate method\n\t\tthis._stateManager.setSelectedDate(localSelectedDate);\n\n\t\t// After setting the date, get the updated range state\n\t\tconst updatedRange = state.selectedDateRange;\n\n\t\t// If we're in range mode, handle specific range selection behavior\n\t\tif (config.range) {\n\t\t\tif (isStartingNewRange) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'Starting new range selection with date:',\n\t\t\t\t\tlocalSelectedDate.toISOString(),\n\t\t\t\t);\n\n\t\t\t\t// If starting a range with a date in a different month, update the view\n\t\t\t\tif (isInDifferentMonth) {\n\t\t\t\t\tthis._stateManager.setCurrentDate(localSelectedDate);\n\t\t\t\t}\n\n\t\t\t\t// Explicitly clear any hover effects when starting a new range\n\t\t\t\tthis._clearRangeHoverClasses();\n\t\t\t} else {\n\t\t\t\t// This is the second click to complete a range\n\t\t\t\tconsole.log(\n\t\t\t\t\t'Completing range selection with date:',\n\t\t\t\t\tlocalSelectedDate.toISOString(),\n\t\t\t\t);\n\n\t\t\t\t// If the selected range spans different months and we have multiple visible months\n\t\t\t\tif (\n\t\t\t\t\tupdatedRange &&\n\t\t\t\t\tupdatedRange.startDate &&\n\t\t\t\t\tupdatedRange.endDate &&\n\t\t\t\t\tconfig.visibleMonths > 1\n\t\t\t\t) {\n\t\t\t\t\t// Determine range start and end months\n\t\t\t\t\tconst startMonth = updatedRange.startDate.getMonth();\n\t\t\t\t\tconst endMonth = updatedRange.endDate.getMonth();\n\n\t\t\t\t\t// If range spans multiple months, update view to show the earlier month\n\t\t\t\t\tif (startMonth !== endMonth) {\n\t\t\t\t\t\t// Show the earlier month as the first visible month\n\t\t\t\t\t\tconst earlierDate =\n\t\t\t\t\t\t\tupdatedRange.startDate < updatedRange.endDate\n\t\t\t\t\t\t\t\t? updatedRange.startDate\n\t\t\t\t\t\t\t\t: updatedRange.endDate;\n\t\t\t\t\t\tthis._stateManager.setCurrentDate(earlierDate);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Close dropdown only if range selection is complete\n\t\t\tif (updatedRange && updatedRange.startDate && updatedRange.endDate) {\n\t\t\t\tthis._stateManager.setOpen(false);\n\t\t\t}\n\t\t} else {\n\t\t\t// For single date selection, close the dropdown\n\t\t\tthis._stateManager.setOpen(false);\n\t\t}\n\n\t\t// Update calendar view to reflect changes\n\t\tthis._updateCalendarView();\n\t}\n\n\t/**\n\t * Handle day selection (legacy method, kept for backward compatibility)\n\t *\n\t * @param day - Day number\n\t */\n\tprivate _handleDaySelection(day: number): void {\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\n\t\t// Find the clicked button element using data-date attribute\n\t\tconst dayButtons = this._calendarContainer?.querySelectorAll(\n\t\t\t`button[data-date=\"${day}\"]`,\n\t\t);\n\t\tif (!dayButtons || dayButtons.length === 0) return;\n\n\t\t// First look for the button that matches the clicked target in the current month\n\t\tlet clickedButton: HTMLElement | null = null;\n\n\t\t// Find the actual button that was likely clicked (prefer current month days)\n\t\tfor (let i = 0; i < dayButtons.length; i++) {\n\t\t\tconst button = dayButtons[i] as HTMLElement;\n\t\t\tconst parentCell = button.closest('td');\n\n\t\t\t// Check if the day is in the current month (not faded)\n\t\t\tconst isCurrentMonth =\n\t\t\t\t!button.classList.contains('current') &&\n\t\t\t\t(!parentCell || !parentCell.classList.contains('current'));\n\n\t\t\tif (isCurrentMonth) {\n\t\t\t\tclickedButton = button;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// If no current month button found, use the first one\n\t\tif (!clickedButton && dayButtons.length > 0) {\n\t\t\tclickedButton = dayButtons[0] as HTMLElement;\n\t\t}\n\n\t\tif (!clickedButton) return;\n\n\t\t// Get the proper date from the data-date-id attribute which contains YYYY-MM-DD\n\t\tconst dateIdAttr = clickedButton.getAttribute('data-date-id');\n\t\tif (!dateIdAttr) return;\n\n\t\t// Parse the ISO date string\n\t\tconst [year, month, dayOfMonth] = dateIdAttr\n\t\t\t.split('-')\n\t\t\t.map((part) => parseInt(part, 10));\n\n\t\t// Create the date object with the proper timezone handling\n\t\t// We'll set it to noon in local time to avoid timezone issues\n\t\tconst selectedDate = new Date(year, month - 1, dayOfMonth, 12, 0, 0, 0); // Month is 0-indexed in JS Date, and setting time to noon\n\n\t\t// First check if this date is disabled (outside min/max range)\n\t\tif (isDateDisabled(selectedDate, config)) {\n\t\t\tconsole.log(\n\t\t\t\t'Date is disabled, ignoring selection:',\n\t\t\t\tselectedDate.toISOString(),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Use the new direct date selection method\n\t\tthis._handleDateSelection(selectedDate, clickedButton);\n\t}\n\n\t/**\n\t * Toggle between days, months, and years view\n\t */\n\tprivate _toggleMonthYearView(): void {\n\t\tconst state = this._stateManager.getState();\n\t\tlet newMode: 'days' | 'months' | 'years';\n\n\t\tswitch (state.viewMode) {\n\t\t\tcase 'days':\n\t\t\t\tnewMode = 'months';\n\t\t\t\tbreak;\n\t\t\tcase 'months':\n\t\t\t\tnewMode = 'years';\n\t\t\t\tbreak;\n\t\t\tcase 'years':\n\t\t\t\tnewMode = 'days';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tnewMode = 'days';\n\t\t}\n\n\t\tthis._stateManager.setViewMode(newMode);\n\t\tthis._renderCalendarView();\n\t}\n\n\t/**\n\t * Update view mode based on state change\n\t */\n\tprivate _updateViewMode(): void {\n\t\tthis._renderCalendarView();\n\t}\n\n\t/**\n\t * Go to today's date\n\t */\n\tprivate _goToToday(): void {\n\t\tconst today = new Date();\n\t\tthis._stateManager.setCurrentDate(today);\n\t\tthis._renderCalendarView();\n\t}\n\n\t/**\n\t * Clear date selection\n\t */\n\tprivate _clearSelection(): void {\n\t\tthis._stateManager.setSelectedDate(null);\n\t\tthis._updateCalendarView();\n\t}\n\n\t/**\n\t * Apply current selection and close dropdown\n\t */\n\tprivate _applySelection(): void {\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\n\t\t// For range selection, check if range selection is in progress\n\t\tif (config.range && state.isRangeSelectionInProgress) {\n\t\t\tconsole.log(\n\t\t\t\t'Apply button clicked, but range selection in progress - keeping dropdown open',\n\t\t\t);\n\t\t\t// Don't close when range selection is in progress\n\t\t\treturn;\n\t\t}\n\n\t\t// Close dropdown for other cases\n\t\tthis._stateManager.setOpen(false);\n\t}\n\n\t/**\n\t * Handle time input changes\n\t */\n\tprivate _handleTimeChange(): void {\n\t\tif (!this._dropdownElement) return;\n\n\t\tconst timeContainer = this._dropdownElement.querySelector(\n\t\t\t'.kt-datepicker-calendar-time-container',\n\t\t);\n\t\tif (!timeContainer) return;\n\n\t\tconst hourInput = timeContainer.querySelector(\n\t\t\t'input[aria-label=\"Hour\"]',\n\t\t) as HTMLInputElement;\n\t\tconst minuteInput = timeContainer.querySelector(\n\t\t\t'input[aria-label=\"Minute\"]',\n\t\t) as HTMLInputElement;\n\t\tconst secondInput = timeContainer.querySelector(\n\t\t\t'input[aria-label=\"Second\"]',\n\t\t) as HTMLInputElement;\n\t\tconst amButton = timeContainer.querySelector(\n\t\t\t'button[aria-label=\"AM\"]',\n\t\t) as HTMLButtonElement;\n\t\tconst pmButton = timeContainer.querySelector(\n\t\t\t'button[aria-label=\"PM\"]',\n\t\t) as HTMLButtonElement;\n\n\t\tif (!hourInput || !minuteInput || !secondInput) return;\n\n\t\t// Get input values\n\t\tlet hours = parseInt(hourInput.value, 10);\n\t\tconst minutes = parseInt(minuteInput.value, 10);\n\t\tconst seconds = parseInt(secondInput.value, 10);\n\n\t\t// Validate values\n\t\tconst isValidHours = !isNaN(hours) && hours >= 0 && hours <= 23;\n\t\tconst isValidMinutes = !isNaN(minutes) && minutes >= 0 && minutes <= 59;\n\t\tconst isValidSeconds = !isNaN(seconds) && seconds >= 0 && seconds <= 59;\n\n\t\tif (!isValidHours || !isValidMinutes || !isValidSeconds) return;\n\n\t\t// Check if using 12-hour format and adjust for AM/PM\n\t\tconst isPM = amButton && amButton.classList.contains('bg-blue-500');\n\t\tif (isPM && hours < 12) {\n\t\t\thours += 12;\n\t\t} else if (!isPM && hours === 12) {\n\t\t\thours = 0;\n\t\t}\n\n\t\t// Update time in state\n\t\tthis._stateManager.setSelectedTime({\n\t\t\thours,\n\t\t\tminutes,\n\t\t\tseconds,\n\t\t\tampm: isPM ? 'PM' : 'AM',\n\t\t});\n\n\t\t// Update selected date with new time if a date is selected\n\t\tconst state = this._stateManager.getState();\n\t\tif (state.selectedDate) {\n\t\t\tconst updatedDate = new Date(state.selectedDate);\n\t\t\tupdatedDate.setHours(hours, minutes, seconds, 0);\n\t\t\tthis._stateManager.setSelectedDate(updatedDate);\n\t\t}\n\t}\n\n\t/**\n\t * Set AM/PM selection\n\t *\n\t * @param period - 'AM' or 'PM'\n\t */\n\tprivate _setAmPm(period: 'AM' | 'PM'): void {\n\t\tif (!this._dropdownElement) return;\n\n\t\tconst timeContainer = this._dropdownElement.querySelector('.py-3.border-t');\n\t\tif (!timeContainer) return;\n\n\t\tconst amButton = timeContainer.querySelector(\n\t\t\t'button[aria-label=\"AM\"]',\n\t\t) as HTMLButtonElement;\n\t\tconst pmButton = timeContainer.querySelector(\n\t\t\t'button[aria-label=\"PM\"]',\n\t\t) as HTMLButtonElement;\n\n\t\tif (!amButton || !pmButton) return;\n\n\t\t// Update button states\n\t\tif (period === 'AM') {\n\t\t\tamButton.classList.add('bg-blue-500', 'text-white', 'border-blue-500');\n\t\t\tamButton.classList.remove('bg-gray-50', 'hover:bg-gray-100');\n\t\t\tpmButton.classList.remove('bg-blue-500', 'text-white', 'border-blue-500');\n\t\t\tpmButton.classList.add('bg-gray-50', 'hover:bg-gray-100');\n\t\t} else {\n\t\t\tamButton.classList.remove('bg-blue-500', 'text-white', 'border-blue-500');\n\t\t\tamButton.classList.add('bg-gray-50', 'hover:bg-gray-100');\n\t\t\tpmButton.classList.add('bg-blue-500', 'text-white', 'border-blue-500');\n\t\t\tpmButton.classList.remove('bg-gray-50', 'hover:bg-gray-100');\n\t\t}\n\n\t\t// Update time\n\t\tthis._handleTimeChange();\n\t}\n\n\t/**\n\t * Select a month\n\t *\n\t * @param month - Month index (0-11)\n\t */\n\tprivate _selectMonth(month: number): void {\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\t\tconst newDate = new Date(state.currentDate);\n\t\tnewDate.setMonth(month);\n\n\t\tthis._stateManager.setCurrentDate(newDate);\n\n\t\t// Only change view mode if keepViewModeOnSelection is false\n\t\tif (!config.keepViewModeOnSelection) {\n\t\t\tthis._stateManager.setViewMode('days');\n\t\t}\n\n\t\tthis._renderCalendarView();\n\t}\n\n\t/**\n\t * Select a year\n\t *\n\t * @param year - Year value\n\t */\n\tprivate _selectYear(year: number): void {\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\t\tconst newDate = new Date(state.currentDate);\n\t\tnewDate.setFullYear(year);\n\n\t\tthis._stateManager.setCurrentDate(newDate);\n\n\t\t// Only change view mode if keepViewModeOnSelection is false\n\t\tif (!config.keepViewModeOnSelection) {\n\t\t\tthis._stateManager.setViewMode('months');\n\t\t}\n\n\t\tthis._renderCalendarView();\n\t}\n\n\t/**\n\t * Update calendar view to reflect state changes\n\t */\n\tprivate _updateCalendarView(): void {\n\t\tthis._renderCalendarView();\n\t\tthis._updateTimeDisplay();\n\t}\n\n\t/**\n\t * Update time inputs to reflect current time selection\n\t */\n\tprivate _updateTimeDisplay(): void {\n\t\tif (!this._dropdownElement) return;\n\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\n\t\t// Skip if time is not enabled\n\t\tif (!config.enableTime) return;\n\n\t\tconst timeContainer = this._dropdownElement.querySelector('.py-3.border-t');\n\t\tif (!timeContainer) return;\n\n\t\tconst hourInput = timeContainer.querySelector(\n\t\t\t'input[aria-label=\"Hour\"]',\n\t\t) as HTMLInputElement;\n\t\tconst minuteInput = timeContainer.querySelector(\n\t\t\t'input[aria-label=\"Minute\"]',\n\t\t) as HTMLInputElement;\n\t\tconst secondInput = timeContainer.querySelector(\n\t\t\t'input[aria-label=\"Second\"]',\n\t\t) as HTMLInputElement;\n\t\tconst amButton = timeContainer.querySelector(\n\t\t\t'button[aria-label=\"AM\"]',\n\t\t) as HTMLButtonElement;\n\t\tconst pmButton = timeContainer.querySelector(\n\t\t\t'button[aria-label=\"PM\"]',\n\t\t) as HTMLButtonElement;\n\n\t\t// Get time from selected date or default to current time\n\t\tlet hours = 0;\n\t\tlet minutes = 0;\n\t\tlet seconds = 0;\n\t\tlet isAM = true;\n\n\t\tif (state.selectedTime) {\n\t\t\thours = state.selectedTime.hours;\n\t\t\tminutes = state.selectedTime.minutes;\n\t\t\tseconds = state.selectedTime.seconds;\n\t\t\tisAM = state.selectedTime.ampm === 'AM';\n\t\t} else if (state.selectedDate) {\n\t\t\thours = state.selectedDate.getHours();\n\t\t\tminutes = state.selectedDate.getMinutes();\n\t\t\tseconds = state.selectedDate.getSeconds();\n\t\t\tisAM = hours < 12;\n\t\t} else {\n\t\t\tconst now = new Date();\n\t\t\thours = now.getHours();\n\t\t\tminutes = now.getMinutes();\n\t\t\tseconds = now.getSeconds();\n\t\t\tisAM = hours < 12;\n\t\t}\n\n\t\t// Adjust for 12-hour display if needed\n\t\tlet displayHours = hours;\n\t\tif (hourInput && config.timeFormat.includes('h')) {\n\t\t\tdisplayHours = hours % 12;\n\t\t\tif (displayHours === 0) displayHours = 12;\n\t\t}\n\n\t\t// Update input values\n\t\tif (hourInput)\n\t\t\thourInput.value =\n\t\t\t\tconfig.forceLeadingZero && displayHours < 10\n\t\t\t\t\t? `0${displayHours}`\n\t\t\t\t\t: `${displayHours}`;\n\t\tif (minuteInput)\n\t\t\tminuteInput.value =\n\t\t\t\tconfig.forceLeadingZero && minutes < 10 ? `0${minutes}` : `${minutes}`;\n\t\tif (secondInput)\n\t\t\tsecondInput.value =\n\t\t\t\tconfig.forceLeadingZero && seconds < 10 ? `0${seconds}` : `${seconds}`;\n\n\t\t// Update AM/PM buttons\n\t\tif (amButton && pmButton) {\n\t\t\tif (isAM) {\n\t\t\t\tamButton.classList.add('bg-blue-500', 'text-white', 'border-blue-500');\n\t\t\t\tamButton.classList.remove('bg-gray-50', 'hover:bg-gray-100');\n\t\t\t\tpmButton.classList.remove(\n\t\t\t\t\t'bg-blue-500',\n\t\t\t\t\t'text-white',\n\t\t\t\t\t'border-blue-500',\n\t\t\t\t);\n\t\t\t\tpmButton.classList.add('bg-gray-50', 'hover:bg-gray-100');\n\t\t\t} else {\n\t\t\t\tamButton.classList.remove(\n\t\t\t\t\t'bg-blue-500',\n\t\t\t\t\t'text-white',\n\t\t\t\t\t'border-blue-500',\n\t\t\t\t);\n\t\t\t\tamButton.classList.add('bg-gray-50', 'hover:bg-gray-100');\n\t\t\t\tpmButton.classList.add('bg-blue-500', 'text-white', 'border-blue-500');\n\t\t\t\tpmButton.classList.remove('bg-gray-50', 'hover:bg-gray-100');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Show the calendar dropdown\n\t */\n\tpublic show(): void {\n\t\tif (!this._dropdownElement || this._isVisible) return;\n\n\t\t// Ensure we're in days view\n\t\tconst state = this._stateManager.getState();\n\t\tif (state.viewMode !== 'days') {\n\t\t\tthis._stateManager.setViewMode('days');\n\t\t}\n\n\t\t// Render calendar before showing\n\t\tthis._renderCalendarView();\n\t\tthis._updateTimeDisplay();\n\n\t\t// Show dropdown using dropdown manager\n\t\tif (this._dropdownManager) {\n\t\t\tthis._dropdownManager.open();\n\t\t\tthis._isVisible = true;\n\t\t}\n\t}\n\n\t/**\n\t * Hide the calendar dropdown\n\t */\n\tpublic hide(): void {\n\t\tif (!this._dropdownElement || !this._isVisible) return;\n\n\t\t// Hide dropdown using dropdown manager\n\t\tif (this._dropdownManager) {\n\t\t\tthis._dropdownManager.close();\n\t\t\tthis._isVisible = false;\n\t\t}\n\t}\n\n\t/**\n\t * Update dropdown position\n\t */\n\tpublic updatePosition(): void {\n\t\tif (this._dropdownManager) {\n\t\t\tthis._dropdownManager.updatePosition();\n\t\t}\n\t}\n\n\t/**\n\t * Clear range hover classes from all day cells\n\t */\n\tprivate _clearRangeHoverClasses(): void {\n\t\tif (!this._calendarContainer) return;\n\n\t\t// Find all day cells with hover classes across all month containers\n\t\tconst hoverCells = this._calendarContainer.querySelectorAll(\n\t\t\t'.bg-blue-50, .text-blue-600, button[data-hover-date=\"true\"]',\n\t\t);\n\n\t\thoverCells.forEach((cell) => {\n\t\t\tcell.classList.remove('bg-blue-50', 'text-blue-600');\n\t\t});\n\t}\n\n\t/**\n\t * Apply hover effect to show potential range selection\n\t *\n\t * @param startDate - Start date of the range\n\t * @param hoverDate - Current date being hovered\n\t */\n\tprivate _applyRangeHoverEffect(startDate: Date, hoverDate: Date): void {\n\t\tif (!this._calendarContainer) return;\n\n\t\t// Clear any existing hover effects first\n\t\tthis._clearRangeHoverClasses();\n\n\t\t// Normalize dates to midnight for comparison\n\t\tconst startDateMidnight = new Date(startDate);\n\t\tstartDateMidnight.setHours(0, 0, 0, 0);\n\n\t\tconst hoverDateMidnight = new Date(hoverDate);\n\t\thoverDateMidnight.setHours(0, 0, 0, 0);\n\n\t\t// Ensure proper order for comparison (start date <= end date)\n\t\tconst rangeStart =\n\t\t\tstartDateMidnight <= hoverDateMidnight\n\t\t\t\t? startDateMidnight\n\t\t\t\t: hoverDateMidnight;\n\t\tconst rangeEnd =\n\t\t\tstartDateMidnight <= hoverDateMidnight\n\t\t\t\t? hoverDateMidnight\n\t\t\t\t: startDateMidnight;\n\n\t\t// Generate all dates in the range as ISO strings (YYYY-MM-DD)\n\t\tconst dateRangeISOStrings: string[] = [];\n\t\tconst currentDate = new Date(rangeStart);\n\n\t\twhile (currentDate <= rangeEnd) {\n\t\t\t// Format as YYYY-MM-DD\n\t\t\tconst year = currentDate.getFullYear();\n\t\t\tconst month = String(currentDate.getMonth() + 1).padStart(2, '0');\n\t\t\tconst day = String(currentDate.getDate()).padStart(2, '0');\n\n\t\t\tdateRangeISOStrings.push(`${year}-${month}-${day}`);\n\n\t\t\t// Move to the next day\n\t\t\tcurrentDate.setDate(currentDate.getDate() + 1);\n\t\t}\n\n\t\t// Apply hover effect to all day cells in the range using the date-id attribute\n\t\tdateRangeISOStrings.forEach((dateStr) => {\n\t\t\t// Find the day cell with matching date-id\n\t\t\tconst dayCells = this._calendarContainer.querySelectorAll(\n\t\t\t\t`button[data-date-id=\"${dateStr}\"]`,\n\t\t\t);\n\n\t\t\tdayCells.forEach((cell) => {\n\t\t\t\t// Skip if this is already a selected date (has blue background)\n\t\t\t\tif (cell.classList.contains('bg-blue-600')) return;\n\n\t\t\t\t// Apply hover effect\n\t\t\t\tcell.classList.add('bg-blue-50', 'text-blue-600');\n\t\t\t});\n\t\t});\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { DefaultLocales } from './locales';\nimport {\n\tKTDatepickerConfigInterface,\n\tKTDatepickerStateInterface,\n\tDateRangeInterface,\n\tTimeConfigInterface,\n} from './types';\nimport { isSameDay, isDateDisabled } from './utils';\nimport { KTDatepickerEventManager, KTDatepickerEventName } from './events';\n\nexport const DefaultConfig: KTDatepickerConfigInterface = {\n\tlocale: 'en-US',\n\tlocales: DefaultLocales, // all locales\n\n\tweekDays: 'min',\n\tforceLeadingZero: true,\n\n\t// 0-indexed month\n\t// minDate: new Date(2024, 7, 20),\n\t// maxDate: new Date(2024, 8, 10),\n\n\t// supported formats: refer to dateFormat\n\t// minDate: '20/08/2024',\n\t// maxDate: '10/09/2024',\n\n\t// Calendar\n\tvisibleMonths: 1, // visible months calendar to show\n\tvisibleYears: 10, // visible years span to show on year selection\n\tkeepViewModeOnSelection: false, // automatically switch view modes when selecting month/year\n\n\t// Date\n\tformat: 'dd/MM/yyyy',\n\n\t// Time\n\tenableTime: false,\n\ttimeFormat: 'hh:mm:ss A ZZZ', // 12-hours time format\n\t// timeFormat: 'HH:mm:ss ZZZ', // 24-hours time format\n\tam: 'AM',\n\tpm: 'PM',\n\thourStep: 1,\n\t// minuteStep: 5,\n\t// secondStep: 10,\n\t// disabledHours: [0, 1, 2, 3, 4, 5, 6, 22, 23],\n\t// disabledMinutes: [0, 1, 2, 3],\n\n\t// Date range\n\trange: false,\n\trangeSeparator: ' - ',\n\n\t// Multi-date selection\n\tmultiDateSelection: false,\n\tmaxDates: 0, // 0 means unlimited\n\n\t// Date blocking patterns\n\tdisabledDates: [],\n\tenableNaturalLanguage: true,\n\n\t// Animation settings\n\tanimationDuration: 250,\n\tanimationEasing: '',\n\tanimationEnterClass: '',\n\tanimationExitClass: '',\n};\n\n/**\n * State manager class for KTDatepicker\n * Handles state management and configuration\n */\nexport class KTDatepickerStateManager {\n\tprivate _element: HTMLElement;\n\tprivate _config: KTDatepickerConfigInterface;\n\tprivate _state: KTDatepickerStateInterface;\n\tprivate _events: KTDatepickerEventManager;\n\n\t/**\n\t * Constructor for the KTDatepickerStateManager class\n\t *\n\t * @param element - The datepicker element\n\t * @param config - Configuration object\n\t */\n\tconstructor(\n\t\telement: HTMLElement,\n\t\tconfig?: Partial<KTDatepickerConfigInterface>,\n\t) {\n\t\tthis._element = element;\n\t\tthis._config = this._mergeConfig(config || {});\n\t\tthis._state = this._initializeState();\n\t\tthis._events = new KTDatepickerEventManager(element);\n\t}\n\n\t/**\n\t * Merge provided configuration with default configuration\n\t *\n\t * @param config - User provided configuration\n\t * @returns Merged configuration\n\t */\n\tprivate _mergeConfig(\n\t\tconfig: Partial<KTDatepickerConfigInterface>,\n\t): KTDatepickerConfigInterface {\n\t\treturn { ...DefaultConfig, ...config };\n\t}\n\n\t/**\n\t * Initialize the state object with default values\n\t */\n\tprivate _initializeState(): KTDatepickerStateInterface {\n\t\tconst now = new Date();\n\t\tconst state: KTDatepickerStateInterface = {\n\t\t\tcurrentDate: now,\n\t\t\tselectedDate: null,\n\t\t\tselectedDateRange: null,\n\t\t\tselectedDates: [],\n\t\t\tviewMode: 'days',\n\t\t\tisOpen: false,\n\t\t\tisFocused: false,\n\t\t\tisRangeSelectionStart: true,\n\t\t\tisRangeSelectionInProgress: false,\n\t\t\tselectedTime: null,\n\t\t\tprevIsOpen: false,\n\t\t};\n\n\t\treturn state;\n\t}\n\n\t/**\n\t * Get the current configuration\n\t *\n\t * @returns Current configuration\n\t */\n\tpublic getConfig(): KTDatepickerConfigInterface {\n\t\treturn this._config;\n\t}\n\n\t/**\n\t * Get the current state\n\t *\n\t * @returns Current state\n\t */\n\tpublic getState(): KTDatepickerStateInterface {\n\t\treturn this._state;\n\t}\n\n\t/**\n\t * Set the selected date\n\t *\n\t * @param date - Date to select\n\t */\n\tpublic setSelectedDate(date: Date | null): void {\n\t\tconst state = this._state;\n\t\tconst config = this._config;\n\n\t\tif (date === null) {\n\t\t\t// Clear selection\n\t\t\tstate.selectedDate = null;\n\t\t\tstate.selectedDateRange = null;\n\t\t\tstate.isRangeSelectionInProgress = false;\n\t\t\tthis._dispatchChangeEvent();\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if the date is disabled (outside min/max range or explicitly disabled)\n\t\t// We add this check here as a second defense layer beyond the UI checks\n\t\tif (isDateDisabled(date, config)) {\n\t\t\tconsole.log(\n\t\t\t\t'Date is disabled in setSelectedDate, ignoring selection:',\n\t\t\t\tdate.toISOString(),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif (config.range) {\n\t\t\t// Handle range selection\n\t\t\tif (!state.selectedDateRange) {\n\t\t\t\t// Initialize range object if it doesn't exist\n\t\t\t\tstate.selectedDateRange = { startDate: null, endDate: null };\n\t\t\t}\n\n\t\t\t// If start date isn't set or if we're resetting the range, set the start date\n\t\t\tif (\n\t\t\t\t!state.selectedDateRange.startDate ||\n\t\t\t\tstate.isRangeSelectionStart ||\n\t\t\t\tstate.selectedDateRange.endDate\n\t\t\t) {\n\t\t\t\t// Reset the range with a new start date\n\t\t\t\tstate.selectedDateRange.startDate = date;\n\t\t\t\tstate.selectedDateRange.endDate = null;\n\t\t\t\tstate.isRangeSelectionStart = false; // We've selected the start, next will be end\n\n\t\t\t\t// Set the flag to keep dropdown open during range selection\n\t\t\t\tstate.isRangeSelectionInProgress = true;\n\t\t\t\tconsole.log(\n\t\t\t\t\t'Range start selected - setting isRangeSelectionInProgress to true',\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// Set the end date if the start date is already set\n\t\t\t\t// Ensure that start is before end (swap if needed)\n\t\t\t\tif (date < state.selectedDateRange.startDate) {\n\t\t\t\t\t// Swap dates if the selected date is before the start date\n\t\t\t\t\tstate.selectedDateRange.endDate = state.selectedDateRange.startDate;\n\t\t\t\t\tstate.selectedDateRange.startDate = date;\n\t\t\t\t} else {\n\t\t\t\t\tstate.selectedDateRange.endDate = date;\n\t\t\t\t}\n\t\t\t\tstate.isRangeSelectionStart = true; // Reset for next range selection\n\n\t\t\t\t// Clear the flag as range selection is complete\n\t\t\t\tstate.isRangeSelectionInProgress = false;\n\t\t\t\tconsole.log(\n\t\t\t\t\t'Range end selected - setting isRangeSelectionInProgress to false',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// For date range, we still set selectedDate for current focus\n\t\t\tstate.selectedDate = date;\n\n\t\t\t// Trigger event with range data\n\t\t\tthis._dispatchChangeEvent();\n\t\t} else {\n\t\t\t// Single date selection\n\t\t\tstate.selectedDate = date;\n\n\t\t\t// Multi-date selection\n\t\t\tif (config.multiDateSelection) {\n\t\t\t\t// Add or remove the date from the array\n\t\t\t\tconst existingIndex = state.selectedDates.findIndex((d) =>\n\t\t\t\t\tisSameDay(d, date),\n\t\t\t\t);\n\t\t\t\tif (existingIndex !== -1) {\n\t\t\t\t\t// Remove if already selected\n\t\t\t\t\tstate.selectedDates.splice(existingIndex, 1);\n\t\t\t\t} else if (state.selectedDates.length < config.maxDates) {\n\t\t\t\t\t// Add if not exceeding max\n\t\t\t\t\tstate.selectedDates.push(date);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Trigger event with single date data\n\t\t\tthis._dispatchChangeEvent();\n\t\t}\n\t}\n\n\t/**\n\t * Set the current view date (month/year being viewed)\n\t *\n\t * @param date - Date to set as current view\n\t */\n\tpublic setCurrentDate(date: Date): void {\n\t\tthis._state.currentDate = date;\n\t\tthis._dispatchEvent('month-change', {\n\t\t\tmonth: date.getMonth(),\n\t\t\tyear: date.getFullYear(),\n\t\t});\n\t}\n\n\t/**\n\t * Set the selected time\n\t *\n\t * @param time - Time configuration to set\n\t */\n\tpublic setSelectedTime(time: TimeConfigInterface | null): void {\n\t\tthis._state.selectedTime = time;\n\t\tthis._dispatchChangeEvent();\n\t}\n\n\t/**\n\t * Set the view mode (days, months, years)\n\t *\n\t * @param mode - View mode to set\n\t */\n\tpublic setViewMode(mode: 'days' | 'months' | 'years'): void {\n\t\tthis._state.viewMode = mode;\n\t\tthis._dispatchEvent('view-mode-change', { mode });\n\t}\n\n\t/**\n\t * Set the open state of the datepicker\n\t *\n\t * @param isOpen - Whether the datepicker is open\n\t */\n\tpublic setOpen(isOpen: boolean): void {\n\t\tthis._state.isOpen = isOpen;\n\t\tthis._dispatchEvent(isOpen ? 'open' : 'close');\n\n\t\t// Call callback if defined\n\t\tif (isOpen && this._config.onOpen) {\n\t\t\tthis._config.onOpen();\n\t\t} else if (!isOpen && this._config.onClose) {\n\t\t\tthis._config.onClose();\n\t\t}\n\t}\n\n\t/**\n\t * Set the focus state of the datepicker\n\t *\n\t * @param isFocused - Whether the datepicker is focused\n\t */\n\tpublic setFocused(isFocused: boolean): void {\n\t\tthis._state.isFocused = isFocused;\n\t\tthis._dispatchEvent(isFocused ? 'focus' : 'blur');\n\t}\n\n\t/**\n\t * Reset the state to initial values\n\t */\n\tpublic resetState(): void {\n\t\tthis._state = this._initializeState();\n\t\tthis._dispatchEvent('reset');\n\t}\n\n\t/**\n\t * Dispatch change event with current date/time selection\n\t */\n\tprivate _dispatchChangeEvent(): void {\n\t\tlet payload: any = {};\n\n\t\tif (this._config.range && this._state.selectedDateRange) {\n\t\t\tpayload.selectedDateRange = this._state.selectedDateRange;\n\t\t} else if (this._config.multiDateSelection) {\n\t\t\tpayload.selectedDates = [...this._state.selectedDates];\n\t\t} else {\n\t\t\tpayload.selectedDate = this._state.selectedDate;\n\t\t}\n\n\t\tif (this._config.enableTime && this._state.selectedTime) {\n\t\t\tpayload.selectedTime = { ...this._state.selectedTime };\n\t\t}\n\n\t\tthis._events.dispatchDateChangeEvent(payload);\n\n\t\t// Call onChange callback if defined\n\t\tif (this._config.onChange) {\n\t\t\tlet value: Date | null | DateRangeInterface;\n\n\t\t\tif (this._config.range) {\n\t\t\t\tvalue = this._state.selectedDateRange || {\n\t\t\t\t\tstartDate: null,\n\t\t\t\t\tendDate: null,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tvalue = this._state.selectedDate;\n\t\t\t}\n\n\t\t\tthis._config.onChange(value);\n\t\t}\n\t}\n\n\t/**\n\t * Dispatch custom event\n\t *\n\t * @param eventName - Name of the event\n\t * @param payload - Optional payload data\n\t */\n\tprivate _dispatchEvent(eventName: string, payload?: any): void {\n\t\tthis._events.dispatchEvent(eventName, payload);\n\t}\n\n\t/**\n\t * Get the event manager instance\n\t */\n\tpublic getEventManager(): KTDatepickerEventManager {\n\t\treturn this._events;\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTComponent from '../component';\nimport { KTDatepickerCalendar } from './calendar';\nimport { KTDatepickerStateManager } from './config';\nimport { KTDatepickerKeyboard } from './keyboard';\nimport { DateRangeInterface, KTDatepickerConfigInterface } from './types';\nimport { formatDate, parseDate, isValidDate, isDateDisabled } from './utils';\nimport {\n\tdatepickerContainerTemplate,\n\tinputWrapperTemplate,\n\tsegmentedDateInputTemplate,\n\tsegmentedDateRangeInputTemplate,\n\tplaceholderTemplate,\n} from './templates';\nimport { KTDatepickerEventManager, KTDatepickerEventName } from './events';\n\n// Helper function to replace stringToElement\nfunction createElement(html: string): HTMLElement {\n\tconst template = document.createElement('template');\n\ttemplate.innerHTML = html.trim();\n\treturn template.content.firstChild as HTMLElement;\n}\n\n/**\n * KTDatepicker - Main datepicker component class\n * Manages the datepicker functionality and integration with input elements\n */\nexport class KTDatepicker extends KTComponent {\n\tprotected override readonly _name: string = 'datepicker';\n\tprotected override readonly _config: KTDatepickerConfigInterface;\n\n\tprivate _state: KTDatepickerStateManager;\n\tprivate _calendar: KTDatepickerCalendar;\n\tprivate _keyboard: KTDatepickerKeyboard;\n\tprivate _eventManager: KTDatepickerEventManager;\n\n\tprivate _dateInputElement: HTMLInputElement | null = null;\n\tprivate _startDateInputElement: HTMLInputElement | null = null;\n\tprivate _endDateInputElement: HTMLInputElement | null = null;\n\tprivate _displayElement: HTMLElement | null = null;\n\tprivate _useSegmentedDisplay = false;\n\tprivate _displayWrapper: HTMLElement | null = null;\n\tprivate _displayText: HTMLElement | null = null;\n\n\tprivate _currentDate: Date | null = null;\n\tprivate _currentRange: DateRangeInterface | null = null;\n\tprivate _segmentFocused:\n\t\t| 'day'\n\t\t| 'month'\n\t\t| 'year'\n\t\t| 'start-day'\n\t\t| 'start-month'\n\t\t| 'start-year'\n\t\t| 'end-day'\n\t\t| 'end-month'\n\t\t| 'end-year'\n\t\t| null = null;\n\n\t/**\n\t * Constructor for the KTDatepicker class.\n\t */\n\tconstructor(element: HTMLElement, config?: KTDatepickerConfigInterface) {\n\t\tsuper();\n\n\t\t// Check if the element already has a datepicker instance attached to it\n\t\tif (element.getAttribute('data-kt-datepicker-initialized') === 'true') {\n\t\t\treturn;\n\t\t}\n\n\t\t// Initialize the datepicker with the provided element\n\t\tthis._init(element);\n\n\t\t// Build the configuration object by merging the default config with the provided config\n\t\tthis._buildConfig(config);\n\n\t\t// Store the instance of the datepicker directly on the element\n\t\t(element as any).instance = this;\n\n\t\t// Ensure the element is focusable\n\t\tthis._element.setAttribute('tabindex', '0');\n\t\tthis._element.classList.add(\n\t\t\t'kt-datepicker',\n\t\t\t'relative',\n\t\t\t'focus:outline-none',\n\t\t);\n\n\t\t// Mark as initialized\n\t\tthis._element.setAttribute('data-kt-datepicker-initialized', 'true');\n\n\t\t// Find input elements\n\t\tthis._initializeInputElements();\n\n\t\t// Create display element if needed\n\t\tthis._createDisplayElement();\n\n\t\t// Create state manager first\n\t\tthis._state = new KTDatepickerStateManager(this._element, this._config);\n\t\tthis._config = this._state.getConfig();\n\n\t\t// Initialize the calendar and keyboard after creating the state manager\n\t\tthis._calendar = new KTDatepickerCalendar(this._element, this._state);\n\t\tthis._keyboard = new KTDatepickerKeyboard(this._element, this._state);\n\n\t\t// Initialize event manager\n\t\tthis._eventManager = this._state.getEventManager();\n\n\t\t// Set up event listeners\n\t\tthis._setupEventListeners();\n\n\t\t// Initialize with any default values\n\t\tthis._initializeDefaultValues();\n\t}\n\n\t/**\n\t * Initialize input elements\n\t */\n\tprivate _initializeInputElements(): void {\n\t\t// Get main input element - will be hidden\n\t\tthis._dateInputElement = this._element.querySelector(\n\t\t\t'[data-kt-datepicker-input]',\n\t\t);\n\n\t\t// Hide the input element and make it only for data storage\n\t\tif (this._dateInputElement) {\n\t\t\tthis._dateInputElement.classList.add('hidden', 'sr-only');\n\t\t\tthis._dateInputElement.setAttribute('aria-hidden', 'true');\n\t\t\tthis._dateInputElement.tabIndex = -1;\n\t\t}\n\n\t\t// Get range input elements if applicable\n\t\tthis._startDateInputElement = this._element.querySelector(\n\t\t\t'[data-kt-datepicker-start]',\n\t\t);\n\t\tthis._endDateInputElement = this._element.querySelector(\n\t\t\t'[data-kt-datepicker-end]',\n\t\t);\n\n\t\t// Get display element if exists\n\t\tthis._displayElement = this._element.querySelector(\n\t\t\t'[data-kt-datepicker-display]',\n\t\t);\n\n\t\t// Check if we should use segmented display\n\t\tthis._useSegmentedDisplay =\n\t\t\tthis._element.hasAttribute('data-kt-datepicker-segmented') ||\n\t\t\tthis._element.hasAttribute('data-kt-datepicker-segmented-input');\n\t}\n\n\t/**\n\t * Create display element for datepicker\n\t */\n\tprivate _createDisplayElement(): void {\n\t\t// Skip if already created\n\t\tif (this._displayElement) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get format from config or use default\n\t\tconst format = this._config.format || 'mm/dd/yyyy';\n\t\tconst placeholder =\n\t\t\tthis._dateInputElement?.getAttribute('placeholder') || format;\n\n\t\t// Create wrapper for display element\n\t\tthis._displayWrapper = document.createElement('div');\n\t\tthis._displayWrapper.className =\n\t\t\t'kt-datepicker-display-wrapper kt-datepicker-display-segment';\n\t\tthis._displayWrapper.setAttribute('role', 'combobox');\n\t\tthis._displayWrapper.setAttribute('aria-haspopup', 'dialog');\n\t\tthis._displayWrapper.setAttribute('aria-expanded', 'false');\n\t\tthis._element.appendChild(this._displayWrapper);\n\n\t\tif (this._useSegmentedDisplay) {\n\t\t\t// Create segmented display for better date part selection\n\t\t\tconst displayContainer = document.createElement('div');\n\t\t\tdisplayContainer.className = 'kt-datepicker-display-element';\n\t\t\tdisplayContainer.setAttribute('tabindex', '0');\n\t\t\tdisplayContainer.setAttribute('role', 'textbox');\n\t\t\tdisplayContainer.setAttribute('aria-label', placeholder);\n\t\t\tdisplayContainer.setAttribute('data-kt-datepicker-display', '');\n\n\t\t\t// Add segmented template based on range mode\n\t\t\tif (this._config.range) {\n\t\t\t\tdisplayContainer.innerHTML = segmentedDateRangeInputTemplate(\n\t\t\t\t\tthis._config.format || 'mm/dd/yyyy',\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdisplayContainer.innerHTML = segmentedDateInputTemplate(\n\t\t\t\t\tthis._config.format || 'mm/dd/yyyy',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis._displayElement = displayContainer;\n\t\t\tthis._displayWrapper.appendChild(this._displayElement);\n\n\t\t\t// Add click handlers for segments\n\t\t\tconst segments = this._displayElement.querySelectorAll('[data-segment]');\n\t\t\tsegments.forEach((segment) => {\n\t\t\t\tsegment.addEventListener('click', (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tconst segmentType = segment.getAttribute('data-segment');\n\t\t\t\t\tthis._handleSegmentClick(segmentType);\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\t// Create simple display element\n\t\t\tthis._displayElement = document.createElement('div');\n\t\t\tthis._displayElement.className = 'kt-datepicker-display-element';\n\t\t\tthis._displayElement.setAttribute('tabindex', '0');\n\t\t\tthis._displayElement.setAttribute('role', 'textbox');\n\t\t\tthis._displayElement.setAttribute('aria-label', placeholder);\n\t\t\tthis._displayElement.setAttribute('data-placeholder', placeholder);\n\t\t\tthis._displayElement.setAttribute('data-kt-datepicker-display', '');\n\n\t\t\t// Create display text element\n\t\t\tthis._displayText = document.createElement('span');\n\t\t\tthis._displayText.className = 'kt-datepicker-display-text';\n\t\t\tthis._displayText.textContent = placeholder;\n\t\t\tthis._displayText.classList.add('text-gray-400');\n\n\t\t\tthis._displayElement.appendChild(this._displayText);\n\t\t\tthis._displayWrapper.appendChild(this._displayElement);\n\t\t}\n\n\t\t// Add click event to display element\n\t\tthis._displayElement.addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif (!this._state.getState().isOpen) {\n\t\t\t\tthis._state.setOpen(true);\n\t\t\t}\n\t\t});\n\n\t\t// Enhanced keyboard event handling for display element\n\t\tthis._displayElement.addEventListener('keydown', (e) => {\n\t\t\tif (e.key === 'Enter' || e.key === ' ' || e.key === 'ArrowDown') {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\n\t\t\t\t// If not already open, open the dropdown\n\t\t\t\tif (!this._state.getState().isOpen) {\n\t\t\t\t\tthis._state.setOpen(true);\n\n\t\t\t\t\t// Dispatch a custom event to notify about the keyboard open\n\t\t\t\t\tthis._eventManager.dispatchKeyboardOpenEvent();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Handle segment click to focus and open appropriate view\n\t *\n\t * @param segmentType - Type of segment clicked\n\t */\n\tprivate _handleSegmentClick(segmentType: string | null): void {\n\t\tif (!segmentType) return;\n\n\t\t// Store the focused segment\n\t\tthis._segmentFocused = segmentType as any;\n\n\t\t// Remove highlight from all segments\n\t\tthis._removeSegmentHighlights();\n\n\t\t// Add highlight to clicked segment\n\t\tif (this._displayElement) {\n\t\t\tconst segment = this._displayElement.querySelector(\n\t\t\t\t`[data-segment=\"${segmentType}\"]`,\n\t\t\t);\n\t\t\tif (segment) {\n\t\t\t\tsegment.classList.add('kt-datepicker-segment-focused');\n\t\t\t}\n\t\t}\n\n\t\t// Set the appropriate view mode based on segment type\n\t\tif (segmentType.includes('day')) {\n\t\t\t// Day segment - open in days view (default)\n\t\t\tthis._state.setViewMode('days');\n\t\t\tthis._state.setOpen(true);\n\t\t} else if (segmentType.includes('month')) {\n\t\t\t// Month segment - open in months view\n\t\t\tthis._state.setViewMode('months');\n\t\t\tthis._state.setOpen(true);\n\t\t} else if (segmentType.includes('year')) {\n\t\t\t// Year segment - open in years view\n\t\t\tthis._state.setViewMode('years');\n\t\t\tthis._state.setOpen(true);\n\t\t}\n\t}\n\n\t/**\n\t * Set up event listeners\n\t */\n\tprivate _setupEventListeners(): void {\n\t\t// Listen for state changes\n\t\tthis._eventManager.addEventListener(\n\t\t\tKTDatepickerEventName.STATE_CHANGE,\n\t\t\t(e: CustomEvent) => {\n\t\t\t\tconst { state } = e.detail;\n\n\t\t\t\t// Update ARIA attributes based on open state\n\t\t\t\tif (this._displayWrapper) {\n\t\t\t\t\tthis._displayWrapper.setAttribute(\n\t\t\t\t\t\t'aria-expanded',\n\t\t\t\t\t\tstate.isOpen.toString(),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Update display when closing\n\t\t\t\tif (!state.isOpen && state.prevIsOpen) {\n\t\t\t\t\tthis._syncDisplayWithSelectedDate();\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\n\t\t// Set up change event listener to update input values\n\t\tthis._eventManager.addEventListener(\n\t\t\tKTDatepickerEventName.DATE_CHANGE,\n\t\t\tthis._handleDateChange.bind(this),\n\t\t);\n\n\t\t// Add keyboard events to the root element\n\t\tthis._element.addEventListener('keydown', (e) => {\n\t\t\tif (e.key === 'Enter' || e.key === ' ' || e.key === 'ArrowDown') {\n\t\t\t\tconst state = this._state.getState();\n\t\t\t\tif (!state.isOpen) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis._state.setOpen(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Add keyboard navigation for segments\n\t\tif (this._displayElement && this._useSegmentedDisplay) {\n\t\t\tthis._displayElement.addEventListener(\n\t\t\t\t'keydown',\n\t\t\t\tthis._handleSegmentKeydown.bind(this),\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Handle keyboard navigation between segments\n\t *\n\t * @param e - Keyboard event\n\t */\n\tprivate _handleSegmentKeydown(e: KeyboardEvent): void {\n\t\t// Only handle if we have a focused segment\n\t\tif (!this._segmentFocused) return;\n\n\t\tconst target = e.target as HTMLElement;\n\t\tconst segmentType = target.getAttribute('data-segment');\n\t\tif (!segmentType) return;\n\n\t\t// Handle keyboard navigation\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowLeft':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._navigateSegments('prev', segmentType);\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowRight':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._navigateSegments('next', segmentType);\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\t// Let default tab behavior work, but update focus segment when tabbing\n\t\t\t\tthis._segmentFocused = segmentType as any;\n\t\t\t\t// Remove highlight from all segments\n\t\t\t\tthis._removeSegmentHighlights();\n\t\t\t\t// Add highlight to current segment\n\t\t\t\ttarget.classList.add('segment-focused');\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\tcase ' ':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._handleSegmentClick(segmentType);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Navigate between segments with keyboard\n\t *\n\t * @param direction - 'prev' or 'next'\n\t * @param currentSegment - Current segment identifier\n\t */\n\tprivate _navigateSegments(\n\t\tdirection: 'prev' | 'next',\n\t\tcurrentSegment: string,\n\t): void {\n\t\tif (!this._displayElement) return;\n\n\t\t// Define segment order\n\t\tlet segments: string[];\n\t\tif (this._config.range) {\n\t\t\tsegments = [\n\t\t\t\t'start-month',\n\t\t\t\t'start-day',\n\t\t\t\t'start-year',\n\t\t\t\t'end-month',\n\t\t\t\t'end-day',\n\t\t\t\t'end-year',\n\t\t\t];\n\t\t} else {\n\t\t\tsegments = ['month', 'day', 'year'];\n\t\t}\n\n\t\t// Find current index\n\t\tconst currentIndex = segments.indexOf(currentSegment);\n\t\tif (currentIndex === -1) return;\n\n\t\t// Calculate new index\n\t\tlet newIndex;\n\t\tif (direction === 'prev') {\n\t\t\tnewIndex = currentIndex === 0 ? segments.length - 1 : currentIndex - 1;\n\t\t} else {\n\t\t\tnewIndex = currentIndex === segments.length - 1 ? 0 : currentIndex + 1;\n\t\t}\n\n\t\t// Find new segment element\n\t\tconst newSegment = this._displayElement.querySelector(\n\t\t\t`[data-segment=\"${segments[newIndex]}\"]`,\n\t\t) as HTMLElement;\n\t\tif (!newSegment) return;\n\n\t\t// Update focus\n\t\tnewSegment.focus();\n\t\tthis._segmentFocused = segments[newIndex] as any;\n\n\t\t// Remove highlight from all segments\n\t\tthis._removeSegmentHighlights();\n\n\t\t// Add highlight to new segment\n\t\tnewSegment.classList.add('segment-focused');\n\t}\n\n\t/**\n\t * Remove highlight from all segments\n\t */\n\tprivate _removeSegmentHighlights(): void {\n\t\tif (!this._displayElement) return;\n\n\t\tconst segments = this._displayElement.querySelectorAll('.segment-part');\n\t\tsegments.forEach((segment) => {\n\t\t\tsegment.classList.remove('segment-focused');\n\t\t});\n\t}\n\n\t/**\n\t * Sync display element with the selected date\n\t */\n\tprivate _syncDisplayWithSelectedDate(): void {\n\t\tif (!this._displayElement) return;\n\n\t\tconst state = this._state.getState();\n\t\tconst selectedDate = state.selectedDate;\n\t\tconst selectedDateRange = state.selectedDateRange;\n\n\t\tif (this._useSegmentedDisplay) {\n\t\t\t// Update segmented display elements\n\t\t\tif (selectedDate) {\n\t\t\t\t// Single date\n\t\t\t\tconst daySegment = this._displayElement.querySelector(\n\t\t\t\t\t'[data-segment=\"day\"]',\n\t\t\t\t);\n\t\t\t\tconst monthSegment = this._displayElement.querySelector(\n\t\t\t\t\t'[data-segment=\"month\"]',\n\t\t\t\t);\n\t\t\t\tconst yearSegment = this._displayElement.querySelector(\n\t\t\t\t\t'[data-segment=\"year\"]',\n\t\t\t\t);\n\n\t\t\t\tif (daySegment) {\n\t\t\t\t\tdaySegment.textContent = selectedDate\n\t\t\t\t\t\t.getDate()\n\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t.padStart(2, '0');\n\t\t\t\t}\n\t\t\t\tif (monthSegment) {\n\t\t\t\t\tmonthSegment.textContent = (selectedDate.getMonth() + 1)\n\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t.padStart(2, '0');\n\t\t\t\t}\n\t\t\t\tif (yearSegment) {\n\t\t\t\t\tyearSegment.textContent = selectedDate.getFullYear().toString();\n\t\t\t\t}\n\t\t\t} else if (selectedDateRange && selectedDateRange.startDate) {\n\t\t\t\t// Range selection\n\t\t\t\tconst startDay = this._displayElement.querySelector(\n\t\t\t\t\t'[data-segment=\"start-day\"]',\n\t\t\t\t);\n\t\t\t\tconst startMonth = this._displayElement.querySelector(\n\t\t\t\t\t'[data-segment=\"start-month\"]',\n\t\t\t\t);\n\t\t\t\tconst startYear = this._displayElement.querySelector(\n\t\t\t\t\t'[data-segment=\"start-year\"]',\n\t\t\t\t);\n\n\t\t\t\tif (startDay) {\n\t\t\t\t\tstartDay.textContent = selectedDateRange.startDate\n\t\t\t\t\t\t.getDate()\n\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t.padStart(2, '0');\n\t\t\t\t}\n\t\t\t\tif (startMonth) {\n\t\t\t\t\tstartMonth.textContent = (selectedDateRange.startDate.getMonth() + 1)\n\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t.padStart(2, '0');\n\t\t\t\t}\n\t\t\t\tif (startYear) {\n\t\t\t\t\tstartYear.textContent = selectedDateRange.startDate\n\t\t\t\t\t\t.getFullYear()\n\t\t\t\t\t\t.toString();\n\t\t\t\t}\n\n\t\t\t\tif (selectedDateRange.endDate) {\n\t\t\t\t\tconst endDay = this._displayElement.querySelector(\n\t\t\t\t\t\t'[data-segment=\"end-day\"]',\n\t\t\t\t\t);\n\t\t\t\t\tconst endMonth = this._displayElement.querySelector(\n\t\t\t\t\t\t'[data-segment=\"end-month\"]',\n\t\t\t\t\t);\n\t\t\t\t\tconst endYear = this._displayElement.querySelector(\n\t\t\t\t\t\t'[data-segment=\"end-year\"]',\n\t\t\t\t\t);\n\n\t\t\t\t\tif (endDay) {\n\t\t\t\t\t\tendDay.textContent = selectedDateRange.endDate\n\t\t\t\t\t\t\t.getDate()\n\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t.padStart(2, '0');\n\t\t\t\t\t}\n\t\t\t\t\tif (endMonth) {\n\t\t\t\t\t\tendMonth.textContent = (selectedDateRange.endDate.getMonth() + 1)\n\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t.padStart(2, '0');\n\t\t\t\t\t}\n\t\t\t\t\tif (endYear) {\n\t\t\t\t\t\tendYear.textContent = selectedDateRange.endDate\n\t\t\t\t\t\t\t.getFullYear()\n\t\t\t\t\t\t\t.toString();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this._displayText) {\n\t\t\t// Simple display\n\t\t\tif (selectedDate) {\n\t\t\t\t// Clear placeholder styling\n\t\t\t\tthis._displayText.classList.remove('placeholder');\n\n\t\t\t\t// Format date(s) based on config\n\t\t\t\tif (\n\t\t\t\t\tthis._config.range &&\n\t\t\t\t\tselectedDateRange &&\n\t\t\t\t\tselectedDateRange.startDate &&\n\t\t\t\t\tselectedDateRange.endDate\n\t\t\t\t) {\n\t\t\t\t\tthis._displayText.textContent = `${formatDate(\n\t\t\t\t\t\tselectedDateRange.startDate,\n\t\t\t\t\t\tthis._config.format,\n\t\t\t\t\t\tthis._config,\n\t\t\t\t\t)} - ${formatDate(\n\t\t\t\t\t\tselectedDateRange.endDate,\n\t\t\t\t\t\tthis._config.format,\n\t\t\t\t\t\tthis._config,\n\t\t\t\t\t)}`;\n\t\t\t\t} else {\n\t\t\t\t\tthis._displayText.textContent = formatDate(\n\t\t\t\t\t\tselectedDate,\n\t\t\t\t\t\tthis._config.format,\n\t\t\t\t\t\tthis._config,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// No date selected, show format as placeholder\n\t\t\t\tconst placeholder =\n\t\t\t\t\tthis._displayElement?.getAttribute('data-placeholder') ||\n\t\t\t\t\tthis._config.format;\n\t\t\t\tthis._displayText.textContent = placeholder;\n\t\t\t\tthis._displayText.classList.add('placeholder');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handle date change events\n\t *\n\t * @param e - Custom event with date change details\n\t */\n\tprivate _handleDateChange(e: CustomEvent): void {\n\t\tconst detail = e.detail?.payload;\n\t\tif (!detail) return;\n\n\t\t// Handle single date selection\n\t\tif (detail.selectedDate) {\n\t\t\tconst formattedDate = formatDate(\n\t\t\t\tdetail.selectedDate,\n\t\t\t\tthis._config.format,\n\t\t\t\tthis._config,\n\t\t\t);\n\n\t\t\t// Update hidden input value\n\t\t\tif (this._dateInputElement) {\n\t\t\t\tthis._dateInputElement.value = formattedDate;\n\t\t\t\t// Dispatch change event on input to trigger form validation\n\t\t\t\tthis._dateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Update display element\n\t\t\tthis._updateDisplayElement(detail.selectedDate);\n\t\t}\n\n\t\t// Handle date range selection\n\t\tif (detail.selectedDateRange && this._config.range) {\n\t\t\tconst { startDate, endDate } = detail.selectedDateRange;\n\n\t\t\t// Format the range for the hidden input\n\t\t\tif (this._dateInputElement) {\n\t\t\t\tlet displayValue = '';\n\n\t\t\t\tif (startDate) {\n\t\t\t\t\tdisplayValue = formatDate(\n\t\t\t\t\t\tstartDate,\n\t\t\t\t\t\tthis._config.format,\n\t\t\t\t\t\tthis._config,\n\t\t\t\t\t);\n\n\t\t\t\t\tif (endDate) {\n\t\t\t\t\t\tconst endFormatted = formatDate(\n\t\t\t\t\t\t\tendDate,\n\t\t\t\t\t\t\tthis._config.format,\n\t\t\t\t\t\t\tthis._config,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdisplayValue += `${this._config.rangeSeparator}${endFormatted}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._dateInputElement.value = displayValue;\n\t\t\t\t// Dispatch change event on input\n\t\t\t\tthis._dateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Update individual start/end inputs if they exist\n\t\t\tif (this._startDateInputElement && startDate) {\n\t\t\t\tthis._startDateInputElement.value = formatDate(\n\t\t\t\t\tstartDate,\n\t\t\t\t\tthis._config.format,\n\t\t\t\t\tthis._config,\n\t\t\t\t);\n\t\t\t\tthis._startDateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this._endDateInputElement && endDate) {\n\t\t\t\tthis._endDateInputElement.value = formatDate(\n\t\t\t\t\tendDate,\n\t\t\t\t\tthis._config.format,\n\t\t\t\t\tthis._config,\n\t\t\t\t);\n\t\t\t\tthis._endDateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Update display element for range\n\t\t\tthis._updateRangeDisplayElement(startDate, endDate);\n\t\t}\n\t}\n\n\t/**\n\t * Update the display element for a single date\n\t *\n\t * @param date - The date to display\n\t */\n\tprivate _updateDisplayElement(date: Date | null): void {\n\t\tif (!this._displayElement) return;\n\n\t\tif (!date) {\n\t\t\t// If no date, show placeholder\n\t\t\tconst placeholder =\n\t\t\t\tthis._dateInputElement?.getAttribute('placeholder') || 'Select date';\n\t\t\tthis._displayElement.innerHTML = placeholderTemplate(placeholder);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._useSegmentedDisplay) {\n\t\t\t// Update segmented display\n\t\t\tconst day = date.getDate();\n\t\t\tconst month = date.getMonth() + 1;\n\t\t\tconst year = date.getFullYear();\n\n\t\t\tconst daySegment = this._displayElement.querySelector(\n\t\t\t\t'[data-segment=\"day\"]',\n\t\t\t);\n\t\t\tconst monthSegment = this._displayElement.querySelector(\n\t\t\t\t'[data-segment=\"month\"]',\n\t\t\t);\n\t\t\tconst yearSegment = this._displayElement.querySelector(\n\t\t\t\t'[data-segment=\"year\"]',\n\t\t\t);\n\n\t\t\tif (daySegment) daySegment.textContent = day < 10 ? `0${day}` : `${day}`;\n\t\t\tif (monthSegment)\n\t\t\t\tmonthSegment.textContent = month < 10 ? `0${month}` : `${month}`;\n\t\t\tif (yearSegment) yearSegment.textContent = `${year}`;\n\t\t} else {\n\t\t\t// Simple display\n\t\t\tthis._displayElement.textContent = formatDate(\n\t\t\t\tdate,\n\t\t\t\tthis._config.format,\n\t\t\t\tthis._config,\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Update the display element for a date range\n\t *\n\t * @param startDate - The start date of the range\n\t * @param endDate - The end date of the range\n\t */\n\tprivate _updateRangeDisplayElement(\n\t\tstartDate: Date | null,\n\t\tendDate: Date | null,\n\t): void {\n\t\tif (!this._displayElement) return;\n\n\t\tif (!startDate) {\n\t\t\t// If no date, show placeholder\n\t\t\tconst placeholder =\n\t\t\t\tthis._dateInputElement?.getAttribute('placeholder') ||\n\t\t\t\t'Select date range';\n\t\t\tthis._displayElement.innerHTML = placeholderTemplate(placeholder);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._useSegmentedDisplay) {\n\t\t\t// Update segmented range display\n\t\t\t// Start date segments\n\t\t\tconst startDay = this._displayElement.querySelector(\n\t\t\t\t'[data-segment=\"start-day\"]',\n\t\t\t);\n\t\t\tconst startMonth = this._displayElement.querySelector(\n\t\t\t\t'[data-segment=\"start-month\"]',\n\t\t\t);\n\t\t\tconst startYear = this._displayElement.querySelector(\n\t\t\t\t'[data-segment=\"start-year\"]',\n\t\t\t);\n\n\t\t\tif (startDay)\n\t\t\t\tstartDay.textContent =\n\t\t\t\t\tstartDate.getDate() < 10\n\t\t\t\t\t\t? `0${startDate.getDate()}`\n\t\t\t\t\t\t: `${startDate.getDate()}`;\n\t\t\tif (startMonth)\n\t\t\t\tstartMonth.textContent =\n\t\t\t\t\tstartDate.getMonth() + 1 < 10\n\t\t\t\t\t\t? `0${startDate.getMonth() + 1}`\n\t\t\t\t\t\t: `${startDate.getMonth() + 1}`;\n\t\t\tif (startYear) startYear.textContent = `${startDate.getFullYear()}`;\n\n\t\t\t// End date segments\n\t\t\tif (endDate) {\n\t\t\t\tconst endDay = this._displayElement.querySelector(\n\t\t\t\t\t'[data-segment=\"end-day\"]',\n\t\t\t\t);\n\t\t\t\tconst endMonth = this._displayElement.querySelector(\n\t\t\t\t\t'[data-segment=\"end-month\"]',\n\t\t\t\t);\n\t\t\t\tconst endYear = this._displayElement.querySelector(\n\t\t\t\t\t'[data-segment=\"end-year\"]',\n\t\t\t\t);\n\n\t\t\t\tif (endDay)\n\t\t\t\t\tendDay.textContent =\n\t\t\t\t\t\tendDate.getDate() < 10\n\t\t\t\t\t\t\t? `0${endDate.getDate()}`\n\t\t\t\t\t\t\t: `${endDate.getDate()}`;\n\t\t\t\tif (endMonth)\n\t\t\t\t\tendMonth.textContent =\n\t\t\t\t\t\tendDate.getMonth() + 1 < 10\n\t\t\t\t\t\t\t? `0${endDate.getMonth() + 1}`\n\t\t\t\t\t\t\t: `${endDate.getMonth() + 1}`;\n\t\t\t\tif (endYear) endYear.textContent = `${endDate.getFullYear()}`;\n\t\t\t}\n\t\t} else {\n\t\t\t// Simple display\n\t\t\tlet displayText = formatDate(\n\t\t\t\tstartDate,\n\t\t\t\tthis._config.format,\n\t\t\t\tthis._config,\n\t\t\t);\n\n\t\t\tif (endDate) {\n\t\t\t\tconst endFormatted = formatDate(\n\t\t\t\t\tendDate,\n\t\t\t\t\tthis._config.format,\n\t\t\t\t\tthis._config,\n\t\t\t\t);\n\t\t\t\tdisplayText += `${this._config.rangeSeparator}${endFormatted}`;\n\t\t\t}\n\n\t\t\tthis._displayElement.textContent = displayText;\n\t\t}\n\t}\n\n\t/**\n\t * Handle input change events\n\t *\n\t * @param e - Input change event\n\t */\n\tprivate _handleInputChange(e: Event): void {\n\t\tconst input = e.target as HTMLInputElement;\n\t\tconst inputValue = input.value.trim();\n\n\t\tif (!inputValue) {\n\t\t\t// Clear selection if input is empty\n\t\t\tthis._state.setSelectedDate(null);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._config.range) {\n\t\t\t// Handle range input\n\t\t\tconst rangeParts = inputValue.split(this._config.rangeSeparator);\n\n\t\t\tif (rangeParts.length === 2) {\n\t\t\t\tconst startDate = parseDate(\n\t\t\t\t\trangeParts[0].trim(),\n\t\t\t\t\tthis._config.format,\n\t\t\t\t\tthis._config,\n\t\t\t\t);\n\t\t\t\tconst endDate = parseDate(\n\t\t\t\t\trangeParts[1].trim(),\n\t\t\t\t\tthis._config.format,\n\t\t\t\t\tthis._config,\n\t\t\t\t);\n\n\t\t\t\t// Validate dates are within min/max constraints\n\t\t\t\tif (startDate && isDateDisabled(startDate, this._config)) {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'Start date from input is outside allowed range:',\n\t\t\t\t\t\tstartDate.toISOString(),\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (endDate && isDateDisabled(endDate, this._config)) {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'End date from input is outside allowed range:',\n\t\t\t\t\t\tendDate.toISOString(),\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (startDate && endDate) {\n\t\t\t\t\tthis.setDateRange(startDate, endDate);\n\t\t\t\t}\n\t\t\t} else if (rangeParts.length === 1) {\n\t\t\t\tconst singleDate = parseDate(\n\t\t\t\t\trangeParts[0].trim(),\n\t\t\t\t\tthis._config.format,\n\t\t\t\t\tthis._config,\n\t\t\t\t);\n\n\t\t\t\t// Validate date is within min/max constraints\n\t\t\t\tif (singleDate && isDateDisabled(singleDate, this._config)) {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'Date from input is outside allowed range:',\n\t\t\t\t\t\tsingleDate.toISOString(),\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (singleDate) {\n\t\t\t\t\tthis.setDateRange(singleDate, null);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// Handle single date input\n\t\t\tconst parsedDate = parseDate(\n\t\t\t\tinputValue,\n\t\t\t\tthis._config.format,\n\t\t\t\tthis._config,\n\t\t\t);\n\n\t\t\t// Validate date is within min/max constraints\n\t\t\tif (parsedDate && isDateDisabled(parsedDate, this._config)) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'Date from input is outside allowed range:',\n\t\t\t\t\tparsedDate.toISOString(),\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (parsedDate) {\n\t\t\t\tthis.setDate(parsedDate);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Initialize with default values from input\n\t */\n\tprivate _initializeDefaultValues(): void {\n\t\t// Set min and max dates from attributes if they exist\n\t\tconst minDateAttr = this._element.getAttribute(\n\t\t\t'data-kt-datepicker-min-date',\n\t\t);\n\t\tconst maxDateAttr = this._element.getAttribute(\n\t\t\t'data-kt-datepicker-max-date',\n\t\t);\n\n\t\tif (minDateAttr) {\n\t\t\tconst minDate = parseDate(minDateAttr, this._config.format, this._config);\n\t\t\tif (minDate) {\n\t\t\t\tthis.setMinDate(minDate);\n\t\t\t}\n\t\t}\n\n\t\tif (maxDateAttr) {\n\t\t\tconst maxDate = parseDate(maxDateAttr, this._config.format, this._config);\n\t\t\tif (maxDate) {\n\t\t\t\tthis.setMaxDate(maxDate);\n\t\t\t}\n\t\t}\n\n\t\t// Check for default value in main input\n\t\tif (this._dateInputElement && this._dateInputElement.value) {\n\t\t\tthis._handleInputChange({\n\t\t\t\ttarget: this._dateInputElement,\n\t\t\t} as unknown as Event);\n\t\t}\n\t\t// Check for default values in range inputs\n\t\telse if (\n\t\t\tthis._config.range &&\n\t\t\tthis._startDateInputElement &&\n\t\t\tthis._startDateInputElement.value\n\t\t) {\n\t\t\tconst startDate = parseDate(\n\t\t\t\tthis._startDateInputElement.value,\n\t\t\t\tthis._config.format,\n\t\t\t\tthis._config,\n\t\t\t);\n\t\t\tlet endDate = null;\n\n\t\t\tif (this._endDateInputElement && this._endDateInputElement.value) {\n\t\t\t\tendDate = parseDate(\n\t\t\t\t\tthis._endDateInputElement.value,\n\t\t\t\t\tthis._config.format,\n\t\t\t\t\tthis._config,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (startDate) {\n\t\t\t\tthis.setDateRange(startDate, endDate);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * ========================================================================\n\t * Public API\n\t * ========================================================================\n\t */\n\n\t/**\n\t * Get the currently selected date\n\t *\n\t * @returns Selected date, null if no selection, or date range object\n\t */\n\tpublic getDate(): Date | null | DateRangeInterface {\n\t\tconst state = this._state.getState();\n\t\tconst config = this._state.getConfig();\n\n\t\tif (config.range) {\n\t\t\treturn state.selectedDateRange || { startDate: null, endDate: null };\n\t\t} else {\n\t\t\treturn state.selectedDate;\n\t\t}\n\t}\n\n\t/**\n\t * Set the selected date\n\t *\n\t * @param date - Date to select or null to clear selection\n\t */\n\tpublic setDate(date: Date | null): void {\n\t\t// Skip if the date is disabled (outside min/max range)\n\t\tif (date && isDateDisabled(date, this._config)) {\n\t\t\tconsole.log(\n\t\t\t\t'Date is disabled in setDate, ignoring selection:',\n\t\t\t\tdate.toISOString(),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._state.setSelectedDate(date);\n\n\t\tif (date) {\n\t\t\tthis._state.setCurrentDate(date);\n\t\t}\n\n\t\t// Update the display\n\t\tthis._updateDisplayElement(date);\n\n\t\t// Update hidden input\n\t\tif (this._dateInputElement && date) {\n\t\t\tthis._dateInputElement.value = formatDate(\n\t\t\t\tdate,\n\t\t\t\tthis._config.format,\n\t\t\t\tthis._config,\n\t\t\t);\n\t\t\tthis._dateInputElement.dispatchEvent(\n\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t);\n\t\t} else if (this._dateInputElement) {\n\t\t\tthis._dateInputElement.value = '';\n\t\t\tthis._dateInputElement.dispatchEvent(\n\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Get the currently selected date range\n\t *\n\t * @returns Selected date range or null if no selection\n\t */\n\tpublic getDateRange(): DateRangeInterface | null {\n\t\tconst state = this._state.getState();\n\t\treturn state.selectedDateRange;\n\t}\n\n\t/**\n\t * Set the selected date range\n\t *\n\t * @param start - Start date of the range\n\t * @param end - End date of the range\n\t */\n\tpublic setDateRange(start: Date | null, end: Date | null): void {\n\t\tconst state = this._state.getState();\n\n\t\t// Ensure we're in range mode\n\t\tif (!this._config.range) {\n\t\t\tconsole.warn('Cannot set date range when range mode is disabled');\n\t\t\treturn;\n\t\t}\n\n\t\t// Validate start and end dates are within min/max range\n\t\tif (start && isDateDisabled(start, this._config)) {\n\t\t\tconsole.log(\n\t\t\t\t'Start date is disabled in setDateRange, ignoring selection:',\n\t\t\t\tstart.toISOString(),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif (end && isDateDisabled(end, this._config)) {\n\t\t\tconsole.log(\n\t\t\t\t'End date is disabled in setDateRange, ignoring selection:',\n\t\t\t\tend.toISOString(),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Reset range selection state\n\t\tthis._state.getState().isRangeSelectionStart = true;\n\n\t\t// Set start date\n\t\tif (start) {\n\t\t\tif (!state.selectedDateRange) {\n\t\t\t\tstate.selectedDateRange = { startDate: null, endDate: null };\n\t\t\t}\n\n\t\t\tstate.selectedDateRange.startDate = start;\n\t\t\tthis._state.setCurrentDate(start);\n\n\t\t\t// Set end date if provided\n\t\t\tif (end) {\n\t\t\t\tstate.selectedDateRange.endDate = end;\n\t\t\t} else {\n\t\t\t\tstate.selectedDateRange.endDate = null;\n\t\t\t}\n\n\t\t\t// Update display element\n\t\t\tthis._updateRangeDisplayElement(start, end);\n\n\t\t\t// Update hidden inputs\n\t\t\tif (this._dateInputElement) {\n\t\t\t\tlet inputValue = formatDate(start, this._config.format, this._config);\n\t\t\t\tif (end) {\n\t\t\t\t\tinputValue += `${this._config.rangeSeparator}${formatDate(\n\t\t\t\t\t\tend,\n\t\t\t\t\t\tthis._config.format,\n\t\t\t\t\t\tthis._config,\n\t\t\t\t\t)}`;\n\t\t\t\t}\n\t\t\t\tthis._dateInputElement.value = inputValue;\n\t\t\t\tthis._dateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this._startDateInputElement) {\n\t\t\t\tthis._startDateInputElement.value = formatDate(\n\t\t\t\t\tstart,\n\t\t\t\t\tthis._config.format,\n\t\t\t\t\tthis._config,\n\t\t\t\t);\n\t\t\t\tthis._startDateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this._endDateInputElement && end) {\n\t\t\t\tthis._endDateInputElement.value = formatDate(\n\t\t\t\t\tend,\n\t\t\t\t\tthis._config.format,\n\t\t\t\t\tthis._config,\n\t\t\t\t);\n\t\t\t\tthis._endDateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t} else if (this._endDateInputElement) {\n\t\t\t\tthis._endDateInputElement.value = '';\n\t\t\t}\n\n\t\t\t// Dispatch change event\n\t\t\tthis._eventManager.dispatchEvent(KTDatepickerEventName.DATE_CHANGE, {\n\t\t\t\tselectedDateRange: state.selectedDateRange,\n\t\t\t});\n\t\t} else {\n\t\t\t// Clear selection\n\t\t\tthis._state.getState().selectedDateRange = null;\n\n\t\t\t// Clear display\n\t\t\tif (this._displayElement) {\n\t\t\t\tconst placeholder =\n\t\t\t\t\tthis._dateInputElement?.getAttribute('placeholder') ||\n\t\t\t\t\t'Select date range';\n\t\t\t\tthis._displayElement.innerHTML = placeholderTemplate(placeholder);\n\t\t\t}\n\n\t\t\t// Clear inputs\n\t\t\tif (this._dateInputElement) {\n\t\t\t\tthis._dateInputElement.value = '';\n\t\t\t\tthis._dateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this._startDateInputElement) {\n\t\t\t\tthis._startDateInputElement.value = '';\n\t\t\t\tthis._startDateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this._endDateInputElement) {\n\t\t\t\tthis._endDateInputElement.value = '';\n\t\t\t\tthis._endDateInputElement.dispatchEvent(\n\t\t\t\t\tnew Event('change', { bubbles: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis._eventManager.dispatchEvent(KTDatepickerEventName.DATE_CHANGE, {\n\t\t\t\tselectedDateRange: null,\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Set the minimum selectable date\n\t *\n\t * @param minDate - Minimum date or null to remove constraint\n\t */\n\tpublic setMinDate(minDate: Date | null): void {\n\t\tthis._config.minDate = minDate;\n\n\t\t// Refresh calendar view to apply new constraints\n\t\tthis._eventManager.dispatchEvent(KTDatepickerEventName.UPDATE);\n\t}\n\n\t/**\n\t * Set the maximum selectable date\n\t *\n\t * @param maxDate - Maximum date or null to remove constraint\n\t */\n\tpublic setMaxDate(maxDate: Date | null): void {\n\t\tthis._config.maxDate = maxDate;\n\n\t\t// Refresh calendar view to apply new constraints\n\t\tthis._eventManager.dispatchEvent(KTDatepickerEventName.UPDATE);\n\t}\n\n\t/**\n\t * Update the datepicker (refresh view)\n\t */\n\tpublic update(): void {\n\t\t// Trigger calendar update through events\n\t\tthis._eventManager.dispatchEvent(KTDatepickerEventName.UPDATE);\n\t}\n\n\t/**\n\t * Destroy the datepicker instance and clean up\n\t */\n\tpublic destroy(): void {\n\t\t// Remove event listeners\n\t\tthis._eventManager.removeEventListener(\n\t\t\tKTDatepickerEventName.DATE_CHANGE,\n\t\t\tthis._handleDateChange.bind(this),\n\t\t);\n\n\t\tif (this._dateInputElement) {\n\t\t\tthis._dateInputElement.removeEventListener(\n\t\t\t\t'change',\n\t\t\t\tthis._handleInputChange.bind(this),\n\t\t\t);\n\t\t}\n\n\t\tif (this._displayElement) {\n\t\t\tthis._displayElement.remove();\n\t\t}\n\n\t\t// Remove instance from element\n\t\tthis._element.removeAttribute('data-kt-datepicker-initialized');\n\t\tdelete (this._element as any).instance;\n\n\t\t// Remove initialized class\n\t\tthis._element.classList.remove('relative');\n\n\t\t// Remove from instances map\n\t\tKTDatepicker._instances.delete(this._element);\n\t}\n\n\t/**\n\t * Dispatch a custom event\n\t *\n\t * @param eventName - Name of the event\n\t * @param payload - Optional event payload\n\t */\n\tprotected _dispatchEvent(eventName: string, payload?: any): void {\n\t\tthis._eventManager.dispatchEvent(eventName, payload);\n\t}\n\n\t/**\n\t * ========================================================================\n\t * Static instances\n\t * ========================================================================\n\t */\n\n\tprivate static readonly _instances = new Map<HTMLElement, KTDatepicker>();\n\n\t/**\n\t * Create instances for all datepicker elements on the page\n\t */\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll<HTMLElement>(\n\t\t\t'[data-kt-datepicker]',\n\t\t);\n\n\t\telements.forEach((element) => {\n\t\t\tif (\n\t\t\t\telement.hasAttribute('data-kt-datepicker') &&\n\t\t\t\t!element.getAttribute('data-kt-datepicker-initialized')\n\t\t\t) {\n\t\t\t\t// Create instance\n\t\t\t\tconst instance = new KTDatepicker(element);\n\t\t\t\tthis._instances.set(element, instance);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Initialize all datepickers on the page\n\t */\n\tpublic static init(): void {\n\t\tKTDatepicker.createInstances();\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport {\n\tInstance as PopperInstance,\n\tcreatePopper,\n\tPlacement,\n} from '@popperjs/core';\nimport KTDom from '../../helpers/dom';\nimport KTData from '../../helpers/data';\nimport KTComponent from '../component';\nimport { KTDatepickerConfigInterface } from './types';\nimport { KTDatepickerStateManager } from './config';\nimport { KTDatepickerEvents } from './types';\n\n/**\n * Class to manage focus within the dropdown\n */\nclass FocusManager {\n\tprivate _element: HTMLElement;\n\tprivate _focusableSelector: string =\n\t\t'button:not([disabled]), [tabindex]:not([tabindex=\"-1\"])';\n\n\tconstructor(element: HTMLElement) {\n\t\tthis._element = element;\n\t}\n\n\t/**\n\t * Get all visible focusable options\n\t */\n\tpublic getVisibleOptions(): HTMLElement[] {\n\t\treturn Array.from(\n\t\t\tthis._element.querySelectorAll(this._focusableSelector),\n\t\t).filter((el) => {\n\t\t\tconst element = el as HTMLElement;\n\t\t\treturn element.offsetParent !== null; // Only visible elements\n\t\t}) as HTMLElement[];\n\t}\n\n\t/**\n\t * Apply focus to an element\n\t */\n\tpublic applyFocus(element: HTMLElement): void {\n\t\tif (element && typeof element.focus === 'function') {\n\t\t\telement.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Focus next element\n\t */\n\tpublic focusNext(): void {\n\t\tconst options = this.getVisibleOptions();\n\t\tconst currentFocused = document.activeElement;\n\n\t\tlet nextIndex = 0;\n\t\tif (currentFocused) {\n\t\t\tconst currentIndex = options.indexOf(currentFocused as HTMLElement);\n\t\t\tnextIndex = currentIndex >= 0 ? (currentIndex + 1) % options.length : 0;\n\t\t}\n\n\t\tif (options.length > 0) {\n\t\t\tthis.applyFocus(options[nextIndex]);\n\t\t}\n\t}\n\n\t/**\n\t * Focus previous element\n\t */\n\tpublic focusPrevious(): void {\n\t\tconst options = this.getVisibleOptions();\n\t\tconst currentFocused = document.activeElement;\n\n\t\tlet prevIndex = options.length - 1;\n\t\tif (currentFocused) {\n\t\t\tconst currentIndex = options.indexOf(currentFocused as HTMLElement);\n\t\t\tprevIndex =\n\t\t\t\tcurrentIndex >= 0\n\t\t\t\t\t? (currentIndex - 1 + options.length) % options.length\n\t\t\t\t\t: prevIndex;\n\t\t}\n\n\t\tif (options.length > 0) {\n\t\t\tthis.applyFocus(options[prevIndex]);\n\t\t}\n\t}\n\n\t/**\n\t * Scroll element into view\n\t */\n\tpublic scrollIntoView(element: HTMLElement): void {\n\t\tif (element && typeof element.scrollIntoView === 'function') {\n\t\t\telement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n\t\t}\n\t}\n\n\t/**\n\t * Clean up resources\n\t */\n\tpublic dispose(): void {\n\t\t// Nothing to clean up yet\n\t}\n}\n\n/**\n * Class to manage event listeners\n */\nclass EventManager {\n\tprivate _listeners: Map<HTMLElement, Map<string, Function[]>> = new Map();\n\n\t/**\n\t * Add event listener and track it\n\t */\n\tpublic addListener(\n\t\telement: HTMLElement,\n\t\teventType: string,\n\t\thandler: Function,\n\t): void {\n\t\tif (!this._listeners.has(element)) {\n\t\t\tthis._listeners.set(element, new Map());\n\t\t}\n\n\t\tconst elementListeners = this._listeners.get(element)!;\n\t\tif (!elementListeners.has(eventType)) {\n\t\t\telementListeners.set(eventType, []);\n\t\t}\n\n\t\tconst handlers = elementListeners.get(eventType)!;\n\t\telement.addEventListener(eventType, handler as EventListener);\n\t\thandlers.push(handler);\n\t}\n\n\t/**\n\t * Remove all listeners for an element\n\t */\n\tpublic removeAllListeners(element: HTMLElement): void {\n\t\tif (this._listeners.has(element)) {\n\t\t\tconst elementListeners = this._listeners.get(element)!;\n\n\t\t\telementListeners.forEach((handlers, eventType) => {\n\t\t\t\thandlers.forEach((handler) => {\n\t\t\t\t\telement.removeEventListener(eventType, handler as EventListener);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis._listeners.delete(element);\n\t\t}\n\t}\n}\n\n/**\n * Focus trap class to manage keyboard focus within the dropdown\n */\nclass FocusTrap {\n\tprivate _element: HTMLElement;\n\tprivate _focusableElements: HTMLElement[] = [];\n\tprivate _firstFocusableElement: HTMLElement | null = null;\n\tprivate _lastFocusableElement: HTMLElement | null = null;\n\n\t/**\n\t * Constructor\n\t *\n\t * @param element - Element to trap focus within\n\t */\n\tconstructor(element: HTMLElement) {\n\t\tthis._element = element;\n\t\tthis._update();\n\t}\n\n\t/**\n\t * Update the focusable elements\n\t */\n\tpublic update(): void {\n\t\tthis._update();\n\t}\n\n\t/**\n\t * Update the list of focusable elements\n\t */\n\tprivate _update(): void {\n\t\t// Get all focusable elements\n\t\tconst focusableElements = this._element.querySelectorAll(\n\t\t\t'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])',\n\t\t);\n\n\t\t// Convert to array and filter out disabled elements\n\t\tthis._focusableElements = Array.from(focusableElements).filter(\n\t\t\t(el) => !el.hasAttribute('disabled'),\n\t\t) as HTMLElement[];\n\n\t\t// Get first and last focusable elements\n\t\tthis._firstFocusableElement = this._focusableElements[0] || null;\n\t\tthis._lastFocusableElement =\n\t\t\tthis._focusableElements[this._focusableElements.length - 1] || null;\n\t}\n\n\t/**\n\t * Handle tab key press to trap focus\n\t *\n\t * @param event - Keyboard event\n\t */\n\tpublic handleTab(event: KeyboardEvent): void {\n\t\t// If no focusable elements, do nothing\n\t\tif (!this._firstFocusableElement || !this._lastFocusableElement) {\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tconst isTabPressed = event.key === 'Tab' || event.keyCode === 9;\n\n\t\tif (!isTabPressed) return;\n\n\t\t// Handle Shift+Tab to focus last element when on first\n\t\tif (event.shiftKey) {\n\t\t\tif (document.activeElement === this._firstFocusableElement) {\n\t\t\t\tthis._lastFocusableElement.focus();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t} else {\n\t\t\t// Handle Tab to focus first element when on last\n\t\t\tif (document.activeElement === this._lastFocusableElement) {\n\t\t\t\tthis._firstFocusableElement.focus();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Focus the first interactive element\n\t */\n\tpublic focusFirstElement(): void {\n\t\tif (this._firstFocusableElement) {\n\t\t\tthis._firstFocusableElement.focus();\n\t\t}\n\t}\n}\n\n/**\n * KTDatepickerDropdown\n *\n * A specialized dropdown implementation for the KTDatepicker component.\n * This module handles the dropdown functionality for the datepicker component,\n * including positioning, showing/hiding, and keyboard navigation.\n */\nexport class KTDatepickerDropdown extends KTComponent {\n\tprotected override readonly _name: string = 'datepicker-dropdown';\n\tprotected override readonly _config: KTDatepickerConfigInterface;\n\n\t// DOM Elements\n\tprotected _element: HTMLElement;\n\tprivate _toggleElement: HTMLElement;\n\tprivate _dropdownElement: HTMLElement;\n\n\t// State\n\tprivate _isOpen: boolean = false;\n\tprivate _isTransitioning: boolean = false;\n\tprivate _popperInstance: PopperInstance | null = null;\n\tprivate _eventManager: EventManager;\n\tprivate _focusManager: FocusManager;\n\tprivate _focusTrap: FocusTrap | null = null;\n\tprivate _activeElement: Element | null = null;\n\n\t/**\n\t * Constructor\n\t * @param element The parent element (datepicker wrapper)\n\t * @param toggleElement The element that triggers the dropdown\n\t * @param dropdownElement The dropdown content element\n\t * @param config The configuration options\n\t */\n\tconstructor(\n\t\telement: HTMLElement,\n\t\ttoggleElement: HTMLElement,\n\t\tdropdownElement: HTMLElement,\n\t\tconfig: KTDatepickerConfigInterface,\n\t) {\n\t\tsuper();\n\n\t\tthis._element = element;\n\t\tthis._toggleElement = toggleElement;\n\t\tthis._dropdownElement = dropdownElement;\n\t\tthis._config = config;\n\t\tthis._eventManager = new EventManager();\n\t\tthis._focusManager = new FocusManager(dropdownElement);\n\n\t\tthis._setupEventListeners();\n\t}\n\n\t/**\n\t * Set up event listeners for the dropdown\n\t */\n\tprivate _setupEventListeners(): void {\n\t\t// Toggle click\n\t\tthis._eventManager.addListener(\n\t\t\tthis._toggleElement,\n\t\t\t'click',\n\t\t\tthis._handleToggleClick.bind(this),\n\t\t);\n\n\t\t// Keyboard navigation\n\t\tthis._eventManager.addListener(\n\t\t\tthis._element,\n\t\t\t'keydown',\n\t\t\tthis._handleKeyDown.bind(this),\n\t\t);\n\n\t\t// Close on outside click\n\t\tthis._eventManager.addListener(\n\t\t\tdocument as unknown as HTMLElement,\n\t\t\t'click',\n\t\t\tthis._handleOutsideClick.bind(this),\n\t\t);\n\t}\n\n\t/**\n\t * Handle toggle element click\n\t */\n\tprivate _handleToggleClick(event: Event): void {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tthis.toggle();\n\t}\n\n\t/**\n\t * Handle keyboard events\n\t */\n\tprivate _handleKeyDown(event: KeyboardEvent): void {\n\t\tif (!this._isOpen) return;\n\n\t\tswitch (event.key) {\n\t\t\tcase 'Escape':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.close();\n\t\t\t\tthis._toggleElement.focus();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._focusManager.focusNext();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowUp':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._focusManager.focusPrevious();\n\t\t\t\tbreak;\n\t\t\tcase 'Home':\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// Focus first visible option\n\t\t\t\tconst firstOption = this._focusManager.getVisibleOptions()[0];\n\t\t\t\tif (firstOption) {\n\t\t\t\t\tthis._focusManager.applyFocus(firstOption);\n\t\t\t\t\tthis._focusManager.scrollIntoView(firstOption);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'End':\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// Focus last visible option\n\t\t\t\tconst visibleOptions = this._focusManager.getVisibleOptions();\n\t\t\t\tconst lastOption = visibleOptions[visibleOptions.length - 1];\n\t\t\t\tif (lastOption) {\n\t\t\t\t\tthis._focusManager.applyFocus(lastOption);\n\t\t\t\t\tthis._focusManager.scrollIntoView(lastOption);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Handle clicks outside the dropdown\n\t */\n\tprivate _handleOutsideClick(event: MouseEvent): void {\n\t\tif (!this._isOpen) return;\n\n\t\tconst target = event.target as HTMLElement;\n\n\t\tif (\n\t\t\t!this._element.contains(target) &&\n\t\t\t!this._dropdownElement.contains(target)\n\t\t) {\n\t\t\t// Before closing, check if a range selection is in progress\n\t\t\tconst datepickerElement = this._element.closest('[data-kt-datepicker]');\n\t\t\tif (datepickerElement) {\n\t\t\t\t// Get the state manager through the calendar instance or directly\n\t\t\t\tconst stateManager = (datepickerElement as any).instance?._state;\n\n\t\t\t\tif (stateManager) {\n\t\t\t\t\tconst state = stateManager.getState();\n\t\t\t\t\tconst config = stateManager.getConfig();\n\n\t\t\t\t\t// If we're in range mode and range selection is in progress, don't close\n\t\t\t\t\tif (config.range && state.isRangeSelectionInProgress) {\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'Outside click detected but range selection in progress - keeping dropdown open',\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\t/**\n\t * Set width of dropdown based on toggle element\n\t */\n\tprivate _setDropdownWidth(): void {\n\t\tif (!this._dropdownElement || !this._toggleElement) return;\n\n\t\t// Get the datepicker configuration\n\t\tconst datepickerElement = this._element.closest('[data-kt-datepicker]');\n\t\tlet visibleMonths = 1;\n\n\t\tif (datepickerElement) {\n\t\t\t// Get visible months from config\n\t\t\tconst instance = (datepickerElement as any).instance;\n\t\t\tif (instance && instance._config) {\n\t\t\t\tvisibleMonths = instance._config.visibleMonths || 1;\n\t\t\t}\n\t\t}\n\n\t\t// Calculate appropriate width based on number of visible months\n\t\tif (visibleMonths > 1) {\n\t\t\t// For multiple months, calculate a fixed width per month plus padding and gaps\n\t\t\tconst monthWidth = 280; // Fixed width for each month\n\t\t\tconst padding = 24; // Left/right padding (p-3 = 0.75rem  2  16px = 24px)\n\t\t\tconst spacing = 16 * (visibleMonths - 1); // Gap between months (gap-4 = 1rem  16px)\n\n\t\t\t// Limit to showing max 3 months at once for UX (user can scroll to see more)\n\t\t\tconst visibleWidth = Math.min(visibleMonths, 3);\n\n\t\t\tconst totalWidth = monthWidth * visibleWidth + spacing + padding;\n\n\t\t\t// Set fixed width for the dropdown\n\t\t\tthis._dropdownElement.style.width = `${totalWidth}px`;\n\t\t\tthis._dropdownElement.style.minWidth = `${totalWidth}px`;\n\t\t} else {\n\t\t\t// For single month, use a fixed width that works well for most calendars\n\t\t\tthis._dropdownElement.style.width = '332px'; // 280px calendar width + 24px padding + border\n\t\t\tthis._dropdownElement.style.minWidth = '332px';\n\t\t}\n\t}\n\n\t/**\n\t * Initialize the Popper instance for dropdown positioning\n\t */\n\tprivate _initPopper(): void {\n\t\t// Destroy existing popper instance if it exists\n\t\tthis._destroyPopper();\n\n\t\t// Default offset\n\t\tconst offsetValue = '0, 5';\n\n\t\t// Get configuration options\n\t\tconst placement = 'bottom-start';\n\t\tconst strategy = 'absolute';\n\t\tconst preventOverflow = true;\n\t\tconst flip = true;\n\n\t\t// Create new popper instance\n\t\tthis._popperInstance = createPopper(\n\t\t\tthis._toggleElement,\n\t\t\tthis._dropdownElement,\n\t\t\t{\n\t\t\t\tplacement: placement as Placement,\n\t\t\t\tstrategy: strategy as 'fixed' | 'absolute',\n\t\t\t\tmodifiers: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'offset',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\toffset: this._parseOffset(offsetValue),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'preventOverflow',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tboundary: 'viewport',\n\t\t\t\t\t\t\taltAxis: preventOverflow,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'flip',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tenabled: flip,\n\t\t\t\t\t\t\tfallbackPlacements: ['top-start', 'bottom-end', 'top-end'],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t);\n\t}\n\n\t/**\n\t * Parse offset string into an array of numbers\n\t */\n\tprivate _parseOffset(offset: string): number[] {\n\t\treturn offset.split(',').map((value) => parseInt(value.trim(), 10));\n\t}\n\n\t/**\n\t * Destroy the Popper instance\n\t */\n\tprivate _destroyPopper(): void {\n\t\tif (this._popperInstance) {\n\t\t\tthis._popperInstance.destroy();\n\t\t\tthis._popperInstance = null;\n\t\t}\n\t}\n\n\t/**\n\t * Update dropdown position\n\t */\n\tpublic updatePosition(): void {\n\t\t// Look for the display element rather than using the input directly\n\t\tconst displayElement = this._element.querySelector(\n\t\t\t'[data-kt-datepicker-display]',\n\t\t) as HTMLElement;\n\t\tconst triggerElement = displayElement || this._toggleElement;\n\n\t\tif (!triggerElement || !this._dropdownElement) return;\n\n\t\t// Reset position styles\n\t\tthis._dropdownElement.style.top = '';\n\t\tthis._dropdownElement.style.bottom = '';\n\t\tthis._dropdownElement.style.left = '';\n\t\tthis._dropdownElement.style.right = '';\n\n\t\t// Set width before positioning\n\t\tthis._setDropdownWidth();\n\n\t\t// Get position information\n\t\tconst triggerRect = triggerElement.getBoundingClientRect();\n\t\tconst containerRect = this._element.getBoundingClientRect();\n\t\tconst dropdownRect = this._dropdownElement.getBoundingClientRect();\n\t\tconst viewportHeight = window.innerHeight;\n\t\tconst viewportWidth = window.innerWidth;\n\n\t\t// Calculate available space below and above the trigger\n\t\tconst spaceBelow = viewportHeight - triggerRect.bottom;\n\t\tconst spaceAbove = triggerRect.top;\n\n\t\t// Calculate if dropdown would overflow horizontally\n\t\tconst overflowRight = triggerRect.left + dropdownRect.width > viewportWidth;\n\n\t\t// Position dropdown\n\t\tthis._dropdownElement.style.position = 'absolute';\n\n\t\t// Determine vertical position\n\t\tif (spaceBelow >= dropdownRect.height || spaceBelow >= spaceAbove) {\n\t\t\t// Position below the trigger\n\t\t\tthis._dropdownElement.style.top = `${triggerRect.height + 5}px`;\n\t\t} else {\n\t\t\t// Position above the trigger\n\t\t\tthis._dropdownElement.style.bottom = `${triggerRect.height + 5}px`;\n\t\t}\n\n\t\t// Determine horizontal position - handle potential overflow\n\t\tif (overflowRight) {\n\t\t\t// Align with right edge of trigger to prevent overflow\n\t\t\tconst rightOffset = Math.max(0, dropdownRect.width - triggerRect.width);\n\t\t\tthis._dropdownElement.style.right = `0px`;\n\t\t} else {\n\t\t\t// Align with left edge of trigger\n\t\t\tthis._dropdownElement.style.left = `0px`;\n\t\t}\n\t}\n\n\t/**\n\t * Toggle the dropdown\n\t */\n\tpublic toggle(): void {\n\t\tif (this._isOpen) {\n\t\t\tthis.close();\n\t\t} else {\n\t\t\tthis.open();\n\t\t}\n\t}\n\n\t/**\n\t * Open the dropdown\n\t */\n\tpublic open(): void {\n\t\tif (this._isOpen || this._isTransitioning) return;\n\n\t\t// Fire before show event\n\t\tconst beforeShowEvent = new CustomEvent('kt.datepicker.dropdown.show', {\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t});\n\t\tthis._element.dispatchEvent(beforeShowEvent);\n\n\t\tif (beforeShowEvent.defaultPrevented) return;\n\n\t\t// Begin opening transition\n\t\tthis._isTransitioning = true;\n\n\t\t// Set dropdown visibility\n\t\tthis._dropdownElement.classList.remove('hidden');\n\t\tthis._dropdownElement.setAttribute('aria-hidden', 'false');\n\n\t\t// Set dropdown width\n\t\tthis._setDropdownWidth();\n\n\t\t// Make sure the element is visible for transitioning\n\t\tKTDom.reflow(this._dropdownElement);\n\n\t\t// Apply z-index\n\t\tthis._dropdownElement.style.zIndex = '1000';\n\n\t\t// Initialize popper for positioning\n\t\tthis._initPopper();\n\n\t\t// Add active classes\n\t\tthis._toggleElement.classList.add('ring', 'ring-blue-300');\n\t\tthis._toggleElement.setAttribute('aria-expanded', 'true');\n\n\t\t// Start transition\n\t\tthis._dropdownElement.classList.remove('opacity-0', 'translate-y-2');\n\t\tthis._dropdownElement.classList.add('opacity-100', 'translate-y-0');\n\n\t\t// Handle transition end\n\t\tKTDom.transitionEnd(this._dropdownElement, () => {\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = true;\n\n\t\t\t// Focus the first interactive element\n\t\t\tthis._focusFirstInteractiveElement();\n\n\t\t\t// Fire after show event\n\t\t\tconst afterShowEvent = new CustomEvent('kt.datepicker.dropdown.shown', {\n\t\t\t\tbubbles: true,\n\t\t\t});\n\t\t\tthis._element.dispatchEvent(afterShowEvent);\n\t\t});\n\t}\n\n\t/**\n\t * Focus the first interactive element in the dropdown\n\t */\n\tprivate _focusFirstInteractiveElement(): void {\n\t\t// Priority of elements to focus:\n\t\t// 1. A \"Today\" button if available\n\t\t// 2. The first day in the current month\n\t\t// 3. Any other focusable element\n\n\t\t// Find the Today button using standard DOM selectors\n\t\tlet todayBtn: HTMLElement | null = null;\n\t\tconst buttons = this._dropdownElement.querySelectorAll('button');\n\t\tfor (let i = 0; i < buttons.length; i++) {\n\t\t\tif (buttons[i].textContent && buttons[i].textContent.trim() === 'Today') {\n\t\t\t\ttodayBtn = buttons[i] as HTMLElement;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (todayBtn) {\n\t\t\ttodayBtn.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentMonthDay = this._dropdownElement.querySelector(\n\t\t\t'button[data-date]:not(.text-gray-400)',\n\t\t) as HTMLElement;\n\t\tif (currentMonthDay) {\n\t\t\tcurrentMonthDay.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstOption = this._focusManager.getVisibleOptions()[0];\n\t\tif (firstOption) {\n\t\t\tthis._focusManager.applyFocus(firstOption);\n\t\t}\n\t}\n\n\t/**\n\t * Close the dropdown\n\t */\n\tpublic close(): void {\n\t\tif (!this._isOpen || this._isTransitioning) return;\n\n\t\t// Fire before hide event\n\t\tconst beforeHideEvent = new CustomEvent('kt.datepicker.dropdown.hide', {\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t});\n\t\tthis._element.dispatchEvent(beforeHideEvent);\n\n\t\tif (beforeHideEvent.defaultPrevented) return;\n\n\t\t// Begin closing transition\n\t\tthis._isTransitioning = true;\n\n\t\t// Start transition\n\t\tthis._dropdownElement.classList.add('opacity-0', 'translate-y-2');\n\t\tthis._dropdownElement.classList.remove('opacity-100', 'translate-y-0');\n\n\t\t// Handle transition end\n\t\tKTDom.transitionEnd(this._dropdownElement, () => {\n\t\t\t// Remove active classes\n\t\t\tthis._dropdownElement.classList.add('hidden');\n\t\t\tthis._dropdownElement.setAttribute('aria-hidden', 'true');\n\n\t\t\t// Reset styles\n\t\t\tthis._dropdownElement.style.opacity = '';\n\t\t\tthis._dropdownElement.style.transform = '';\n\t\t\tthis._dropdownElement.style.zIndex = '';\n\n\t\t\t// Destroy popper\n\t\t\tthis._destroyPopper();\n\n\t\t\t// Update state\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = false;\n\n\t\t\t// Fire after hide event\n\t\t\tconst afterHideEvent = new CustomEvent('kt.datepicker.dropdown.hidden', {\n\t\t\t\tbubbles: true,\n\t\t\t});\n\t\t\tthis._element.dispatchEvent(afterHideEvent);\n\t\t});\n\t}\n\n\t/**\n\t * Check if dropdown is open\n\t */\n\tpublic isOpen(): boolean {\n\t\treturn this._isOpen;\n\t}\n\n\t/**\n\t * Clean up component\n\t */\n\tpublic override dispose(): void {\n\t\t// Destroy popper\n\t\tthis._destroyPopper();\n\n\t\t// Remove event listeners\n\t\tthis._eventManager.removeAllListeners(this._element);\n\t\tthis._eventManager.removeAllListeners(this._toggleElement);\n\t\tthis._eventManager.removeAllListeners(document as unknown as HTMLElement);\n\n\t\t// Clean up focus manager\n\t\tif (\n\t\t\tthis._focusManager &&\n\t\t\ttypeof this._focusManager.dispose === 'function'\n\t\t) {\n\t\t\tthis._focusManager.dispose();\n\t\t}\n\n\t\t// Clean up state\n\t\tthis._isOpen = false;\n\t\tthis._isTransitioning = false;\n\n\t\t// Remove data reference\n\t\tKTData.remove(this._element, this._name);\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n/**\n * Event names used by the datepicker component\n */\nexport enum KTDatepickerEventName {\n\tDATE_CHANGE = 'date-change',\n\tSTATE_CHANGE = 'stateChange',\n\tOPEN = 'open',\n\tCLOSE = 'close',\n\tUPDATE = 'update',\n\tKEYBOARD_OPEN = 'keyboard-open',\n\tVIEW_CHANGE = 'view-change',\n\tTIME_CHANGE = 'time-change',\n}\n\n/**\n * Centralized event manager for the datepicker component\n * Handles all event dispatching and listening\n */\nexport class KTDatepickerEventManager {\n\tprivate _element: HTMLElement;\n\n\t/**\n\t * Constructor\n\t *\n\t * @param element - The root element to attach events to\n\t */\n\tconstructor(element: HTMLElement) {\n\t\tthis._element = element;\n\t}\n\n\t/**\n\t * Dispatch a custom event on the datepicker element\n\t *\n\t * @param eventName - Name of the event to dispatch\n\t * @param payload - Optional payload data\n\t */\n\tpublic dispatchEvent(\n\t\teventName: KTDatepickerEventName | string,\n\t\tpayload?: any,\n\t): void {\n\t\tconst event = new CustomEvent(eventName, {\n\t\t\tbubbles: true,\n\t\t\tdetail: { payload },\n\t\t});\n\n\t\tthis._element.dispatchEvent(event);\n\t}\n\n\t/**\n\t * Add an event listener to the datepicker element\n\t *\n\t * @param eventName - Name of the event to listen for\n\t * @param listener - Callback function\n\t * @param options - Event listener options\n\t */\n\tpublic addEventListener(\n\t\teventName: KTDatepickerEventName | string,\n\t\tlistener: EventListenerOrEventListenerObject,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t): void {\n\t\tthis._element.addEventListener(eventName, listener, options);\n\t}\n\n\t/**\n\t * Remove an event listener from the datepicker element\n\t *\n\t * @param eventName - Name of the event to remove listener for\n\t * @param listener - Callback function to remove\n\t * @param options - Event listener options\n\t */\n\tpublic removeEventListener(\n\t\teventName: KTDatepickerEventName | string,\n\t\tlistener: EventListenerOrEventListenerObject,\n\t\toptions?: boolean | EventListenerOptions,\n\t): void {\n\t\tthis._element.removeEventListener(eventName, listener, options);\n\t}\n\n\t/**\n\t * Dispatch the date change event with the current selection\n\t *\n\t * @param payload - Object containing date selection information\n\t */\n\tpublic dispatchDateChangeEvent(payload: any): void {\n\t\tthis.dispatchEvent(KTDatepickerEventName.DATE_CHANGE, payload);\n\t}\n\n\t/**\n\t * Dispatch the open event when the datepicker opens\n\t */\n\tpublic dispatchOpenEvent(): void {\n\t\tthis.dispatchEvent(KTDatepickerEventName.OPEN);\n\t}\n\n\t/**\n\t * Dispatch the close event when the datepicker closes\n\t */\n\tpublic dispatchCloseEvent(): void {\n\t\tthis.dispatchEvent(KTDatepickerEventName.CLOSE);\n\t}\n\n\t/**\n\t * Dispatch the update event to refresh the datepicker\n\t */\n\tpublic dispatchUpdateEvent(): void {\n\t\tthis.dispatchEvent(KTDatepickerEventName.UPDATE);\n\t}\n\n\t/**\n\t * Dispatch the keyboard open event when datepicker is opened via keyboard\n\t */\n\tpublic dispatchKeyboardOpenEvent(): void {\n\t\tthis.dispatchEvent(KTDatepickerEventName.KEYBOARD_OPEN);\n\t}\n\n\t/**\n\t * Dispatch the view change event when the datepicker view changes\n\t *\n\t * @param viewMode - The new view mode (days, months, years)\n\t */\n\tpublic dispatchViewChangeEvent(viewMode: string): void {\n\t\tthis.dispatchEvent(KTDatepickerEventName.VIEW_CHANGE, { viewMode });\n\t}\n\n\t/**\n\t * Dispatch the time change event when the time selection changes\n\t *\n\t * @param timeData - Object containing time selection information\n\t */\n\tpublic dispatchTimeChangeEvent(timeData: any): void {\n\t\tthis.dispatchEvent(KTDatepickerEventName.TIME_CHANGE, timeData);\n\t}\n\n\t/**\n\t * Dispatch a change event on the given input element\n\t *\n\t * @param inputElement - The input element to dispatch change event on\n\t */\n\tpublic dispatchInputChangeEvent(inputElement: HTMLInputElement): void {\n\t\tif (inputElement) {\n\t\t\tinputElement.dispatchEvent(new Event('change', { bubbles: true }));\n\t\t}\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTDatepicker } from './datepicker';\nimport * as DatepickerTypes from './types';\n\nexport { KTDatepicker, DatepickerTypes };\nexport default KTDatepicker;\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTDatepickerStateManager } from './config';\nimport { KTDatepickerEventManager, KTDatepickerEventName } from './events';\n\n/**\n * Keyboard navigation handler for KTDatepicker\n */\nexport class KTDatepickerKeyboard {\n\tprivate _element: HTMLElement;\n\tprivate _stateManager: KTDatepickerStateManager;\n\tprivate _eventManager: KTDatepickerEventManager;\n\tprivate _focusedDay: number | null = null;\n\tprivate _isListening = false;\n\n\t/**\n\t * Constructor for the KTDatepickerKeyboard class\n\t *\n\t * @param element - The datepicker element\n\t * @param stateManager - State manager for the datepicker\n\t */\n\tconstructor(element: HTMLElement, stateManager: KTDatepickerStateManager) {\n\t\tthis._element = element;\n\t\tthis._stateManager = stateManager;\n\t\tthis._eventManager = stateManager.getEventManager();\n\n\t\t// Set up listeners\n\t\tthis._setupEventListeners();\n\t}\n\n\t/**\n\t * Set up event listeners for keyboard navigation\n\t */\n\tprivate _setupEventListeners(): void {\n\t\t// Listen for open/close events to activate/deactivate keyboard navigation\n\t\tthis._eventManager.addEventListener(KTDatepickerEventName.OPEN, () =>\n\t\t\tthis._activateKeyboardNavigation(),\n\t\t);\n\t\tthis._eventManager.addEventListener(KTDatepickerEventName.CLOSE, () =>\n\t\t\tthis._deactivateKeyboardNavigation(),\n\t\t);\n\n\t\t// Listen for custom keyboard-open event\n\t\tthis._eventManager.addEventListener(\n\t\t\tKTDatepickerEventName.KEYBOARD_OPEN,\n\t\t\t() => {\n\t\t\t\t// Ensure we activate keyboard navigation\n\t\t\t\tthis._activateKeyboardNavigation();\n\n\t\t\t\t// Set initial focus day with a slight delay to allow the dropdown to render\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// Initialize focused day if needed\n\t\t\t\t\tif (this._focusedDay === null) {\n\t\t\t\t\t\tconst state = this._stateManager.getState();\n\t\t\t\t\t\tif (state.selectedDate) {\n\t\t\t\t\t\t\tthis._focusedDay = state.selectedDate.getDate();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._focusedDay = new Date().getDate();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Focus the day\n\t\t\t\t\tthis._focusDay();\n\t\t\t\t}, 150);\n\t\t\t},\n\t\t);\n\n\t\t// Handle focus events\n\t\tthis._element.addEventListener('focusin', (e) => {\n\t\t\tif (this._stateManager.getState().isOpen && !this._isListening) {\n\t\t\t\tthis._activateKeyboardNavigation();\n\t\t\t}\n\t\t});\n\n\t\t// Add keydown event to the element itself to open dropdown with Enter key\n\t\tthis._element.addEventListener('keydown', (e) => {\n\t\t\tconst state = this._stateManager.getState();\n\n\t\t\t// If not open yet, handle keys that should open the dropdown\n\t\t\tif (!state.isOpen) {\n\t\t\t\tif (\n\t\t\t\t\te.key === 'Enter' ||\n\t\t\t\t\te.key === ' ' ||\n\t\t\t\t\te.key === 'ArrowDown' ||\n\t\t\t\t\te.key === 'ArrowUp'\n\t\t\t\t) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation(); // Prevent other handlers from capturing this event\n\t\t\t\t\tthis._stateManager.setOpen(true);\n\n\t\t\t\t\t// Set initial focus day if none\n\t\t\t\t\tif (this._focusedDay === null) {\n\t\t\t\t\t\tif (state.selectedDate) {\n\t\t\t\t\t\t\tthis._focusedDay = state.selectedDate.getDate();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._focusedDay = new Date().getDate();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Focus the day after dropdown opens\n\t\t\t\t\t\tsetTimeout(() => this._focusDay(), 150);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Add an additional event listener to the input field specifically\n\t\tconst inputs = this._element.querySelectorAll('input');\n\t\tinputs.forEach((input) => {\n\t\t\tinput.addEventListener('keydown', (e) => {\n\t\t\t\tconst state = this._stateManager.getState();\n\t\t\t\tif (!state.isOpen) {\n\t\t\t\t\tif (\n\t\t\t\t\t\te.key === 'Enter' ||\n\t\t\t\t\t\te.key === ' ' ||\n\t\t\t\t\t\te.key === 'ArrowDown' ||\n\t\t\t\t\t\te.key === 'ArrowUp'\n\t\t\t\t\t) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tthis._stateManager.setOpen(true);\n\n\t\t\t\t\t\t// Set initial focus day\n\t\t\t\t\t\tif (this._focusedDay === null) {\n\t\t\t\t\t\t\tif (state.selectedDate) {\n\t\t\t\t\t\t\t\tthis._focusedDay = state.selectedDate.getDate();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis._focusedDay = new Date().getDate();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Focus the day after dropdown opens\n\t\t\t\t\t\t\tsetTimeout(() => this._focusDay(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// Add an even more specific listener for Enter key on the display element\n\t\tconst displayElement = this._element.querySelector(\n\t\t\t'[data-kt-datepicker-display]',\n\t\t);\n\t\tif (displayElement) {\n\t\t\tdisplayElement.addEventListener(\n\t\t\t\t'keydown',\n\t\t\t\t(e: KeyboardEvent) => {\n\t\t\t\t\tif (e.key === 'Enter') {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tconst state = this._stateManager.getState();\n\t\t\t\t\t\tif (!state.isOpen) {\n\t\t\t\t\t\t\tthis._stateManager.setOpen(true);\n\n\t\t\t\t\t\t\t// Focus the current day with a slightly longer delay\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tif (this._focusedDay === null) {\n\t\t\t\t\t\t\t\t\tif (state.selectedDate) {\n\t\t\t\t\t\t\t\t\t\tthis._focusedDay = state.selectedDate.getDate();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthis._focusedDay = new Date().getDate();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis._focusDay();\n\t\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t); // Use capture phase to ensure this runs first\n\t\t}\n\t}\n\n\t/**\n\t * Activate keyboard navigation\n\t */\n\tprivate _activateKeyboardNavigation(): void {\n\t\tif (this._isListening) return;\n\n\t\t// Add global keydown listener\n\t\tdocument.addEventListener('keydown', this._handleKeyDown);\n\t\tthis._isListening = true;\n\n\t\t// Set initial focus day if none\n\t\tif (this._focusedDay === null) {\n\t\t\tconst state = this._stateManager.getState();\n\t\t\tif (state.selectedDate) {\n\t\t\t\tthis._focusedDay = state.selectedDate.getDate();\n\t\t\t} else {\n\t\t\t\tthis._focusedDay = new Date().getDate();\n\t\t\t}\n\n\t\t\t// Focus the day\n\t\t\tsetTimeout(() => this._focusDay(), 100);\n\t\t}\n\t}\n\n\t/**\n\t * Deactivate keyboard navigation\n\t */\n\tprivate _deactivateKeyboardNavigation(): void {\n\t\tif (!this._isListening) return;\n\n\t\t// Remove global keydown listener\n\t\tdocument.removeEventListener('keydown', this._handleKeyDown);\n\t\tthis._isListening = false;\n\t}\n\n\t/**\n\t * Handle keydown events\n\t */\n\tprivate _handleKeyDown = (e: KeyboardEvent): void => {\n\t\tconst state = this._stateManager.getState();\n\t\tconst viewMode = state.viewMode;\n\n\t\t// ESC key closes the dropdown\n\t\tif (e.key === 'Escape') {\n\t\t\te.preventDefault();\n\t\t\tthis._stateManager.setOpen(false);\n\t\t\treturn;\n\t\t}\n\n\t\t// Handle different view modes differently\n\t\tswitch (viewMode) {\n\t\t\tcase 'days':\n\t\t\t\tthis._handleDaysViewKeyNavigation(e);\n\t\t\t\tbreak;\n\t\t\tcase 'months':\n\t\t\t\tthis._handleMonthsViewKeyNavigation(e);\n\t\t\t\tbreak;\n\t\t\tcase 'years':\n\t\t\t\tthis._handleYearsViewKeyNavigation(e);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * Handle key navigation in days view\n\t */\n\tprivate _handleDaysViewKeyNavigation(e: KeyboardEvent): void {\n\t\tconst state = this._stateManager.getState();\n\t\tconst config = this._stateManager.getConfig();\n\t\tconst currentDate = new Date(state.currentDate);\n\t\tconst daysInMonth = new Date(\n\t\t\tcurrentDate.getFullYear(),\n\t\t\tcurrentDate.getMonth() + 1,\n\t\t\t0,\n\t\t).getDate();\n\n\t\t// Get the day of week for the first day of the month to calculate grid positions\n\t\tconst firstDayOfMonth = new Date(\n\t\t\tcurrentDate.getFullYear(),\n\t\t\tcurrentDate.getMonth(),\n\t\t\t1,\n\t\t).getDay();\n\t\t// Adjust for first day of week setting\n\t\tconst firstDayOffset =\n\t\t\t(firstDayOfMonth - config.locales[config.locale].firstDayOfWeek + 7) % 7;\n\n\t\t// Ensure we have a focused day\n\t\tif (this._focusedDay === null) {\n\t\t\tif (state.selectedDate) {\n\t\t\t\tthis._focusedDay = state.selectedDate.getDate();\n\t\t\t} else {\n\t\t\t\tthis._focusedDay = new Date().getDate();\n\t\t\t}\n\t\t}\n\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowLeft':\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation(); // Stop event propagation\n\t\t\t\tif (this._focusedDay === 1) {\n\t\t\t\t\t// Move to previous month\n\t\t\t\t\tconst newDate = new Date(currentDate);\n\t\t\t\t\tnewDate.setMonth(newDate.getMonth() - 1);\n\t\t\t\t\tthis._stateManager.setCurrentDate(newDate);\n\n\t\t\t\t\t// Set focus to last day of previous month\n\t\t\t\t\tconst lastDayPrevMonth = new Date(\n\t\t\t\t\t\tcurrentDate.getFullYear(),\n\t\t\t\t\t\tcurrentDate.getMonth(),\n\t\t\t\t\t\t0,\n\t\t\t\t\t).getDate();\n\t\t\t\t\tthis._focusedDay = lastDayPrevMonth;\n\t\t\t\t} else {\n\t\t\t\t\tthis._focusedDay = Math.max(1, (this._focusedDay || 1) - 1);\n\t\t\t\t}\n\t\t\t\tthis._focusDay();\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowRight':\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation(); // Stop event propagation\n\t\t\t\tif (this._focusedDay === daysInMonth) {\n\t\t\t\t\t// Move to next month\n\t\t\t\t\tconst newDate = new Date(currentDate);\n\t\t\t\t\tnewDate.setMonth(newDate.getMonth() + 1);\n\t\t\t\t\tthis._stateManager.setCurrentDate(newDate);\n\n\t\t\t\t\t// Set focus to first day of next month\n\t\t\t\t\tthis._focusedDay = 1;\n\t\t\t\t} else {\n\t\t\t\t\tthis._focusedDay = Math.min(daysInMonth, (this._focusedDay || 1) + 1);\n\t\t\t\t}\n\t\t\t\tthis._focusDay();\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowUp':\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation(); // Stop event propagation\n\t\t\t\tif (this._focusedDay && this._focusedDay <= 7) {\n\t\t\t\t\t// We're in the first row of the current month\n\t\t\t\t\t// Calculate the row position in the grid\n\t\t\t\t\tconst dayPosition = (this._focusedDay - 1 + firstDayOffset) % 7;\n\n\t\t\t\t\t// Move to previous month\n\t\t\t\t\tconst newDate = new Date(currentDate);\n\t\t\t\t\tnewDate.setMonth(newDate.getMonth() - 1);\n\t\t\t\t\tthis._stateManager.setCurrentDate(newDate);\n\n\t\t\t\t\t// Get days in previous month\n\t\t\t\t\tconst lastDayPrevMonth = new Date(\n\t\t\t\t\t\tcurrentDate.getFullYear(),\n\t\t\t\t\t\tcurrentDate.getMonth(),\n\t\t\t\t\t\t0,\n\t\t\t\t\t).getDate();\n\n\t\t\t\t\t// Calculate the corresponding day in the previous month's last row\n\t\t\t\t\t// Start with the last day of previous month\n\t\t\t\t\tthis._focusedDay = lastDayPrevMonth - (6 - dayPosition);\n\t\t\t\t} else {\n\t\t\t\t\t// Move up one week (7 days)\n\t\t\t\t\tthis._focusedDay = (this._focusedDay || 1) - 7;\n\t\t\t\t}\n\t\t\t\tthis._focusDay();\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowDown':\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation(); // Stop event propagation\n\t\t\t\tconst lastRowStart = daysInMonth - ((daysInMonth + firstDayOffset) % 7);\n\n\t\t\t\tif (this._focusedDay && this._focusedDay > lastRowStart) {\n\t\t\t\t\t// We're in the last row of the current month\n\t\t\t\t\t// Calculate position in last row (0-6)\n\t\t\t\t\tconst dayPosition = (this._focusedDay - 1 + firstDayOffset) % 7;\n\n\t\t\t\t\t// Move to next month\n\t\t\t\t\tconst newDate = new Date(currentDate);\n\t\t\t\t\tnewDate.setMonth(newDate.getMonth() + 1);\n\t\t\t\t\tthis._stateManager.setCurrentDate(newDate);\n\n\t\t\t\t\t// Calculate the corresponding day in next month's first row\n\t\t\t\t\tthis._focusedDay =\n\t\t\t\t\t\tdayPosition + 1 - ((dayPosition + firstDayOffset) % 7);\n\t\t\t\t\t// Ensure we're in bounds for next month\n\t\t\t\t\tconst nextMonthDays = new Date(\n\t\t\t\t\t\tnewDate.getFullYear(),\n\t\t\t\t\t\tnewDate.getMonth() + 1,\n\t\t\t\t\t\t0,\n\t\t\t\t\t).getDate();\n\t\t\t\t\tthis._focusedDay = Math.min(this._focusedDay, nextMonthDays);\n\t\t\t\t} else {\n\t\t\t\t\t// Move down one week (7 days)\n\t\t\t\t\tthis._focusedDay = Math.min(daysInMonth, (this._focusedDay || 1) + 7);\n\t\t\t\t}\n\t\t\t\tthis._focusDay();\n\t\t\t\tbreak;\n\n\t\t\tcase 'Home':\n\t\t\t\te.preventDefault();\n\t\t\t\t// Move to first day of the month\n\t\t\t\tthis._focusedDay = 1;\n\t\t\t\tthis._focusDay();\n\t\t\t\tbreak;\n\n\t\t\tcase 'End':\n\t\t\t\te.preventDefault();\n\t\t\t\t// Move to last day of the month\n\t\t\t\tthis._focusedDay = daysInMonth;\n\t\t\t\tthis._focusDay();\n\t\t\t\tbreak;\n\n\t\t\tcase 'PageUp':\n\t\t\t\te.preventDefault();\n\t\t\t\t// Move to previous month\n\t\t\t\tconst prevMonthDate = new Date(currentDate);\n\t\t\t\tprevMonthDate.setMonth(prevMonthDate.getMonth() - 1);\n\t\t\t\tthis._stateManager.setCurrentDate(prevMonthDate);\n\n\t\t\t\t// Adjust focused day if needed\n\t\t\t\tconst prevMonthDays = new Date(\n\t\t\t\t\tprevMonthDate.getFullYear(),\n\t\t\t\t\tprevMonthDate.getMonth() + 1,\n\t\t\t\t\t0,\n\t\t\t\t).getDate();\n\t\t\t\tif (this._focusedDay > prevMonthDays) {\n\t\t\t\t\tthis._focusedDay = prevMonthDays;\n\t\t\t\t}\n\t\t\t\tthis._focusDay();\n\t\t\t\tbreak;\n\n\t\t\tcase 'PageDown':\n\t\t\t\te.preventDefault();\n\t\t\t\t// Move to next month\n\t\t\t\tconst nextMonthDate = new Date(currentDate);\n\t\t\t\tnextMonthDate.setMonth(nextMonthDate.getMonth() + 1);\n\t\t\t\tthis._stateManager.setCurrentDate(nextMonthDate);\n\n\t\t\t\t// Adjust focused day if needed\n\t\t\t\tconst nextMonthDays = new Date(\n\t\t\t\t\tnextMonthDate.getFullYear(),\n\t\t\t\t\tnextMonthDate.getMonth() + 1,\n\t\t\t\t\t0,\n\t\t\t\t).getDate();\n\t\t\t\tif (this._focusedDay > nextMonthDays) {\n\t\t\t\t\tthis._focusedDay = nextMonthDays;\n\t\t\t\t}\n\t\t\t\tthis._focusDay();\n\t\t\t\tbreak;\n\n\t\t\tcase 'Enter':\n\t\t\tcase ' ':\n\t\t\t\te.preventDefault();\n\t\t\t\tif (this._focusedDay) {\n\t\t\t\t\t// Select the focused day\n\t\t\t\t\tconst selectedDate = new Date(currentDate);\n\t\t\t\t\tselectedDate.setDate(this._focusedDay);\n\n\t\t\t\t\tif (config.enableTime && state.selectedTime) {\n\t\t\t\t\t\tselectedDate.setHours(\n\t\t\t\t\t\t\tstate.selectedTime.hours,\n\t\t\t\t\t\t\tstate.selectedTime.minutes,\n\t\t\t\t\t\t\tstate.selectedTime.seconds,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselectedDate.setHours(0, 0, 0, 0);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._stateManager.setSelectedDate(selectedDate);\n\n\t\t\t\t\t// Close the dropdown if not range selection or if range is complete\n\t\t\t\t\tif (\n\t\t\t\t\t\t!config.range ||\n\t\t\t\t\t\t(state.selectedDateRange &&\n\t\t\t\t\t\t\tstate.selectedDateRange.startDate &&\n\t\t\t\t\t\t\tstate.selectedDateRange.endDate)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis._stateManager.setOpen(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Handle key navigation in months view\n\t */\n\tprivate _handleMonthsViewKeyNavigation(e: KeyboardEvent): void {\n\t\tconst state = this._stateManager.getState();\n\t\tconst currentDate = new Date(state.currentDate);\n\t\tconst currentMonth = currentDate.getMonth();\n\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowLeft':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setMonth((currentMonth - 1 + 12) % 12);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowRight':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setMonth((currentMonth + 1) % 12);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowUp':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setMonth((currentMonth - 3 + 12) % 12);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowDown':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setMonth((currentMonth + 3) % 12);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Home':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setMonth(0);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'End':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setMonth(11);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Enter':\n\t\t\tcase ' ':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._stateManager.setViewMode('days');\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Handle key navigation in years view\n\t */\n\tprivate _handleYearsViewKeyNavigation(e: KeyboardEvent): void {\n\t\tconst state = this._stateManager.getState();\n\t\tconst currentDate = new Date(state.currentDate);\n\t\tconst currentYear = currentDate.getFullYear();\n\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowLeft':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setFullYear(currentYear - 1);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowRight':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setFullYear(currentYear + 1);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowUp':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setFullYear(currentYear - 4);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'ArrowDown':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentDate.setFullYear(currentYear + 4);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Home':\n\t\t\t\te.preventDefault();\n\t\t\t\tconst yearsPerView = this._stateManager.getConfig().visibleYears;\n\t\t\t\tconst startYear = currentYear - (currentYear % yearsPerView);\n\t\t\t\tcurrentDate.setFullYear(startYear);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'End':\n\t\t\t\te.preventDefault();\n\t\t\t\tconst yearsPerPage = this._stateManager.getConfig().visibleYears;\n\t\t\t\tconst startYearEnd = currentYear - (currentYear % yearsPerPage);\n\t\t\t\tconst endYear = startYearEnd + yearsPerPage - 1;\n\t\t\t\tcurrentDate.setFullYear(endYear);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'PageUp':\n\t\t\t\te.preventDefault();\n\t\t\t\tconst yearsPerPageUp = this._stateManager.getConfig().visibleYears;\n\t\t\t\tcurrentDate.setFullYear(currentYear - yearsPerPageUp);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'PageDown':\n\t\t\t\te.preventDefault();\n\t\t\t\tconst yearsPerPageDown = this._stateManager.getConfig().visibleYears;\n\t\t\t\tcurrentDate.setFullYear(currentYear + yearsPerPageDown);\n\t\t\t\tthis._stateManager.setCurrentDate(currentDate);\n\t\t\t\tbreak;\n\n\t\t\tcase 'Enter':\n\t\t\tcase ' ':\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._stateManager.setViewMode('months');\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Focus the currently focused day in the calendar\n\t */\n\tprivate _focusDay(): void {\n\t\tif (!this._focusedDay) return;\n\n\t\tconst state = this._stateManager.getState();\n\n\t\t// Try different selectors for the dropdown\n\t\tconst selectors = [\n\t\t\t'.absolute.bg-white.shadow-lg.rounded-lg',\n\t\t\t'.kt-datepicker-dropdown',\n\t\t\t'.calendar-container',\n\t\t];\n\n\t\tlet dropdown = null;\n\t\tfor (const selector of selectors) {\n\t\t\tdropdown = this._element.querySelector(selector);\n\t\t\tif (dropdown) break;\n\t\t}\n\n\t\tif (!dropdown) {\n\t\t\t// If no dropdown found, try getting any element with calendar buttons\n\t\t\tdropdown =\n\t\t\t\tthis._element.querySelector('.multiple-months') ||\n\t\t\t\tthis._element.querySelector('[data-kt-datepicker-container]') ||\n\t\t\t\tthis._element;\n\t\t}\n\n\t\tconst currentDay = this._focusedDay;\n\t\tconst currentMonth = state.currentDate.getMonth();\n\t\tconst currentYear = state.currentDate.getFullYear();\n\n\t\t// First try to find the day in the current month\n\t\tlet dayButton = dropdown.querySelector(\n\t\t\t`button[data-date=\"${currentDay}\"]:not(.text-gray-400)`,\n\t\t);\n\n\t\t// If not found, try to find any button with the day number\n\t\tif (!dayButton) {\n\t\t\tdayButton = dropdown.querySelector(`button[data-date=\"${currentDay}\"]`);\n\t\t}\n\n\t\t// If still not found, try to find by date-id\n\t\tif (!dayButton) {\n\t\t\tconst dateId = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(currentDay).padStart(2, '0')}`;\n\t\t\tdayButton = dropdown.querySelector(`button[data-date-id=\"${dateId}\"]`);\n\t\t}\n\n\t\t// As a last resort, find any day button\n\t\tif (!dayButton) {\n\t\t\tdayButton = dropdown.querySelector('button[data-date]');\n\t\t}\n\n\t\t// Focus the day button if found\n\t\tif (dayButton) {\n\t\t\t(dayButton as HTMLElement).focus();\n\n\t\t\t// Scroll into view if needed\n\t\t\tif (dayButton.scrollIntoView) {\n\t\t\t\tdayButton.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { LocaleConfigInterface } from './types';\n\n/**\n * Generates a locale configuration object based on the given locale and first day of the week.\n *\n * @param {string} locale - The locale code to generate the configuration for.\n * @param {number} firstDayOfWeek - The first day of the week, where 0 represents Sunday.\n * @return {LocaleConfigInterface} The generated locale configuration object.\n */\nexport const generateLocaleConfig = (\n\tlocale: string,\n\tfirstDayOfWeek: number,\n): LocaleConfigInterface => ({\n\t// Names of months (e.g., January, February, ...)\n\tmonthNames: Array.from({ length: 12 }, (_, month) =>\n\t\tnew Date(0, month).toLocaleString(locale, { month: 'long' }),\n\t),\n\t// Shortened names of months (e.g., Jan, Feb, ...)\n\tmonthNamesShort: Array.from({ length: 12 }, (_, month) =>\n\t\tnew Date(0, month).toLocaleString(locale, { month: 'short' }),\n\t),\n\t// Names of days of the week (e.g., Sunday, Monday, ...)\n\tdayNames: Array.from({ length: 7 }, (_, day) =>\n\t\tnew Date(0, 0, day + 1).toLocaleString(locale, { weekday: 'long' }),\n\t),\n\t// Shortened names of days of the week (e.g., Sun, Mon, ...)\n\tdayNamesShort: Array.from({ length: 7 }, (_, day) =>\n\t\tnew Date(0, 0, day + 1).toLocaleString(locale, { weekday: 'short' }),\n\t),\n\t// The first day of the week is the first day of the week in the selected locale\n\tfirstDayOfWeek,\n\t// Names of days of the week, abbreviated (e.g., S, M, ...)\n\tdayNamesMin: Array.from({ length: 7 }, (_, day) =>\n\t\tnew Date(0, 0, day + 1).toLocaleString(locale, { weekday: 'narrow' }),\n\t),\n});\n\nexport const DefaultLocales: { [key: string]: LocaleConfigInterface } = {\n\t// English (United States)\n\t'en-US': generateLocaleConfig('en-US', 0),\n\t// Chinese (China)\n\t'zh-CN': generateLocaleConfig('zh-CN', 0),\n\t// Spanish (Spain)\n\t'es-ES': generateLocaleConfig('es-ES', 1),\n\t// French (France)\n\t'fr-FR': generateLocaleConfig('fr-FR', 1),\n\t// Russian (Russia)\n\t'ru-RU': generateLocaleConfig('ru-RU', 1),\n\t// Japanese (Japan)\n\t'ja-JP': generateLocaleConfig('ja-JP', 0),\n\t// Korean (South Korea)\n\t'ko-KR': generateLocaleConfig('ko-KR', 0),\n\t// Indonesian (Indonesia)\n\t'id-ID': generateLocaleConfig('id-ID', 0),\n\t// Malay (Malaysia)\n\t'ms-MY': generateLocaleConfig('ms-MY', 1),\n\t// Italian (Italy)\n\t'it-IT': generateLocaleConfig('it-IT', 1),\n\t// Portuguese (Portugal)\n\t'pt-PT': generateLocaleConfig('pt-PT', 1),\n\t// German (Germany)\n\t'de-DE': generateLocaleConfig('de-DE', 1),\n\t// Chinese (Hong Kong)\n\t'zh-HK': generateLocaleConfig('zh-HK', 0),\n\t// Chinese (Taiwan)\n\t'zh-TW': generateLocaleConfig('zh-TW', 0),\n\t// Vietnamese (Vietnam)\n\t'vi-VN': generateLocaleConfig('vi-VN', 0),\n\t// Turkish (Turkey)\n\t'tr-TR': generateLocaleConfig('tr-TR', 1),\n\t// Thai (Thailand)\n\t'th-TH': generateLocaleConfig('th-TH', 0),\n\t// Arabic (Egypt)\n\t'ar-EG': generateLocaleConfig('ar-EG', 0),\n};\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { LocaleConfigInterface } from './types';\n\n/**\n * Main container template for the datepicker dropdown\n */\nexport const datepickerContainerTemplate = `\n  <div class=\"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden\">\n    <div class=\"border-b border-gray-200 pb-3 mb-3\">\n      <div class=\"flex items-center justify-between px-3 pt-3\">\n        <button type=\"button\" class=\"p-1 rounded hover:bg-gray-100 text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500\" aria-label=\"Previous Month\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <polyline points=\"15 18 9 12 15 6\"></polyline>\n          </svg>\n        </button>\n        <div class=\"flex items-center justify-center\">\n          <select class=\"bg-transparent border border-gray-200 rounded px-2 py-1 mr-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\" aria-label=\"Select Month\"></select>\n          <select class=\"bg-transparent border border-gray-200 rounded px-2 py-1 ml-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\" aria-label=\"Select Year\"></select>\n          <span class=\"font-medium px-2 py-1 rounded hover:bg-gray-100 cursor-pointer\"></span>\n        </div>\n        <button type=\"button\" class=\"p-1 rounded hover:bg-gray-100 text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500\" aria-label=\"Next Month\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <polyline points=\"9 18 15 12 9 6\"></polyline>\n          </svg>\n        </button>\n      </div>\n    </div>\n    <div class=\"flex flex-wrap gap-4\"></div>\n    <div class=\"py-3 border-t border-gray-200 mt-3 hidden\">\n      <div class=\"text-sm font-medium text-gray-600 mb-2 text-center\">Time</div>\n      <div class=\"flex items-center justify-center gap-2\">\n        <div class=\"relative w-12\">\n          <input type=\"text\" class=\"w-full py-1.5 px-1.5 text-center border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\" min=\"0\" max=\"23\" aria-label=\"Hour\">\n        </div>\n        <span class=\"text-xl font-medium text-gray-500 leading-none\">:</span>\n        <div class=\"relative w-12\">\n          <input type=\"text\" class=\"w-full py-1.5 px-1.5 text-center border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\" min=\"0\" max=\"59\" aria-label=\"Minute\">\n        </div>\n        <span class=\"text-xl font-medium text-gray-500 leading-none\">:</span>\n        <div class=\"relative w-12\">\n          <input type=\"text\" class=\"w-full py-1.5 px-1.5 text-center border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\" min=\"0\" max=\"59\" aria-label=\"Second\">\n        </div>\n        <div class=\"flex flex-col gap-1\">\n          <button type=\"button\" class=\"px-2 py-1 text-xs border border-gray-300 rounded-t bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-center\" aria-label=\"AM\"></button>\n          <button type=\"button\" class=\"px-2 py-1 text-xs border border-gray-300 rounded-b bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-center\" aria-label=\"PM\"></button>\n        </div>\n      </div>\n    </div>\n    <div class=\"flex justify-between pt-3 border-t border-gray-200 mt-3 px-3 pb-3\">\n      <button type=\"button\" class=\"px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500\">Today</button>\n      <button type=\"button\" class=\"px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500\">Clear</button>\n      <button type=\"button\" class=\"px-3 py-1.5 text-sm border border-blue-500 rounded bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500\">Apply</button>\n    </div>\n  </div>\n`;\n\n/**\n * Input wrapper template with calendar icon\n */\nexport const inputWrapperTemplate = `\n  <div class=\"relative flex items-center\">\n    <div class=\"flex-grow segmented-input-container\"></div>\n    <button type=\"button\" class=\"absolute right-2 p-1 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 calendar-toggle-btn\" aria-label=\"Toggle Calendar\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n        <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line>\n        <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line>\n        <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line>\n      </svg>\n    </button>\n  </div>\n`;\n\n/**\n * Template for segmented date input\n *\n * @param format - Date format string (e.g., 'dd/MM/yyyy')\n * @returns HTML for segmented input\n */\nexport function segmentedDateInputTemplate(format: string): string {\n\t// Parse the format to determine the order of segments and separators\n\tconst formatSegments = parseFormatString(format);\n\tconst segments = [];\n\tconst separators = [];\n\n\t// Extract segments and separators\n\tfor (let i = 0; i < formatSegments.length; i++) {\n\t\tconst seg = formatSegments[i];\n\t\tif (seg.type === 'separator') {\n\t\t\tseparators.push(seg.value);\n\t\t} else {\n\t\t\tsegments.push(seg);\n\t\t}\n\t}\n\n\t// Ensure we have exactly 3 segments (day, month, year) and 2 separators\n\tif (segments.length !== 3 || separators.length !== 2) {\n\t\tconsole.warn('Invalid date format for segmented input:', format);\n\t\t// Fall back to default MM/dd/yyyy\n\t\treturn getDefaultSegmentedTemplate();\n\t}\n\n\t// Create the template based on the parsed format\n\treturn `\n    <div class=\"flex items-center bg-transparent text-sm\">\n      <div\n        class=\"${getSegmentWidthClass(\n\t\t\t\t\tsegments[0].type,\n\t\t\t\t)} bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n        data-segment=\"${getSegmentName(segments[0].type)}\"\n        tabindex=\"0\"\n        role=\"button\"\n        aria-label=\"${getSegmentLabel(segments[0].type)}\">${\n\t\t\t\t\tsegments[0].placeholder\n\t\t\t\t}</div>\n      <span class=\"text-gray-500 mx-0.5\">${separators[0]}</span>\n      <div\n        class=\"${getSegmentWidthClass(\n\t\t\t\t\tsegments[1].type,\n\t\t\t\t)} bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n        data-segment=\"${getSegmentName(segments[1].type)}\"\n        tabindex=\"0\"\n        role=\"button\"\n        aria-label=\"${getSegmentLabel(segments[1].type)}\">${\n\t\t\t\t\tsegments[1].placeholder\n\t\t\t\t}</div>\n      <span class=\"text-gray-500 mx-0.5\">${separators[1]}</span>\n      <div\n        class=\"${getSegmentWidthClass(\n\t\t\t\t\tsegments[2].type,\n\t\t\t\t)} bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n        data-segment=\"${getSegmentName(segments[2].type)}\"\n        tabindex=\"0\"\n        role=\"button\"\n        aria-label=\"${getSegmentLabel(segments[2].type)}\">${\n\t\t\t\t\tsegments[2].placeholder\n\t\t\t\t}</div>\n    </div>\n  `;\n}\n\n/**\n * Template for segmented date range input\n *\n * @param format - Date format string (e.g., 'dd/MM/yyyy')\n * @param rangeSeparator - Separator between start and end dates\n * @returns HTML for segmented range input\n */\nexport function segmentedDateRangeInputTemplate(\n\tformat: string,\n\trangeSeparator: string = ' - ',\n): string {\n\t// Parse the format to determine the order of segments and separators\n\tconst formatSegments = parseFormatString(format);\n\tconst segments = [];\n\tconst separators = [];\n\n\t// Extract segments and separators\n\tfor (let i = 0; i < formatSegments.length; i++) {\n\t\tconst seg = formatSegments[i];\n\t\tif (seg.type === 'separator') {\n\t\t\tseparators.push(seg.value);\n\t\t} else {\n\t\t\tsegments.push(seg);\n\t\t}\n\t}\n\n\t// Ensure we have exactly 3 segments (day, month, year) and 2 separators\n\tif (segments.length !== 3 || separators.length !== 2) {\n\t\tconsole.warn('Invalid date format for segmented range input:', format);\n\t\t// Fall back to default MM/dd/yyyy\n\t\treturn getDefaultSegmentedRangeTemplate(rangeSeparator);\n\t}\n\n\t// Create the template based on the parsed format\n\treturn `\n    <div class=\"flex items-center w-full\">\n      <div class=\"flex items-center bg-transparent text-sm\">\n        <div\n          class=\"${getSegmentWidthClass(\n\t\t\t\t\t\tsegments[0].type,\n\t\t\t\t\t)} bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"start-${getSegmentName(segments[0].type)}\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"Start ${getSegmentLabel(segments[0].type)}\">${\n\t\t\t\t\t\tsegments[0].placeholder\n\t\t\t\t\t}</div>\n        <span class=\"text-gray-500 mx-0.5\">${separators[0]}</span>\n        <div\n          class=\"${getSegmentWidthClass(\n\t\t\t\t\t\tsegments[1].type,\n\t\t\t\t\t)} bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"start-${getSegmentName(segments[1].type)}\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"Start ${getSegmentLabel(segments[1].type)}\">${\n\t\t\t\t\t\tsegments[1].placeholder\n\t\t\t\t\t}</div>\n        <span class=\"text-gray-500 mx-0.5\">${separators[1]}</span>\n        <div\n          class=\"${getSegmentWidthClass(\n\t\t\t\t\t\tsegments[2].type,\n\t\t\t\t\t)} bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"start-${getSegmentName(segments[2].type)}\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"Start ${getSegmentLabel(segments[2].type)}\">${\n\t\t\t\t\t\tsegments[2].placeholder\n\t\t\t\t\t}</div>\n      </div>\n      <span class=\"mx-1 text-gray-500\">${rangeSeparator}</span>\n      <div class=\"flex items-center bg-transparent text-sm\">\n        <div\n          class=\"${getSegmentWidthClass(\n\t\t\t\t\t\tsegments[0].type,\n\t\t\t\t\t)} bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"end-${getSegmentName(segments[0].type)}\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"End ${getSegmentLabel(segments[0].type)}\">${\n\t\t\t\t\t\tsegments[0].placeholder\n\t\t\t\t\t}</div>\n        <span class=\"text-gray-500 mx-0.5\">${separators[0]}</span>\n        <div\n          class=\"${getSegmentWidthClass(\n\t\t\t\t\t\tsegments[1].type,\n\t\t\t\t\t)} bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"end-${getSegmentName(segments[1].type)}\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"End ${getSegmentLabel(segments[1].type)}\">${\n\t\t\t\t\t\tsegments[1].placeholder\n\t\t\t\t\t}</div>\n        <span class=\"text-gray-500 mx-0.5\">${separators[1]}</span>\n        <div\n          class=\"${getSegmentWidthClass(\n\t\t\t\t\t\tsegments[2].type,\n\t\t\t\t\t)} bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"end-${getSegmentName(segments[2].type)}\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"End ${getSegmentLabel(segments[2].type)}\">${\n\t\t\t\t\t\tsegments[2].placeholder\n\t\t\t\t\t}</div>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Parse a date format string into segments and separators\n *\n * @param format - Date format string (e.g., 'dd/MM/yyyy')\n * @returns Array of parsed segments with type, placeholder and value\n */\nfunction parseFormatString(\n\tformat: string,\n): Array<{ type: string; value?: string; placeholder?: string }> {\n\tconst result: Array<{ type: string; value?: string; placeholder?: string }> =\n\t\t[];\n\tlet currentType = '';\n\tlet currentValue = '';\n\n\t// Helper to add a segment to the result\n\tconst addSegment = () => {\n\t\tif (!currentValue) return;\n\n\t\tif (/^d+$/.test(currentValue)) {\n\t\t\tresult.push({\n\t\t\t\ttype: 'day',\n\t\t\t\tvalue: currentValue,\n\t\t\t\tplaceholder: currentValue.length === 1 ? 'd' : 'dd',\n\t\t\t});\n\t\t} else if (/^M+$/.test(currentValue)) {\n\t\t\tresult.push({\n\t\t\t\ttype: 'month',\n\t\t\t\tvalue: currentValue,\n\t\t\t\tplaceholder: currentValue.length === 1 ? 'M' : 'MM',\n\t\t\t});\n\t\t} else if (/^y+$/.test(currentValue)) {\n\t\t\tresult.push({\n\t\t\t\ttype: 'year',\n\t\t\t\tvalue: currentValue,\n\t\t\t\tplaceholder: currentValue.length <= 2 ? 'yy' : 'yyyy',\n\t\t\t});\n\t\t} else {\n\t\t\t// This is a separator\n\t\t\tresult.push({\n\t\t\t\ttype: 'separator',\n\t\t\t\tvalue: currentValue,\n\t\t\t});\n\t\t}\n\n\t\tcurrentValue = '';\n\t};\n\n\t// Process each character in the format string\n\tfor (let i = 0; i < format.length; i++) {\n\t\tconst char = format[i];\n\n\t\tif (/[dMy]/.test(char)) {\n\t\t\t// Date part characters\n\t\t\tif (currentType === char) {\n\t\t\t\t// Continue the current segment\n\t\t\t\tcurrentValue += char;\n\t\t\t} else {\n\t\t\t\t// Start a new segment\n\t\t\t\taddSegment();\n\t\t\t\tcurrentType = char;\n\t\t\t\tcurrentValue = char;\n\t\t\t}\n\t\t} else {\n\t\t\t// Separator character\n\t\t\tif (currentValue) {\n\t\t\t\taddSegment();\n\t\t\t}\n\t\t\tcurrentType = '';\n\t\t\tcurrentValue = char;\n\t\t\taddSegment();\n\t\t}\n\t}\n\n\t// Add the last segment\n\taddSegment();\n\n\treturn result;\n}\n\n/**\n * Get a suitable CSS width class based on segment type\n *\n * @param type - Segment type (day, month, year)\n * @returns CSS class for width\n */\nfunction getSegmentWidthClass(type: string): string {\n\tswitch (type) {\n\t\tcase 'day':\n\t\t\treturn 'w-7';\n\t\tcase 'month':\n\t\t\treturn 'w-7';\n\t\tcase 'year':\n\t\t\treturn 'w-12';\n\t\tdefault:\n\t\t\treturn 'w-7';\n\t}\n}\n\n/**\n * Get the segment name to be used in data-segment attribute\n *\n * @param type - Segment type (day, month, year)\n * @returns Segment name\n */\nfunction getSegmentName(type: string): string {\n\treturn type;\n}\n\n/**\n * Get a human-readable label for the segment\n *\n * @param type - Segment type (day, month, year)\n * @returns Human-readable label\n */\nfunction getSegmentLabel(type: string): string {\n\treturn type.charAt(0).toUpperCase() + type.slice(1);\n}\n\n/**\n * Get the default segmented date input template (MM/dd/yyyy)\n *\n * @returns Default template HTML\n */\nfunction getDefaultSegmentedTemplate(): string {\n\treturn `\n    <div class=\"flex items-center bg-transparent text-sm\">\n      <div\n        class=\"w-7 bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n        data-segment=\"month\"\n        tabindex=\"0\"\n        role=\"button\"\n        aria-label=\"Month\">MM</div>\n      <span class=\"text-gray-500 mx-0.5\">/</span>\n      <div\n        class=\"w-7 bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n        data-segment=\"day\"\n        tabindex=\"0\"\n        role=\"button\"\n        aria-label=\"Day\">dd</div>\n      <span class=\"text-gray-500 mx-0.5\">/</span>\n      <div\n        class=\"w-12 bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n        data-segment=\"year\"\n        tabindex=\"0\"\n        role=\"button\"\n        aria-label=\"Year\">yyyy</div>\n    </div>\n  `;\n}\n\n/**\n * Get the default segmented date range input template (MM/dd/yyyy)\n *\n * @param rangeSeparator - Separator between start and end dates\n * @returns Default range template HTML\n */\nfunction getDefaultSegmentedRangeTemplate(\n\trangeSeparator: string = ' - ',\n): string {\n\treturn `\n    <div class=\"flex items-center w-full\">\n      <div class=\"flex items-center bg-transparent text-sm\">\n        <div\n          class=\"w-7 bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"start-month\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"Start Month\">MM</div>\n        <span class=\"text-gray-500 mx-0.5\">/</span>\n        <div\n          class=\"w-7 bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"start-day\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"Start Day\">dd</div>\n        <span class=\"text-gray-500 mx-0.5\">/</span>\n        <div\n          class=\"w-12 bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"start-year\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"Start Year\">yyyy</div>\n      </div>\n      <span class=\"mx-1 text-gray-500\">${rangeSeparator}</span>\n      <div class=\"flex items-center bg-transparent text-sm\">\n        <div\n          class=\"w-7 bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"end-month\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"End Month\">MM</div>\n        <span class=\"text-gray-500 mx-0.5\">/</span>\n        <div\n          class=\"w-7 bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"end-day\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"End Day\">dd</div>\n        <span class=\"text-gray-500 mx-0.5\">/</span>\n        <div\n          class=\"w-12 bg-transparent text-center text-gray-900 cursor-pointer segment-part hover:bg-gray-100 rounded-sm px-1 py-0.5\"\n          data-segment=\"end-year\"\n          tabindex=\"0\"\n          role=\"button\"\n          aria-label=\"End Year\">yyyy</div>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Get an array of day names based on locale and format\n *\n * @param locale - Locale configuration\n * @param format - Format for day names ('long', 'short', or 'min')\n * @returns Array of day names\n */\nfunction getDayNames(\n\tlocale: LocaleConfigInterface,\n\tformat: 'long' | 'short' | 'min',\n): string[] {\n\tif (format === 'long') {\n\t\treturn locale.dayNames;\n\t} else if (format === 'short') {\n\t\treturn locale.dayNamesShort;\n\t} else {\n\t\treturn locale.dayNamesMin;\n\t}\n}\n\n/**\n * Calendar grid template\n *\n * @param locale - Locale configuration for the datepicker\n * @param weekDayFormat - Format for the week day names ('long', 'short', or 'min')\n * @returns Calendar grid template HTML\n */\nexport function calendarGridTemplate(\n\tlocale: LocaleConfigInterface,\n\tweekDayFormat: 'long' | 'short' | 'min',\n): string {\n\t// Get the day names based on the locale and format\n\tconst dayNames = getDayNames(locale, weekDayFormat);\n\n\t// Start from the first day of the week based on locale\n\tconst firstDay = locale.firstDayOfWeek;\n\tconst orderedDayNames = [\n\t\t...dayNames.slice(firstDay),\n\t\t...dayNames.slice(0, firstDay),\n\t];\n\n\t// Create the header with day names\n\tconst headerCells = orderedDayNames\n\t\t.map(\n\t\t\t(day) =>\n\t\t\t\t`<th class=\"py-2 text-center text-xs font-medium text-gray-500 uppercase w-10\">${day}</th>`,\n\t\t)\n\t\t.join('');\n\n\treturn `\n    <div class=\"calendar-month-container\">\n      <table class=\"w-full border-collapse calendar-grid\" role=\"grid\" aria-labelledby=\"datepicker-month\">\n        <thead>\n          <tr class=\"border-b border-gray-200\">\n            ${headerCells}\n          </tr>\n        </thead>\n        <tbody class=\"border-none\"></tbody>\n      </table>\n    </div>\n  `;\n}\n\n/**\n * Calendar day cell template\n *\n * @param day - Day number\n * @param month - Month number (0-11)\n * @param year - Year (4 digits)\n * @param isCurrentMonth - Whether the day is in the current month\n * @param isToday - Whether the day is today\n * @param isSelected - Whether the day is selected\n * @param isDisabled - Whether the day is disabled\n * @param isRangeStart - Whether the day is the start of a range\n * @param isRangeEnd - Whether the day is the end of a range\n * @param isInRange - Whether the day is within a selected range\n * @param isWeekend - Whether the day is a weekend\n * @returns Day cell HTML\n */\nexport function dayTemplate(\n\tday: number,\n\tmonth: number = 0,\n\tyear: number = 0,\n\tisCurrentMonth: boolean = true,\n\tisToday: boolean = false,\n\tisSelected: boolean = false,\n\tisDisabled: boolean = false,\n\tisRangeStart: boolean = false,\n\tisRangeEnd: boolean = false,\n\tisInRange: boolean = false,\n\tisWeekend: boolean = false,\n): string {\n\t// Base classes for day button\n\tlet classes =\n\t\t'w-full h-8 rounded-full flex items-center justify-center text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ';\n\n\t// Apply conditional classes\n\tif (!isCurrentMonth) {\n\t\tclasses += 'current';\n\t} else if (isDisabled) {\n\t\tclasses += 'text-gray-300 cursor-not-allowed ';\n\t} else if (isSelected || isRangeStart || isRangeEnd) {\n\t\tclasses += 'bg-blue-600 text-white hover:bg-blue-700 ';\n\t} else if (isInRange) {\n\t\tclasses += 'bg-blue-100 text-blue-800 hover:bg-blue-200 ';\n\t} else if (isToday) {\n\t\tclasses += 'border border-blue-500 text-blue-600 hover:bg-blue-50 ';\n\t} else {\n\t\tclasses +=\n\t\t\t'text-gray-700 hover:bg-gray-100 hover:bg-blue-50 hover:text-blue-600 ';\n\t}\n\n\t// Add weekend-specific styling\n\tif (isWeekend && !isSelected && !isRangeStart && !isRangeEnd && !isInRange) {\n\t\tclasses += 'text-gray-500 ';\n\t}\n\n\t// Add attributes for hover states in range selection\n\tconst hoverAttributes =\n\t\tisCurrentMonth && !isDisabled ? 'data-hover-date=\"true\"' : '';\n\n\t// Create a date ID if month and year are provided\n\tlet dateIdAttr = '';\n\tif (year > 0) {\n\t\t// Format: YYYY-MM-DD (ensures leading zeros for month and day)\n\t\tconst monthStr = String(month + 1).padStart(2, '0'); // Add 1 since month is 0-indexed\n\t\tconst dayStr = String(day).padStart(2, '0');\n\t\tconst dateId = `${year}-${monthStr}-${dayStr}`;\n\t\tdateIdAttr = `data-date-id=\"${dateId}\"`;\n\t}\n\n\treturn `\n    <td class=\"p-0.5\">\n      <button\n        type=\"button\"\n        class=\"${classes.trim()}\"\n        data-date=\"${day}\"\n        ${dateIdAttr}\n        ${isDisabled ? 'disabled' : ''}\n        ${!isCurrentMonth ? 'tabindex=\"-1\"' : ''}\n        ${hoverAttributes}\n        aria-selected=\"${isSelected}\"\n        aria-current=\"${isToday ? 'date' : 'false'}\"\n      >\n        ${day}\n      </button>\n    </td>\n  `;\n}\n\n/**\n * Month and year header template with buttons for toggling month/year view\n *\n * @param locale - Locale configuration\n * @param currentMonth - Current month (0-11)\n * @param currentYear - Current year\n * @returns Month and year header HTML\n */\nexport function monthYearSelectTemplate(\n\tlocale: LocaleConfigInterface,\n\tcurrentMonth: number,\n\tcurrentYear: number,\n): string {\n\treturn `\n    <div class=\"flex items-center justify-center space-x-2\">\n      <button type=\"button\"\n        class=\"month-selector px-2 py-1 rounded hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800 font-medium\"\n        aria-label=\"Select Month\">\n        ${locale.monthNames[currentMonth]}\n      </button>\n      <button type=\"button\"\n        class=\"year-selector px-2 py-1 rounded hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800 font-medium\"\n        aria-label=\"Select Year\">\n        ${currentYear}\n      </button>\n    </div>\n  `;\n}\n\n/**\n * Template for month selection view\n *\n * @param locale - Locale configuration\n * @param currentMonth - Current selected month (0-11)\n * @returns Month selection HTML\n */\nexport function monthSelectionTemplate(\n\tlocale: LocaleConfigInterface,\n\tcurrentMonth: number,\n): string {\n\tconst months = locale.monthNamesShort.map((month, idx) => {\n\t\tconst isCurrentMonth = idx === currentMonth;\n\t\tconst buttonClass = isCurrentMonth\n\t\t\t? 'py-3 px-2 text-sm rounded-md bg-blue-500 text-white font-medium hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500'\n\t\t\t: 'py-3 px-2 text-sm rounded-md bg-transparent hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800';\n\n\t\treturn `\n      <button\n        type=\"button\"\n        class=\"${buttonClass}\"\n        data-month=\"${idx}\"\n        aria-selected=\"${isCurrentMonth}\"\n        aria-label=\"${locale.monthNames[idx]}\"\n      >\n        ${month}\n      </button>\n    `;\n\t});\n\n\treturn `\n    <div class=\"month-grid grid grid-cols-3 gap-2 p-2\">\n      ${months.join('')}\n    </div>\n  `;\n}\n\n/**\n * Template for year selection view\n *\n * @param startYear - Start year\n * @param endYear - End year\n * @param currentYear - Current selected year\n * @returns Year selection HTML\n */\nexport function yearSelectionTemplate(\n\tstartYear: number,\n\tendYear: number,\n\tcurrentYear: number,\n): string {\n\tconst years = [];\n\n\tfor (let year = startYear; year <= endYear; year++) {\n\t\tconst isCurrentYear = year === currentYear;\n\t\tconst yearClass = isCurrentYear\n\t\t\t? 'py-3 px-2 text-center text-sm rounded-md bg-blue-500 text-white font-medium hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500'\n\t\t\t: 'py-3 px-2 text-center text-sm rounded-md bg-transparent hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800';\n\n\t\tyears.push(`\n      <button\n        type=\"button\"\n        class=\"${yearClass}\"\n        data-year=\"${year}\"\n        aria-selected=\"${isCurrentYear}\"\n      >\n        ${year}\n      </button>\n    `);\n\t}\n\n\t// Navigation to previous/next year ranges\n\tconst prevYearsBtn = `\n    <button\n      type=\"button\"\n      class=\"py-2 px-2 text-center text-sm rounded-md bg-gray-100 text-gray-600 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n      data-year-nav=\"prev\"\n      aria-label=\"Previous years\"\n    >\n      ${startYear - 1}...\n    </button>\n  `;\n\n\tconst nextYearsBtn = `\n    <button\n      type=\"button\"\n      class=\"py-2 px-2 text-center text-sm rounded-md bg-gray-100 text-gray-600 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n      data-year-nav=\"next\"\n      aria-label=\"Next years\"\n    >\n      ...${endYear + 1}\n    </button>\n  `;\n\n\treturn `\n    <div class=\"year-selection\">\n      <div class=\"year-navigation flex justify-between mb-2 px-2\">\n        ${prevYearsBtn}\n        <span class=\"text-gray-700 font-medium\">${startYear}-${endYear}</span>\n        ${nextYearsBtn}\n      </div>\n      <div class=\"year-grid grid grid-cols-4 gap-2 p-2\">\n        ${years.join('')}\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Create placeholder template with placeholder text\n *\n * @param placeholder - Placeholder text to display\n * @returns HTML string for the placeholder\n */\nexport const placeholderTemplate = (placeholder: string): string => {\n\treturn `<span class=\"text-gray-500\">${placeholder}</span>`;\n};\n\n/**\n * Create a template for the display wrapper\n */\nexport function displayWrapperTemplate(classes: string = ''): string {\n\treturn `\n    <div class=\"kt-datepicker-display-wrapper relative w-full ${classes}\"\n      role=\"combobox\"\n      aria-haspopup=\"dialog\"\n      aria-expanded=\"false\"\n    >\n    </div>\n  `;\n}\n\n/**\n * Create a template for the display element\n */\nexport function displayElementTemplate(\n\tplaceholder: string,\n\tclasses: string = '',\n): string {\n\treturn `\n    <div class=\"kt-datepicker-display-element py-2 px-3 border rounded cursor-pointer ${classes}\"\n      tabindex=\"0\"\n      role=\"textbox\"\n      aria-label=\"${placeholder}\"\n      data-placeholder=\"${placeholder}\"\n    >\n      <span class=\"kt-datepicker-display-text\"></span>\n    </div>\n  `;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n/**\n * Interface for locale configuration\n */\nexport interface LocaleConfigInterface {\n\tmonthNames: string[];\n\tmonthNamesShort: string[];\n\tdayNames: string[];\n\tdayNamesShort: string[];\n\tdayNamesMin: string[];\n\tfirstDayOfWeek: number;\n}\n\n/**\n * Interface for date range selection\n */\nexport interface DateRangeInterface {\n\tstartDate: Date | null;\n\tendDate: Date | null;\n}\n\n/**\n * Interface for time configuration\n */\nexport interface TimeConfigInterface {\n\thours: number;\n\tminutes: number;\n\tseconds: number;\n\tampm?: 'AM' | 'PM';\n}\n\n/**\n * Datepicker configuration interface\n */\nexport interface KTDatepickerConfigInterface {\n\t// Locale settings\n\tlocale: string;\n\tlocales: { [key: string]: LocaleConfigInterface };\n\n\t// Calendar display\n\tweekDays: 'long' | 'short' | 'min';\n\tforceLeadingZero: boolean;\n\n\t// Date boundaries\n\tminDate?: Date | string;\n\tmaxDate?: Date | string;\n\n\t// Calendar options\n\tvisibleMonths: number;\n\tvisibleYears: number;\n\tkeepViewModeOnSelection?: boolean; // If true, don't automatically switch view modes when selecting month/year\n\n\t// Date formatting\n\tformat: string;\n\n\t// Time options\n\tenableTime: boolean;\n\ttimeFormat: string;\n\tam: string;\n\tpm: string;\n\thourStep: number;\n\tminuteStep?: number;\n\tsecondStep?: number;\n\tdisabledHours?: number[];\n\tdisabledMinutes?: number[];\n\n\t// Date range options\n\trange: boolean;\n\trangeSeparator: string;\n\n\t// Multi-date selection\n\tmultiDateSelection: boolean;\n\tmaxDates: number;\n\n\t// Date constraints\n\tdisabledDates: (Date | string)[];\n\tenableNaturalLanguage: boolean;\n\n\t// Animation settings\n\tanimationDuration: number;\n\tanimationEasing: string;\n\tanimationEnterClass: string;\n\tanimationExitClass: string;\n\n\t// Custom callbacks\n\tonOpen?: () => void;\n\tonClose?: () => void;\n\tonChange?: (date: Date | null | DateRangeInterface) => void;\n\tonMonthChange?: (month: number, year: number) => void;\n\tonYearChange?: (year: number) => void;\n}\n\n/**\n * Datepicker state interface\n */\nexport interface KTDatepickerStateInterface {\n\tcurrentDate: Date;\n\tselectedDate: Date | null;\n\tselectedDateRange: DateRangeInterface | null;\n\tselectedDates: Date[];\n\tviewMode: 'days' | 'months' | 'years';\n\tisOpen: boolean;\n\tisFocused: boolean;\n\tisRangeSelectionStart: boolean;\n\tisRangeSelectionInProgress: boolean;\n\tselectedTime: TimeConfigInterface | null;\n\tprevIsOpen?: boolean; // Used to track previous open state\n}\n\n/**\n * Calendar day cell interface\n */\nexport interface CalendarDayCellInterface {\n\tdate: Date;\n\tdayNumber: number;\n\tisCurrentMonth: boolean;\n\tisPreviousMonth: boolean;\n\tisNextMonth: boolean;\n\tisToday: boolean;\n\tisSelected: boolean;\n\tisDisabled: boolean;\n\tisRangeStart: boolean;\n\tisRangeEnd: boolean;\n\tisInRange: boolean;\n\tisWeekend: boolean;\n}\n\n/**\n * Calendar month interface\n */\nexport interface CalendarMonthInterface {\n\tmonth: number;\n\tyear: number;\n\tdays: CalendarDayCellInterface[][];\n}\n\n/**\n * KTDatepicker events enum\n */\nexport enum KTDatepickerEvents {\n\tCALENDAR_UPDATE = 'kt.datepicker.calendar.update',\n\tDAY_SELECT = 'kt.datepicker.day.select',\n\tMONTH_CHANGE = 'kt.datepicker.month.change',\n\tDROPDOWN_SHOW = 'kt.datepicker.dropdown.show',\n\tDROPDOWN_HIDE = 'kt.datepicker.dropdown.hide',\n\tCHANGE = 'kt.datepicker.change',\n\tOPEN = 'kt.datepicker.open',\n\tCLOSE = 'kt.datepicker.close',\n\tGET_RANGE = 'kt.datepicker.getRange',\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTDatepickerConfigInterface, LocaleConfigInterface } from './types';\n\n/**\n * Format a date according to the provided format string\n *\n * @param date - Date to format\n * @param format - Format string\n * @param config - Datepicker configuration\n * @returns Formatted date string\n */\nexport function formatDate(\n\tdate: Date,\n\tformat: string,\n\tconfig: KTDatepickerConfigInterface,\n): string {\n\tif (!date || !(date instanceof Date) || isNaN(date.getTime())) {\n\t\treturn '';\n\t}\n\n\tconst locale = getLocaleConfig(config);\n\tconst isLeadingZero = config.forceLeadingZero;\n\n\t// Replace year tokens\n\tconst year = date.getFullYear();\n\tformat = format.replace(/yyyy/g, year.toString());\n\tformat = format.replace(/yy/g, year.toString().slice(-2));\n\n\t// Replace month tokens\n\tconst month = date.getMonth();\n\tconst monthNum = month + 1;\n\tformat = format.replace(/MMMM/g, locale.monthNames[month]);\n\tformat = format.replace(/MMM/g, locale.monthNamesShort[month]);\n\tformat = format.replace(\n\t\t/MM/g,\n\t\tisLeadingZero ? padZero(monthNum) : monthNum.toString(),\n\t);\n\tformat = format.replace(/M/g, monthNum.toString());\n\n\t// Replace day tokens\n\tconst day = date.getDate();\n\tformat = format.replace(/dd/g, isLeadingZero ? padZero(day) : day.toString());\n\tformat = format.replace(/d/g, day.toString());\n\n\t// Replace day of week tokens\n\tconst dayOfWeek = date.getDay();\n\tformat = format.replace(/EEEE/g, locale.dayNames[dayOfWeek]);\n\tformat = format.replace(/EEE/g, locale.dayNamesShort[dayOfWeek]);\n\tformat = format.replace(/E/g, locale.dayNamesMin[dayOfWeek]);\n\n\t// Replace time tokens if time is enabled\n\tif (config.enableTime) {\n\t\tconst hours = date.getHours();\n\t\tconst minutes = date.getMinutes();\n\t\tconst seconds = date.getSeconds();\n\n\t\t// 24-hour format\n\t\tformat = format.replace(\n\t\t\t/HH/g,\n\t\t\tisLeadingZero ? padZero(hours) : hours.toString(),\n\t\t);\n\t\tformat = format.replace(/H/g, hours.toString());\n\n\t\t// 12-hour format\n\t\tconst hours12 = hours % 12 || 12;\n\t\tformat = format.replace(\n\t\t\t/hh/g,\n\t\t\tisLeadingZero ? padZero(hours12) : hours12.toString(),\n\t\t);\n\t\tformat = format.replace(/h/g, hours12.toString());\n\n\t\t// Minutes and seconds\n\t\tformat = format.replace(\n\t\t\t/mm/g,\n\t\t\tisLeadingZero ? padZero(minutes) : minutes.toString(),\n\t\t);\n\t\tformat = format.replace(/m/g, minutes.toString());\n\t\tformat = format.replace(\n\t\t\t/ss/g,\n\t\t\tisLeadingZero ? padZero(seconds) : seconds.toString(),\n\t\t);\n\t\tformat = format.replace(/s/g, seconds.toString());\n\n\t\t// AM/PM\n\t\tconst ampm = hours >= 12 ? config.pm : config.am;\n\t\tformat = format.replace(/A/g, ampm);\n\t\tformat = format.replace(/a/g, ampm.toLowerCase());\n\n\t\t// Timezone (simplified implementation)\n\t\tconst timezoneOffset = date.getTimezoneOffset();\n\t\tconst timezoneOffsetHours = Math.abs(Math.floor(timezoneOffset / 60));\n\t\tconst timezoneOffsetMinutes = Math.abs(timezoneOffset % 60);\n\t\tconst timezoneSign = timezoneOffset > 0 ? '-' : '+';\n\n\t\tconst formattedTimezone = `${timezoneSign}${padZero(timezoneOffsetHours)}:${padZero(timezoneOffsetMinutes)}`;\n\t\tformat = format.replace(/ZZZ/g, formattedTimezone);\n\t}\n\n\treturn format;\n}\n\n/**\n * Parse a date string according to the provided format\n *\n * @param dateStr - Date string to parse\n * @param format - Format string\n * @param config - Datepicker configuration\n * @returns Parsed date or null if invalid\n */\nexport function parseDate(\n\tdateStr: string,\n\tformat: string,\n\tconfig: KTDatepickerConfigInterface,\n): Date | null {\n\tif (!dateStr) return null;\n\n\t// Handle natural language dates if enabled\n\tif (config.enableNaturalLanguage) {\n\t\tconst naturalDate = parseNaturalLanguageDate(dateStr);\n\t\tif (naturalDate) return naturalDate;\n\t}\n\n\t// Create a new date object to populate\n\tconst date = new Date();\n\tdate.setHours(0, 0, 0, 0);\n\n\t// Extract parts from the format\n\tconst formatParts: { [key: string]: string } = {};\n\n\tlet formatRegex = format\n\t\t.replace(/(\\w)(\\1*)/g, (_, p1, p2) => {\n\t\t\tconst length = p1.length + p2.length;\n\t\t\tlet token = '';\n\n\t\t\tswitch (p1) {\n\t\t\t\tcase 'y':\n\t\t\t\t\ttoken = length > 2 ? 'yyyy' : 'yy';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'M':\n\t\t\t\t\ttoken = ['M', 'MM', 'MMM', 'MMMM'][Math.min(length - 1, 3)];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'd':\n\t\t\t\t\ttoken = length > 1 ? 'dd' : 'd';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'E':\n\t\t\t\t\ttoken = length > 3 ? 'EEEE' : length > 1 ? 'EEE' : 'E';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'h':\n\t\t\t\tcase 'H':\n\t\t\t\t\ttoken = length > 1 ? p1 + p1 : p1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'm':\n\t\t\t\t\ttoken = length > 1 ? 'mm' : 'm';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 's':\n\t\t\t\t\ttoken = length > 1 ? 'ss' : 's';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'a':\n\t\t\t\tcase 'A':\n\t\t\t\t\ttoken = p1;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttoken = p1.repeat(length);\n\t\t\t}\n\n\t\t\tformatParts[token] = '';\n\t\t\treturn `(\\\\d+|[a-zA-Z]+)`;\n\t\t})\n\t\t.replace(/[^\\w\\s]/g, '\\\\$&');\n\n\tconst match = new RegExp(formatRegex).exec(dateStr);\n\tif (!match) return null;\n\n\t// Map format tokens to their extracted values\n\tlet i = 1;\n\tfor (const token in formatParts) {\n\t\tformatParts[token] = match[i++];\n\t}\n\n\t// Extract year\n\tif (formatParts.yyyy) {\n\t\tdate.setFullYear(parseInt(formatParts.yyyy));\n\t} else if (formatParts.yy) {\n\t\tconst year = parseInt(formatParts.yy);\n\t\tconst century = Math.floor(new Date().getFullYear() / 100) * 100;\n\t\tdate.setFullYear(century + year);\n\t}\n\n\t// Extract month\n\tif (formatParts.MM || formatParts.M) {\n\t\tconst month = parseInt(formatParts.MM || formatParts.M) - 1;\n\t\tif (month >= 0 && month <= 11) {\n\t\t\tdate.setMonth(month);\n\t\t}\n\t} else if (formatParts.MMM || formatParts.MMMM) {\n\t\tconst monthName = formatParts.MMMM || formatParts.MMM;\n\t\tconst locale = getLocaleConfig(config);\n\t\tconst monthIndex = locale.monthNames.findIndex(\n\t\t\t(m) => m.toLowerCase() === monthName.toLowerCase(),\n\t\t);\n\t\tif (monthIndex === -1) {\n\t\t\tconst shortMonthIndex = locale.monthNamesShort.findIndex(\n\t\t\t\t(m) => m.toLowerCase() === monthName.toLowerCase(),\n\t\t\t);\n\t\t\tif (shortMonthIndex !== -1) {\n\t\t\t\tdate.setMonth(shortMonthIndex);\n\t\t\t}\n\t\t} else {\n\t\t\tdate.setMonth(monthIndex);\n\t\t}\n\t}\n\n\t// Extract day\n\tif (formatParts.dd || formatParts.d) {\n\t\tconst day = parseInt(formatParts.dd || formatParts.d);\n\t\tif (day >= 1 && day <= 31) {\n\t\t\tdate.setDate(day);\n\t\t}\n\t}\n\n\t// Extract time if needed\n\tif (config.enableTime) {\n\t\t// Hours (24-hour format)\n\t\tif (formatParts.HH || formatParts.H) {\n\t\t\tconst hours = parseInt(formatParts.HH || formatParts.H);\n\t\t\tif (hours >= 0 && hours <= 23) {\n\t\t\t\tdate.setHours(hours);\n\t\t\t}\n\t\t}\n\t\t// Hours (12-hour format)\n\t\telse if (formatParts.hh || formatParts.h) {\n\t\t\tlet hours = parseInt(formatParts.hh || formatParts.h);\n\n\t\t\t// Adjust for AM/PM\n\t\t\tif (formatParts.A) {\n\t\t\t\tconst isPM = formatParts.A.toUpperCase() === config.pm;\n\t\t\t\tif (isPM && hours < 12) {\n\t\t\t\t\thours += 12;\n\t\t\t\t} else if (!isPM && hours === 12) {\n\t\t\t\t\thours = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hours >= 0 && hours <= 23) {\n\t\t\t\tdate.setHours(hours);\n\t\t\t}\n\t\t}\n\n\t\t// Minutes\n\t\tif (formatParts.mm || formatParts.m) {\n\t\t\tconst minutes = parseInt(formatParts.mm || formatParts.m);\n\t\t\tif (minutes >= 0 && minutes <= 59) {\n\t\t\t\tdate.setMinutes(minutes);\n\t\t\t}\n\t\t}\n\n\t\t// Seconds\n\t\tif (formatParts.ss || formatParts.s) {\n\t\t\tconst seconds = parseInt(formatParts.ss || formatParts.s);\n\t\t\tif (seconds >= 0 && seconds <= 59) {\n\t\t\t\tdate.setSeconds(seconds);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Validate the final date\n\treturn isValidDate(date) ? date : null;\n}\n\n/**\n * Parse natural language date strings\n *\n * @param input - Natural language date string\n * @returns Parsed date or null if not recognized\n */\nfunction parseNaturalLanguageDate(input: string): Date | null {\n\tconst normalized = input.trim().toLowerCase();\n\tconst now = new Date();\n\n\t// Handle common natural language inputs\n\tswitch (normalized) {\n\t\tcase 'today':\n\t\t\treturn new Date(now.setHours(0, 0, 0, 0));\n\n\t\tcase 'yesterday': {\n\t\t\tconst yesterday = new Date(now);\n\t\t\tyesterday.setDate(yesterday.getDate() - 1);\n\t\t\tyesterday.setHours(0, 0, 0, 0);\n\t\t\treturn yesterday;\n\t\t}\n\n\t\tcase 'tomorrow': {\n\t\t\tconst tomorrow = new Date(now);\n\t\t\ttomorrow.setDate(tomorrow.getDate() + 1);\n\t\t\ttomorrow.setHours(0, 0, 0, 0);\n\t\t\treturn tomorrow;\n\t\t}\n\n\t\tdefault: {\n\t\t\t// Handle relative dates like \"next week\", \"last month\", etc.\n\t\t\tconst relativeMatch = normalized.match(\n\t\t\t\t/^(next|last|this)\\s+(day|week|month|year)$/,\n\t\t\t);\n\t\t\tif (relativeMatch) {\n\t\t\t\tconst [_, direction, unit] = relativeMatch;\n\t\t\t\tconst result = new Date(now);\n\t\t\t\tresult.setHours(0, 0, 0, 0);\n\n\t\t\t\tswitch (unit) {\n\t\t\t\t\tcase 'day':\n\t\t\t\t\t\tresult.setDate(\n\t\t\t\t\t\t\tresult.getDate() +\n\t\t\t\t\t\t\t\t(direction === 'next' ? 1 : direction === 'last' ? -1 : 0),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'week':\n\t\t\t\t\t\tresult.setDate(\n\t\t\t\t\t\t\tresult.getDate() +\n\t\t\t\t\t\t\t\t(direction === 'next' ? 7 : direction === 'last' ? -7 : 0),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'month':\n\t\t\t\t\t\tresult.setMonth(\n\t\t\t\t\t\t\tresult.getMonth() +\n\t\t\t\t\t\t\t\t(direction === 'next' ? 1 : direction === 'last' ? -1 : 0),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'year':\n\t\t\t\t\t\tresult.setFullYear(\n\t\t\t\t\t\t\tresult.getFullYear() +\n\t\t\t\t\t\t\t\t(direction === 'next' ? 1 : direction === 'last' ? -1 : 0),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\n/**\n * Check if a date is valid\n *\n * @param date - Date to check\n * @returns Whether the date is valid\n */\nexport function isValidDate(date: any): boolean {\n\treturn date instanceof Date && !isNaN(date.getTime());\n}\n\n/**\n * Get the number of days in a month\n *\n * @param year - Year\n * @param month - Month (0-indexed)\n * @returns Number of days in the month\n */\nexport function getDaysInMonth(year: number, month: number): number {\n\treturn new Date(year, month + 1, 0).getDate();\n}\n\n/**\n * Get the first day of the month\n *\n * @param year - Year\n * @param month - Month (0-indexed)\n * @returns Day of week for the first day (0 = Sunday, 6 = Saturday)\n */\nexport function getFirstDayOfMonth(year: number, month: number): number {\n\treturn new Date(year, month, 1).getDay();\n}\n\n/**\n * Pad a number with a leading zero if needed\n *\n * @param num - Number to pad\n * @returns Padded number string\n */\nexport function padZero(num: number): string {\n\treturn num < 10 ? `0${num}` : num.toString();\n}\n\n/**\n * Get locale configuration for the datepicker\n *\n * @param config - Datepicker configuration\n * @returns Locale configuration\n */\nexport function getLocaleConfig(\n\tconfig: KTDatepickerConfigInterface,\n): LocaleConfigInterface {\n\treturn config.locales[config.locale] || config.locales['en-US'];\n}\n\n/**\n * Check if a date is between two other dates (inclusive)\n *\n * @param date - Date to check\n * @param start - Start date\n * @param end - End date\n * @returns Whether the date is between start and end\n */\nexport function isDateBetween(date: Date, start: Date, end: Date): boolean {\n\tconst dateTime = date.getTime();\n\treturn dateTime >= start.getTime() && dateTime <= end.getTime();\n}\n\n/**\n * Compare two dates for equality (ignoring time)\n *\n * @param date1 - First date\n * @param date2 - Second date\n * @returns Whether the dates are equal\n */\nexport function isSameDay(date1: Date, date2: Date): boolean {\n\treturn (\n\t\tdate1.getFullYear() === date2.getFullYear() &&\n\t\tdate1.getMonth() === date2.getMonth() &&\n\t\tdate1.getDate() === date2.getDate()\n\t);\n}\n\n/**\n * Check if a date is a weekend (Saturday or Sunday)\n *\n * @param date - Date to check\n * @returns Whether the date is a weekend\n */\nexport function isWeekend(date: Date): boolean {\n\tconst day = date.getDay();\n\treturn day === 0 || day === 6;\n}\n\n/**\n * Check if a date is disabled (outside min/max range or explicitly disabled)\n *\n * @param date - Date to check\n * @param config - Datepicker configuration\n * @returns Whether the date is disabled\n */\nexport function isDateDisabled(\n\tdate: Date,\n\tconfig: KTDatepickerConfigInterface,\n): boolean {\n\tif (!date || !(date instanceof Date) || isNaN(date.getTime())) {\n\t\treturn true;\n\t}\n\n\t// Set the time to noon for consistent comparison\n\tconst normalizedDate = new Date(date);\n\tnormalizedDate.setHours(12, 0, 0, 0);\n\n\t// Check min date\n\tif (config.minDate) {\n\t\tlet minDate: Date | null = null;\n\n\t\tif (config.minDate instanceof Date) {\n\t\t\tminDate = new Date(config.minDate);\n\t\t\tminDate.setHours(0, 0, 0, 0);\n\t\t} else {\n\t\t\t// Try parsing with the configured format\n\t\t\tminDate = parseDate(config.minDate.toString(), config.format, config);\n\n\t\t\t// If that fails, try parsing with other common formats\n\t\t\tif (!minDate) {\n\t\t\t\t// Try DD/MM/YYYY format\n\t\t\t\tconst parts = config.minDate.toString().split('/');\n\t\t\t\tif (parts.length === 3) {\n\t\t\t\t\tconst day = parseInt(parts[0], 10);\n\t\t\t\t\tconst month = parseInt(parts[1], 10) - 1;\n\t\t\t\t\tconst year = parseInt(parts[2], 10);\n\n\t\t\t\t\tif (!isNaN(day) && !isNaN(month) && !isNaN(year)) {\n\t\t\t\t\t\tminDate = new Date(year, month, day);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (minDate) {\n\t\t\t// Ensure minDate has time set to beginning of day for accurate comparison\n\t\t\tminDate.setHours(0, 0, 0, 0);\n\t\t\tif (normalizedDate < minDate) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check max date\n\tif (config.maxDate) {\n\t\tlet maxDate: Date | null = null;\n\n\t\tif (config.maxDate instanceof Date) {\n\t\t\tmaxDate = new Date(config.maxDate);\n\t\t\tmaxDate.setHours(23, 59, 59, 999);\n\t\t} else {\n\t\t\t// Try parsing with the configured format\n\t\t\tmaxDate = parseDate(config.maxDate.toString(), config.format, config);\n\n\t\t\t// If that fails, try parsing with other common formats\n\t\t\tif (!maxDate) {\n\t\t\t\t// Try DD/MM/YYYY format\n\t\t\t\tconst parts = config.maxDate.toString().split('/');\n\t\t\t\tif (parts.length === 3) {\n\t\t\t\t\tconst day = parseInt(parts[0], 10);\n\t\t\t\t\tconst month = parseInt(parts[1], 10) - 1;\n\t\t\t\t\tconst year = parseInt(parts[2], 10);\n\n\t\t\t\t\tif (!isNaN(day) && !isNaN(month) && !isNaN(year)) {\n\t\t\t\t\t\tmaxDate = new Date(year, month, day);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (maxDate) {\n\t\t\t// Ensure maxDate has time set to end of day for accurate comparison\n\t\t\tmaxDate.setHours(23, 59, 59, 999);\n\t\t\tif (normalizedDate > maxDate) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check explicitly disabled dates\n\tif (config.disabledDates && config.disabledDates.length > 0) {\n\t\tfor (const disabledDate of config.disabledDates) {\n\t\t\tconst disabled =\n\t\t\t\tdisabledDate instanceof Date\n\t\t\t\t\t? disabledDate\n\t\t\t\t\t: parseDate(disabledDate.toString(), config.format, config);\n\n\t\t\tif (disabled && isSameDay(normalizedDate, disabled)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Generate a calender for the specified month\n *\n * @param year - Year\n * @param month - Month (0-indexed)\n * @param config - Datepicker configuration\n * @returns Calendar days matrix\n */\nexport function generateCalendarMonth(\n\tyear: number,\n\tmonth: number,\n\tconfig: KTDatepickerConfigInterface,\n): Date[][] {\n\tconst daysInMonth = getDaysInMonth(year, month);\n\tconst firstDayOfMonth = getFirstDayOfMonth(year, month);\n\tconst locale = getLocaleConfig(config);\n\tconst firstDayOfWeek = locale.firstDayOfWeek;\n\n\t// Calculate the offset from the first day of the month to the first day of the calendar\n\tlet startOffset = (firstDayOfMonth - firstDayOfWeek + 7) % 7;\n\n\t// Create a 6x7 matrix for the calendar\n\tconst calendar: Date[][] = [];\n\tlet day = 1 - startOffset;\n\n\tfor (let week = 0; week < 6; week++) {\n\t\tconst weekDays: Date[] = [];\n\n\t\tfor (let i = 0; i < 7; i++) {\n\t\t\tconst date = new Date(year, month, day);\n\t\t\tweekDays.push(date);\n\t\t\tday++;\n\t\t}\n\n\t\tcalendar.push(weekDays);\n\n\t\t// If we've gone past the end of the month and it's a complete week, we can stop\n\t\tif (day > daysInMonth && week >= 4) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn calendar;\n}\n\n/**\n * Check if two dates are the same day\n * (ignoring time part)\n *\n * @param date1 - First date to compare\n * @param date2 - Second date to compare\n * @returns True if dates are the same day\n */\nexport function isDateEqual(date1: Date, date2: Date): boolean {\n\treturn (\n\t\tdate1.getDate() === date2.getDate() &&\n\t\tdate1.getMonth() === date2.getMonth() &&\n\t\tdate1.getFullYear() === date2.getFullYear()\n\t);\n}\n\n/**\n * Check if a date is within a range (inclusive)\n *\n * @param date - Date to check\n * @param startDate - Start date of the range\n * @param endDate - End date of the range\n * @returns True if date is within the range\n */\nexport function isDateInRange(\n\tdate: Date,\n\tstartDate: Date,\n\tendDate: Date,\n): boolean {\n\tconst time = date.getTime();\n\tconst startTime = startDate.getTime();\n\tconst endTime = endDate.getTime();\n\n\treturn time >= startTime && time <= endTime;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTComponent from '../component';\nimport { KTDismissInterface, KTDismissConfigInterface } from './types';\nimport { KTDismissModeType } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_DISMISS_INITIALIZED: boolean;\n\t\tKTDismiss: typeof KTDismiss;\n\t}\n}\n\nexport class KTDismiss extends KTComponent implements KTDismissInterface {\n\tprotected override _name: string = 'dismiss';\n\tprotected override _defaultConfig: KTDismissConfigInterface = {\n\t\thiddenClass: 'hidden',\n\t\tmode: 'remove',\n\t\tinterrupt: true,\n\t\ttarget: '',\n\t};\n\tprotected override _config: KTDismissConfigInterface = this._defaultConfig;\n\tprotected _isAnimating: boolean = false;\n\tprotected _targetElement: HTMLElement | null = null;\n\n\tconstructor(element: HTMLElement, config?: KTDismissConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tthis._config['mode'] = this._config['mode'] as KTDismissModeType;\n\n\t\tif (!this._element) return;\n\n\t\tthis._targetElement = this._getTargetElement();\n\t\tif (!this._targetElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handlers();\n\t}\n\n\tprivate _getTargetElement(): HTMLElement | null {\n\t\treturn (\n\t\t\tKTDom.getElement(\n\t\t\t\tthis._element.getAttribute('data-kt-dismiss') as string,\n\t\t\t) || KTDom.getElement(this._getOption('target') as string)\n\t\t);\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._element) return;\n\n\t\tthis._element.addEventListener('click', (event: Event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif ((this._getOption('interrupt') as boolean) === true) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\n\t\t\tthis._dismiss();\n\t\t});\n\t}\n\n\tprotected _dismiss(): void {\n\t\tif (this._isAnimating) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('dismiss', payload);\n\t\tthis._dispatchEvent('dismiss', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._targetElement) return;\n\t\tthis._targetElement.style.opacity = '0';\n\t\tKTDom.reflow(this._targetElement);\n\t\tthis._isAnimating = true;\n\n\t\tKTDom.transitionEnd(this._targetElement, () => {\n\t\t\tif (!this._targetElement) return;\n\t\t\tthis._isAnimating = false;\n\t\t\tthis._targetElement.style.opacity = '';\n\n\t\t\tif (this._getOption('mode').toString().toLowerCase() === 'hide') {\n\t\t\t\tthis._targetElement.classList.add(\n\t\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tKTDom.remove(this._targetElement);\n\t\t\t}\n\n\t\t\tthis._fireEvent('dismissed');\n\t\t\tthis._dispatchEvent('dismissed');\n\t\t});\n\t}\n\n\tpublic getTargetElement(): HTMLElement {\n\t\treturn this._targetElement;\n\t}\n\n\tpublic dismiss(): void {\n\t\tthis._dismiss();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTDismiss {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'dismiss')) {\n\t\t\treturn KTData.get(element, 'dismiss') as KTDismiss;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-dismiss')) {\n\t\t\treturn new KTDismiss(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTDismissConfigInterface,\n\t): KTDismiss {\n\t\treturn this.getInstance(element) || new KTDismiss(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-dismiss]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTDismiss(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTDismiss.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTDismiss = KTDismiss;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTDismiss } from './dismiss';\nexport type { KTDismissConfigInterface, KTDismissInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTUtils from '../../helpers/utils';\nimport KTEventHandler from '../../helpers/event-handler';\nimport KTComponent from '../component';\nimport { KTDrawerInterface, KTDrawerConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_DRAWER_INITIALIZED: boolean;\n\t\tKTDrawer: typeof KTDrawer;\n\t}\n}\n\nexport class KTDrawer extends KTComponent implements KTDrawerInterface {\n\tprotected override _name: string = 'drawer';\n\tprotected override _defaultConfig: KTDrawerConfigInterface = {\n\t\tzindex: '100',\n\t\tenable: true,\n\t\tclass: '',\n\t\tshownClass: 'flex',\n\t\thiddenClass: 'hidden',\n\t\tbackdrop: true,\n\t\tbackdropClass: 'kt-drawer-backdrop',\n\t\tbackdropStatic: false,\n\t\tkeyboard: true,\n\t\tdisableScroll: true,\n\t\tpersistent: false,\n\t\tcontainer: '',\n\t\tfocus: true,\n\t};\n\tprotected override _config: KTDrawerConfigInterface = this._defaultConfig;\n\tprotected _isOpen: boolean = false;\n\tprotected _isTransitioning: boolean = false;\n\tprotected _backdropElement: HTMLElement | null = null;\n\tprotected _relatedTarget: HTMLElement | null = null;\n\n\tconstructor(element: HTMLElement, config?: KTDrawerConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\t\tthis._handleClose();\n\t\tthis._update();\n\t\tthis._handleContainer();\n\t}\n\n\tprotected _handleClose(): void {\n\t\tif (!this._element) return;\n\t\tKTEventHandler.on(this._element, '[data-kt-drawer-hide]', 'click', () => {\n\t\t\tthis._hide();\n\t\t});\n\t}\n\n\tprotected _toggle(relatedTarget?: HTMLElement): void {\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('toggle', payload);\n\t\tthis._dispatchEvent('toggle', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isOpen === true) {\n\t\t\tthis._hide();\n\t\t} else {\n\t\t\tthis._show(relatedTarget);\n\t\t}\n\t}\n\n\tprotected _show(relatedTarget?: HTMLElement): void {\n\t\tif (this._isOpen || this._isTransitioning) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('show', payload);\n\t\tthis._dispatchEvent('show', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tKTDrawer.hide();\n\n\t\tif (this._getOption('backdrop') === true) this._createBackdrop();\n\n\t\tif (relatedTarget) this._relatedTarget = relatedTarget;\n\n\t\tif (!this._element) return;\n\t\tthis._isTransitioning = true;\n\t\tthis._element.classList.remove(this._getOption('hiddenClass') as string);\n\t\tthis._element.classList.add(this._getOption('shownClass') as string);\n\t\tthis._element.setAttribute('role', 'dialog');\n\t\tthis._element.setAttribute('aria-modal', 'true');\n\t\tthis._element.setAttribute('tabindex', '-1');\n\n\t\tconst zindex: number = parseInt(this._getOption('zindex') as string);\n\t\tif (zindex > 0) {\n\t\t\tthis._element.style.zIndex = `${zindex}`;\n\t\t}\n\n\t\tif (this._getOption('disableScroll')) {\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t}\n\n\t\tKTDom.reflow(this._element);\n\t\tthis._element.classList.add('open');\n\n\t\tKTDom.transitionEnd(this._element, () => {\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = true;\n\n\t\t\tif (this._getOption('focus') === true) {\n\t\t\t\tthis._autoFocus();\n\t\t\t}\n\n\t\t\tthis._fireEvent('shown');\n\t\t\tthis._dispatchEvent('shown');\n\t\t});\n\t}\n\n\tprotected _hide(): void {\n\t\tif (!this._element) return;\n\t\tif (this._isOpen === false || this._isTransitioning) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('hide', payload);\n\t\tthis._dispatchEvent('hide', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isTransitioning = true;\n\t\tthis._element.removeAttribute('role');\n\t\tthis._element.removeAttribute('aria-modal');\n\t\tthis._element.removeAttribute('tabindex');\n\t\tif (this._getOption('disableScroll')) {\n\t\t\tdocument.body.style.overflow = '';\n\t\t}\n\n\t\tKTDom.reflow(this._element);\n\t\tthis._element.classList.remove('open');\n\n\t\tif (this._getOption('backdrop') === true) {\n\t\t\tthis._deleteBackdrop();\n\t\t}\n\n\t\tKTDom.transitionEnd(this._element, () => {\n\t\t\tif (!this._element) return;\n\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = false;\n\t\t\tthis._element.classList.add(this._getOption('hiddenClass') as string);\n\t\t\tthis._element.classList.remove(this._getOption('shownClass') as string);\n\t\t\tthis._element.style.zIndex = '';\n\n\t\t\tthis._fireEvent('hidden');\n\t\t\tthis._dispatchEvent('hidden');\n\t\t});\n\t}\n\n\tprotected _update(): void {\n\t\tif ((this._getOption('class') as string)?.length > 0) {\n\t\t\tif (this.isEnabled()) {\n\t\t\t\tKTDom.addClass(this._element, this._getOption('class') as string);\n\t\t\t} else {\n\t\t\t\tKTDom.removeClass(this._element, this._getOption('class') as string);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _handleContainer(): void {\n\t\tif (this._getOption('container')) {\n\t\t\tif (this._getOption('container') === 'body') {\n\t\t\t\tdocument.body.appendChild(this._element);\n\t\t\t} else {\n\t\t\t\tdocument\n\t\t\t\t\t.querySelector(this._getOption('container') as string)\n\t\t\t\t\t?.appendChild(this._element);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _autoFocus(): void {\n\t\tif (!this._element) return;\n\t\tconst input: HTMLInputElement | null = this._element.querySelector(\n\t\t\t'[data-kt-drawer-focus]',\n\t\t);\n\t\tif (!input) return;\n\t\telse input.focus();\n\t}\n\n\tprotected _createBackdrop(): void {\n\t\tif (!this._element) return;\n\n\t\tconst zindex: number = parseInt(this._getOption('zindex') as string);\n\n\t\tthis._backdropElement = document.createElement('DIV');\n\t\tthis._backdropElement.style.zIndex = (zindex - 1).toString();\n\t\tthis._backdropElement.setAttribute('data-kt-drawer-backdrop', 'true');\n\t\tdocument.body.append(this._backdropElement);\n\t\tKTDom.reflow(this._backdropElement);\n\t\tKTDom.addClass(\n\t\t\tthis._backdropElement,\n\t\t\tthis._getOption('backdropClass') as string,\n\t\t);\n\n\t\tthis._backdropElement.addEventListener('click', (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (this._getOption('backdropStatic') === false) {\n\t\t\t\tthis._hide();\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _deleteBackdrop(): void {\n\t\tif (!this._backdropElement) return;\n\n\t\tKTDom.reflow(this._backdropElement);\n\t\tthis._backdropElement.style.opacity = '0';\n\n\t\tKTDom.transitionEnd(this._backdropElement, () => {\n\t\t\tif (!this._backdropElement) return;\n\t\t\tKTDom.remove(this._backdropElement);\n\t\t});\n\t}\n\n\tprotected _isEnabled(): boolean {\n\t\treturn KTUtils.stringToBoolean(this._getOption('enable'));\n\t}\n\n\tpublic toggle(): void {\n\t\treturn this._toggle();\n\t}\n\n\tpublic show(relatedTarget?: HTMLElement): void {\n\t\treturn this._show(relatedTarget);\n\t}\n\n\tpublic hide(): void {\n\t\treturn this._hide();\n\t}\n\n\tpublic update(): void {\n\t\treturn this._update();\n\t}\n\n\tpublic getRelatedTarget(): HTMLElement | null {\n\t\treturn this._relatedTarget;\n\t}\n\n\tpublic isOpen(): boolean {\n\t\treturn this._isOpen;\n\t}\n\n\tpublic isEnabled(): boolean {\n\t\treturn this._isEnabled();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTDrawer {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'drawer')) {\n\t\t\treturn KTData.get(element, 'drawer') as KTDrawer;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-drawer-initialized') === 'true') {\n\t\t\treturn new KTDrawer(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTDrawerConfigInterface,\n\t): KTDrawer {\n\t\treturn this.getInstance(element) || new KTDrawer(element, config);\n\t}\n\n\tpublic static hide(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-drawer-initialized]');\n\n\t\telements.forEach((element) => {\n\t\t\tconst drawer = KTDrawer.getInstance(element as HTMLElement);\n\n\t\t\tif (drawer && drawer.isOpen()) {\n\t\t\t\tdrawer.hide();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic static handleResize(): void {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tlet timer;\n\n\t\t\tKTUtils.throttle(\n\t\t\t\ttimer,\n\t\t\t\t() => {\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.querySelectorAll('[data-kt-drawer-initialized]')\n\t\t\t\t\t\t.forEach((element) => {\n\t\t\t\t\t\t\tconst drawer = KTDrawer.getInstance(element as HTMLElement);\n\t\t\t\t\t\t\tdrawer.update();\n\n\t\t\t\t\t\t\tif (drawer && drawer.isOpen() && !drawer.isEnabled()) {\n\t\t\t\t\t\t\t\tdrawer.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t200,\n\t\t\t);\n\t\t});\n\t}\n\n\tpublic static handleToggle(): void {\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-drawer-toggle]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tconst selector = target.getAttribute('data-kt-drawer-toggle');\n\t\t\t\tif (!selector) return;\n\n\t\t\t\tconst drawerEl = document.querySelector(selector);\n\t\t\t\tconst drawer = KTDrawer.getInstance(drawerEl as HTMLElement);\n\t\t\t\tif (drawer) {\n\t\t\t\t\tdrawer.toggle();\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tpublic static handleDismiss(): void {\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-drawer-dismiss]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tconst modalElement = target.closest(\n\t\t\t\t\t'[data-kt-drawer=\"true\"]',\n\t\t\t\t) as HTMLElement;\n\t\t\t\tif (modalElement) {\n\t\t\t\t\tconst modal = KTDrawer.getInstance(modalElement);\n\t\t\t\t\tif (modal) {\n\t\t\t\t\t\tmodal.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tpublic static handleClickAway() {\n\t\tdocument.addEventListener('click', (event: Event) => {\n\t\t\tconst drawerEl = document.querySelector(\n\t\t\t\t'.open[data-kt-drawer-initialized]',\n\t\t\t);\n\t\t\tif (!drawerEl) return;\n\n\t\t\tconst drawer = KTDrawer.getInstance(drawerEl as HTMLElement);\n\t\t\tif (!drawer) return;\n\n\t\t\tif (drawer.getOption('persistent')) return;\n\n\t\t\tif (drawer.getOption('backdrop')) return;\n\n\t\t\tif (\n\t\t\t\tdrawerEl !== event.target &&\n\t\t\t\tdrawer.getRelatedTarget() !== event.target &&\n\t\t\t\tdrawerEl.contains(event.target as HTMLElement) === false\n\t\t\t) {\n\t\t\t\tdrawer.hide();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic static handleKeyword() {\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\tconst drawerEl = document.querySelector(\n\t\t\t\t'.open[data-kt-drawer-initialized]',\n\t\t\t);\n\t\t\tconst drawer = KTDrawer.getInstance(drawerEl as HTMLElement);\n\t\t\tif (!drawer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// if esc key was not pressed in combination with ctrl or alt or shift\n\t\t\tif (\n\t\t\t\tevent.key === 'Escape' &&\n\t\t\t\t!(event.ctrlKey || event.altKey || event.shiftKey)\n\t\t\t) {\n\t\t\t\tdrawer.hide();\n\t\t\t}\n\n\t\t\tif (event.code === 'Tab' && !event.metaKey) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-drawer]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTDrawer(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTDrawer.createInstances();\n\n\t\tif (window.KT_DRAWER_INITIALIZED !== true) {\n\t\t\tKTDrawer.handleToggle();\n\t\t\tKTDrawer.handleDismiss();\n\t\t\tKTDrawer.handleResize();\n\t\t\tKTDrawer.handleClickAway();\n\t\t\tKTDrawer.handleKeyword();\n\t\t\twindow.KT_DRAWER_INITIALIZED = true;\n\t\t}\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTDrawer = KTDrawer;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTDrawer } from './drawer';\nexport type { KTDrawerConfigInterface, KTDrawerInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport {\n\tInstance as PopperInstance,\n\tcreatePopper,\n\tPlacement,\n\tVirtualElement,\n} from '@popperjs/core';\nimport KTDom from '../../helpers/dom';\nimport KTData from '../../helpers/data';\nimport KTEventHandler from '../../helpers/event-handler';\nimport KTComponent from '../component';\nimport { KTDropdownConfigInterface, KTDropdownInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_DROPDOWN_INITIALIZED: boolean;\n\t\tKTDropdown: typeof KTDropdown;\n\t}\n}\n\nexport class KTDropdown extends KTComponent implements KTDropdownInterface {\n\tprotected override _name: string = 'dropdown';\n\tprotected override _defaultConfig: KTDropdownConfigInterface = {\n\t\tzindex: 105,\n\t\thoverTimeout: 200,\n\t\tplacement: 'bottom-start',\n\t\tplacementRtl: 'bottom-end',\n\t\tpermanent: false,\n\t\tdismiss: false,\n\t\tkeyboard: true,\n\t\ttrigger: 'click',\n\t\tattach: '',\n\t\toffset: '0px, 5px',\n\t\toffsetRtl: '0px, 5px',\n\t\thiddenClass: 'hidden',\n\t\tcontainer: '',\n\t};\n\tprotected override _config: KTDropdownConfigInterface = this._defaultConfig;\n\tprotected _disabled: boolean = false;\n\tprotected _toggleElement: HTMLElement;\n\tprotected _menuElement: HTMLElement;\n\tprotected _isTransitioning: boolean = false;\n\tprotected _isOpen: boolean = false;\n\n\tconstructor(element: HTMLElement, config?: KTDropdownConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tthis._toggleElement = this._element.querySelector(\n\t\t\t'[data-kt-dropdown-toggle]',\n\t\t) as HTMLElement;\n\t\tif (!this._toggleElement) return;\n\t\tthis._menuElement = this._element.querySelector(\n\t\t\t'[data-kt-dropdown-menu]',\n\t\t) as HTMLElement;\n\t\tif (!this._menuElement) return;\n\n\t\tKTData.set(this._menuElement, 'dropdownElement', this._element);\n\t\tthis._setupNestedDropdowns();\n\t\tthis._handleContainer();\n\t}\n\n\tprotected _handleContainer(): void {\n\t\tif (this._getOption('container')) {\n\t\t\tif (this._getOption('container') === 'body') {\n\t\t\t\tdocument.body.appendChild(this._menuElement);\n\t\t\t} else {\n\t\t\t\tdocument\n\t\t\t\t\t.querySelector(this._getOption('container') as string)\n\t\t\t\t\t?.appendChild(this._menuElement);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _setupNestedDropdowns(): void {\n\t\tconst subDropdowns = this._menuElement.querySelectorAll(\n\t\t\t'[data-kt-dropdown-toggle]',\n\t\t);\n\t\tsubDropdowns.forEach((subToggle) => {\n\t\t\tconst subItem = subToggle.closest(\n\t\t\t\t'[data-kt-dropdown-item]',\n\t\t\t) as HTMLElement;\n\t\t\tconst subMenu = subToggle\n\t\t\t\t.closest('.kt-menu-item')\n\t\t\t\t?.querySelector('[data-kt-dropdown-menu]');\n\t\t\tif (subItem && subMenu) {\n\t\t\t\tnew KTDropdown(subItem);\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _click(event: Event): void {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (this._disabled) return;\n\n\t\tif (this._getOption('trigger') !== 'click') return;\n\n\t\tthis._toggle();\n\t}\n\n\tprotected _mouseover(event: MouseEvent): void {\n\t\tif (this._disabled) return;\n\n\t\tif (this._getOption('trigger') !== 'hover') return;\n\n\t\tif (KTData.get(this._element, 'hover') === '1') {\n\t\t\tclearTimeout(KTData.get(this._element, 'timeout') as number);\n\t\t\tKTData.remove(this._element, 'hover');\n\t\t\tKTData.remove(this._element, 'timeout');\n\t\t}\n\n\t\tthis._show();\n\t}\n\n\tprotected _mouseout(event: MouseEvent): void {\n\t\tif (this._disabled) return;\n\n\t\tif (this._getOption('trigger') !== 'hover') return;\n\n\t\tconst relatedTarget = event.relatedTarget as HTMLElement;\n\t\tconst isWithinDropdown = this._element.contains(relatedTarget);\n\n\t\tif (isWithinDropdown) return;\n\n\t\tconst timeout = setTimeout(\n\t\t\t() => {\n\t\t\t\tif (KTData.get(this._element, 'hover') === '1') {\n\t\t\t\t\tthis._hide();\n\t\t\t\t}\n\t\t\t},\n\t\t\tparseInt(this._getOption('hoverTimeout') as string),\n\t\t);\n\n\t\tKTData.set(this._element, 'hover', '1');\n\t\tKTData.set(this._element, 'timeout', timeout);\n\t}\n\n\tprotected _toggle(): void {\n\t\tif (this._isOpen) {\n\t\t\tthis._hide();\n\t\t} else {\n\t\t\tthis._show();\n\t\t}\n\t}\n\n\tprotected _show(): void {\n\t\tif (this._isOpen || this._isTransitioning) return;\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('show', payload);\n\t\tthis._dispatchEvent('show', payload);\n\t\tif (payload.cancel) return;\n\n\t\tKTDropdown.hide(this._element);\n\n\t\tlet zIndex: number = parseInt(this._getOption('zindex') as string);\n\t\tconst parentZindex: number = KTDom.getHighestZindex(this._element);\n\n\t\tif (parentZindex !== null && parentZindex >= zIndex) {\n\t\t\tzIndex = parentZindex + 1;\n\t\t}\n\t\tif (zIndex > 0) {\n\t\t\tthis._menuElement.style.zIndex = zIndex.toString();\n\t\t}\n\n\t\tthis._menuElement.style.display = 'block';\n\t\tthis._menuElement.style.opacity = '0';\n\t\tKTDom.reflow(this._menuElement);\n\t\tthis._menuElement.style.opacity = '1';\n\n\t\tthis._menuElement.classList.remove(\n\t\t\tthis._getOption('hiddenClass') as string,\n\t\t);\n\t\tthis._toggleElement.classList.add('active');\n\t\tthis._menuElement.classList.add('open');\n\t\tthis._element.classList.add('open');\n\n\t\tthis._initPopper();\n\n\t\tKTDom.transitionEnd(this._menuElement, () => {\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = true;\n\n\t\t\tthis._fireEvent('shown');\n\t\t\tthis._dispatchEvent('shown');\n\t\t});\n\t}\n\n\tprotected _hide(): void {\n\t\tif (!this._isOpen || this._isTransitioning) return;\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('hide', payload);\n\t\tthis._dispatchEvent('hide', payload);\n\t\tif (payload.cancel) return;\n\n\t\tthis._menuElement.style.opacity = '1';\n\t\tKTDom.reflow(this._menuElement);\n\t\tthis._menuElement.style.opacity = '0';\n\t\tthis._menuElement.classList.remove('open');\n\t\tthis._toggleElement.classList.remove('active');\n\t\tthis._element.classList.remove('open');\n\n\t\tKTDom.transitionEnd(this._menuElement, () => {\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = false;\n\n\t\t\tthis._menuElement.classList.add(this._getOption('hiddenClass') as string);\n\t\t\tthis._menuElement.style.display = '';\n\t\t\tthis._menuElement.style.zIndex = '';\n\n\t\t\tthis._destroyPopper();\n\n\t\t\tthis._fireEvent('hidden');\n\t\t\tthis._dispatchEvent('hidden');\n\t\t});\n\t}\n\n\tprotected _initPopper(): void {\n\t\tconst isRtl = KTDom.isRTL();\n\t\tlet reference: HTMLElement;\n\t\tconst attach = this._getOption('attach') as string;\n\n\t\tif (attach) {\n\t\t\treference =\n\t\t\t\tattach === 'parent'\n\t\t\t\t\t? (this._toggleElement.parentNode as HTMLElement)\n\t\t\t\t\t: (document.querySelector(attach) as HTMLElement);\n\t\t} else {\n\t\t\treference = this._toggleElement;\n\t\t}\n\n\t\tif (reference) {\n\t\t\tconst popper = createPopper(\n\t\t\t\treference as Element | VirtualElement,\n\t\t\t\tthis._menuElement,\n\t\t\t\tthis._getPopperConfig(),\n\t\t\t);\n\t\t\tKTData.set(this._element, 'popper', popper);\n\t\t}\n\t}\n\n\tprotected _destroyPopper(): void {\n\t\tif (KTData.has(this._element, 'popper')) {\n\t\t\t(KTData.get(this._element, 'popper') as PopperInstance).destroy();\n\t\t\tKTData.remove(this._element, 'popper');\n\t\t}\n\t}\n\n\tprotected _isDropdownOpen(): boolean {\n\t\treturn (\n\t\t\tthis._element.classList.contains('open') &&\n\t\t\tthis._menuElement.classList.contains('open')\n\t\t);\n\t}\n\n\tprotected _getPopperConfig(): object {\n\t\tconst isRtl = KTDom.isRTL();\n\t\tlet placement = this._getOption('placement') as Placement;\n\t\tif (isRtl && this._getOption('placementRtl')) {\n\t\t\tplacement = this._getOption('placementRtl') as Placement;\n\t\t}\n\n\t\tlet offsetValue = this._getOption('offset');\n\t\tif (isRtl && this._getOption('offsetRtl')) {\n\t\t\toffsetValue = this._getOption('offsetRtl') as Placement;\n\t\t}\n\t\tconst offset = offsetValue\n\t\t\t? offsetValue\n\t\t\t\t\t.toString()\n\t\t\t\t\t.split(',')\n\t\t\t\t\t.map((value) => parseInt(value.trim(), 10))\n\t\t\t: [0, 0];\n\n\t\tconst strategy =\n\t\t\tthis._getOption('overflow') === true ? 'absolute' : 'fixed';\n\t\tconst altAxis = this._getOption('flip') !== false;\n\t\treturn {\n\t\t\tplacement: placement,\n\t\t\tstrategy: strategy,\n\t\t\tmodifiers: [\n\t\t\t\t{\n\t\t\t\t\tname: 'offset',\n\t\t\t\t\toptions: { offset: offset },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'preventOverflow',\n\t\t\t\t\toptions: { altAxis: altAxis },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'flip',\n\t\t\t\t\toptions: { flipVariations: false },\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tprotected _getToggleElement(): HTMLElement {\n\t\treturn this._toggleElement;\n\t}\n\n\tprotected _getContentElement(): HTMLElement {\n\t\treturn this._menuElement;\n\t}\n\n\t// General Methods\n\tpublic click(event: Event): void {\n\t\tthis._click(event);\n\t}\n\n\tpublic mouseover(event: MouseEvent): void {\n\t\tthis._mouseover(event);\n\t}\n\n\tpublic mouseout(event: MouseEvent): void {\n\t\tthis._mouseout(event);\n\t}\n\n\tpublic show(): void {\n\t\tthis._show();\n\t}\n\n\tpublic hide(): void {\n\t\tthis._hide();\n\t}\n\n\tpublic toggle(): void {\n\t\tthis._toggle();\n\t}\n\n\tpublic getToggleElement(): HTMLElement {\n\t\treturn this._toggleElement;\n\t}\n\n\tpublic getContentElement(): HTMLElement {\n\t\treturn this._menuElement;\n\t}\n\n\tpublic isPermanent(): boolean {\n\t\treturn this._getOption('permanent') as boolean;\n\t}\n\n\tpublic disable(): void {\n\t\tthis._disabled = true;\n\t}\n\n\tpublic enable(): void {\n\t\tthis._disabled = false;\n\t}\n\n\tpublic isOpen(): boolean {\n\t\treturn this._isDropdownOpen();\n\t}\n\n\t// Static Methods\n\tpublic static getElement(reference: HTMLElement): HTMLElement {\n\t\tif (reference && reference.hasAttribute('data-kt-dropdown-initialized'))\n\t\t\treturn reference;\n\n\t\tconst findElement =\n\t\t\treference &&\n\t\t\t(reference.closest('[data-kt-dropdown-initialized]') as HTMLElement);\n\t\tif (findElement) return findElement;\n\n\t\tif (\n\t\t\treference &&\n\t\t\treference.hasAttribute('data-kt-dropdown-menu') &&\n\t\t\tKTData.has(reference, 'dropdownElement')\n\t\t) {\n\t\t\treturn KTData.get(reference, 'dropdownElement') as HTMLElement;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTDropdown {\n\t\telement = this.getElement(element);\n\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'dropdown')) {\n\t\t\treturn KTData.get(element, 'dropdown') as KTDropdown;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-dropdown-initialized') === 'true') {\n\t\t\treturn new KTDropdown(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTDropdownConfigInterface,\n\t): KTDropdown {\n\t\treturn this.getInstance(element) || new KTDropdown(element, config);\n\t}\n\n\tpublic static update(): void {\n\t\tdocument\n\t\t\t.querySelectorAll('.open[data-kt-dropdown-initialized]')\n\t\t\t.forEach((item) => {\n\t\t\t\tif (KTData.has(item as HTMLElement, 'popper')) {\n\t\t\t\t\t(\n\t\t\t\t\t\tKTData.get(item as HTMLElement, 'popper') as PopperInstance\n\t\t\t\t\t).forceUpdate();\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tpublic static hide(skipElement?: HTMLElement): void {\n\t\tdocument\n\t\t\t.querySelectorAll(\n\t\t\t\t'.open[data-kt-dropdown-initialized]:not([data-kt-dropdown-permanent=\"true\"])',\n\t\t\t)\n\t\t\t.forEach((item) => {\n\t\t\t\tif (skipElement && (skipElement === item || item.contains(skipElement)))\n\t\t\t\t\treturn;\n\n\t\t\t\tconst dropdown = KTDropdown.getInstance(item as HTMLElement);\n\t\t\t\tif (dropdown) dropdown.hide();\n\t\t\t});\n\t}\n\n\tpublic static handleClickAway(): void {\n\t\tdocument.addEventListener('click', (event: Event) => {\n\t\t\tdocument\n\t\t\t\t.querySelectorAll(\n\t\t\t\t\t'.open[data-kt-dropdown-initialized]:not([data-kt-dropdown-permanent=\"true\"])',\n\t\t\t\t)\n\t\t\t\t.forEach((element) => {\n\t\t\t\t\tconst dropdown = KTDropdown.getInstance(element as HTMLElement);\n\t\t\t\t\tif (!dropdown) return;\n\n\t\t\t\t\tconst contentElement = dropdown.getContentElement();\n\t\t\t\t\tconst toggleElement = dropdown.getToggleElement();\n\n\t\t\t\t\tif (\n\t\t\t\t\t\ttoggleElement === event.target ||\n\t\t\t\t\t\ttoggleElement.contains(event.target as HTMLElement) ||\n\t\t\t\t\t\tcontentElement === event.target ||\n\t\t\t\t\t\tcontentElement.contains(event.target as HTMLElement)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdropdown.hide();\n\t\t\t\t});\n\t\t});\n\t}\n\n\tpublic static handleKeyboard(): void {\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\tconst dropdownEl = document.querySelector(\n\t\t\t\t'.open[data-kt-dropdown-initialized]',\n\t\t\t);\n\t\t\tconst dropdown = KTDropdown.getInstance(dropdownEl as HTMLElement);\n\t\t\tif (!dropdown || !dropdown._getOption('keyboard')) return;\n\n\t\t\tif (\n\t\t\t\tevent.key === 'Escape' &&\n\t\t\t\t!(event.ctrlKey || event.altKey || event.shiftKey)\n\t\t\t) {\n\t\t\t\tdropdown.hide();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic static handleMouseover(): void {\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-dropdown-toggle], [data-kt-dropdown-menu]',\n\t\t\t'mouseover',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tconst dropdown = KTDropdown.getInstance(target);\n\t\t\t\tif (dropdown && dropdown._getOption('trigger') === 'hover') {\n\t\t\t\t\tdropdown.mouseover(event as MouseEvent);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tpublic static handleMouseout(): void {\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-dropdown-toggle], [data-kt-dropdown-menu]',\n\t\t\t'mouseout',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tconst dropdown = KTDropdown.getInstance(target);\n\t\t\t\tif (dropdown && dropdown._getOption('trigger') === 'hover') {\n\t\t\t\t\tdropdown.mouseout(event as MouseEvent);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tpublic static handleClick(): void {\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-dropdown-toggle]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tconst dropdown = KTDropdown.getInstance(target);\n\t\t\t\tif (dropdown) {\n\t\t\t\t\tdropdown.click(event);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tpublic static handleDismiss(): void {\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-dropdown-dismiss]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tconst dropdown = KTDropdown.getInstance(target);\n\t\t\t\tif (dropdown) {\n\t\t\t\t\tdropdown.hide();\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tpublic static initHandlers(): void {\n\t\tthis.handleClickAway();\n\t\tthis.handleKeyboard();\n\t\tthis.handleMouseover();\n\t\tthis.handleMouseout();\n\t\tthis.handleClick();\n\t\tthis.handleDismiss();\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-dropdown]');\n\t\telements.forEach((element) => {\n\t\t\tnew KTDropdown(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTDropdown.createInstances();\n\n\t\tif (window.KT_DROPDOWN_INITIALIZED !== true) {\n\t\t\tKTDropdown.initHandlers();\n\t\t\twindow.KT_DROPDOWN_INITIALIZED = true;\n\t\t}\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTDropdown = KTDropdown;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTDropdown } from './dropdown';\nexport type { KTDropdownConfigInterface, KTDropdownInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTEventHandler from '../../helpers/event-handler';\nimport KTComponent from '../component';\nimport { KTImageInputInterface, KTImageInputConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_IMAGE_INPUT_INITIALIZED: boolean;\n\t\tKTImageInput: typeof KTImageInput;\n\t}\n}\n\nexport class KTImageInput extends KTComponent implements KTImageInputInterface {\n\tprotected override _name: string = 'image-input';\n\tprotected override _defaultConfig: KTImageInputConfigInterface = {\n\t\thiddenClass: 'hidden',\n\t};\n\tprotected _inputElement: HTMLInputElement;\n\tprotected _hiddenElement: HTMLInputElement;\n\tprotected _removeElement: HTMLElement;\n\tprotected _previewElement: HTMLElement;\n\tprotected _previewUrl: string = '';\n\tprotected _lastMode: string;\n\n\tconstructor(\n\t\telement: HTMLElement,\n\t\tconfig: KTImageInputConfigInterface = null,\n\t) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tthis._inputElement = this._element.querySelector('input[type=\"file\"]');\n\t\tthis._hiddenElement = this._element.querySelector('input[type=\"hidden\"]');\n\t\tthis._removeElement = this._element.querySelector(\n\t\t\t'[data-kt-image-input-remove]',\n\t\t);\n\t\tthis._previewElement = this._element.querySelector(\n\t\t\t'[data-kt-image-input-preview]',\n\t\t);\n\n\t\tthis._update();\n\t\tthis._handlers();\n\t}\n\n\tprotected _handlers(): void {\n\t\tKTEventHandler.on(\n\t\t\tthis._element,\n\t\t\t'[data-kt-image-input-placeholder]',\n\t\t\t'click',\n\t\t\t(event: Event) => {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tthis._inputElement.click();\n\t\t\t},\n\t\t);\n\n\t\tthis._inputElement.addEventListener('change', () => {\n\t\t\tthis._change();\n\t\t});\n\n\t\tthis._removeElement.addEventListener('click', () => {\n\t\t\tthis._remove();\n\t\t});\n\t}\n\n\tprotected _change(): void {\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('change', payload);\n\t\tthis._dispatchEvent('change', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst reader = new FileReader();\n\n\t\treader.onload = () => {\n\t\t\tthis._previewElement.style.backgroundImage = `url(${reader.result})`;\n\t\t};\n\n\t\treader.readAsDataURL(this._inputElement.files[0]);\n\t\tthis._inputElement.value = '';\n\t\tthis._hiddenElement.value = '';\n\t\tthis._lastMode = 'new';\n\n\t\tthis._element.classList.add('changed');\n\t\tthis._removeElement.classList.remove('hidden');\n\t\tthis._element.classList.remove('empty');\n\n\t\tthis._fireEvent('changed');\n\t\tthis._dispatchEvent('changed');\n\t}\n\n\tprotected _remove(): void {\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('remove', payload);\n\t\tthis._dispatchEvent('remove', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._element.classList.remove('empty');\n\t\tthis._element.classList.remove('changed');\n\n\t\tif (this._lastMode == 'new') {\n\t\t\tif (this._previewUrl == '')\n\t\t\t\tthis._removeElement.classList.add(\n\t\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t\t);\n\n\t\t\tif (this._previewUrl) {\n\t\t\t\tthis._previewElement.style.backgroundImage = `url(${this._previewUrl})`;\n\t\t\t} else {\n\t\t\t\tthis._previewElement.style.backgroundImage = 'none';\n\t\t\t\tthis._element.classList.add('empty');\n\t\t\t}\n\n\t\t\tthis._inputElement.value = '';\n\t\t\tthis._hiddenElement.value = '';\n\n\t\t\tthis._lastMode = 'saved';\n\t\t} else if (this._lastMode == 'saved') {\n\t\t\tif (this._previewUrl == '')\n\t\t\t\tthis._removeElement.classList.add(\n\t\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t\t);\n\n\t\t\tthis._previewElement.style.backgroundImage = 'none';\n\t\t\tthis._element.classList.add('empty');\n\n\t\t\tthis._hiddenElement.value = '1';\n\t\t\tthis._inputElement.value = '';\n\n\t\t\tthis._lastMode = 'placeholder';\n\t\t} else if (this._lastMode == 'placeholder') {\n\t\t\tif (this._previewUrl == '')\n\t\t\t\tthis._removeElement.classList.add(\n\t\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t\t);\n\n\t\t\tif (this._previewUrl) {\n\t\t\t\tthis._previewElement.style.backgroundImage = `url(${this._previewUrl})`;\n\t\t\t} else {\n\t\t\t\tthis._element.classList.add('empty');\n\t\t\t}\n\n\t\t\tthis._inputElement.value = '';\n\t\t\tthis._hiddenElement.value = '';\n\n\t\t\tthis._lastMode = 'saved';\n\t\t}\n\n\t\tthis._fireEvent('remove');\n\t\tthis._dispatchEvent('remove');\n\t}\n\n\tprotected _update() {\n\t\tif (this._previewElement.style.backgroundImage) {\n\t\t\tthis._setPreviewUrl(this._previewElement.style.backgroundImage);\n\t\t\tthis._removeElement.classList.remove(\n\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t);\n\t\t\tthis._lastMode = 'saved';\n\t\t} else {\n\t\t\tthis._removeElement.classList.add(\n\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t);\n\t\t\tthis._element.classList.add('empty');\n\t\t\tthis._lastMode = 'placeholder';\n\t\t}\n\t}\n\n\tprotected _getPreviewUrl(): string {\n\t\treturn this._previewUrl;\n\t}\n\n\tprotected _setPreviewUrl(url: string): void {\n\t\tthis._previewUrl = url.replace(/(url\\(|\\)|\")/g, '');\n\t}\n\n\tpublic isEmpty(): boolean {\n\t\treturn this._inputElement.value.length === 0;\n\t}\n\n\tpublic isChanged(): boolean {\n\t\treturn this._inputElement.value.length > 0;\n\t}\n\n\tpublic remove(): void {\n\t\tthis._remove();\n\t}\n\n\tpublic update(): void {\n\t\tthis._update();\n\t}\n\n\tpublic setPreviewUrl(url: string): void {\n\t\tthis._setPreviewUrl(url);\n\t}\n\n\tpublic getPreviewUrl(): string {\n\t\treturn this._getPreviewUrl();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTImageInput {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'image-input')) {\n\t\t\treturn KTData.get(element, 'image-input') as KTImageInput;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-image-input')) {\n\t\t\treturn new KTImageInput(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTImageInputConfigInterface,\n\t): KTImageInput {\n\t\treturn this.getInstance(element) || new KTImageInput(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-image-input]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTImageInput(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTImageInput.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTImageInput = KTImageInput;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTImageInput } from './image-input';\nexport type {\n\tKTImageInputConfigInterface,\n\tKTImageInputInterface,\n} from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTModal } from './modal';\nexport type { KTModalConfigInterface, KTModalInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTEventHandler from '../../helpers/event-handler';\nimport KTUtils from '../../helpers/utils';\nimport KTComponent from '../component';\nimport { KTModalInterface, KTModalConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_MODAL_INITIALIZED: boolean;\n\t\tKTModal: typeof KTModal;\n\t}\n}\n\nexport class KTModal extends KTComponent implements KTModalInterface {\n\tprotected override _name: string = 'modal';\n\tprotected override _defaultConfig: KTModalConfigInterface = {\n\t\tzindex: '90',\n\t\tbackdrop: true,\n\t\tbackdropClass: 'kt-modal-backdrop',\n\t\tbackdropStatic: false,\n\t\tkeyboard: true,\n\t\tdisableScroll: true,\n\t\tpersistent: false,\n\t\tfocus: true,\n\t\thiddenClass: 'hidden',\n\t};\n\tprotected override _config: KTModalConfigInterface = this._defaultConfig;\n\tprotected _isOpen: boolean = false;\n\tprotected _isTransitioning: boolean = false;\n\tprotected _backdropElement: HTMLElement | null = null;\n\tprotected _targetElement: HTMLElement | null = null;\n\n\tconstructor(element: HTMLElement, config?: KTModalConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\t\tthis._handlers();\n\t}\n\n\tprotected _handlers() {\n\t\tthis._element.addEventListener('click', (event: Event) => {\n\t\t\tif (this._element !== event.target) return;\n\n\t\t\tif (this._getOption('backdropStatic') === false) {\n\t\t\t\tthis._hide();\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _toggle(targetElement?: HTMLElement): void {\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('toggle', payload);\n\t\tthis._dispatchEvent('toggle', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isOpen === true) {\n\t\t\tthis._hide();\n\t\t} else {\n\t\t\tthis._show(targetElement);\n\t\t}\n\t}\n\n\tprotected _show(targetElement?: HTMLElement): void {\n\t\tif (this._isOpen || this._isTransitioning) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (targetElement) this._targetElement = targetElement;\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('show', payload);\n\t\tthis._dispatchEvent('show', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tKTModal.hide();\n\n\t\tif (!this._element) return;\n\t\tthis._isTransitioning = true;\n\t\tthis._element.setAttribute('role', 'dialog');\n\t\tthis._element.setAttribute('aria-modal', 'true');\n\t\tthis._element.setAttribute('tabindex', '-1');\n\n\t\tthis._setZindex();\n\t\tif (this._getOption('backdrop') === true) this._createBackdrop();\n\n\t\tif (this._getOption('disableScroll')) {\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t}\n\n\t\tthis._element.style.display = 'block';\n\t\tKTDom.reflow(this._element);\n\t\tthis._element.classList.add('open');\n\t\tthis._element.classList.remove(this._getOption('hiddenClass') as string);\n\n\t\tKTDom.transitionEnd(this._element, () => {\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = true;\n\n\t\t\tif (this._getOption('focus') === true) {\n\t\t\t\tthis._autoFocus();\n\t\t\t}\n\n\t\t\tthis._fireEvent('shown');\n\t\t\tthis._dispatchEvent('shown');\n\t\t});\n\t}\n\n\tprotected _hide(): void {\n\t\tif (!this._element) return;\n\t\tif (this._isOpen === false || this._isTransitioning) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('hide', payload);\n\t\tthis._dispatchEvent('hide', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isTransitioning = true;\n\t\tthis._element.removeAttribute('role');\n\t\tthis._element.removeAttribute('aria-modal');\n\t\tthis._element.removeAttribute('tabindex');\n\t\tif (this._getOption('disableScroll')) {\n\t\t\tdocument.body.style.overflow = '';\n\t\t}\n\n\t\tKTDom.reflow(this._element);\n\t\tthis._element.classList.remove('open');\n\n\t\tif (this._getOption('backdrop') === true) {\n\t\t\tthis._deleteBackdrop();\n\t\t}\n\n\t\tKTDom.transitionEnd(this._element, () => {\n\t\t\tif (!this._element) return;\n\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = false;\n\t\t\tthis._element.style.display = '';\n\t\t\tthis._element.classList.add(this._getOption('hiddenClass') as string);\n\n\t\t\tthis._fireEvent('hidden');\n\t\t\tthis._dispatchEvent('hidden');\n\t\t});\n\t}\n\n\tprotected _setZindex(): void {\n\t\tlet zindex: number = parseInt(this._getOption('zindex') as string);\n\n\t\tif (parseInt(KTDom.getCssProp(this._element, 'z-index')) > zindex) {\n\t\t\tzindex = parseInt(KTDom.getCssProp(this._element, 'z-index'));\n\t\t}\n\n\t\tif (KTDom.getHighestZindex(this._element) > zindex) {\n\t\t\tzindex = KTDom.getHighestZindex(this._element) + 1;\n\t\t}\n\n\t\tthis._element.style.zIndex = String(zindex);\n\t}\n\n\tprotected _autoFocus(): void {\n\t\tif (!this._element) return;\n\t\tconst input: HTMLInputElement | null = this._element.querySelector(\n\t\t\t'[data-kt-modal-input-focus]',\n\t\t);\n\t\tif (!input) return;\n\t\telse input.focus();\n\t}\n\n\tprotected _createBackdrop(): void {\n\t\tif (!this._element) return;\n\t\tconst zindex: number = parseInt(KTDom.getCssProp(this._element, 'z-index'));\n\t\tthis._backdropElement = document.createElement('DIV');\n\t\tthis._backdropElement.setAttribute('data-kt-modal-backdrop', 'true');\n\t\tthis._backdropElement.style.zIndex = (zindex - 1).toString();\n\t\tdocument.body.append(this._backdropElement);\n\t\tKTDom.reflow(this._backdropElement);\n\t\tKTDom.addClass(\n\t\t\tthis._backdropElement,\n\t\t\tthis._getOption('backdropClass') as string,\n\t\t);\n\t}\n\n\tprotected _deleteBackdrop(): void {\n\t\tif (!this._backdropElement) return;\n\n\t\tKTDom.reflow(this._backdropElement);\n\t\tthis._backdropElement.style.opacity = '0';\n\n\t\tKTDom.transitionEnd(this._backdropElement, () => {\n\t\t\tif (!this._backdropElement) return;\n\t\t\tKTDom.remove(this._backdropElement);\n\t\t});\n\t}\n\n\tpublic toggle(targetElement?: HTMLElement): void {\n\t\treturn this._toggle(targetElement);\n\t}\n\n\tpublic show(targetElement?: HTMLElement): void {\n\t\treturn this._show(targetElement);\n\t}\n\n\tpublic hide(): void {\n\t\treturn this._hide();\n\t}\n\n\tpublic getTargetElement(): HTMLElement | null {\n\t\treturn this._targetElement;\n\t}\n\n\tpublic isOpen(): boolean {\n\t\treturn this._isOpen;\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTModal {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'modal')) {\n\t\t\treturn KTData.get(element, 'modal') as KTModal;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-modal')) {\n\t\t\treturn new KTModal(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTModalConfigInterface,\n\t): KTModal {\n\t\treturn this.getInstance(element) || new KTModal(element, config);\n\t}\n\n\tpublic static hide(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-modal-initialized]');\n\n\t\telements.forEach((element) => {\n\t\t\tconst modal = KTModal.getInstance(element as HTMLElement);\n\n\t\t\tif (modal && modal.isOpen()) {\n\t\t\t\tmodal.hide();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic static handleToggle(): void {\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-modal-toggle]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tconst selector = target.getAttribute('data-kt-modal-toggle');\n\t\t\t\tif (!selector) return;\n\n\t\t\t\tconst modalElement = document.querySelector(selector);\n\t\t\t\tconst modal = KTModal.getInstance(modalElement as HTMLElement);\n\t\t\t\tif (modal) {\n\t\t\t\t\tmodal.toggle(target);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tpublic static handleDismiss(): void {\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-modal-dismiss]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tconst modalElement = target.closest(\n\t\t\t\t\t'[data-kt-modal-initialized]',\n\t\t\t\t) as HTMLElement;\n\t\t\t\tif (modalElement) {\n\t\t\t\t\tconst modal = KTModal.getInstance(modalElement);\n\t\t\t\t\tif (modal) {\n\t\t\t\t\t\tmodal.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tpublic static handleClickAway() {\n\t\tdocument.addEventListener('click', (event: Event) => {\n\t\t\tconst modalElement = document.querySelector(\n\t\t\t\t'.open[data-kt-modal-initialized]',\n\t\t\t);\n\t\t\tif (!modalElement) return;\n\n\t\t\tconst modal = KTModal.getInstance(modalElement as HTMLElement);\n\t\t\tif (!modal) return;\n\n\t\t\tif (KTUtils.stringToBoolean(modal.getOption('persistent')) === true)\n\t\t\t\treturn;\n\n\t\t\tif (KTUtils.stringToBoolean(modal.getOption('backdrop')) === true) return;\n\n\t\t\tif (\n\t\t\t\tmodalElement !== event.target &&\n\t\t\t\tmodal.getTargetElement() !== event.target &&\n\t\t\t\tmodalElement.contains(event.target as HTMLElement) === false\n\t\t\t) {\n\t\t\t\tmodal.hide();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic static handleKeyword() {\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\tconst modalElement = document.querySelector(\n\t\t\t\t'.open[data-kt-modal-initialized]',\n\t\t\t);\n\t\t\tconst modal = KTModal.getInstance(modalElement as HTMLElement);\n\t\t\tif (!modal) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// if esc key was not pressed in combination with ctrl or alt or shift\n\t\t\tif (\n\t\t\t\tevent.key === 'Escape' &&\n\t\t\t\t!(event.ctrlKey || event.altKey || event.shiftKey)\n\t\t\t) {\n\t\t\t\tmodal.hide();\n\t\t\t}\n\n\t\t\tif (event.code === 'Tab' && !event.metaKey) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-modal]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTModal(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTModal.createInstances();\n\n\t\tif (window.KT_MODAL_INITIALIZED !== true) {\n\t\t\tKTModal.handleToggle();\n\t\t\tKTModal.handleDismiss();\n\t\t\tKTModal.handleClickAway();\n\t\t\tKTModal.handleKeyword();\n\t\t\twindow.KT_MODAL_INITIALIZED = true;\n\t\t}\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTModal = KTModal;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTReparent } from './reparent';\nexport type { KTReparentConfigInterface, KTReparentInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTUtils from '../../helpers/utils';\nimport KTComponent from '../component';\nimport { KTReparentInterface, KTReparentConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_REPARENT_INITIALIZED: boolean;\n\t\tKTReparent: typeof KTReparent;\n\t}\n}\n\nexport class KTReparent extends KTComponent implements KTReparentInterface {\n\tprotected override _name: string = 'reparent';\n\tprotected override _defaultConfig: KTReparentConfigInterface = {\n\t\tmode: '',\n\t\ttarget: '',\n\t};\n\n\tconstructor(\n\t\telement: HTMLElement,\n\t\tconfig: KTReparentConfigInterface | null = null,\n\t) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\t\tthis._update();\n\t}\n\n\tprotected _update(): void {\n\t\tif (!this._element) return;\n\t\tconst target = this._getOption('target') as string;\n\t\tconst targetEl = KTDom.getElement(target);\n\t\tconst mode = this._getOption('mode');\n\n\t\tif (targetEl && this._element.parentNode !== targetEl) {\n\t\t\tif (mode === 'prepend') {\n\t\t\t\ttargetEl.prepend(this._element);\n\t\t\t} else if (mode === 'append') {\n\t\t\t\ttargetEl.append(this._element);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic update(): void {\n\t\tthis._update();\n\t}\n\n\tpublic static handleResize(): void {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tlet timer;\n\n\t\t\tKTUtils.throttle(\n\t\t\t\ttimer,\n\t\t\t\t() => {\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.querySelectorAll('[data-kt-reparent-initialized]')\n\t\t\t\t\t\t.forEach((element) => {\n\t\t\t\t\t\t\tconst reparent = KTReparent.getInstance(element as HTMLElement);\n\t\t\t\t\t\t\tconsole.log('reparent update');\n\t\t\t\t\t\t\treparent?.update();\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t200,\n\t\t\t);\n\t\t});\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTReparent {\n\t\treturn KTData.get(element, 'reparent') as KTReparent;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTReparentConfigInterface,\n\t): KTReparent {\n\t\treturn this.getInstance(element) || new KTReparent(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-reparent]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTReparent(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTReparent.createInstances();\n\n\t\tif (window.KT_REPARENT_INITIALIZED !== true) {\n\t\t\tKTReparent.handleResize();\n\t\t\twindow.KT_REPARENT_INITIALIZED = true;\n\t\t}\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTReparent = KTReparent;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTScrollable } from './scrollable';\nexport type {\n\tKTScrollableConfigInterface,\n\tKTScrollableInterface,\n} from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTUtils from '../../helpers/utils';\nimport KTComponent from '../component';\nimport { KTScrollableInterface, KTScrollableConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_SCROLLABLE_INITIALIZED: boolean;\n\t\tKTScrollable: typeof KTScrollable;\n\t}\n}\n\nexport class KTScrollable extends KTComponent implements KTScrollableInterface {\n\tprotected override _name: string = 'scrollable';\n\tprotected override _defaultConfig: KTScrollableConfigInterface = {\n\t\tsave: true,\n\t\tdependencies: '',\n\t\twrappers: '',\n\t\toffset: '',\n\t};\n\tprotected override _config: KTScrollableConfigInterface = this._defaultConfig;\n\tprotected _elementId: string | null = null;\n\n\tconstructor(element: HTMLElement, config?: KTScrollableConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tif (!this._element) return;\n\t\tthis._elementId = this._element.getAttribute('id');\n\t\tthis._handlers();\n\t\tthis._update();\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._element) return;\n\t\tthis._element.addEventListener('scroll', () => {\n\t\t\tif (!this._element) return;\n\t\t\tlocalStorage.setItem(\n\t\t\t\t`${this._elementId}st`,\n\t\t\t\tthis._element.scrollTop.toString(),\n\t\t\t);\n\t\t});\n\t}\n\n\tprotected _update(): void {\n\t\tthis._setupHeight();\n\t\tthis._setupState();\n\t}\n\n\tprotected _setupHeight(): void {\n\t\tif (!this._element) return;\n\n\t\tconst heightType = this._getHeightType();\n\t\tconst height = this._getHeight();\n\n\t\t// Set height\n\t\tif (height && height != '0' && height.length > 0) {\n\t\t\tthis._element.style.setProperty(heightType, height);\n\t\t} else {\n\t\t\tthis._element.style.setProperty(heightType, '');\n\t\t}\n\t}\n\n\tprotected _setupState(): void {\n\t\tif (!this._element) return;\n\t\tconst stateEnabled = this._getOption('state') === true;\n\t\tconst elementIdExists = Boolean(this._elementId);\n\n\t\tif (stateEnabled && elementIdExists) {\n\t\t\tconst storedPosition = localStorage.getItem(this._elementId + 'st');\n\n\t\t\tif (storedPosition) {\n\t\t\t\tconst pos = parseInt(storedPosition);\n\n\t\t\t\tif (pos > 0) {\n\t\t\t\t\tthis._element.scroll({\n\t\t\t\t\t\ttop: pos,\n\t\t\t\t\t\tbehavior: 'instant',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _getHeight(): string {\n\t\tconst height = this._getHeightOption();\n\n\t\tif (\n\t\t\theight !== null &&\n\t\t\ttypeof height === 'string' &&\n\t\t\theight.toLowerCase() === 'auto'\n\t\t) {\n\t\t\treturn this._getAutoHeight();\n\t\t} else if (height) {\n\t\t\treturn parseInt(height).toString() + 'px';\n\t\t} else {\n\t\t\treturn '0';\n\t\t}\n\t}\n\n\tprotected _getAutoHeight(): string {\n\t\tif (!this._element) return '';\n\t\tlet height = KTDom.getViewPort().height;\n\t\tconst dependencies = this._getOption('dependencies') as string;\n\t\tconst wrappers = this._getOption('wrappers') as string;\n\t\tconst offset = this._getOption('offset') as string;\n\t\theight -= this._getElementSpacing(this._element);\n\n\t\tif (dependencies && dependencies.length > 0) {\n\t\t\tconst elements = document.querySelectorAll(dependencies);\n\t\t\telements.forEach((element) => {\n\t\t\t\tif (KTDom.getCssProp(element as HTMLElement, 'display') === 'none') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\theight -= this._getElementHeight(element as HTMLElement);\n\t\t\t});\n\t\t}\n\n\t\tif (wrappers && wrappers.length > 0) {\n\t\t\tconst elements = document.querySelectorAll(wrappers);\n\t\t\telements.forEach((element) => {\n\t\t\t\tif (KTDom.getCssProp(element as HTMLElement, 'display') === 'none') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\theight -= this._getElementSpacing(element as HTMLElement);\n\t\t\t});\n\t\t}\n\n\t\tif (offset && offset.length > 0) {\n\t\t\theight -= parseInt(offset);\n\t\t}\n\n\t\treturn height.toString() + 'px';\n\t}\n\n\tprotected _getElementHeight(element: HTMLElement): number {\n\t\tlet height = 0;\n\n\t\tif (!element) {\n\t\t\treturn height;\n\t\t}\n\n\t\tconst computedStyle = window.getComputedStyle(element);\n\t\tif (computedStyle.height) {\n\t\t\theight += parseInt(computedStyle.height);\n\t\t}\n\t\tif (computedStyle.marginTop) {\n\t\t\theight += parseInt(computedStyle.marginTop);\n\t\t}\n\t\tif (computedStyle.marginBottom) {\n\t\t\theight += parseInt(computedStyle.marginBottom);\n\t\t}\n\t\tif (computedStyle.borderTopWidth) {\n\t\t\theight += parseInt(computedStyle.borderTopWidth);\n\t\t}\n\t\tif (computedStyle.borderBottomWidth) {\n\t\t\theight += parseInt(computedStyle.borderBottomWidth);\n\t\t}\n\n\t\treturn height;\n\t}\n\n\tprotected _getElementSpacing(element: HTMLElement): number {\n\t\tlet spacing: number = 0;\n\n\t\tif (!element) {\n\t\t\treturn spacing;\n\t\t}\n\n\t\tconst computedStyle = window.getComputedStyle(element);\n\t\tif (computedStyle.marginTop) {\n\t\t\tspacing += parseInt(computedStyle.marginTop);\n\t\t}\n\t\tif (computedStyle.marginBottom) {\n\t\t\tspacing += parseInt(computedStyle.marginBottom);\n\t\t}\n\t\tif (computedStyle.paddingTop) {\n\t\t\tspacing += parseInt(computedStyle.paddingTop);\n\t\t}\n\t\tif (computedStyle.paddingBottom) {\n\t\t\tspacing += parseInt(computedStyle.paddingBottom);\n\t\t}\n\t\tif (computedStyle.borderTopWidth) {\n\t\t\tspacing += parseInt(computedStyle.borderTopWidth);\n\t\t}\n\t\tif (computedStyle.borderBottomWidth) {\n\t\t\tspacing += parseInt(computedStyle.borderBottomWidth);\n\t\t}\n\n\t\treturn spacing;\n\t}\n\n\tprotected _getHeightType(): string {\n\t\tif (this._getOption('minHeight')) {\n\t\t\treturn 'min-height';\n\t\t}\n\t\tif (this._getOption('maxHeight')) {\n\t\t\treturn 'max-height';\n\t\t} else {\n\t\t\treturn 'height';\n\t\t}\n\t}\n\n\tprotected _getHeightOption(): string {\n\t\tconst heightType = this._getHeightType();\n\n\t\tif (heightType == 'min-height') {\n\t\t\treturn this._getOption('minHeight') as string;\n\t\t}\n\t\tif (heightType == 'max-height') {\n\t\t\treturn this._getOption('maxHeight') as string;\n\t\t} else {\n\t\t\treturn this._getOption('height') as string;\n\t\t}\n\t}\n\n\tpublic update(): void {\n\t\treturn this._update();\n\t}\n\n\tpublic getHeight(): string {\n\t\treturn this._getHeight();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTScrollable {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'scrollable')) {\n\t\t\treturn KTData.get(element, 'scrollable') as KTScrollable;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-scrollable')) {\n\t\t\treturn new KTScrollable(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTScrollableConfigInterface,\n\t): KTScrollable {\n\t\treturn this.getInstance(element) || new KTScrollable(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-scrollable]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTScrollable(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static handleResize(): void {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tlet timer;\n\n\t\t\tKTUtils.throttle(\n\t\t\t\ttimer,\n\t\t\t\tfunction () {\n\t\t\t\t\t// Locate and update scrollable instances on window resize\n\t\t\t\t\tconst elements = document.querySelectorAll(\n\t\t\t\t\t\t'[data-kt-scrollable-initialized]',\n\t\t\t\t\t);\n\t\t\t\t\telements.forEach((element) => {\n\t\t\t\t\t\tKTScrollable.getInstance(element as HTMLElement)?.update();\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t200,\n\t\t\t);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTScrollable.createInstances();\n\n\t\tif (window.KT_SCROLLABLE_INITIALIZED !== true) {\n\t\t\tKTScrollable.handleResize();\n\n\t\t\twindow.KT_SCROLLABLE_INITIALIZED = true;\n\t\t}\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTScrollable = KTScrollable;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTScrollspy } from './scrollspy';\nexport type { KTScrollspyConfigInterface, KTScrollspyInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTEventHandler from '../../helpers/event-handler';\nimport KTComponent from '../component';\nimport { KTScrollspyInterface, KTScrollspyConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_SCROLLSPY_INITIALIZED: boolean;\n\t\tKTScrollspy: typeof KTScrollspy;\n\t}\n}\n\nexport class KTScrollspy extends KTComponent implements KTScrollspyInterface {\n\tprotected override _name: string = 'scrollspy';\n\tprotected override _defaultConfig: KTScrollspyConfigInterface = {\n\t\ttarget: 'body',\n\t\toffset: 0,\n\t\tsmooth: true,\n\t};\n\tprotected override _config: KTScrollspyConfigInterface = this._defaultConfig;\n\tprotected _targetElement: HTMLElement | Document | null = null;\n\tprotected _anchorElements: NodeListOf<HTMLElement> | null = null;\n\n\tconstructor(element: HTMLElement, config?: KTScrollspyConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tif (!this._element) return;\n\n\t\tconst targetElement =\n\t\t\tthis._getTarget() === 'body'\n\t\t\t\t? document\n\t\t\t\t: KTDom.getElement(this._getTarget());\n\t\tif (!targetElement) return;\n\n\t\tthis._targetElement = targetElement;\n\n\t\tthis._anchorElements = this._element.querySelectorAll(\n\t\t\t'[data-kt-scrollspy-anchor]',\n\t\t);\n\n\t\tif (!this._anchorElements) return;\n\n\t\tthis._handlers();\n\t\tthis._update();\n\t}\n\n\tprivate _getTarget(): string {\n\t\treturn (\n\t\t\t(this._element.getAttribute('data-kt-scrollspy-target') as string) ||\n\t\t\t(this._getOption('target') as string)\n\t\t);\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._anchorElements) return;\n\n\t\tthis._targetElement.addEventListener('scroll', () => {\n\t\t\tthis._anchorElements.forEach((anchorElement) => {\n\t\t\t\tthis._updateAnchor(anchorElement);\n\t\t\t});\n\t\t});\n\n\t\tKTEventHandler.on(\n\t\t\tthis._element,\n\t\t\t'[data-kt-scrollspy-anchor]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._scrollTo(target);\n\t\t\t},\n\t\t);\n\t}\n\n\tprotected _scrollTo(anchorElement: HTMLElement): void {\n\t\tif (!anchorElement) return;\n\n\t\tconst sectionElement = KTDom.getElement(anchorElement.getAttribute('href'));\n\t\tif (!sectionElement) return;\n\n\t\tconst targetElement =\n\t\t\tthis._targetElement === document ? window : this._targetElement;\n\t\tif (!targetElement) return;\n\n\t\tlet offset = parseInt(this._getOption('offset') as string);\n\t\tif (anchorElement.getAttribute('data-kt-scrollspy-anchor-offset')) {\n\t\t\toffset = parseInt(\n\t\t\t\tanchorElement.getAttribute('data-kt-scrollspy-anchor-offset') as string,\n\t\t\t);\n\t\t}\n\n\t\tconst scrollTop = sectionElement.offsetTop - offset;\n\n\t\tif ('scrollTo' in targetElement) {\n\t\t\ttargetElement.scrollTo({\n\t\t\t\ttop: scrollTop,\n\t\t\t\tleft: 0,\n\t\t\t\tbehavior: this._getOption('smooth') ? 'smooth' : 'instant',\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _updateAnchor(anchorElement: HTMLElement): void {\n\t\tconst sectionElement = KTDom.getElement(anchorElement.getAttribute('href'));\n\t\tif (!sectionElement) return;\n\n\t\tif (!KTDom.isVisible(anchorElement)) return;\n\n\t\tif (!this._anchorElements) return;\n\n\t\tconst scrollPosition =\n\t\t\tthis._targetElement === document\n\t\t\t\t? document.documentElement.scrollTop || document.body.scrollTop\n\t\t\t\t: (this._targetElement as HTMLElement).scrollTop;\n\n\t\tlet offset = parseInt(this._getOption('offset') as string);\n\t\tif (anchorElement.getAttribute('data-kt-scrollspy-anchor-offset')) {\n\t\t\toffset = parseInt(\n\t\t\t\tanchorElement.getAttribute('data-kt-scrollspy-anchor-offset') as string,\n\t\t\t);\n\t\t}\n\n\t\tconst offsetTop = sectionElement.offsetTop;\n\n\t\tif (scrollPosition + offset >= offsetTop) {\n\t\t\tthis._anchorElements.forEach((anchorElement) => {\n\t\t\t\tanchorElement.classList.remove('active');\n\t\t\t});\n\n\t\t\tconst payload = { element: anchorElement };\n\t\t\tthis._fireEvent('activate', payload);\n\t\t\tthis._dispatchEvent('activate', payload);\n\n\t\t\tanchorElement.classList.add('active');\n\n\t\t\tconst parentAnchorElements = KTDom.parents(\n\t\t\t\tanchorElement,\n\t\t\t\t'[data-kt-scrollspy-group]',\n\t\t\t);\n\t\t\tif (parentAnchorElements) {\n\t\t\t\tparentAnchorElements.forEach((parentAnchorElement) => {\n\t\t\t\t\tparentAnchorElement\n\t\t\t\t\t\t.querySelector('[data-kt-scrollspy-anchor]')\n\t\t\t\t\t\t?.classList.add('active');\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _update() {\n\t\tif (!this._anchorElements) return;\n\n\t\tthis._anchorElements.forEach((anchorElement) => {\n\t\t\tthis._updateAnchor(anchorElement);\n\t\t});\n\t}\n\n\tprotected _isActive(anchorElement: HTMLElement): boolean {\n\t\treturn anchorElement.classList.contains('active');\n\t}\n\n\tpublic updateAnchor(anchorElement: HTMLElement): void {\n\t\tthis._updateAnchor(anchorElement);\n\t}\n\n\tpublic isActive(anchorElement: HTMLElement): boolean {\n\t\treturn this._isActive(anchorElement);\n\t}\n\n\tpublic update(): void {\n\t\tthis.update();\n\t}\n\n\tpublic scrollTo(anchorElement: HTMLElement): void {\n\t\tthis._scrollTo(anchorElement);\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTScrollspy {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'scrollspy')) {\n\t\t\treturn KTData.get(element, 'scrollspy') as KTScrollspy;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-scrollspy')) {\n\t\t\treturn new KTScrollspy(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTScrollspyConfigInterface,\n\t): KTScrollspy {\n\t\treturn this.getInstance(element) || new KTScrollspy(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-scrollspy]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTScrollspy(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTScrollspy.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTScrollspy = KTScrollspy;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTScrollto } from './scrollto';\nexport type { KTScrolltoConfigInterface, KTScrolltoInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n/* eslint-disable max-len */\n/* eslint-disable require-jsdoc */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTComponent from '../component';\nimport { KTScrolltoInterface, KTScrolltoConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_SCROLLTO_INITIALIZED: boolean;\n\t\tKTScrollto: typeof KTScrollto;\n\t}\n}\n\nexport class KTScrollto extends KTComponent implements KTScrolltoInterface {\n\tprotected override _name: string = 'scrollto';\n\tprotected override _defaultConfig: KTScrolltoConfigInterface = {\n\t\tsmooth: true,\n\t\tparent: 'body',\n\t\ttarget: '',\n\t\toffset: 0,\n\t};\n\tprotected override _config: KTScrolltoConfigInterface = this._defaultConfig;\n\tprotected _targetElement: HTMLElement;\n\n\tconstructor(element: HTMLElement, config?: KTScrolltoConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tif (!this._element) return;\n\n\t\tthis._targetElement = this._getTargetElement();\n\n\t\tif (!this._targetElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handlers();\n\t}\n\n\tprivate _getTargetElement(): HTMLElement | null {\n\t\treturn (\n\t\t\tKTDom.getElement(\n\t\t\t\tthis._element.getAttribute('data-kt-scrollto') as string,\n\t\t\t) || KTDom.getElement(this._getOption('target') as string)\n\t\t);\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._element) return;\n\n\t\tthis._element.addEventListener('click', (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tthis._scroll();\n\t\t});\n\t}\n\n\tprotected _scroll(): void {\n\t\tconst pos =\n\t\t\tthis._targetElement.offsetTop +\n\t\t\tparseInt(this._getOption('offset') as string);\n\n\t\tlet parent: HTMLElement | Window = KTDom.getElement(\n\t\t\tthis._getOption('parent') as string,\n\t\t);\n\n\t\tif (!parent || parent === document.body) {\n\t\t\tparent = window;\n\t\t}\n\n\t\tparent.scrollTo({\n\t\t\ttop: pos,\n\t\t\tbehavior: (this._getOption('smooth') as boolean) ? 'smooth' : 'instant',\n\t\t});\n\t}\n\n\tpublic scroll(): void {\n\t\tthis._scroll();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTScrollto {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'scrollto')) {\n\t\t\treturn KTData.get(element, 'scrollto') as KTScrollto;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-scrollto')) {\n\t\t\treturn new KTScrollto(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTScrolltoConfigInterface,\n\t): KTScrollto {\n\t\treturn this.getInstance(element) || new KTScrollto(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-scrollto]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTScrollto(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTScrollto.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTScrollto = KTScrollto;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTSelectConfigInterface } from './config';\nimport { KTSelect } from './select';\nimport { filterOptions, renderTemplateString, stringToElement } from './utils';\nimport { defaultTemplates } from './templates';\n\n/**\n * KTSelectCombobox - Handles combobox-specific functionality for KTSelect\n */\nexport class KTSelectCombobox {\n\tprivate _select: KTSelect;\n\tprivate _config: KTSelectConfigInterface;\n\tprivate _searchInputElement: HTMLInputElement;\n\tprivate _clearButtonElement: HTMLElement | null;\n\tprivate _boundInputHandler: (event: Event) => void;\n\tprivate _boundClearHandler: (event: MouseEvent) => void;\n\tprivate _valuesContainerElement: HTMLElement | null; // For tags or displayTemplate output\n\n\tconstructor(select: KTSelect) {\n\t\tthis._select = select;\n\t\tthis._config = select.getConfig();\n\n\t\tconst displayElement = select.getDisplayElement(); // KTSelect's main display element for combobox\n\n\t\tthis._searchInputElement = displayElement.querySelector('input[data-kt-select-search]');\n\t\tthis._clearButtonElement = displayElement.querySelector('[data-kt-select-clear-button]');\n\t\tthis._valuesContainerElement = displayElement.querySelector('[data-kt-select-combobox-values]');\n\n\t\tthis._boundInputHandler = this._handleComboboxInput.bind(this);\n\t\tthis._boundClearHandler = this._handleClearButtonClick.bind(this);\n\n\t\tthis._attachEventListeners();\n\n\t\tthis._select.getElement().addEventListener('dropdown.close', () => {\n\t\t\t// When dropdown closes, if not multi-select and not using displayTemplate,\n\t\t\t// ensure input shows the selected value or placeholder.\n\t\t\tif (!this._config.multiple && !this._config.displayTemplate) {\n\t\t\t\tthis.updateDisplay(this._select.getSelectedOptions());\n\t\t\t} else {\n\t\t\t\t// For tags or displayTemplate, the input should be clear for typing.\n\t\t\tthis._searchInputElement.value = '';\n\t\t\t}\n\t\t\tthis._toggleClearButtonVisibility(this._searchInputElement.value);\n\t\t\t// this._select.showAllOptions(); // showAllOptions might be too broad, filtering is managed by typing.\n\t\t});\n\n\t\tif (this._config.debug) console.log('KTSelectCombobox initialized');\n\t}\n\n\t/**\n\t * Attach event listeners specific to combobox\n\t */\n\tprivate _attachEventListeners(): void {\n\t\tthis._removeEventListeners();\n\t\tif (this._searchInputElement) { // Ensure element exists\n\t\t\tthis._searchInputElement.addEventListener('input', this._boundInputHandler);\n\t\t}\n\t\tif (this._clearButtonElement) {\n\t\t\tthis._clearButtonElement.addEventListener('click', this._boundClearHandler);\n\t\t}\n\t}\n\n\t/**\n\t * Remove event listeners to prevent memory leaks or duplicates\n\t */\n\tprivate _removeEventListeners(): void {\n\t\tif (this._searchInputElement) {\n\t\t\tthis._searchInputElement.removeEventListener('input', this._boundInputHandler);\n\t\t}\n\t\tif (this._clearButtonElement) {\n\t\t\tthis._clearButtonElement.removeEventListener('click', this._boundClearHandler);\n\t\t}\n\t}\n\n\t/**\n\t * Handle combobox input events\n\t */\n\tprivate _handleComboboxInput(event: Event): void {\n\t\tconst inputElement = event.target as HTMLInputElement;\n\t\tconst query = inputElement.value;\n\n\t\tthis._toggleClearButtonVisibility(query);\n\n\t\tif (!(this._select as any).isDropdownOpen()) { // Use public getter\n\t\t\tthis._select.openDropdown();\n\t\t}\n\t\t// For single select without displayTemplate, if user types, they are essentially clearing the previous selection text\n\t\t// The actual selection state isn't cleared until they pick a new option or clear explicitly.\n\t\t// For multi-select or with displayTemplate, the input is purely for search.\n\t\tif (this._config.multiple || this._config.displayTemplate) {\n\t\t\t// Values are in _valuesContainerElement, input is for search\n\t\t} else {\n\t\t\t// Single select, no displayTemplate: If user types, it implies they might be changing selection.\n\t\t\t// We don't clear the actual _select state here, just the visual in input.\n\t\t}\n\n\t\tthis._filterOptionsForCombobox(query);\n\t}\n\n\t/**\n\t * Handle clear button click\n\t */\n\tprivate _handleClearButtonClick(event: MouseEvent): void {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tthis._searchInputElement.value = '';\n\t\tthis._toggleClearButtonVisibility('');\n\t\tif (this._valuesContainerElement) {\n\t\t\tthis._valuesContainerElement.innerHTML = '';\n\t\t}\n\t\tthis._select.clearSelection(); // This will also trigger updateSelectedOptionDisplay\n\t\tthis._select.showAllOptions(); // Show all options after clearing\n\t\tthis._select.openDropdown();\n\t\tthis._searchInputElement.focus();\n\t}\n\n\t/**\n\t * Toggle clear button visibility based on input value and selection state.\n\t * Clear button should be visible if there's text in input OR if there are selected items (for multi/displayTemplate modes).\n\t */\n\tprivate _toggleClearButtonVisibility(inputValue: string): void {\n\t\tif (!this._clearButtonElement) return;\n\t\tconst hasSelectedItems = this._select.getSelectedOptions().length > 0;\n\n\t\tif (inputValue.length > 0 || (hasSelectedItems && (this._config.multiple || this._config.displayTemplate))) {\n\t\t\tthis._clearButtonElement.classList.remove('hidden');\n\t\t} else {\n\t\t\tthis._clearButtonElement.classList.add('hidden');\n\t\t}\n\t}\n\n\t/**\n\t * Filter options for combobox based on input query\n\t */\n\tprivate _filterOptionsForCombobox(query: string): void {\n\t\tconst options = Array.from(this._select.getOptionsElement()) as HTMLElement[];\n\t\tconst config = this._select.getConfig();\n\t\tconst dropdownElement = this._select.getDropdownElement();\n\t\tfilterOptions(options, query, config, dropdownElement);\n\t\t// After filtering, focusManager in KTSelectSearch (if search is also enabled there)\n\t\t// or the main FocusManager should adjust focus if needed.\n\t\t// For combobox, this filtering is the primary search mechanism.\n\t\t// We might need to tell select's focus manager to focus first option.\n\t\t(this._select as any)._focusManager.focusFirst(); // Consider if this is always right\n\t}\n\n\t/**\n\t * Updates the combobox display (input field or values container) based on selection.\n\t */\n\tpublic updateDisplay(selectedOptions: string[]): void {\n\t\tif (!this._searchInputElement) return;\n\n\t\t// Always clear the values container first if it exists\n\t\tif (this._valuesContainerElement) {\n\t\t\tthis._valuesContainerElement.innerHTML = '';\n\t\t}\n\n\t\tif (this._config.tags && this._valuesContainerElement) { // Combobox + Tags\n\t\t\tselectedOptions.forEach(value => {\n\t\t\t\t// Ensure value is properly escaped for querySelector\n\t\t\t\tconst optionElement = this._select.getElement().querySelector(`option[value=\"${CSS.escape(value)}\"]`) as HTMLOptionElement;\n\t\t\t\tif (optionElement) {\n\t\t\t\t\tconst tagElement = defaultTemplates.tag(optionElement, this._config);\n\t\t\t\t\tthis._valuesContainerElement.appendChild(tagElement);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._searchInputElement.value = ''; // Input field is for typing new searches\n\t\t\tthis._searchInputElement.placeholder = selectedOptions.length > 0 ? '' : (this._config.placeholder || 'Select...');\n\n\t\t} else if (this._config.displayTemplate && this._valuesContainerElement) { // Combobox + DisplayTemplate (no tags)\n\t\t\tthis._valuesContainerElement.innerHTML = this._select.renderDisplayTemplateForSelected(selectedOptions);\n\t\t\tthis._searchInputElement.value = ''; // Input field is for typing new searches\n\t\t\tthis._searchInputElement.placeholder = selectedOptions.length > 0 ? '' : (this._config.placeholder || 'Select...');\n\n\t\t} else if (this._config.multiple && this._valuesContainerElement) { // Combobox + Multiple (no tags, no display template)\n\t\t\t// For simplicity, join text. A proper tag implementation would be more complex here.\n\t\t\tthis._valuesContainerElement.innerHTML = selectedOptions.map(value => {\n\t\t\t\tconst optionEl = this._select.getElement().querySelector(`option[value=\"${CSS.escape(value)}\"]`);\n\t\t\t\treturn optionEl ? optionEl.textContent : '';\n\t\t\t}).join(', '); // Basic comma separation\n\t\t\tthis._searchInputElement.value = '';\n\t\t\tthis._searchInputElement.placeholder = selectedOptions.length > 0 ? '' : (this._config.placeholder || 'Select...');\n\n\t\t} else if (!this._config.multiple && selectedOptions.length > 0) { // Single select combobox: display selected option's text in the input\n\t\t\tconst selectedValue = selectedOptions[0];\n\t\t\tconst optionElement = this._select.getElement().querySelector(`option[value=\"${CSS.escape(selectedValue)}\"]`);\n\t\t\tthis._searchInputElement.value = optionElement ? optionElement.textContent || '' : '';\n\t\t\t// placeholder is implicitly handled by input value for single select\n\n\t\t} else { // No selection or not fitting above categories (e.g. single select, no items)\n\t\t\tthis._searchInputElement.value = '';\n\t\t\tthis._searchInputElement.placeholder = this._config.placeholder || 'Select...';\n\t\t\t// _valuesContainerElement is already cleared if it exists\n\t\t}\n\t\tthis._toggleClearButtonVisibility(this._searchInputElement.value);\n\t}\n\n\t/**\n\t * Destroy the combobox component and clean up event listeners\n\t */\n\tpublic destroy(): void {\n\t\tthis._removeEventListeners();\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { coreTemplateStrings } from './templates';\n\nexport const DefaultConfig: KTSelectConfigInterface = {\n\t// ...other config options\n\tloadMoreText: 'Load more...',\n\t// General Display\n\tdebug: false,\n\tplaceholder: 'Select an option', // Default placeholder text when no option is selected\n\n\t// Data Handling\n\titems: [], // Static list of options\n\tisLoading: false, // Indicates if options are being loaded asynchronously\n\tonFetch: null, // Callback function to fetch options asynchronously\n\n\t// Remote Data Configuration\n\tremote: false, // Enable/disable remote data fetching\n\tdataUrl: null, // URL to fetch options from\n\tapiDataProperty: null, // Property in the response object that contains the options\n\tremoteErrorMessage: 'Failed to load data', // Error message to display if remote data fetch fails\n\n\t// Field Mapping\n\tdataValueField: null, // Property in the option object that contains the value (default: 'id')\n\tdataFieldText: null, // Property in the option object that contains the text (default: 'title')\n\n\t// Search Configuration\n\tsearchParam: '', // Query parameter for API search requests\n\tsearchDebounce: 300, // Debounce delay for search (in ms)\n\n\t// Pagination Configuration\n\tpagination: false, // Enable/disable pagination for remote data\n\tpaginationLimit: 10, // Items per page\n\tpaginationPageParam: 'page', // Parameter name for page number\n\tpaginationLimitParam: 'limit', // Parameter name for items per page\n\tpaginationTotalParam: 'total', // Parameter name for total items\n\n\t// Selection Behavior\n\tallowClear: false, // Allow clearing the selection (if true, an empty value can be set)\n\tmultiple: false, // Enable/disable multi-select\n\tmaxSelections: null, // Maximum number of selections allowed in multi-select mode (null for unlimited)\n\tdisabled: false, // Disable the select component\n\tisRequired: false, // Make selection required\n\n\t// Search Functionality\n\tenableSearch: false, // Enable/disable search functionality within the dropdown\n\tsearchPlaceholder: 'Search...', // Placeholder text for the search input\n\tsearchAutofocus: true, // Autofocus on search input when dropdown opens\n\tsearchMinLength: 0, // Minimum characters required to trigger search\n\tsearchMaxItems: 50, // Maximum number of search results to display\n\tnoresults: 'No results found', // Text to display when no search results are found\n\tclearSearchOnClose: true, // Clear search input when dropdown closes\n\n\t// Multi-Select Display\n\tselectAllText: 'Select all', // Text for the \"Select All\" option (if implemented)\n\tclearAllText: 'Clear all', // Text for the \"Clear All\" option (if implemented)\n\tshowSelectedCount: true, // Show the number of selected options in multi-select mode\n\trenderSelected: null, // Custom function to render the selected value(s) in the display area\n\n\t// Accessibility & Usability\n\tlabel: 'Select an option', // Label for the select component (for screen readers)\n\theight: 250, // Maximum height of the dropdown menu in pixels (if exceeded, a scrollbar will appear)\n\n\t// Dropdown Configuration\n\tdropdownZindex: 105, // Initial z-index value for the dropdown\n\tdropdownContainer: null, // Container element for the dropdown\n\tdropdownPlacement: null,\n\tdropdownFlip: false,\n\tdropdownPreventOverflow: false,\n\tdropdownStrategy: null,\n\tdropdownWidth: null, // Custom width for dropdown (e.g., '300px'), null to match toggle element width\n\n\t// New Config\n\tdropdownTemplate: '',\n};\n\nexport interface KTSelectConfigInterface {\n\t// ...other config options\n\tloadMoreText?: string;\n\t// General Display\n\tdebug?: boolean;\n\tplaceholder?: string;\n\n\t// Selection Behavior\n\tallowClear?: boolean;\n\tmultiple?: boolean;\n\tmaxSelections?: number | null;\n\tdisabled?: boolean;\n\tisRequired?: boolean;\n\n\t// Search Functionality\n\tenableSearch?: boolean;\n\tnoresults?: string;\n\tsearchPlaceholder?: string;\n\tsearchAutofocus?: boolean;\n\tsearchMinLength?: number;\n\tsearchMaxItems?: number;\n\tsearchDebounce?: number;\n\tsearchParam?: string;\n\tclearSearchOnClose?: boolean;\n\n\t// Multi-Select Display\n\tselectAllText?: string;\n\tclearAllText?: string;\n\tshowSelectedCount?: boolean;\n\trenderSelected?: (selectedOptions: any[]) => string; // Assuming any[] for now, adjust based on your option data structure\n\n\t// Accessibility & Usability\n\tlabel?: string;\n\theight: number;\n\n\t// Data Handling\n\titems?: KTSelectOption[];\n\tisLoading?: boolean;\n\tonFetch?: (query?: string) => Promise<KTSelectOption[]>;\n\n\t// Remote Data Configuration\n\tremote?: boolean;\n\tdataUrl?: string;\n\tapiDataProperty?: string;\n\tremoteErrorMessage?: string;\n\n\t// Field Mapping\n\tdataValueField?: string;\n\tdataFieldText?: string;\n\n\t// Pagination Configuration\n\tpagination?: boolean;\n\tpaginationLimit?: number;\n\tpaginationPageParam?: string;\n\tpaginationLimitParam?: string;\n\tpaginationTotalParam?: string;\n\n\t// Dropdown Configuration\n\tdropdownZindex?: number | null;\n\tdropdownContainer?: string | null;\n\tdropdownPlacement?: 'bottom-start' | 'bottom-end' | 'top-start' | 'top-end';\n\tdropdownFlip?: boolean;\n\tdropdownPreventOverflow?: boolean;\n\tdropdownStrategy?: 'fixed' | 'absolute';\n\tdropdownWidth?: string | null; // Custom width for dropdown, null to match toggle element width\n\n\t// Styling\n\tdropdownClass?: string;\n\tdisplayClass?: string;\n\toptionsClass?: string;\n\tsearchClass?: string;\n\tnoresultsClass?: string;\n\tloadingClass?: string;\n\ttagClass?: string;\n\tloadMoreClass?: string;\n\twrapperClass?: string;\n\terrorClass?: string;\n\n\t// New Config\n\ttags?: boolean;\n\tcombobox?: boolean;\n\tmaxSelection?: number;\n\tplaceholderClass?: string;\n\tplaceholderTemplate?: string;\n\tdisplaySeparator?: string;\n\tdisplayTemplate?: string;\n\tdisplayMaxSelected?: number;\n\toptionTemplate?: string;\n\toptionClass?: string;\n\ttagTemplate?: string;\n\tdropdownTemplate?: string;\n\tnoresultsTemplate?: string;\n\n\ttemplates?: Partial<typeof coreTemplateStrings>;\n\n\t// Option Configuration\n\tconfig?: KTSelectConfigInterface; // config from data-kt-select-config attribute\n\toptionsConfig?: Record<string, KTSelectConfigInterface>;\n}\n\nexport interface KTSelectOption {\n\tid: string;\n\ttitle: string;\n\tselected?: boolean;\n\tdisabled?: boolean;\n}\n\nexport class KTSelectState {\n\tprivate _config: KTSelectConfigInterface;\n\tprivate _selectedOptions: string[] = [];\n\n\tconstructor(config?: KTSelectConfigInterface) {\n\t\tthis._config = this._initDefaultConfig(config);\n\t}\n\n\tprivate _initDefaultConfig(\n\t\tconfig: KTSelectConfigInterface,\n\t): KTSelectConfigInterface {\n\t\treturn {\n\t\t\t...DefaultConfig,\n\t\t\t...config,\n\t\t\t...config.config,\n\t\t};\n\t}\n\n\tpublic setItems(items?: any[], query?: string): Promise<void> {\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\tif (items) {\n\t\t\t\tthis._config.items = items;\n\t\t\t\tresolve();\n\t\t\t} else if (this._config.dataUrl) {\n\t\t\t\tthis._fetchRemoteData(query)\n\t\t\t\t\t.then(resolve) // Resolve after _fetchRemoteData completes\n\t\t\t\t\t.catch(reject);\n\t\t\t} else if (this._config.onFetch) {\n\t\t\t\tthis._config.isLoading = true;\n\t\t\t\tthis._config\n\t\t\t\t\t.onFetch(query)\n\t\t\t\t\t.then((items) => {\n\t\t\t\t\t\tthis._config.items = items;\n\t\t\t\t\t\tresolve(); // Resolve after onFetch completes\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tconsole.error('Error fetching data:', error);\n\t\t\t\t\t\treject(error); // Reject on error\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis._config.isLoading = false;\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _fetchRemoteData(query?: string): Promise<void> {\n\t\tthis._config.isLoading = true; // Show loading indicator\n\n\t\tlet url = this._config.dataUrl!;\n\t\tif (query) {\n\t\t\turl += `?${this._config.searchParam}=${encodeURIComponent(query)}`;\n\t\t}\n\n\t\treturn fetch(url)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tif (this._config.apiDataProperty) {\n\t\t\t\t\t// Extract the data property from the response\n\t\t\t\t\tif (this._config.apiDataProperty in data) {\n\t\t\t\t\t\tdata = data[this._config.apiDataProperty];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t'Error fetching data:',\n\t\t\t\t\t\t\t`Property '${this._config.apiDataProperty}' not found in response`,\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._config.items = data;\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('Error fetching data:', error);\n\t\t\t\t// Handle error (e.g., display an error message)\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tthis._config.isLoading = false; // Hide loading indicator\n\t\t\t});\n\t}\n\n\tpublic getItems(): KTSelectOption[] {\n\t\treturn this._config.items || [];\n\t}\n\n\tpublic setItemsFromOptions(options: HTMLOptionElement[]): void {\n\t\tthis._config.items = options.map((option) => {\n\t\t\tconst item: KTSelectOption = {\n\t\t\t\tid: option.value,\n\t\t\t\ttitle: option.textContent || option.value, // Use value as fallback for title\n\t\t\t\t// 'selected' property will be definitively set by _preSelectOptions\n\t\t\t\tdisabled: option.disabled,\n\t\t\t};\n\t\t\treturn item;\n\t\t});\n\t\t// The 'selected' status of these items and the overall component selection state\n\t\t// are now fully managed by _preSelectOptions in KTSelect during initialization.\n\t}\n\n\tpublic getConfig(): KTSelectConfigInterface {\n\t\treturn this._config;\n\t}\n\n\tpublic setSelectedOptions(value: string | string[]): void {\n\t\tif (\n\t\t\tthis._config.multiple &&\n\t\t\ttypeof value === 'string' &&\n\t\t\t!this._selectedOptions.includes(value)\n\t\t) {\n\t\t\tthis._selectedOptions.push(value);\n\t\t} else if (!this._config.multiple) {\n\t\t\t// For single select, replace the previous selection with the new one\n\t\t\tthis._selectedOptions = typeof value === 'string' ? [value] : [value[0]];\n\t\t} else if (this._config.multiple && Array.isArray(value)) {\n\t\t\t// For multiple select with array input, use the provided array\n\t\t\tthis._selectedOptions = [...value];\n\t\t}\n\t}\n\n\tpublic toggleSelectedOptions(value: string): void {\n\t\tif (!this._config.multiple) {\n\t\t\t// For non-multiple, always set the new value\n\t\t\tthis._selectedOptions = [value];\n\t\t\treturn;\n\t\t}\n\n\t\t// For multiple selection, toggle the value\n\t\tconst index = this._selectedOptions.indexOf(value);\n\t\tif (index > -1) {\n\t\t\tthis._selectedOptions.splice(index, 1);\n\t\t} else {\n\t\t\tthis._selectedOptions.push(value);\n\t\t}\n\t}\n\n\tpublic getSelectedOptions(): string[] {\n\t\treturn this._selectedOptions;\n\t}\n\n\tpublic isSelected(value: string): boolean {\n\t\treturn this._selectedOptions.includes(value);\n\t}\n\n\tpublic modifyConfig(config: Partial<KTSelectConfigInterface>): void {\n\t\tthis._config = { ...this._config, ...config };\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport {\n\tInstance as PopperInstance,\n\tcreatePopper,\n\tPlacement,\n} from '@popperjs/core';\nimport KTDom from '../../helpers/dom';\nimport KTData from '../../helpers/data';\nimport KTComponent from '../component';\nimport { KTSelectConfigInterface } from './config';\nimport { FocusManager, EventManager } from './utils';\nimport { KTSelect } from './select'; // Added import\n\n/**\n * KTSelectDropdown\n *\n * A specialized dropdown implementation for the KTSelect component.\n * This module handles the dropdown functionality for the select component,\n * including positioning and showing/hiding.\n */\nexport class KTSelectDropdown extends KTComponent {\n\tprotected override readonly _name: string = 'select-dropdown';\n\tprotected override readonly _config: KTSelectConfigInterface;\n\n\t// DOM Elements\n\tprotected _element: HTMLElement;\n\tprivate _toggleElement: HTMLElement;\n\tprivate _dropdownElement: HTMLElement;\n\n\t// State\n\tprivate _isOpen: boolean = false;\n\tprivate _isTransitioning: boolean = false;\n\tprivate _popperInstance: PopperInstance | null = null;\n\tprivate _eventManager: EventManager;\n\tprivate _focusManager: FocusManager;\n\tprivate _ktSelectInstance: KTSelect; // Added instance variable\n\n\t/**\n\t * Constructor\n\t * @param element The parent element (select wrapper)\n\t * @param toggleElement The element that triggers the dropdown\n\t * @param dropdownElement The dropdown content element\n\t * @param config The configuration options\n\t */\n\tconstructor(\n\t\telement: HTMLElement,\n\t\ttoggleElement: HTMLElement,\n\t\tdropdownElement: HTMLElement,\n\t\tconfig: KTSelectConfigInterface,\n\t\tktSelectInstance: KTSelect, // Added parameter\n\t) {\n\t\tsuper();\n\n\t\tthis._element = element;\n\t\tthis._toggleElement = toggleElement;\n\t\tthis._dropdownElement = dropdownElement;\n\t\tthis._config = config;\n\t\tthis._ktSelectInstance = ktSelectInstance; // Assign instance\n\n\t\tconst container = this._resolveDropdownContainer();\n\t\tif (container) {\n\t\t\tif (container !== this._dropdownElement.parentElement) {\n\t\t\t\tcontainer.appendChild(this._dropdownElement);\n\t\t\t}\n\t\t}\n\n\t\tthis._eventManager = new EventManager();\n\t\tthis._focusManager = new FocusManager(\n\t\t\tdropdownElement,\n\t\t\t'[data-kt-select-option]',\n\t\t\tconfig,\n\t\t);\n\n\t\tthis._setupEventListeners();\n\t}\n\n\t/**\n\t * Set up event listeners for the dropdown\n\t */\n\tprivate _setupEventListeners(): void {\n\t\t// Toggle click\n\t\tthis._eventManager.addListener(\n\t\t\tthis._toggleElement,\n\t\t\t'click',\n\t\t\tthis._handleToggleClick.bind(this),\n\t\t);\n\n\t\t// Close on outside click\n\t\tthis._eventManager.addListener(\n\t\t\tdocument as unknown as HTMLElement,\n\t\t\t'click',\n\t\t\tthis._handleOutsideClick.bind(this),\n\t\t);\n\t}\n\n\t/**\n\t * Handle toggle element click\n\t */\n\tprivate _handleToggleClick(event: Event): void {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (this._config.disabled) {\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log(\n\t\t\t\t\t'KTSelectDropdown._handleToggleClick: select is disabled',\n\t\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Call KTSelect's methods\n\t\tif (this._ktSelectInstance.isDropdownOpen()) {\n\t\t\tthis._ktSelectInstance.closeDropdown();\n\t\t} else {\n\t\t\tthis._ktSelectInstance.openDropdown();\n\t\t}\n\t}\n\n\t/**\n\t * Handle clicks outside the dropdown\n\t */\n\tprivate _handleOutsideClick(event: MouseEvent): void {\n\t\tif (!this._isOpen) return;\n\n\t\tconst target = event.target as HTMLElement;\n\n\t\tif (\n\t\t\t!this._element.contains(target) &&\n\t\t\t!this._dropdownElement.contains(target)\n\t\t) {\n\t\t\t// Call KTSelect's closeDropdown method\n\t\t\tthis._ktSelectInstance.closeDropdown();\n\t\t}\n\t}\n\n\t/**\n\t * Set width of dropdown based on toggle element\n\t */\n\tprivate _setDropdownWidth(): void {\n\t\tif (!this._dropdownElement || !this._toggleElement) return;\n\n\t\t// Check if width is configured\n\t\tif (this._config.dropdownWidth) {\n\t\t\t// If custom width is set, use that\n\t\t\tthis._dropdownElement.style.width = this._config.dropdownWidth;\n\t\t} else {\n\t\t\t// Otherwise, match toggle element width for a cleaner appearance\n\t\t\tconst toggleWidth = this._toggleElement.offsetWidth;\n\t\t\tthis._dropdownElement.style.width = `${toggleWidth}px`;\n\t\t}\n\t}\n\n\t/**\n\t * Initialize the Popper instance for dropdown positioning\n\t */\n\tprivate _initPopper(): void {\n\t\t// Destroy existing popper instance if it exists\n\t\tthis._destroyPopper();\n\n\t\t// Default offset\n\t\tconst offsetValue = '0, 5';\n\n\t\t// Get configuration options\n\t\tconst placement = this._config.dropdownPlacement || 'bottom-start';\n\t\tconst strategy = this._config.dropdownStrategy || 'fixed';\n\t\tconst preventOverflow = this._config.dropdownPreventOverflow !== false;\n\t\tconst flip = this._config.dropdownFlip !== false;\n\n\t\t// Create new popper instance\n\t\tthis._popperInstance = createPopper(\n\t\t\tthis._toggleElement,\n\t\t\tthis._dropdownElement,\n\t\t\t{\n\t\t\t\tplacement: placement as Placement,\n\t\t\t\tstrategy: strategy as 'fixed' | 'absolute',\n\t\t\t\tmodifiers: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'offset',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\toffset: this._parseOffset(offsetValue),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'preventOverflow',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tboundary: 'viewport',\n\t\t\t\t\t\t\taltAxis: preventOverflow,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'flip',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tenabled: flip,\n\t\t\t\t\t\t\tfallbackPlacements: ['top-start', 'bottom-end', 'top-end'],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'sameWidth',\n\t\t\t\t\t\tenabled: !this._config.dropdownWidth,\n\t\t\t\t\t\tphase: 'beforeWrite',\n\t\t\t\t\t\trequires: ['computeStyles'],\n\t\t\t\t\t\tfn: ({ state }) => {\n\t\t\t\t\t\t\tstate.styles.popper.width = `${state.rects.reference.width}px`;\n\t\t\t\t\t\t},\n\t\t\t\t\t\teffect: ({ state }) => {\n\t\t\t\t\t\t\t// Add type guard for HTMLElement\n\t\t\t\t\t\t\tconst reference = state.elements.reference as HTMLElement;\n\t\t\t\t\t\t\tif (reference && 'offsetWidth' in reference) {\n\t\t\t\t\t\t\t\tstate.elements.popper.style.width = `${reference.offsetWidth}px`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t);\n\t}\n\n\t/**\n\t * Parse offset string into an array of numbers\n\t */\n\tprivate _parseOffset(offset: string): number[] {\n\t\treturn offset.split(',').map((value) => parseInt(value.trim(), 10));\n\t}\n\n\t/**\n\t * Destroy the Popper instance\n\t */\n\tprivate _destroyPopper(): void {\n\t\tif (this._popperInstance) {\n\t\t\tthis._popperInstance.destroy();\n\t\t\tthis._popperInstance = null;\n\t\t}\n\t}\n\n\t/**\n\t * Update dropdown position\n\t */\n\tpublic updatePosition(): void {\n\t\tif (this._popperInstance) {\n\t\t\tthis._popperInstance.update();\n\t\t}\n\t}\n\n\t/**\n\t * Open the dropdown\n\t */\n\tpublic open(): void {\n\t\tif (this._config.disabled) {\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log(\n\t\t\t\t\t'KTSelectDropdown.open: select is disabled, not opening',\n\t\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif (this._isOpen || this._isTransitioning) return;\n\n\t\t// Begin opening transition\n\t\tthis._isTransitioning = true;\n\n\t\t// Set initial styles\n\t\tthis._dropdownElement.classList.remove('hidden');\n\t\tthis._dropdownElement.style.opacity = '0';\n\n\t\t// Set dropdown width\n\t\tthis._setDropdownWidth();\n\n\t\t// Reflow\n\t\tKTDom.reflow(this._dropdownElement);\n\n\t\t// Apply z-index\n\t\tlet zIndexToApply: number | null = null;\n\n\t\tif (this._config.dropdownZindex) {\n\t\t\tzIndexToApply = this._config.dropdownZindex;\n\t\t}\n\n\t\t// Consider the dropdown's current z-index if it's already set and higher\n\t\tconst currentDropdownZIndexStr = KTDom.getCssProp(this._dropdownElement, 'z-index');\n\t\tif (currentDropdownZIndexStr && currentDropdownZIndexStr !== 'auto') {\n\t\t\tconst currentDropdownZIndex = parseInt(currentDropdownZIndexStr);\n\t\t\tif (!isNaN(currentDropdownZIndex) && currentDropdownZIndex > (zIndexToApply || 0)) {\n\t\t\t\tzIndexToApply = currentDropdownZIndex;\n\t\t\t}\n\t\t}\n\n\t\t// Ensure dropdown is above elements within its original toggle's parent context\n\t\tconst toggleParentContextZindex = KTDom.getHighestZindex(this._element); // _element is the select wrapper\n\t\tif (toggleParentContextZindex !== null && toggleParentContextZindex >= (zIndexToApply || 0)) {\n\t\t\tzIndexToApply = toggleParentContextZindex + 1;\n\t\t}\n\n\t\tif (zIndexToApply !== null) {\n\t\t\tthis._dropdownElement.style.zIndex = zIndexToApply.toString();\n\t\t}\n\n\t\t// Initialize popper\n\t\tthis._initPopper();\n\n\t\t// Add active classes for visual state\n\t\tthis._dropdownElement.classList.add('open');\n\t\tthis._toggleElement.classList.add('active');\n\t\t// ARIA attributes will be handled by KTSelect\n\n\t\t// Start transition\n\t\tthis._dropdownElement.style.opacity = '1';\n\n\t\t// Handle transition end\n\t\tKTDom.transitionEnd(this._dropdownElement, () => {\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = true;\n\t\t\t// Focus and events will be handled by KTSelect\n\t\t});\n\t}\n\n\t/**\n\t * Close the dropdown\n\t */\n\tpublic close(): void {\n\t\tif (this._config.debug)\n\t\t\tconsole.log(\n\t\t\t\t'KTSelectDropdown.close called - isOpen:',\n\t\t\t\tthis._isOpen,\n\t\t\t\t'isTransitioning:',\n\t\t\t\tthis._isTransitioning,\n\t\t\t);\n\n\t\tif (!this._isOpen || this._isTransitioning) {\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log(\n\t\t\t\t\t'KTSelectDropdown.close - early return: dropdown not open or is transitioning',\n\t\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Events and ARIA will be handled by KTSelect\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log('KTSelectDropdown.close - starting transition');\n\t\tthis._isTransitioning = true;\n\n\t\tthis._dropdownElement.style.opacity = '0';\n\n\t\tlet transitionComplete = false;\n\t\tconst fallbackTimer = setTimeout(() => {\n\t\t\tif (!transitionComplete) {\n\t\t\t\tif (this._config.debug)\n\t\t\t\t\tconsole.log('KTSelectDropdown.close - fallback timer triggered');\n\t\t\t\tcompleteTransition();\n\t\t\t}\n\t\t}, 300);\n\n\t\tconst completeTransition = () => {\n\t\t\tif (transitionComplete) return;\n\t\t\ttransitionComplete = true;\n\t\t\tclearTimeout(fallbackTimer);\n\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log('KTSelectDropdown.close - transition ended');\n\n\t\t\tthis._dropdownElement.classList.add('hidden');\n\t\t\tthis._dropdownElement.classList.remove('open');\n\t\t\tthis._toggleElement.classList.remove('active');\n\t\t\t// ARIA attributes will be handled by KTSelect\n\n\t\t\tthis._destroyPopper();\n\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._isOpen = false;\n\n\t\t\t// Events will be handled by KTSelect\n\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log('KTSelectDropdown.close - visual part complete');\n\t\t};\n\n\t\tKTDom.transitionEnd(this._dropdownElement, completeTransition);\n\n\t\tif (KTDom.getCssProp(this._dropdownElement, 'transition-duration') === '0s') {\n\t\t\tcompleteTransition();\n\t\t}\n\t}\n\n\t/**\n\t * Check if dropdown is open\n\t */\n\tpublic isOpen(): boolean {\n\t\treturn this._isOpen;\n\t}\n\n\t/**\n\t * Clean up component\n\t */\n\tpublic override dispose(): void {\n\t\t// Destroy popper\n\t\tthis._destroyPopper();\n\n\t\t// Remove event listeners\n\t\tthis._eventManager.removeAllListeners(this._element);\n\t\tthis._eventManager.removeAllListeners(this._toggleElement);\n\t\tthis._eventManager.removeAllListeners(document as unknown as HTMLElement);\n\n\t\t// Clean up focus manager\n\t\tif (\n\t\t\tthis._focusManager &&\n\t\t\ttypeof this._focusManager.dispose === 'function'\n\t\t) {\n\t\t\tthis._focusManager.dispose();\n\t\t}\n\n\t\t// Clean up state\n\t\tthis._isOpen = false;\n\t\tthis._isTransitioning = false;\n\n\t\t// Remove data reference\n\t\tKTData.remove(this._element, this._name);\n\t}\n\n\tprivate _resolveDropdownContainer(): HTMLElement | null {\n\t\tconst containerSelector = this._config.dropdownContainer;\n\t\tif (containerSelector && containerSelector !== 'body') {\n\t\t\tconst containerElement = document.querySelector(containerSelector) as HTMLElement | null;\n\t\t\tif (!containerElement && this._config.debug) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`KTSelectDropdown: dropdownContainer selector \"${containerSelector}\" not found. Dropdown will remain in its default position.`,\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn containerElement;\n\t\t} else if (containerSelector === 'body') {\n\t\t\treturn document.body;\n\t\t}\n\t\treturn null;\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTSelect } from './select';\nexport { KTSelectRemote } from './remote';\nexport { KTSelectCombobox } from './combobox';\nexport { KTSelectSearch } from './search';\nexport { KTSelectTags } from './tags';\nexport { KTSelectDropdown } from './dropdown';\nexport { filterOptions, FocusManager, EventManager, TypeToSearchBuffer } from './utils';\nexport { KTSelectConfigInterface, KTSelectOption } from './config';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTComponent from '../component';\nimport {\n\tKTSelectConfigInterface,\n} from './config';\nimport { defaultTemplates } from './templates';\n\nexport class KTSelectOption extends KTComponent {\n\tprotected override readonly _name: string = 'select-option';\n\tprotected override readonly _dataOptionPrefix: string = 'kt-'; // Use 'kt-' prefix to support data-kt-select-option attributes\n\tprotected override readonly _config: KTSelectConfigInterface; // Holds option-specific data from data-kt-*\n\tprivate _globalConfig: KTSelectConfigInterface; // Main select's config\n\n\tconstructor(element: HTMLElement, config?: KTSelectConfigInterface,) {\n\t\tsuper();\n\n\t\t// Always initialize a new option instance\n\t\tthis._init(element);\n\t\tthis._globalConfig = config;\n\t\tthis._buildConfig();\n\n\t\t// Clean the config\n\t\tthis._config = (this._config as any)[''] || {};\n\n\t\t// Add the option config to the global config\n\t\t// Ensure optionsConfig is initialized\n\t\tif (this._globalConfig) {\n\t\t\tthis._globalConfig.optionsConfig = this._globalConfig.optionsConfig || {};\n\t\t\tthis._globalConfig.optionsConfig[(element as HTMLInputElement).value] = this._config;\n\t\t\t// console.log('[KTSelectOption] Populating _globalConfig.optionsConfig for value', (element as HTMLInputElement).value, 'with:', JSON.parse(JSON.stringify(this._config)));\n\t\t\t// console.log('[KTSelectOption] _globalConfig.optionsConfig is now:', JSON.parse(JSON.stringify(this._globalConfig.optionsConfig)));\n\t\t} else {\n\t\t\t// Handle case where _globalConfig might be undefined, though constructor expects it.\n\t\t\t// This might indicate a need to ensure config is always passed or has a default.\n\t\t\tconsole.warn('KTSelectOption: _globalConfig is undefined during constructor.');\n\t\t}\n\n\t\t// Don't store in KTData to avoid Singleton pattern issues\n\t\t// Each option should be a unique instance\n\t\t(element as any).instance = this;\n\t}\n\n\tpublic get id(): string {\n\t\treturn this.getHTMLOptionElement().value;\n\t}\n\n\tpublic get title(): string {\n\t\treturn this.getHTMLOptionElement().textContent || '';\n\t}\n\n\tpublic getHTMLOptionElement(): HTMLOptionElement {\n\t\treturn this._element as HTMLOptionElement;\n\t}\n\n\t/**\n\t * Gathers all necessary data for rendering this option,\n\t * including standard HTML attributes and custom data-kt-* attributes.\n\t */\n\tpublic getOptionDataForTemplate(): Record<string, any> {\n\t\tconst el = this.getHTMLOptionElement();\n\t\tconst text = el.textContent || '';\n\t\treturn {\n\t\t\t// Custom data from data-kt-select-option attributes (parsed into this._config)\n\t\t\t...this._config,\n\t\t\t// Standard HTMLOptionElement properties\n\t\t\tvalue: el.value,\n\t\t\ttext: text, // Original text\n\t\t\tselected: el.selected,\n\t\t\tdisabled: el.disabled,\n\t\t\t// Provide 'content' for convenience in templates, defaulting to text.\n\t\t\t// User's optionTemplate can then use {{content}} or specific fields like {{text}}, {{icon}}, etc.\n\t\t\tcontent: text,\n\t\t};\n\t}\n\n\tpublic render(): HTMLElement {\n\t\t// 'this' is the KTSelectOption instance.\n\t\t// defaultTemplates.option will handle using this instance's data along with _globalConfig.\n\t\treturn defaultTemplates.option(this, this._globalConfig);\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport {\n\tKTSelectConfigInterface,\n\tKTSelectOption as KTSelectOptionData,\n} from './config';\n\n/**\n * KTSelectRemote class\n * Handles fetching remote data for the KTSelect component\n */\nexport class KTSelectRemote {\n\tprivate _config: KTSelectConfigInterface;\n\tprivate _isLoading: boolean = false;\n\tprivate _hasError: boolean = false;\n\tprivate _errorMessage: string = '';\n\tprivate _currentPage: number = 1;\n\tprivate _totalPages: number = 1;\n\tprivate _lastQuery: string = '';\n\tprivate _element: HTMLElement | null = null;\n\n\t/**\n\t * Constructor\n\t * @param config KTSelect configuration\n\t * @param element The select element\n\t */\n\tconstructor(config: KTSelectConfigInterface, element?: HTMLElement) {\n\t\tthis._config = config;\n\t\tthis._element = element || null;\n\t}\n\n\t/**\n\t * Fetch data from remote URL\n\t * @param query Optional search query\n\t * @param page Page number for pagination\n\t * @returns Promise with fetched items\n\t */\n\tpublic fetchData(\n\t\tquery?: string,\n\t\tpage: number = 1,\n\t): Promise<KTSelectOptionData[]> {\n\t\tthis._isLoading = true;\n\t\tthis._hasError = false;\n\t\tthis._errorMessage = '';\n\t\tthis._lastQuery = query || '';\n\t\tthis._currentPage = page;\n\n\t\tlet url = this._buildUrl(query, page);\n\n\t\tif (this._config.debug) console.log('Fetching remote data from:', url);\n\n\t\t// Dispatch search start event\n\t\tthis._dispatchEvent('remoteSearchStart');\n\n\t\treturn fetch(url)\n\t\t\t.then((response: Response): Promise<any> => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(`HTTP error! Status: ${response.status}`);\n\t\t\t\t}\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((data: any): KTSelectOptionData[] => {\n\t\t\t\t// Process the data\n\t\t\t\treturn this._processData(data);\n\t\t\t})\n\t\t\t.catch((error: Error): KTSelectOptionData[] => {\n\t\t\t\tconsole.error('Error fetching remote data:', error);\n\t\t\t\tthis._hasError = true;\n\t\t\t\tthis._errorMessage =\n\t\t\t\t\tthis._config.remoteErrorMessage || 'Failed to load data';\n\t\t\t\treturn [];\n\t\t\t})\n\t\t\t.finally((): void => {\n\t\t\t\tthis._isLoading = false;\n\t\t\t\t// Dispatch search end event\n\t\t\t\tthis._dispatchEvent('remoteSearchEnd');\n\t\t\t});\n\t}\n\n\t/**\n\t * Dispatch custom events to notify about search state changes\n\t * @param eventName Name of the event to dispatch\n\t */\n\tprivate _dispatchEvent(eventName: string): void {\n\t\tif (!this._element) return;\n\n\t\tconst event = new CustomEvent(`ktselect.${eventName}`, {\n\t\t\tbubbles: true,\n\t\t\tdetail: {\n\t\t\t\tquery: this._lastQuery,\n\t\t\t\tisLoading: this._isLoading,\n\t\t\t\thasError: this._hasError,\n\t\t\t\terrorMessage: this._errorMessage,\n\t\t\t},\n\t\t});\n\n\t\tthis._element.dispatchEvent(event);\n\t}\n\n\t/**\n\t * Build the URL for the API request\n\t * @param query Search query\n\t * @param page Page number\n\t * @returns Fully formed URL\n\t */\n\tprivate _buildUrl(query?: string, page: number = 1): string {\n\t\tlet url = this._config.dataUrl;\n\n\t\tif (!url) {\n\t\t\tconsole.error('No URL specified for remote data');\n\t\t\treturn '';\n\t\t}\n\n\t\t// Add parameters\n\t\tconst params = new URLSearchParams();\n\n\t\t// Add search parameter if provided\n\t\tif (query && this._config.searchParam) {\n\t\t\tparams.append(this._config.searchParam, query);\n\t\t}\n\n\t\t// Add pagination parameters if enabled\n\t\tif (this._config.pagination) {\n\t\t\tconst limitParam = this._config.paginationLimitParam || 'limit';\n\t\t\tconst pageParam = this._config.paginationPageParam || 'page';\n\t\t\tconst limit = this._config.paginationLimit || 10;\n\n\t\t\tparams.append(limitParam, limit.toString());\n\t\t\tparams.append(pageParam, page.toString());\n\t\t}\n\n\t\t// Append parameters to URL if there are any\n\t\tconst paramsString = params.toString();\n\t\tif (paramsString) {\n\t\t\turl += (url.includes('?') ? '&' : '?') + paramsString;\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t/**\n\t * Process the API response data\n\t * @param data API response data\n\t * @returns Array of KTSelectOptionData\n\t */\n\tprivate _processData(data: any): KTSelectOptionData[] {\n\t\ttry {\n\t\t\tif (this._config.debug) console.log('Processing API response:', data);\n\n\t\t\tlet processedData = data;\n\n\t\t\t// Extract data from the API property if specified\n\t\t\tif (this._config.apiDataProperty && data[this._config.apiDataProperty]) {\n\t\t\t\tif (this._config.debug)\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t`Extracting data from property: ${this._config.apiDataProperty}`,\n\t\t\t\t\t);\n\n\t\t\t\t// If pagination metadata is available, extract it\n\t\t\t\tif (this._config.pagination) {\n\t\t\t\t\tif (data.total_pages) {\n\t\t\t\t\t\tthis._totalPages = data.total_pages;\n\t\t\t\t\t\tif (this._config.debug)\n\t\t\t\t\t\t\tconsole.log(`Total pages found: ${this._totalPages}`);\n\t\t\t\t\t}\n\t\t\t\t\tif (data.total) {\n\t\t\t\t\t\tthis._totalPages = Math.ceil(\n\t\t\t\t\t\t\tdata.total / (this._config.paginationLimit || 10),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (this._config.debug)\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t`Calculated total pages: ${this._totalPages} from total: ${data.total}`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprocessedData = data[this._config.apiDataProperty];\n\t\t\t}\n\n\t\t\t// Ensure data is an array\n\t\t\tif (!Array.isArray(processedData)) {\n\t\t\t\tconsole.warn('Remote data is not an array:', processedData);\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log(\n\t\t\t\t\t`Mapping ${processedData.length} items to KTSelectOptionData format`,\n\t\t\t\t);\n\n\t\t\t// Map data to KTSelectOptionData format\n\t\t\tconst mappedData = processedData.map((item: any): KTSelectOptionData => {\n\t\t\t\tconst mappedItem = this._mapItemToOption(item);\n\n\t\t\t\t// Add logging to trace data path extraction\n\t\t\t\tif (\n\t\t\t\t\tthis._config.dataValueField &&\n\t\t\t\t\tthis._config.dataValueField.includes('.')\n\t\t\t\t) {\n\t\t\t\t\t// For nested paths, verify extraction worked\n\t\t\t\t\tconst parts = this._config.dataValueField.split('.');\n\t\t\t\t\tlet nestedValue = item;\n\n\t\t\t\t\t// Try to navigate to the value manually for verification\n\t\t\t\t\tfor (const part of parts) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tnestedValue &&\n\t\t\t\t\t\t\ttypeof nestedValue === 'object' &&\n\t\t\t\t\t\t\tpart in nestedValue\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tnestedValue = nestedValue[part];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnestedValue = null;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// If we found a value, verify it matches what was extracted\n\t\t\t\t\tif (nestedValue !== null && nestedValue !== undefined) {\n\t\t\t\t\t\tconst expectedValue = String(nestedValue);\n\t\t\t\t\t\tif (this._config.debug)\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t`Data path verification for [${this._config.dataValueField}]: Expected: ${expectedValue}, Got: ${mappedItem.id}`,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (mappedItem.id !== expectedValue && expectedValue) {\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Value mismatch! Path: ${this._config.dataValueField}, Expected: ${expectedValue}, Got: ${mappedItem.id}`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this._config.debug)\n\t\t\t\t\tconsole.log(`Mapped item: ${JSON.stringify(mappedItem)}`);\n\t\t\t\treturn mappedItem;\n\t\t\t});\n\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log(`Returned ${mappedData.length} mapped items`);\n\t\t\treturn mappedData;\n\t\t} catch (error) {\n\t\t\tconsole.error('Error processing remote data:', error);\n\t\t\tthis._hasError = true;\n\t\t\tthis._errorMessage = 'Error processing data';\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t/**\n\t * Map a data item to KTSelectOptionData format\n\t * @param item Data item from API\n\t * @returns KTSelectOptionData object\n\t */\n\tprivate _mapItemToOption(item: any): KTSelectOptionData {\n\t\t// Get the field mapping from config with fallbacks for common field names\n\t\tconst valueField = this._config.dataValueField || 'id';\n\t\tconst labelField = this._config.dataFieldText || 'title';\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log(\n\t\t\t\t`Mapping fields: value=${valueField}, label=${labelField}`,\n\t\t\t);\n\t\tif (this._config.debug)\n\t\t\tconsole.log('Item data:', JSON.stringify(item).substring(0, 200) + '...'); // Trimmed for readability\n\n\t\t// Extract values using dot notation if needed\n\t\tconst getValue = (obj: any, path: string): any => {\n\t\t\tif (!path) return null;\n\t\t\tif (!obj) return null;\n\n\t\t\ttry {\n\t\t\t\t// Handle dot notation to access nested properties\n\t\t\t\tconst parts = path.split('.');\n\t\t\t\tlet result = obj;\n\n\t\t\t\tfor (const part of parts) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tresult === null ||\n\t\t\t\t\t\tresult === undefined ||\n\t\t\t\t\t\ttypeof result !== 'object'\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tresult = result[part];\n\t\t\t\t}\n\n\t\t\t\t// Log the extraction result\n\t\t\t\tif (this._config.debug)\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t`Extracted [${path}] => ${\n\t\t\t\t\t\t\tresult !== null && result !== undefined\n\t\t\t\t\t\t\t\t? typeof result === 'object'\n\t\t\t\t\t\t\t\t\t? JSON.stringify(result).substring(0, 50)\n\t\t\t\t\t\t\t\t\t: String(result).substring(0, 50)\n\t\t\t\t\t\t\t: 'null'\n\t\t\t\t\t\t}`,\n\t\t\t\t\t);\n\n\t\t\t\treturn result;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`Error extracting path ${path}:`, error);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\t// Try to get a usable ID, with fallbacks\n\t\tlet id = getValue(item, valueField);\n\n\t\t// Ensure id is always a proper string\n\t\tif (id === null || id === undefined) {\n\t\t\t// If no ID found, check for id.value or item.id as fallbacks\n\t\t\tif (\n\t\t\t\titem.id &&\n\t\t\t\ttypeof item.id === 'object' &&\n\t\t\t\t'value' in item.id &&\n\t\t\t\titem.id.value\n\t\t\t) {\n\t\t\t\tid = String(item.id.value);\n\t\t\t\tif (this._config.debug)\n\t\t\t\t\tconsole.log(`Using id.value as fallback: ${id}`);\n\t\t\t} else if (item.id) {\n\t\t\t\tid = String(item.id);\n\t\t\t\tif (this._config.debug)\n\t\t\t\t\tconsole.log(`Using direct item.id as fallback: ${id}`);\n\t\t\t} else {\n\t\t\t\t// If no ID found at all, use the title instead (will be extracted below)\n\t\t\t\tif (this._config.debug)\n\t\t\t\t\tconsole.log(`No ID found, will use title as fallback`);\n\t\t\t\tid = null;\n\t\t\t}\n\t\t} else if (typeof id === 'object') {\n\t\t\t// If ID is an object, log the issue and set to null to use title fallback\n\t\t\tconsole.warn(\n\t\t\t\t`ID for path ${valueField} is an object, will use title fallback instead`,\n\t\t\t);\n\t\t\tid = null;\n\t\t} else {\n\t\t\t// Otherwise, ensure it's a string\n\t\t\tid = String(id);\n\t\t\tif (this._config.debug) console.log(`Final ID value: ${id}`);\n\t\t}\n\n\t\t// Try to get a usable title, with fallbacks\n\t\tlet title = getValue(item, labelField);\n\t\ttitle = title !== null ? String(title) : '';\n\t\tif (this._config.debug)\n\t\t\tconsole.log(`Title/label field [${labelField}]:`, title);\n\n\t\t// If title is still empty, try common field names\n\t\tif (!title) {\n\t\t\t// Try common field names if the configured one doesn't work\n\t\t\tif (item.name) title = String(item.name);\n\t\t\telse if (item.title) title = String(item.title);\n\t\t\telse if (item.label) title = String(item.label);\n\t\t\telse if (item.text) title = String(item.text);\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log('After fallback checks, title:', title);\n\t\t}\n\n\t\t// Create the option object with non-empty values\n\t\tconst result = {\n\t\t\tid: id || title || 'id-' + Math.random().toString(36).substr(2, 9), // Ensure we always have an ID\n\t\t\ttitle: title || 'Unnamed option',\n\t\t};\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log('Final mapped item:', JSON.stringify(result));\n\t\treturn result;\n\t}\n\n\t/**\n\t * Load the next page of results\n\t * @returns Promise with fetched items\n\t */\n\tpublic loadNextPage(): Promise<KTSelectOptionData[]> {\n\t\tif (this._currentPage < this._totalPages) {\n\t\t\treturn this.fetchData(this._lastQuery, this._currentPage + 1);\n\t\t}\n\t\treturn Promise.resolve([]);\n\t}\n\n\t/**\n\t * Check if there are more pages available\n\t * @returns Boolean indicating if more pages exist\n\t */\n\tpublic hasMorePages(): boolean {\n\t\treturn this._currentPage < this._totalPages;\n\t}\n\n\t/**\n\t * Get loading state\n\t * @returns Boolean indicating if data is loading\n\t */\n\tpublic isLoading(): boolean {\n\t\treturn this._isLoading;\n\t}\n\n\t/**\n\t * Get error state\n\t * @returns Boolean indicating if there was an error\n\t */\n\tpublic hasError(): boolean {\n\t\treturn this._hasError;\n\t}\n\n\t/**\n\t * Get error message\n\t * @returns Error message\n\t */\n\tpublic getErrorMessage(): string {\n\t\treturn this._errorMessage;\n\t}\n\n\t/**\n\t * Reset the remote data state\n\t */\n\tpublic reset(): void {\n\t\tthis._isLoading = false;\n\t\tthis._hasError = false;\n\t\tthis._errorMessage = '';\n\t\tthis._currentPage = 1;\n\t\tthis._totalPages = 1;\n\t\tthis._lastQuery = '';\n\t}\n\n\t/**\n\t * Set the select element for event dispatching\n\t * @param element The select element\n\t */\n\tpublic setElement(element: HTMLElement): void {\n\t\tthis._element = element;\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTSelectConfigInterface } from './config';\nimport { KTSelect } from './select';\nimport { defaultTemplates } from './templates';\nimport {\n\tfilterOptions,\n\tFocusManager,\n\tEventManager,\n} from './utils';\n\nexport class KTSelectSearch {\n\tprivate _select: KTSelect;\n\tprivate _searchInput: HTMLInputElement;\n\tprivate _noResultsElement: HTMLElement | null = null;\n\tprivate _originalOptionContents = new Map<string, string>();\n\tprivate _eventManager: EventManager;\n\tprivate _focusManager: FocusManager;\n\tprivate _config: KTSelectConfigInterface;\n\n\t// Public handler for search input (made public for event binding)\n\tpublic handleSearchInput: (...args: any[]) => void;\n\n\tconstructor(select: KTSelect) {\n\t\tthis._select = select;\n\t\tthis._searchInput = select.getSearchInput();\n\t\tthis._eventManager = new EventManager();\n\t\tthis._focusManager = new FocusManager(\n\t\t\tthis._select.getDropdownElement(),\n\t\t\t'[data-kt-select-option]',\n\t\t\tselect.getConfig(),\n\t\t);\n\t\tthis.handleSearchInput = this._handleSearchInput.bind(this);\n\t\tthis._config = select.getConfig();\n\t\tthis._cacheOriginalOptionContents();\n\t}\n\n\tinit() {\n\t\tif (this._select.getConfig().enableSearch) {\n\t\t\tthis._searchInput = this._select.getSearchInput();\n\n\t\t\tif (this._searchInput) {\n\t\t\t\tif (this._config.debug)\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'Initializing search module with input:',\n\t\t\t\t\t\tthis._searchInput,\n\t\t\t\t\t);\n\n\t\t\t\t// First remove any existing listeners to prevent duplicates\n\t\t\t\tthis._removeEventListeners();\n\n\t\t\t\t// Add the input event listener for filtering\n\t\t\t\tthis._eventManager.addListener(\n\t\t\t\t\tthis._searchInput,\n\t\t\t\t\t'input',\n\t\t\t\t\tthis.handleSearchInput,\n\t\t\t\t);\n\n\t\t\t\t// Add keydown event listener for navigation, selection, and escape\n\t\t\t\tthis._eventManager.addListener(\n\t\t\t\t\tthis._searchInput,\n\t\t\t\t\t'keydown',\n\t\t\t\t\tthis._handleSearchKeyDown.bind(this)\n\t\t\t\t);\n\n\t\t\t\t// Add blur event listener to ensure highlights are cleared when focus is lost\n\t\t\t\tthis._eventManager.addListener(this._searchInput, 'blur', () => {\n\t\t\t\t\t// Small delay to prevent race conditions with selection\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (!this._searchInput.value) {\n\t\t\t\t\t\t\tthis._resetAllOptions();\n\t\t\t\t\t\t\tthis.clearSearch();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 100);\n\t\t\t\t});\n\n\t\t\t\t// Listen for remote search events to coordinate with remote search functionality\n\t\t\t\tif (\n\t\t\t\t\tthis._select.getConfig().remote &&\n\t\t\t\t\tthis._select.getConfig().searchParam\n\t\t\t\t) {\n\t\t\t\t\tthis._select\n\t\t\t\t\t\t.getElement()\n\t\t\t\t\t\t.addEventListener('remoteSearchStart', () => {\n\t\t\t\t\t\t\t// Reset focused option when remote search starts\n\t\t\t\t\t\t\tthis._focusManager.resetFocus();\n\t\t\t\t\t\t});\n\n\t\t\t\t\tthis._select.getElement().addEventListener('remoteSearchEnd', () => {\n\t\t\t\t\t\t// After remote search completes, refresh our option cache\n\t\t\t\t\t\tthis.refreshOptionCache();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Listen for dropdown close to reset options - ATTACH TO WRAPPER\n\t\t\t\tthis._select.getWrapperElement().addEventListener('dropdown.close', () => {\n\t\t\t\t\tthis._focusManager.resetFocus();\n\t\t\t\t\t// If clearSearchOnClose is false and there's a value, the search term and filtered state should persist.\n\t\t\t\t\t// KTSelect's closeDropdown method already calls this._searchModule.clearSearch() (which clears highlights)\n\t\t\t\t\t// and conditionally clears the input value based on KTSelect's config.clearSearchOnClose.\n\t\t\t\t\t// This listener in search.ts seems to unconditionally clear everything.\n\t\t\t\t\t// For now, keeping its original behavior:\n\t\t\t\t\tthis.clearSearch(); // Clears highlights from current options\n\t\t\t\t\tthis._searchInput.value = ''; // Clears the search input field\n\t\t\t\t\tthis._resetAllOptions(); // Shows all options, restores original text, removes highlights\n\t\t\t\t\tthis._clearNoResultsMessage(); // Clears any \"no results\" message\n\t\t\t\t});\n\n\t\t\t\t// Clear highlights when an option is selected - ATTACH TO ORIGINAL SELECT (standard 'change' event)\n\t\t\t\tthis._select.getElement().addEventListener('change', () => {\n\t\t\t\t\tthis.clearSearch();\n\n\t\t\t\t\t// Close dropdown if configured to do so\n\t\t\t\t\tthis._select.closeDropdown();\n\t\t\t\t});\n\n\t\t\t\t// Consolidated 'dropdown.show' event listener - ATTACH TO WRAPPER\n\t\t\t\tthis._select.getWrapperElement().addEventListener('dropdown.show', () => {\n\t\t\t\t\tthis._focusManager.resetFocus(); // Always clear previous focus state\n\n\t\t\t\t\tif (this._searchInput?.value) {\n\t\t\t\t\t\t// If there's an existing search term:\n\t\t\t\t\t\t// 1. Re-filter options. This ensures the display (hidden/visible) is correct\n\t\t\t\t\t\t//    and \"no results\" message is handled if query yields nothing.\n\t\t\t\t\t\tthis._filterOptions(this._searchInput.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If search input is empty:\n\t\t\t\t\t\t// 1. Reset all options to their full, unfiltered, original state.\n\t\t\t\t\t\tthis._resetAllOptions(); // Shows all, clears highlights from options, restores original text\n\t\t\t\t\t\t// 2. Clear any \"no results\" message.\n\t\t\t\t\t\tthis._clearNoResultsMessage();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle autofocus for the search input (this was one of the original separate listeners)\n\t\t\t\t\tif (this._select.getConfig().searchAutofocus) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis._searchInput?.focus(); // Focus search input\n\t\t\t\t\t\t}, 50); // Delay to ensure dropdown is visible\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Remove event listeners to prevent memory leaks or duplicates\n\t */\n\tprivate _removeEventListeners(): void {\n\t\tif (this._searchInput) {\n\t\t\tthis._eventManager.removeAllListeners(this._searchInput);\n\t\t}\n\t}\n\n\t/**\n\t * Handles keydown events on the search input for navigation and actions.\n\t */\n\tprivate _handleSearchKeyDown(event: KeyboardEvent): void {\n\t\tconst key = event.key;\n\n\t\tswitch (key) {\n\t\t\tcase 'ArrowDown':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._focusManager.focusNext();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowUp':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._focusManager.focusPrevious();\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// Always attempt to select the first available option in the list.\n\t\t\t\t// focusFirst() finds, focuses, and returns the first visible, non-disabled option.\n\t\t\t\tconst firstAvailableOption = this._focusManager.focusFirst();\n\n\t\t\t\tif (firstAvailableOption) {\n\t\t\t\t\tconst optionValue = firstAvailableOption.getAttribute('data-value');\n\t\t\t\t\tif (optionValue) {\n\t\t\t\t\t\tthis._select.toggleSelection(optionValue);\n\t\t\t\t\t\t// KTSelect.toggleSelection handles closing the dropdown based on config.closeOnSelect and config.multiple\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'Escape':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._searchInput.value = '';\n\t\t\t\tthis.clearSearch();\n\t\t\t\tthis._resetAllOptions();\n\t\t\t\tthis._clearNoResultsMessage();\n\t\t\t\tthis._focusManager.focusFirst();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Store original HTML content of all options for later restoration\n\t * This prevents losing formatting when clearing search\n\t */\n\tprivate _cacheOriginalOptionContents() {\n\t\t// Wait for options to be initialized\n\t\tsetTimeout(() => {\n\t\t\tthis._originalOptionContents.clear(); // Clear before re-caching\n\t\t\tconst options = Array.from(this._select.getOptionsElement());\n\t\t\toptions.forEach((option) => {\n\t\t\t\tconst value = option.getAttribute('data-value');\n\t\t\t\tif (value) {\n\t\t\t\t\t// Store the full innerHTML as the original content\n\t\t\t\t\tthis._originalOptionContents.set(value, option.innerHTML);\n\t\t\t\t}\n\t\t\t});\n\t\t}, 0);\n\t}\n\n\t/**\n\t * Restores the innerHTML of all options from the cache if they have been modified.\n\t * This is typically called before applying new filters/highlights.\n\t */\n\tprivate _restoreOptionContentsBeforeFilter(): void {\n\t\tconst options = Array.from(this._select.getOptionsElement()) as HTMLElement[];\n\t\toptions.forEach(option => {\n\t\t\tconst value = option.getAttribute('data-value');\n\t\t\tif (value && this._originalOptionContents.has(value)) {\n\t\t\t\tconst originalContent = this._originalOptionContents.get(value)!;\n\t\t\t\t// Only restore if current content is different, to avoid unnecessary DOM manipulation\n\t\t\t\tif (option.innerHTML !== originalContent) {\n\t\t\t\t\toption.innerHTML = originalContent;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _handleSearchInput(event: Event) {\n\t\tconst query = (event.target as HTMLInputElement).value;\n\t\tconst config = this._select.getConfig();\n\n\t\t// Reset focused option when search changes\n\t\tthis._focusManager.resetFocus();\n\n\t\t// Restore original content for all options before filtering/highlighting again\n\t\tthis._restoreOptionContentsBeforeFilter();\n\n\t\tif (query.trim() === '') {\n\t\t\tthis._resetAllOptions();\n\t\t\tthis._focusManager.focusFirst(); // Focus first option when search is cleared\n\t\t\treturn;\n\t\t}\n\n\t\t// For remote search, KTSelect component handles it.\n\t\t// KTSelect will call refreshAfterSearch on this module when remote data is updated.\n\t\tif (config.remote && config.searchParam) {\n\t\t\tif (query.length < config.searchMinLength) {\n\t\t\t\tthis._resetAllOptions();\n\t\t\t\tthis._clearNoResultsMessage();\n\t\t\t\tthis._focusManager.focusFirst(); // Focus first if query too short\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// For local search\n\t\tif (query.length >= config.searchMinLength) {\n\t\t\tthis._filterOptions(query);\n\t\t\tthis._focusManager.focusFirst(); // Focus first visible option after local filtering\n\t\t} else {\n\t\t\tthis._resetAllOptions();\n\t\t\tthis._clearNoResultsMessage();\n\t\t\tthis._focusManager.focusFirst(); // Focus first if query too short and not remote\n\t\t}\n\t}\n\n\tprivate _filterOptions(query: string) {\n\t\tconst options = Array.from(\n\t\t\tthis._select.getOptionsElement(),\n\t\t) as HTMLElement[];\n\t\tconst config = this._select.getConfig();\n\t\tconst dropdownElement = this._select.getDropdownElement();\n\n\t\t// Cache original option HTML if not already cached\n\t\tif (this._originalOptionContents.size === 0) {\n\t\t\tthis._cacheOriginalOptionContents();\n\t\t}\n\n\t\t// Restore original content before filtering, so highlighting is applied fresh.\n\t\tthis._restoreOptionContentsBeforeFilter();\n\n\t\tconst visibleCount = filterOptions(options, query, config, dropdownElement, (count) =>\n\t\t\tthis._handleNoResults(count),\n\t\t);\n\t}\n\n\t/**\n\t * Reset all options to their original state\n\t */\n\tprivate _resetAllOptions() {\n\t\t// Show all options\n\t\tconst options = Array.from(\n\t\t\tthis._select.getOptionsElement(),\n\t\t) as HTMLElement[];\n\n\t\t// Ensure the cache is populated if it's somehow empty here\n\t\tif (this._originalOptionContents.size === 0) {\n\t\t\tthis._cacheOriginalOptionContents();\n\t\t}\n\n\t\toptions.forEach((option) => {\n\t\t\toption.classList.remove('hidden');\n\t\t\tif (option.style.display === 'none') option.style.display = ''; // Ensure visible\n\n\t\t\t// Restore original HTML content (remove highlights)\n\t\t\tconst value = option.getAttribute('data-value');\n\t\t\tif (value && this._originalOptionContents.has(value)) {\n\t\t\t\tconst originalContent = this._originalOptionContents.get(value)!;\n\t\t\t\t// Only update if different, to minimize DOM changes\n\t\t\t\tif (option.innerHTML !== originalContent) {\n\t\t\t\t\toption.innerHTML = originalContent;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._clearNoResultsMessage(); // Ensure no results message is cleared when resetting\n\t}\n\n\tprivate _handleNoResults(visibleOptionsCount: number) {\n\t\tif (visibleOptionsCount === 0 && this._searchInput?.value?.trim() !== '') {\n\t\t\tthis._showNoResultsMessage();\n\t\t} else {\n\t\t\tthis._clearNoResultsMessage();\n\t\t}\n\t}\n\n\tprivate _showNoResultsMessage() {\n\t\tthis._clearNoResultsMessage();\n\n\t\tconst config = this._select.getConfig();\n\t\tthis._noResultsElement = defaultTemplates.noresults(config);\n\n\t\tconst dropdownElement = this._select.getDropdownElement();\n\t\tconst optionsContainer = dropdownElement.querySelector(\n\t\t\t'[data-kt-select-options]',\n\t\t);\n\t\tif (optionsContainer) {\n\t\t\toptionsContainer.appendChild(this._noResultsElement);\n\t\t} else {\n\t\t\tdropdownElement.appendChild(this._noResultsElement);\n\t\t}\n\t}\n\n\tprivate _clearNoResultsMessage() {\n\t\tif (this._noResultsElement && this._noResultsElement.parentNode) {\n\t\t\tthis._noResultsElement.parentNode.removeChild(this._noResultsElement);\n\t\t\tthis._noResultsElement = null;\n\t\t}\n\t}\n\n\t/**\n\t * Public method to explicitly clear all search highlights\n\t * This is called when search is reset or selection changes\n\t */\n\tpublic clearSearch() {\n\t\t// Restore original option content (removes highlighting)\n\t\tconst optionsToClear = Array.from(\n\t\t\tthis._select.getOptionsElement(),\n\t\t) as HTMLElement[];\n\n\t\t// Ensure cache is available\n\t\tif (this._originalOptionContents.size === 0 && optionsToClear.length > 0) {\n\t\t\tthis._cacheOriginalOptionContents();\n\t\t}\n\n\t\toptionsToClear.forEach((option) => {\n\t\t\tconst value = option.getAttribute('data-value');\n\t\t\tif (value && this._originalOptionContents.has(value)) {\n\t\t\t\tconst originalContent = this._originalOptionContents.get(value)!;\n\t\t\t\t// Only restore if different\n\t\t\t\tif (option.innerHTML !== originalContent) {\n\t\t\t\t\toption.innerHTML = originalContent;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * This ensures that search highlighting works correctly with new options\n\t */\n\tpublic refreshOptionCache(): void {\n\t\t// Re-cache all option contents\n\t\tthis._originalOptionContents.clear();\n\t\tconst currentOptions = Array.from(\n\t\t\tthis._select.getOptionsElement(),\n\t\t) as HTMLElement[];\n\n\t\tcurrentOptions.forEach((option) => {\n\t\t\tconst value = option.getAttribute('data-value');\n\t\t\tif (value) {\n\t\t\t\tthis._originalOptionContents.set(value, option.innerHTML);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Called after search (local or remote via KTSelect) to reset focus.\n\t */\n\tpublic refreshAfterSearch(): void {\n\t\tthis._focusManager.resetFocus();\n\t\tthis._focusManager.focusFirst();\n\t\t// Re-cache original contents as options might have changed (especially after remote search)\n\t\tthis.refreshOptionCache();\n\t}\n\n\t/**\n\t * Clean up all resources used by the search module\n\t */\n\tpublic destroy(): void {\n\t\t// Remove all event listeners\n\t\tthis._removeEventListeners();\n\n\t\t// Clear all references\n\t\tif (this._focusManager) {\n\t\t\tthis._focusManager.dispose();\n\t\t}\n\n\t\t// Clear cached content\n\t\tthis._originalOptionContents.clear();\n\n\t\t// Clear highlight elements\n\t\tthis.clearSearch();\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTComponent from '../component';\nimport {\n\tKTSelectConfigInterface,\n\tKTSelectState,\n\tKTSelectOption as KTSelectOptionData,\n} from './config';\nimport { KTSelectOption } from './option';\nimport { KTSelectRemote } from './remote';\nimport { KTSelectSearch } from './search';\nimport { defaultTemplates } from './templates';\nimport { KTSelectCombobox } from './combobox';\nimport { KTSelectDropdown } from './dropdown';\nimport {\n\tFocusManager,\n\tEventManager,\n\trenderTemplateString,\n\tTypeToSearchBuffer,\n} from './utils';\nimport { KTSelectTags } from './tags';\n\nexport class KTSelect extends KTComponent {\n\t// Core properties\n\tprotected override readonly _name: string = 'select';\n\tprotected override readonly _dataOptionPrefix: string = 'kt-'; // Use 'kt-' prefix to support data-kt-select-option attributes\n\tprotected override readonly _config: KTSelectConfigInterface;\n\tprotected override _defaultConfig: KTSelectConfigInterface;\n\n\t// DOM elements\n\tprivate _wrapperElement: HTMLElement;\n\tprivate _displayElement: HTMLElement;\n\tprivate _dropdownContentElement: HTMLElement;\n\tprivate _searchInputElement: HTMLInputElement | null;\n\tprivate _options: NodeListOf<HTMLElement>;\n\n\t// State\n\tprivate _dropdownIsOpen: boolean = false;\n\tprivate _state: KTSelectState;\n\tprivate _searchModule: KTSelectSearch;\n\tprivate _remoteModule: KTSelectRemote;\n\tprivate _comboboxModule: KTSelectCombobox | null = null;\n\tprivate _tagsModule: KTSelectTags | null = null;\n\tprivate _dropdownModule: KTSelectDropdown | null = null;\n\tprivate _loadMoreIndicator: HTMLElement | null = null;\n\tprivate _focusManager: FocusManager;\n\tprivate _eventManager: EventManager;\n\tprivate _typeToSearchBuffer: TypeToSearchBuffer = new TypeToSearchBuffer();\n\tprivate _mutationObserver: MutationObserver | null = null;\n\n\t/**\n\t * Constructor: Initializes the select component\n\t */\n\tconstructor(element: HTMLElement, config?: KTSelectConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element, this._name)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tthis._state = new KTSelectState(this._config);\n\t\tthis._config = this._state.getConfig();\n\n\t\t(element as any).instance = this;\n\n\t\t// Initialize event manager\n\t\tthis._eventManager = new EventManager();\n\n\t\t// Initialize remote module if remote data is enabled\n\t\tif (this._config.remote) {\n\t\t\tthis._remoteModule = new KTSelectRemote(this._config, this._element);\n\t\t\tthis._initializeRemoteData();\n\t\t} else {\n\t\t\tthis._state\n\t\t\t\t.setItems()\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (this._config.debug)\n\t\t\t\t\t\tconsole.log('Setting up component after remote data is loaded');\n\t\t\t\t\tthis._setupComponent();\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error('Error setting items:', error);\n\t\t\t\t\t// Handle the error, e.g., display an error message to the user\n\t\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Initialize remote data fetching\n\t */\n\tprivate _initializeRemoteData() {\n\t\tif (!this._remoteModule || !this._config.remote) return;\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log('Initializing remote data with URL:', this._config.dataUrl);\n\n\t\t// Show loading state\n\t\tthis._renderLoadingState();\n\n\t\t// Fetch remote data\n\t\tthis._remoteModule\n\t\t\t.fetchData()\n\t\t\t.then((items) => {\n\t\t\t\tif (this._config.debug) console.log('Remote data fetched:', items);\n\n\t\t\t\t// Remove placeholder/loading options before setting new items\n\t\t\t\tthis._clearExistingOptions();\n\n\t\t\t\t// Update state with fetched items\n\t\t\t\tthis._state\n\t\t\t\t\t.setItems(items)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t// Generate options from the fetched data\n\t\t\t\t\t\tthis._generateOptionsHtml(this._element);\n\n\t\t\t\t\t\tif (this._config.debug)\n\t\t\t\t\t\t\tconsole.log('Generating options HTML from remote data');\n\t\t\t\t\t\tthis._setupComponent();\n\n\t\t\t\t\t\t// Add pagination \"Load More\" button if needed\n\t\t\t\t\t\tif (this._config.pagination && this._remoteModule.hasMorePages()) {\n\t\t\t\t\t\t\tthis._addLoadMoreButton();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tconsole.error('Error setting items:', error);\n\t\t\t\t\t\tthis._renderErrorState(error.message || 'Failed to load data');\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('Error fetching remote data:', error);\n\t\t\t\tthis._renderErrorState(\n\t\t\t\t\tthis._remoteModule.getErrorMessage() || 'Failed to load data',\n\t\t\t\t);\n\t\t\t});\n\t}\n\n\t/**\n\t * Clear existing options from the select element\n\t */\n\tprivate _clearExistingOptions() {\n\t\t// Keep only the empty/placeholder option and remove the rest\n\t\tconst options = Array.from(\n\t\t\tthis._element.querySelectorAll('option:not([value=\"\"])'),\n\t\t);\n\t\toptions.forEach((option) => option.remove());\n\t}\n\n\t/**\n\t * Helper to show a dropdown message (error, loading, noResults)\n\t */\n\tprivate _showDropdownMessage(\n\t\ttype: 'error' | 'loading' | 'empty',\n\t\tmessage?: string,\n\t) {\n\t\tif (!this._dropdownContentElement) return;\n\t\tconst optionsContainer = this._dropdownContentElement.querySelector(\n\t\t\t'[data-kt-select-options]',\n\t\t);\n\t\tif (!optionsContainer) return;\n\n\t\t// Clear previous messages\n\t\toptionsContainer.innerHTML = '';\n\n\t\tswitch (type) {\n\t\t\tcase 'error':\n\t\t\t\toptionsContainer.appendChild(defaultTemplates.error({\n\t\t\t\t\t...this._config,\n\t\t\t\t\terrorMessage: message,\n\t\t\t\t}));\n\t\t\t\tbreak;\n\t\t\tcase 'loading':\n\t\t\t\toptionsContainer.appendChild(defaultTemplates.loading(\n\t\t\t\t\tthis._config,\n\t\t\t\t\tmessage || 'Loading...',\n\t\t\t\t));\n\t\t\t\tbreak;\n\t\t\tcase 'empty':\n\t\t\t\toptionsContainer.appendChild(defaultTemplates.noresults(this._config));\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Render loading state in dropdown\n\t */\n\tprivate _renderLoadingState() {\n\t\tif (this._element.querySelectorAll('option').length <= 1) {\n\t\t\tconst existingLoadingOptions = this._element.querySelectorAll(\n\t\t\t\t'option[disabled][selected][value=\"\"]',\n\t\t\t);\n\t\t\texistingLoadingOptions.forEach((option) => option.remove());\n\t\t\tthis._showDropdownMessage('loading', 'Loading options...');\n\t\t}\n\t}\n\n\t/**\n\t * Render error state\n\t * @param message Error message\n\t */\n\tprivate _renderErrorState(message: string) {\n\t\t// If dropdown is already created, show error message there\n\t\tthis._showDropdownMessage('error', message);\n\n\t\tif (!this._wrapperElement) {\n\t\t\tif (this._config.debug) console.log('Setting up component after error');\n\t\t\tthis._setupComponent();\n\t\t}\n\t}\n\n\t/**\n\t * Add \"Load More\" button for pagination\n\t */\n\tprivate _addLoadMoreButton() {\n\t\tif (!this._dropdownContentElement || !this._config.pagination) return;\n\n\t\t// Remove existing button if any\n\t\tif (this._loadMoreIndicator) {\n\t\t\tthis._loadMoreIndicator.remove();\n\t\t\tthis._loadMoreIndicator = null;\n\t\t}\n\n\t\t// Create load more button using template\n\t\tthis._loadMoreIndicator = defaultTemplates.loadMore(this._config);\n\n\t\t// Add to dropdown\n\t\tconst optionsContainer = this._dropdownContentElement.querySelector(\n\t\t\t'[data-kt-select-options]',\n\t\t);\n\t\tif (optionsContainer) {\n\t\t\toptionsContainer.appendChild(this._loadMoreIndicator);\n\t\t} else {\n\t\t\tthis._dropdownContentElement.appendChild(this._loadMoreIndicator);\n\t\t}\n\n\t\t// Add event listener\n\t\tthis._loadMoreIndicator.addEventListener(\n\t\t\t'click',\n\t\t\tthis._handleLoadMore.bind(this),\n\t\t);\n\t}\n\n\t/**\n\t * Handle load more button click\n\t */\n\tprivate _handleLoadMore() {\n\t\tif (!this._remoteModule || !this._config.pagination) return;\n\n\t\t// Show loading state\n\t\tif (this._loadMoreIndicator) {\n\t\t\tthis._loadMoreIndicator.textContent = 'Loading...';\n\t\t}\n\n\t\t// Fetch next page\n\t\tthis._remoteModule\n\t\t\t.loadNextPage()\n\t\t\t.then((newItems) => {\n\t\t\t\t// Get existing items\n\t\t\t\tconst existingItems = this._state.getItems();\n\n\t\t\t\t// Combine new items with existing items\n\t\t\t\tthis._state\n\t\t\t\t\t.setItems([...existingItems, ...newItems])\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t// Update options in the dropdown\n\t\t\t\t\t\tthis._updateOptionsInDropdown(newItems);\n\n\t\t\t\t\t\t// Check if there are more pages\n\t\t\t\t\t\tif (this._remoteModule.hasMorePages()) {\n\t\t\t\t\t\t\t// Reset load more button\n\t\t\t\t\t\t\tif (this._loadMoreIndicator) {\n\t\t\t\t\t\t\t\tthis._loadMoreIndicator.textContent =\n\t\t\t\t\t\t\t\t\tthis._config.loadMoreText || 'Load more...';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Remove load more button if no more pages\n\t\t\t\t\t\t\tif (this._loadMoreIndicator) {\n\t\t\t\t\t\t\t\tthis._loadMoreIndicator.remove();\n\t\t\t\t\t\t\t\tthis._loadMoreIndicator = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tconsole.error('Error updating items:', error);\n\n\t\t\t\t\t\t// Reset load more button\n\t\t\t\t\t\tif (this._loadMoreIndicator) {\n\t\t\t\t\t\t\tthis._loadMoreIndicator.textContent = 'Error loading more items';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('Error loading more items:', error);\n\n\t\t\t\t// Reset load more button\n\t\t\t\tif (this._loadMoreIndicator) {\n\t\t\t\t\tthis._loadMoreIndicator.textContent = 'Error loading more items';\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Update options in the dropdown\n\t * @param newItems New items to add to the dropdown\n\t */\n\tprivate _updateOptionsInDropdown(newItems: KTSelectOptionData[]) {\n\t\tif (!this._dropdownContentElement || !newItems.length) return;\n\n\t\tconst optionsContainer = this._dropdownContentElement.querySelector(\n\t\t\t`[data-kt-select-options]`,\n\t\t);\n\t\tif (!optionsContainer) return;\n\n\t\t// Get the load more button\n\t\tconst loadMoreButton = optionsContainer.querySelector(\n\t\t\t`[data-kt-select-load-more]`,\n\t\t);\n\n\t\t// Process each new item\n\t\tnewItems.forEach((item) => {\n\t\t\t// Create option for the original select\n\t\t\tconst selectOption = document.createElement('option');\n\t\t\tselectOption.value = item.id || '';\n\n\t\t\t// Add to dropdown container\n\t\t\tif (loadMoreButton) {\n\t\t\t\t// Insert before the load more button\n\t\t\t\toptionsContainer.insertBefore(selectOption, loadMoreButton);\n\t\t\t} else {\n\t\t\t\t// Append to the end\n\t\t\t\toptionsContainer.appendChild(selectOption);\n\t\t\t}\n\t\t});\n\n\t\t// Update options NodeList to include the new options\n\t\tthis._options = this._wrapperElement.querySelectorAll(\n\t\t\t`[data-kt-select-option]`,\n\t\t) as NodeListOf<HTMLElement>;\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log(`Added ${newItems.length} more options to dropdown`);\n\t}\n\n\t/**\n\t * ========================================================================\n\t * INITIALIZATION METHODS\n\t * ========================================================================\n\t */\n\n\t/**\n\t * Set up the component after everything is initialized\n\t */\n\tprivate _setupComponent() {\n\t\t// Setup HTML structure\n\t\tthis._createHtmlStructure();\n\t\tthis._setupElementReferences();\n\n\t\t// Initialize options\n\t\tthis._preSelectOptions(this._element);\n\n\t\t// Apply disabled state if needed\n\t\tthis._applyInitialDisabledState();\n\n\t\t// Initialize search if enabled\n\t\tif (this._config.enableSearch) {\n\t\t\tthis._initializeSearchModule();\n\t\t}\n\n\t\t// Initialize combobox if enabled\n\t\tif (this._config.combobox) {\n\t\t\tthis._comboboxModule = new KTSelectCombobox(this);\n\t\t}\n\n\t\t// Initialize tags if enabled\n\t\tif (this._config.tags) {\n\t\t\tthis._tagsModule = new KTSelectTags(this);\n\t\t}\n\n\t\t// Initialize focus manager after dropdown element is created\n\t\tthis._focusManager = new FocusManager(\n\t\t\tthis._dropdownContentElement,\n\t\t\t'[data-kt-select-option]',\n\t\t\tthis._config,\n\t\t);\n\n\t\t// Initialize dropdown module after all elements are created\n\t\tthis._dropdownModule = new KTSelectDropdown(\n\t\t\tthis._wrapperElement,\n\t\t\tthis._displayElement,\n\t\t\tthis._dropdownContentElement,\n\t\t\tthis._config,\n\t\t\tthis, // Pass the KTSelect instance to KTSelectDropdown\n\t\t);\n\n\t\t// Update display and set ARIA attributes\n\t\tthis._updateDisplayAndAriaAttributes();\n\t\tthis.updateSelectedOptionDisplay();\n\t\tthis._setAriaAttributes();\n\n\t\t// Attach event listeners after all modules are initialized\n\t\tthis._attachEventListeners();\n\n\t\tthis._observeNativeSelect();\n\t}\n\n\t/**\n\t * Creates the HTML structure for the select component\n\t */\n\tprivate _createHtmlStructure() {\n\t\tconst options = Array.from(this._element.querySelectorAll('option'));\n\n\t\t// Create wrapper and display elements\n\t\tconst wrapperElement = defaultTemplates.wrapper(this._config);\n\n\t\tconst displayElement = defaultTemplates.display(this._config);\n\n\t\t// Add the display element to the wrapper\n\t\twrapperElement.appendChild(displayElement);\n\n\t\t// Move classes from original select to wrapper and display elements\n\t\tif (this._element.classList.length > 0) {\n\t\t\tconst originalClasses = Array.from(this._element.classList);\n\t\t\tconst displaySpecificClasses = ['kt-select', 'kt-select-sm', 'kt-select-lg'];\n\n\t\t\tconst classesForWrapper = originalClasses.filter(\n\t\t\t\t(className) => !displaySpecificClasses.includes(className)\n\t\t\t);\n\t\t\tif (classesForWrapper.length > 0) {\n\t\t\t\twrapperElement.classList.add(...classesForWrapper);\n\t\t\t}\n\n\t\t\t// Move display-specific classes to display element\n\t\t\tconst classesForDisplay = originalClasses.filter(\n\t\t\t\t(className) => displaySpecificClasses.includes(className)\n\t\t\t);\n\t\t\tif (classesForDisplay.length > 0) {\n\t\t\t\tdisplayElement.classList.add(...classesForDisplay);\n\t\t\t}\n\n\t\t\tthis._element.className = ''; // Clear classes from original select element\n\t\t}\n\n\t\t// Create an empty dropdown first (without options) using template\n\t\tconst dropdownElement = defaultTemplates.dropdown({\n\t\t\t...this._config,\n\t\t\tzindex: this._config.dropdownZindex,\n\t\t});\n\n\t\t// Add search input if needed\n\t\tif (this._config.enableSearch) {\n\t\t\tconst searchElement = defaultTemplates.search(this._config);\n\t\t\tdropdownElement.appendChild(searchElement);\n\t\t}\n\n\t\t// Create options container using template\n\t\tconst optionsContainer = defaultTemplates.options(this._config);\n\n\t\t// Add each option directly to the container\n\t\toptions.forEach((optionElement) => {\n\t\t\t// Skip empty placeholder options (only if BOTH value AND text are empty)\n\t\t\t// This allows options with empty value but visible text to display in dropdown\n\t\t\tif (\n\t\t\t\toptionElement.value === '' &&\n\t\t\t\toptionElement.textContent.trim() === ''\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Create new KTSelectOption instance for each option\n\t\t\tconst selectOption = new KTSelectOption(optionElement, this._config);\n\t\t\tconst renderedOption = selectOption.render();\n\n\t\t\t// Append directly to options container\n\t\t\toptionsContainer.appendChild(renderedOption);\n\t\t});\n\n\t\t// Add options container to dropdown\n\t\tdropdownElement.appendChild(optionsContainer);\n\n\t\t// Add dropdown to wrapper\n\t\twrapperElement.appendChild(dropdownElement);\n\n\t\t// Insert after the original element\n\t\tthis._element.after(wrapperElement);\n\t\tthis._element.classList.add('hidden');\n\t}\n\n\t/**\n\t * Setup all element references after DOM is created\n\t */\n\tprivate _setupElementReferences() {\n\t\tthis._wrapperElement = this._element.nextElementSibling as HTMLElement;\n\n\t\t// Get display element\n\t\tthis._displayElement = this._wrapperElement.querySelector(\n\t\t\t`[data-kt-select-display]`,\n\t\t) as HTMLElement;\n\n\t\t// Get dropdown content element - this is critical for dropdown functionality\n\t\tthis._dropdownContentElement = this._wrapperElement.querySelector(\n\t\t\t`[data-kt-select-dropdown]`,\n\t\t) as HTMLElement;\n\n\t\tif (!this._dropdownContentElement) {\n\t\t\tconsole.log(this._element)\n\t\t\tconsole.error('Dropdown content element not found', this._wrapperElement);\n\t\t}\n\n\t\t// Get search input element - this is used for the search functionality\n\t\tthis._searchInputElement = this._dropdownContentElement.querySelector(\n\t\t\t`[data-kt-select-search]`,\n\t\t) as HTMLInputElement;\n\n\t\t// If not found in dropdown, check if it's the display element itself\n\t\tif (!this._searchInputElement) {\n\t\t\tthis._searchInputElement = this._displayElement as HTMLInputElement;\n\t\t}\n\n\t\tthis._options = this._wrapperElement.querySelectorAll(\n\t\t\t`[data-kt-select-option]`,\n\t\t) as NodeListOf<HTMLElement>;\n\t}\n\n\t/**\n\t * Attach all event listeners to elements\n\t */\n\tprivate _attachEventListeners() {\n\t\t// Document level event listeners\n\t\tdocument.addEventListener('click', this._handleDocumentClick.bind(this));\n\n\t\t// Dropdown option click events\n\t\tthis._eventManager.addListener(\n\t\t\tthis._dropdownContentElement,\n\t\t\t'click',\n\t\t\tthis._handleDropdownOptionClick.bind(this),\n\t\t);\n\n\t\t// Attach centralized keyboard handler to the wrapper element.\n\t\t// Events from focusable children like _displayElement or _searchInputElement (if present) will bubble up.\n\t\tif (this._wrapperElement) {\n\t\t\tthis._wrapperElement.addEventListener('keydown', this._handleKeyboardEvent.bind(this));\n\t\t}\n\t}\n\n\t/**\n\t * Initialize search module if search is enabled\n\t */\n\tprivate _initializeSearchModule() {\n\t\tif (this._config.enableSearch) {\n\t\t\tthis._searchModule = new KTSelectSearch(this);\n\t\t\tthis._searchModule.init();\n\n\t\t\t// If remote search is enabled, add event listener for search input\n\t\t\tif (\n\t\t\t\tthis._config.remote &&\n\t\t\t\tthis._config.searchParam &&\n\t\t\t\tthis._searchInputElement\n\t\t\t) {\n\t\t\t\tthis._searchInputElement.addEventListener(\n\t\t\t\t\t'input',\n\t\t\t\t\tthis._handleRemoteSearch.bind(this),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Apply ARIA attributes and update display\n\t */\n\tprivate _updateDisplayAndAriaAttributes() {\n\t\tthis.updateSelectedOptionDisplay();\n\t\tthis._setAriaAttributes();\n\t}\n\n\t/**\n\t * Apply initial disabled state if configured\n\t */\n\tprivate _applyInitialDisabledState() {\n\t\tif (this._config.disabled) {\n\t\t\tthis.getElement().classList.add('disabled');\n\t\t\tthis.getElement().setAttribute('disabled', 'disabled');\n\t\t\tthis._wrapperElement.classList.add('disabled');\n\t\t}\n\t}\n\n\t/**\n\t * Generate options HTML from data items\n\t */\n\tprivate _generateOptionsHtml(element: HTMLElement) {\n\t\tconst items = this._state.getItems() || [];\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log(`Generating options HTML from ${items.length} items`);\n\n\t\t// Only modify options if we have items to replace them with\n\t\tif (items && items.length > 0) {\n\t\t\t// Clear existing options except the first empty one\n\t\t\tconst options = element.querySelectorAll('option:not(:first-child)');\n\t\t\toptions.forEach((option) => option.remove());\n\n\t\t\t// Generate options from data\n\t\t\titems.forEach((item) => {\n\t\t\t\tconst optionElement = document.createElement('option');\n\n\t\t\t\t// Get value - use item.id directly if available, otherwise try dataValueField\n\t\t\t\tlet value = '';\n\t\t\t\tif (item.id !== undefined) {\n\t\t\t\t\tvalue = String(item.id);\n\t\t\t\t} else if (this._config.dataValueField) {\n\t\t\t\t\tconst extractedValue = this._getValueByKey(\n\t\t\t\t\t\titem,\n\t\t\t\t\t\tthis._config.dataValueField,\n\t\t\t\t\t);\n\t\t\t\t\tvalue = extractedValue !== null ? String(extractedValue) : '';\n\t\t\t\t}\n\n\t\t\t\t// Get label - use item.title directly if available, otherwise try dataFieldText\n\t\t\t\tlet label = '';\n\t\t\t\tif (item.title !== undefined) {\n\t\t\t\t\tlabel = String(item.title);\n\t\t\t\t} else if (this._config.dataFieldText) {\n\t\t\t\t\tconst extractedLabel = this._getValueByKey(\n\t\t\t\t\t\titem,\n\t\t\t\t\t\tthis._config.dataFieldText,\n\t\t\t\t\t);\n\t\t\t\t\tlabel =\n\t\t\t\t\t\textractedLabel !== null ? String(extractedLabel) : 'Unnamed option';\n\t\t\t\t}\n\n\t\t\t\t// Log the extracted values for debugging\n\t\t\t\tif (this._config.debug)\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t`Option: value=${value}, label=${label}`,\n\t\t\t\t\t);\n\n\t\t\t\t// Set option attributes\n\t\t\t\toptionElement.value = value;\n\t\t\t\toptionElement.textContent = label || 'Unnamed option';\n\n\t\t\t\tif (item.selected) {\n\t\t\t\t\toptionElement.setAttribute('selected', 'selected');\n\t\t\t\t}\n\n\t\t\t\telement.appendChild(optionElement);\n\t\t\t});\n\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log(`Added ${items.length} options to select element`);\n\t\t} else {\n\t\t\tif (this._config.debug) console.log('No items to generate options from');\n\t\t}\n\t}\n\n\t/**\n\t * Extract nested property value from object using dot notation\n\t */\n\tprivate _getValueByKey(obj: any, key: string): any {\n\t\tif (!key || !obj) return null;\n\n\t\t// Use reduce to walk through the object by splitting the key on dots\n\t\tconst result = key\n\t\t\t.split('.')\n\t\t\t.reduce((o, k) => (o && o[k] !== undefined ? o[k] : null), obj);\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log(\n\t\t\t\t`Extracting [${key}] from object => ${result !== null ? JSON.stringify(result) : 'null'}`,\n\t\t\t);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Pre-select options that have the selected attribute\n\t */\n\tprivate _preSelectOptions(element: HTMLElement) {\n\t\t// Handle options with selected attribute\n\t\tArray.from(element.querySelectorAll('option[selected]')).forEach(\n\t\t\t(option) => {\n\t\t\t\tconst value = (option as HTMLOptionElement).value;\n\t\t\t\tthis._selectOption(value);\n\t\t\t},\n\t\t);\n\n\t\t// Handle data-kt-select-pre-selected attribute for React compatibility\n\t\tconst preSelectedValues = element.getAttribute(\n\t\t\t'data-kt-select-pre-selected',\n\t\t);\n\t\tif (preSelectedValues) {\n\t\t\tconst values = preSelectedValues.split(',').map((v) => v.trim());\n\t\t\tvalues.forEach((value) => {\n\t\t\t\tif (value) {\n\t\t\t\t\tthis._selectOption(value);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * ========================================================================\n\t * DROPDOWN MANAGEMENT\n\t * ========================================================================\n\t */\n\n\t/**\n\t * Open the dropdown\n\t */\n\tpublic openDropdown() {\n\t\tif (this._config.disabled) {\n\t\t\tif (this._config.debug) console.log('openDropdown: select is disabled, not opening');\n\t\t\treturn;\n\t\t}\n\t\tif (this._config.debug)\n\t\t\tconsole.log(\n\t\t\t\t'openDropdown called, dropdownModule exists:',\n\t\t\t\t!!this._dropdownModule,\n\t\t\t);\n\n\t\tif (!this._dropdownModule) {\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log('Early return from openDropdown - module missing');\n\t\t\treturn;\n\t\t}\n\n\t\t// Don't open dropdown if the select is disabled\n\t\tif (this._config.disabled) {\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log('Early return from openDropdown - select is disabled');\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log('Opening dropdown via dropdownModule...');\n\n\t\t// Set our internal flag to match what we're doing\n\t\tthis._dropdownIsOpen = true;\n\n\t\t// Open the dropdown via the module\n\t\tthis._dropdownModule.open();\n\n\t\t// Dispatch custom event\n\t\tthis._dispatchEvent('show');\n\t\tthis._fireEvent('show');\n\n\t\t// Update ARIA states\n\t\tthis._setAriaAttributes();\n\n\t\t// Focus the first selected option or first option if nothing selected\n\t\tthis._focusSelectedOption();\n\t}\n\n\t/**\n\t * Close the dropdown\n\t */\n\tpublic closeDropdown() {\n\t\tif (this._config.debug)\n\t\t\tconsole.log(\n\t\t\t\t'closeDropdown called, dropdownModule exists:',\n\t\t\t\t!!this._dropdownModule,\n\t\t\t);\n\n\t\t// Only check if dropdown module exists, not dropdownIsOpen flag\n\t\tif (!this._dropdownModule) {\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log('Early return from closeDropdown - module missing');\n\t\t\treturn;\n\t\t}\n\n\t\t// Always close by delegating to the dropdown module, which is the source of truth\n\t\tif (this._config.debug)\n\t\t\tconsole.log('Closing dropdown via dropdownModule...');\n\n\t\t// Clear search input if the dropdown is closing\n\t\tif (this._searchModule && this._searchInputElement) {\n\t\t\t// Clear search input if configured to do so\n\t\t\tif (this._config.clearSearchOnClose) {\n\t\t\t\tthis._searchInputElement.value = '';\n\t\t\t}\n\n\t\t\t// Clear search input when dropdown closes\n\t\t\tthis._searchModule.clearSearch();\n\t\t}\n\n\t\t// Set our internal flag to match what we're doing\n\t\tthis._dropdownIsOpen = false;\n\n\t\t// Call the dropdown module's close method\n\t\tthis._dropdownModule.close();\n\n\t\t// Reset all focus states\n\t\tif (this._focusManager) {\n\t\t\tthis._focusManager.resetFocus();\n\t\t}\n\n\t\t// Dispatch custom events\n\t\tthis._dispatchEvent('close');\n\t\tthis._fireEvent('close');\n\n\t\t// Update ARIA states\n\t\tthis._setAriaAttributes();\n\t\tif (this._config.debug) console.log('closeDropdown complete');\n\t}\n\n\t/**\n\t * Update dropdown position\n\t */\n\tpublic updateDropdownPosition() {\n\t\tif (this._dropdownModule) {\n\t\t\tthis._dropdownModule.updatePosition();\n\t\t}\n\t}\n\n\t/**\n\t * Focus on the first selected option if any exists in the dropdown\n\t */\n\tprivate _focusSelectedOption() {\n\t\t// Get selected options\n\t\tconst selectedOptions = this.getSelectedOptions();\n\t\tif (selectedOptions.length === 0) return;\n\n\t\t// Iterate through selected options and focus the first one that is visible\n\t\tfor (const value of selectedOptions) {\n\t\t\tif (this._focusManager && this._focusManager.focusOptionByValue(value)) {\n\t\t\t\tbreak; // Stop after focusing the first found selected and visible option\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * ========================================================================\n\t * SELECTION MANAGEMENT\n\t * ========================================================================\n\t */\n\n\t/**\n\t * Select an option by value\n\t */\n\tprivate _selectOption(value: string) {\n\t\t// Prevent selection if the option is disabled (in dropdown or original select)\n\t\tif (this._isOptionDisabled(value)) {\n\t\t\tif (this._config.debug) console.log('_selectOption: Option is disabled, ignoring selection');\n\t\t\treturn;\n\t\t}\n\n\t\t// Get current selection state\n\t\tconst isSelected = this._state.isSelected(value);\n\n\t\t// Toggle selection in state\n\t\tif (this._config.multiple) {\n\t\t\t// Toggle in multiple mode\n\t\t\tthis._state.toggleSelectedOptions(value);\n\t\t} else {\n\t\t\t// Set as only selection in single mode\n\t\t\tthis._state.setSelectedOptions(value);\n\t\t}\n\n\t\t// Update the original select element's option selected state\n\t\tconst optionEl = Array.from(this._element.querySelectorAll('option')).find(\n\t\t\t(opt) => opt.value === value,\n\t\t) as HTMLOptionElement;\n\n\t\tif (optionEl) {\n\t\t\tif (this._config.multiple) {\n\t\t\t\t// Toggle the selection for multiple select\n\t\t\t\toptionEl.selected = !isSelected;\n\t\t\t} else {\n\t\t\t\t// Set as only selection for single select\n\t\t\t\tArray.from(this._element.querySelectorAll('option')).forEach((opt) => {\n\t\t\t\t\t(opt as HTMLOptionElement).selected = opt.value === value;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Update the visual display of selected options\n\t\tthis.updateSelectedOptionDisplay();\n\n\t\t// Update option classes without re-rendering the dropdown content\n\t\tthis._updateSelectedOptionClass();\n\n\t\t// Dispatch standard and custom change events\n\t\tthis._dispatchEvent('change', {\n\t\t\tvalue: value,\n\t\t\tselected: !isSelected,\n\t\t\tselectedOptions: this.getSelectedOptions(),\n\t\t});\n\t\tthis._fireEvent('change', {\n\t\t\tvalue: value,\n\t\t\tselected: !isSelected,\n\t\t\tselectedOptions: this.getSelectedOptions(),\n\t\t});\n\t}\n\n\t/**\n\t * Update selected option display value\n\t */\n\tpublic updateSelectedOptionDisplay() {\n\t\tconst selectedOptions = this.getSelectedOptions();\n\t\tconst tagsEnabled = this._config.tags && this._tagsModule;\n\t\tconst valueDisplayEl = this.getValueDisplayElement();\n\n\t\tif (tagsEnabled) {\n\t\t\t// Tags module will render tags if selectedOptions > 0, or clear them if selectedOptions === 0.\n\t\t\tthis._tagsModule.updateTagsDisplay(selectedOptions);\n\t\t}\n\n\t\t// Guard against valueDisplayEl being null due to template modifications\n\t\tif (!valueDisplayEl) {\n\t\t\tif (this._config.debug) {\n\t\t\t\tconsole.warn('KTSelect: Value display element is null. Cannot update display or placeholder. Check template for [data-kt-select-value].');\n\t\t\t}\n\t\t\treturn; // Nothing to display on if the element is missing\n\t\t}\n\n\t\tif (typeof this._config.renderSelected === 'function') {\n\t\t\tvalueDisplayEl.innerHTML = this._config.renderSelected(selectedOptions);\n\t\t} else {\n\t\t\tif (selectedOptions.length === 0) {\n\t\t\t\t// No options selected: display placeholder.\n\t\t\t\t// This runs if tags are off, OR if tags are on but no items are selected (tags module would have cleared tags).\n\t\t\t\tconst placeholderEl = defaultTemplates.placeholder(this._config);\n\t\t\t\tvalueDisplayEl.replaceChildren(placeholderEl);\n\t\t\t} else {\n\t\t\t\t// Options are selected.\n\t\t\t\tif (tagsEnabled) {\n\t\t\t\t\t// Tags are enabled AND options are selected: tags module has rendered them.\n\t\t\t\t\t// Clear valueDisplayEl as tags are the primary display.\n\t\t\t\t\tvalueDisplayEl.innerHTML = '';\n\t\t\t\t} else {\n\t\t\t\t\t// Tags are not enabled AND options are selected: render normal text display.\n\t\t\t\t\tlet content = '';\n\t\t\t\t\tif (this._config.displayTemplate) {\n\t\t\t\t\t\tcontent = this.renderDisplayTemplateForSelected(this.getSelectedOptions());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontent = this.getSelectedOptionsText();\n\t\t\t\t\t}\n\t\t\t\t\tvalueDisplayEl.innerHTML = content;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Check if an option was originally disabled in the HTML\n\t */\n\tprivate _isOptionOriginallyDisabled(value: string): boolean {\n\t\tconst originalOption = Array.from(this._element.querySelectorAll('option')).find(\n\t\t\t(opt) => opt.value === value\n\t\t) as HTMLOptionElement;\n\t\treturn originalOption ? originalOption.disabled : false;\n\t}\n\n\t/**\n\t * Update CSS classes for selected options\n\t */\n\tprivate _updateSelectedOptionClass(): void {\n\t\tconst allOptions = this._wrapperElement.querySelectorAll(\n\t\t\t`[data-kt-select-option]`,\n\t\t);\n\t\tconst selectedValues = this._state.getSelectedOptions();\n\t\tconst maxReached =\n\t\t\ttypeof this._config.maxSelections === 'number' &&\n\t\t\tselectedValues.length >= this._config.maxSelections;\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log(\n\t\t\t\t'Updating selected classes for options, selected values:',\n\t\t\t\tselectedValues,\n\t\t\t);\n\n\t\tallOptions.forEach((option) => {\n\t\t\tconst optionValue = option.getAttribute('data-value');\n\t\t\tif (!optionValue) return;\n\n\t\t\tconst isSelected = selectedValues.includes(optionValue);\n\t\t\tconst isOriginallyDisabled = this._isOptionOriginallyDisabled(optionValue);\n\n\t\t\tif (isSelected) {\n\t\t\t\toption.classList.add('selected');\n\t\t\t\toption.setAttribute('aria-selected', 'true');\n\t\t\t\t// Selected options should not be visually hidden or disabled by maxSelections logic\n\t\t\t\toption.classList.remove('hidden');\n\t\t\t\toption.classList.remove('disabled');\n\t\t\t\toption.removeAttribute('aria-disabled');\n\t\t\t} else {\n\t\t\t\toption.classList.remove('selected');\n\t\t\t\toption.setAttribute('aria-selected', 'false');\n\n\t\t\t\t// An option should be disabled if it was originally disabled OR if maxSelections is reached\n\t\t\t\tif (isOriginallyDisabled || maxReached) {\n\t\t\t\t\toption.classList.add('disabled');\n\t\t\t\t\toption.setAttribute('aria-disabled', 'true');\n\t\t\t\t} else {\n\t\t\t\t\toption.classList.remove('disabled');\n\t\t\t\t\toption.removeAttribute('aria-disabled');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Clear all selected options\n\t */\n\tpublic clearSelection() {\n\t\t// Clear the current selection\n\t\tthis._state.setSelectedOptions([]);\n\t\tthis.updateSelectedOptionDisplay();\n\t\tthis._updateSelectedOptionClass();\n\n\t\t// Dispatch change event\n\t\tthis._dispatchEvent('change');\n\t\tthis._fireEvent('change');\n\t}\n\n\t/**\n\t * Set selected options programmatically\n\t */\n\tpublic setSelectedOptions(options: HTMLOptionElement[]) {\n\t\tconst values = Array.from(options).map((option) => option.value);\n\t\tthis._state.setSelectedOptions(values);\n\t}\n\n\t/**\n\t * Select the currently focused option\n\t */\n\tpublic selectFocusedOption() {\n\t\tconst focusedOption = this._focusManager.getFocusedOption();\n\n\t\tif (focusedOption) {\n\t\t\tconst selectedValue = focusedOption.dataset.value;\n\n\t\t\t// Extract just the title text, not including description\n\t\t\tlet selectedText = '';\n\t\t\tconst titleElement = focusedOption.querySelector(\n\t\t\t\t'[data-kt-option-title]',\n\t\t\t);\n\t\t\tif (titleElement) {\n\t\t\t\t// If it has a structured content with title element\n\t\t\t\tselectedText = titleElement.textContent?.trim() || '';\n\t\t\t} else {\n\t\t\t\t// Fallback to the whole text content\n\t\t\t\tselectedText = focusedOption.textContent?.trim() || '';\n\t\t\t}\n\n\t\t\t// First trigger the selection to ensure state is updated properly\n\t\t\tif (selectedValue) {\n\t\t\t\tthis._selectOption(selectedValue);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * ========================================================================\n\t * EVENT HANDLERS\n\t * ========================================================================\n\t */\n\n\t/**\n\t * Handle click within the dropdown\n\t */\n\tprivate _handleDropdownOptionClick(event: Event) {\n\t\tconst optionElement = (event.target as HTMLElement).closest(\n\t\t\t`[data-kt-select-option]`,\n\t\t);\n\n\t\t// If an option is clicked, handle the option click\n\t\tif (optionElement) {\n\t\t\tthis._handleOptionClick(event);\n\t\t}\n\t}\n\n\t/**\n\t * Handle clicking on an option in the dropdown\n\t */\n\tprivate _handleOptionClick(event: Event) {\n\t\tif (this._config.debug)\n\t\t\tconsole.log('_handleOptionClick called', event.target);\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t// Find the clicked option element\n\t\tconst clickedOption = (event.target as HTMLElement).closest(\n\t\t\t`[data-kt-select-option]`,\n\t\t) as HTMLElement;\n\n\t\tif (!clickedOption) {\n\t\t\tif (this._config.debug) console.log('No clicked option found');\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if the option is disabled\n\t\tif (clickedOption.getAttribute('aria-disabled') === 'true') {\n\t\t\tif (this._config.debug) console.log('Option is disabled, ignoring click');\n\t\t\treturn;\n\t\t}\n\n\t\t// Use dataset.value to get the option value\n\t\tconst optionValue = clickedOption.dataset.value;\n\t\tif (optionValue === undefined) {\n\t\t\tif (this._config.debug) console.log('Option value is undefined');\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._config.debug) console.log('Option clicked:', optionValue);\n\n\t\t// If in single-select mode and the clicked option is already selected, just close the dropdown.\n\t\tif (!this._config.multiple && this._state.isSelected(optionValue)) {\n\t\t\tif (this._config.debug) console.log('Single select mode: clicked already selected option. Closing dropdown.');\n\t\t\tthis.closeDropdown();\n\t\t\treturn;\n\t\t}\n\n\t\t// Use toggleSelection instead of _selectOption to prevent re-rendering\n\t\tthis.toggleSelection(optionValue);\n\t}\n\n\t/**\n\t * Handle document click for closing dropdown\n\t */\n\tprivate _handleDocumentClick(event: MouseEvent) {\n\t\tconst targetElement = event.target as HTMLElement;\n\t\t// Check if the click is outside the dropdown and the display element\n\t\tif (!this._wrapperElement.contains(targetElement)) {\n\t\t\tthis.closeDropdown();\n\t\t}\n\t}\n\n\t/**\n\t * ========================================================================\n\t * ACCESSIBILITY METHODS\n\t * ========================================================================\n\t */\n\n\t/**\n\t * Set ARIA attributes for accessibility\n\t */\n\tprivate _setAriaAttributes() {\n\t\tthis._displayElement.setAttribute(\n\t\t\t'aria-expanded',\n\t\t\tthis._dropdownIsOpen.toString(),\n\t\t);\n\t}\n\n\t/**\n\t * ========================================================================\n\t * PUBLIC API\n\t * ========================================================================\n\t */\n\n\t/**\n\t * Get the search input element\n\t */\n\tpublic getSearchInput(): HTMLInputElement {\n\t\treturn this._searchInputElement;\n\t}\n\n\t/**\n\t * Get selected options\n\t */\n\tpublic getSelectedOptions() {\n\t\treturn this._state.getSelectedOptions();\n\t}\n\n\t/**\n\t * Get configuration\n\t */\n\tpublic getConfig(): KTSelectConfigInterface {\n\t\treturn this._config;\n\t}\n\n\t/**\n\t * Get option elements\n\t */\n\tpublic getOptionsElement(): NodeListOf<HTMLElement> {\n\t\treturn this._options;\n\t}\n\n\t/**\n\t * Get dropdown element\n\t */\n\tpublic getDropdownElement() {\n\t\treturn this._dropdownContentElement;\n\t}\n\n\t/**\n\t * Get value display element\n\t */\n\tpublic getValueDisplayElement() {\n\t\treturn this._displayElement;\n\t}\n\n\t/**\n\t * Get wrapper element\n\t */\n\tpublic getWrapperElement(): HTMLElement {\n\t\treturn this._wrapperElement;\n\t}\n\n\t/**\n\t * Show all options in the dropdown\n\t */\n\tpublic showAllOptions() {\n\t\t// Get all options in the dropdown\n\t\tconst options = Array.from(\n\t\t\tthis._wrapperElement.querySelectorAll(`[data-kt-select-option]`),\n\t\t);\n\n\t\t// Show all options by removing the hidden class and any inline styles\n\t\toptions.forEach((option) => {\n\t\t\t// Remove hidden class\n\t\t\toption.classList.remove('hidden');\n\n\t\t\t// Clean up any existing inline styles for backward compatibility\n\t\t\tif (option.hasAttribute('style')) {\n\t\t\t\tconst styleAttr = option.getAttribute('style');\n\n\t\t\t\tif (styleAttr.includes('display:')) {\n\t\t\t\t\t// If style only contains display property, remove the entire attribute\n\t\t\t\t\tif (\n\t\t\t\t\t\tstyleAttr.trim() === 'display: none;' ||\n\t\t\t\t\t\tstyleAttr.trim() === 'display: block;'\n\t\t\t\t\t) {\n\t\t\t\t\t\toption.removeAttribute('style');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Otherwise, remove just the display property\n\t\t\t\t\t\toption.setAttribute(\n\t\t\t\t\t\t\t'style',\n\t\t\t\t\t\t\tstyleAttr?.replace(/display:\\s*[^;]+;?/gi, '')?.trim(),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// If search input exists, clear it\n\t\tif (this._searchInputElement) {\n\t\t\tthis._searchInputElement.value = '';\n\t\t\t// If we have a search module, clear any search filtering\n\t\t\tif (this._searchModule) {\n\t\t\t\tthis._searchModule.clearSearch();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Toggle multi-select functionality\n\t */\n\tpublic enableMultiSelect() {\n\t\tthis._state.modifyConfig({ multiple: true });\n\t}\n\n\t/**\n\t * Disable multi-select functionality\n\t */\n\tpublic disableMultiSelect() {\n\t\tthis._state.modifyConfig({ multiple: false });\n\t}\n\n\t/**\n\t * Toggle the selection of an option\n\t */\n\tpublic toggleSelection(value: string): void {\n\t\t// Prevent selection if the option is disabled (in dropdown or original select)\n\t\tif (this._isOptionDisabled(value)) {\n\t\t\tif (this._config.debug) console.log('toggleSelection: Option is disabled, ignoring selection');\n\t\t\treturn;\n\t\t}\n\n\t\t// Get current selection state\n\t\tconst isSelected = this._state.isSelected(value);\n\t\tif (this._config.debug)\n\t\t\tconsole.log(`toggleSelection called for value: ${value}, isSelected: ${isSelected}, multiple: ${this._config.multiple}`);\n\n\t\t// If already selected in single select mode, do nothing (can't deselect in single select)\n\t\tif (isSelected && !this._config.multiple) {\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log('Early return from toggleSelection - already selected in single select mode');\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._config.debug)\n\t\t\tconsole.log(`Toggling selection for option: ${value}, currently selected: ${isSelected}`);\n\n\t\t// Ensure any search input is cleared when selection changes\n\t\tif (this._searchModule) {\n\t\t\tthis._searchModule.clearSearch();\n\t\t}\n\n\t\t// Toggle the selection in the state\n\t\tthis._state.toggleSelectedOptions(value);\n\n\t\t// Update the original select element's option selected state\n\t\tconst optionEl = Array.from(this._element.querySelectorAll('option')).find(\n\t\t\t(opt) => opt.value === value,\n\t\t) as HTMLOptionElement;\n\n\t\tif (optionEl) {\n\t\t\t// For multiple select, toggle the 'selected' attribute\n\t\t\tif (this._config.multiple) {\n\t\t\t\toptionEl.selected = !isSelected;\n\t\t\t} else {\n\t\t\t\t// For single select, deselect all other options and select this one\n\t\t\t\tArray.from(this._element.querySelectorAll('option')).forEach((opt) => {\n\t\t\t\t\t(opt as HTMLOptionElement).selected = opt.value === value;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Update the display element value\n\t\tthis.updateSelectedOptionDisplay();\n\n\t\t// Update option classes without re-rendering the dropdown content\n\t\tthis._updateSelectedOptionClass();\n\n\t\t// For single select mode, always close the dropdown after selection\n\t\tif (!this._config.multiple) {\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log('About to call closeDropdown() for single select mode - always close after selection');\n\t\t\tthis.closeDropdown();\n\t\t} else {\n\t\t\tif (this._config.debug)\n\t\t\t\tconsole.log('About to call closeDropdown() for multiple select');\n\t\t\tthis.closeDropdown();\n\t\t}\n\n\t\t// Dispatch custom change event with additional data\n\t\tthis._dispatchEvent('change', {\n\t\t\tvalue: value,\n\t\t\tselected: !isSelected,\n\t\t\tselectedOptions: this.getSelectedOptions(),\n\t\t});\n\t\tthis._fireEvent('change', {\n\t\t\tvalue: value,\n\t\t\tselected: !isSelected,\n\t\t\tselectedOptions: this.getSelectedOptions(),\n\t\t});\n\t}\n\n\t/**\n\t * Clean up all resources when the component is destroyed\n\t * This overrides the parent dispose method\n\t */\n\tpublic override dispose(): void {\n\t\t// Clean up event listeners\n\t\tthis._eventManager.removeAllListeners(null);\n\n\t\t// Dispose modules\n\t\tif (this._dropdownModule) {\n\t\t\tthis._dropdownModule.dispose();\n\t\t}\n\n\t\tif (this._comboboxModule) {\n\t\t\tif (typeof this._comboboxModule.destroy === 'function') {\n\t\t\t\tthis._comboboxModule.destroy();\n\t\t\t}\n\t\t}\n\n\t\tif (this._tagsModule) {\n\t\t\tif (typeof this._tagsModule.destroy === 'function') {\n\t\t\t\tthis._tagsModule.destroy();\n\t\t\t}\n\t\t}\n\n\t\tif (this._searchModule) {\n\t\t\tif (typeof this._searchModule.destroy === 'function') {\n\t\t\t\tthis._searchModule.destroy();\n\t\t\t}\n\t\t}\n\n\t\t// Remove DOM elements\n\t\tif (this._wrapperElement && this._wrapperElement.parentNode) {\n\t\t\tthis._wrapperElement.parentNode.removeChild(this._wrapperElement);\n\t\t}\n\n\t\t// Call parent dispose to clean up data\n\t\tsuper.dispose();\n\t}\n\n\t/**\n\t * ========================================================================\n\t * STATIC METHODS\n\t * ========================================================================\n\t */\n\n\tprivate static readonly _instances = new Map<HTMLElement, KTSelect>();\n\n\t/**\n\t * Create instances of KTSelect for all matching elements\n\t */\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll<HTMLElement>('[data-kt-select]');\n\n\t\telements.forEach((element) => {\n\t\t\tif (\n\t\t\t\telement.hasAttribute('data-kt-select') &&\n\t\t\t\t!element.classList.contains('data-kt-select-initialized')\n\t\t\t) {\n\t\t\t\tconst instance = new KTSelect(element);\n\t\t\t\tthis._instances.set(element, instance);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Initialize all KTSelect instances\n\t */\n\tpublic static init(): void {\n\t\tKTSelect.createInstances();\n\t}\n\n\t/**\n\t * Handle remote search\n\t * @param event Input event\n\t */\n\tprivate _handleRemoteSearch(event: Event) {\n\t\tif (\n\t\t\t!this._remoteModule ||\n\t\t\t!this._config.remote ||\n\t\t\t!this._config.searchParam\n\t\t)\n\t\t\treturn;\n\n\t\tconst query = (event.target as HTMLInputElement).value;\n\n\t\t// Check if the query is long enough\n\t\tif (query.length < (this._config.searchMinLength || 0)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Debounce the search\n\t\tif (this._searchDebounceTimeout) {\n\t\t\tclearTimeout(this._searchDebounceTimeout);\n\t\t}\n\n\t\tthis._searchDebounceTimeout = window.setTimeout(() => {\n\t\t\t// Show loading state\n\t\t\tthis._renderSearchLoadingState();\n\n\t\t\t// Fetch remote data with search query\n\t\t\tthis._remoteModule\n\t\t\t\t.fetchData(query)\n\t\t\t\t.then((items) => {\n\t\t\t\t\t// Update state with fetched items\n\t\t\t\t\tthis._state\n\t\t\t\t\t\t.setItems(items)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t// Update options in the dropdown\n\t\t\t\t\t\t\tthis._updateSearchResults(items);\n\n\t\t\t\t\t\t\t// Refresh the search module to update focus and cache\n\t\t\t\t\t\t\tif (this._searchModule) {\n\t\t\t\t\t\t\t\tthis._searchModule.refreshAfterSearch();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tconsole.error('Error updating search results:', error);\n\t\t\t\t\t\t\tthis._renderSearchErrorState(\n\t\t\t\t\t\t\t\terror.message || 'Failed to load search results',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error('Error fetching search results:', error);\n\t\t\t\t\tthis._renderSearchErrorState(\n\t\t\t\t\t\tthis._remoteModule.getErrorMessage() ||\n\t\t\t\t\t\t'Failed to load search results',\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t}, this._config.searchDebounce || 300);\n\t}\n\n\t// Search debounce timeout\n\tprivate _searchDebounceTimeout: number | null = null;\n\n\t/**\n\t * Render loading state for search\n\t */\n\tprivate _renderSearchLoadingState() {\n\t\tif (!this._originalOptionsHtml && this._dropdownContentElement) {\n\t\t\tconst optionsContainer = this._dropdownContentElement.querySelector(\n\t\t\t\t'[data-kt-select-options]',\n\t\t\t);\n\t\t\tif (optionsContainer) {\n\t\t\t\tthis._originalOptionsHtml = optionsContainer.innerHTML;\n\t\t\t}\n\t\t}\n\t\tthis._showDropdownMessage('loading', 'Searching...');\n\t}\n\n\t// Store original options HTML for restoring after search\n\tprivate _originalOptionsHtml: string | null = null;\n\n\t/**\n\t * Render error state for search\n\t * @param message Error message\n\t */\n\tprivate _renderSearchErrorState(message: string) {\n\t\tthis._showDropdownMessage('error', message);\n\t}\n\n\t/**\n\t * Update search results in the dropdown\n\t * @param items Search result items\n\t */\n\tprivate _updateSearchResults(items: KTSelectOptionData[]) {\n\t\tif (!this._dropdownContentElement) return;\n\n\t\tconst optionsContainer = this._dropdownContentElement.querySelector(\n\t\t\t'[data-kt-select-options]',\n\t\t);\n\t\tif (!optionsContainer) return;\n\n\t\t// Clear current options\n\t\toptionsContainer.innerHTML = '';\n\n\t\tif (items.length === 0) {\n\t\t\t// Show no results message using template for consistency and customization\n\t\t\tconst noResultsElement = defaultTemplates.noresults(this._config);\n\t\t\toptionsContainer.appendChild(noResultsElement);\n\t\t\treturn;\n\t\t}\n\n\t\t// Process each item individually to create options\n\t\titems.forEach((item) => {\n\t\t\t// Create option for the original select\n\t\t\tconst selectOption = document.createElement('option');\n\t\t\tselectOption.value = item.id;\n\n\t\t\t// Add to dropdown container\n\t\t\toptionsContainer.appendChild(selectOption);\n\t\t});\n\n\t\t// Add pagination \"Load More\" button if needed\n\t\tif (this._config.pagination && this._remoteModule.hasMorePages()) {\n\t\t\tthis._addLoadMoreButton();\n\t\t}\n\n\t\t// Update options NodeList\n\t\tthis._options = this._wrapperElement.querySelectorAll(\n\t\t\t`[data-kt-select-option]`,\n\t\t) as NodeListOf<HTMLElement>;\n\t}\n\n\t/**\n\t * Check if dropdown is open\n\t */\n\tpublic isDropdownOpen(): boolean {\n\t\treturn this._dropdownIsOpen;\n\t}\n\n\tpublic getSelectedOptionsText(): string {\n\t\tconst selectedValues = this.getSelectedOptions();\n\t\tconst displaySeparator = this._config.displaySeparator || ', ';\n\t\tconst texts = selectedValues.map(value => {\n\t\t\tconst option = Array.from(this._options).find(opt => opt.getAttribute('data-value') === value);\n\t\t\treturn option?.getAttribute('data-text') || '';\n\t\t}).filter(Boolean);\n\t\treturn texts.join(displaySeparator);\n\t}\n\n\t/**\n\t * Check if an option is disabled (either in dropdown or original select)\n\t */\n\tprivate _isOptionDisabled(value: string): boolean {\n\t\tconst dropdownOption = Array.from(this._options).find(\n\t\t\t(opt) => opt.getAttribute('data-value') === value\n\t\t);\n\t\tconst isDropdownDisabled = dropdownOption && (dropdownOption.classList.contains('disabled') || dropdownOption.getAttribute('aria-disabled') === 'true');\n\t\tconst selectOption = Array.from(this._element.querySelectorAll('option')).find(\n\t\t\t(opt) => opt.value === value\n\t\t) as HTMLOptionElement;\n\t\tconst isNativeDisabled = selectOption && selectOption.disabled;\n\t\treturn Boolean(isDropdownDisabled || isNativeDisabled);\n\t}\n\n\t/**\n\t * Centralized keyboard event handler for all select modes\n\t */\n\tprivate _handleKeyboardEvent(event: KeyboardEvent) {\n\t\t// If the event target is the search input and the event was already handled (defaultPrevented),\n\t\t// then return early to avoid duplicate processing by this broader handler.\n\t\tif (event.target === this._searchInputElement && event.defaultPrevented) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isOpen = this._dropdownIsOpen;\n\t\tconst config = this._config;\n\t\tconst focusManager = this._focusManager;\n\t\tconst buffer = this._typeToSearchBuffer;\n\n\t\t// If the event target is the search input, let it handle most typing keys naturally.\n\t\tif (event.target === this._searchInputElement) {\n\t\t\t// Allow navigation keys like ArrowDown, ArrowUp, Escape, Enter (for search/selection) to be handled by the logic below.\n\t\t\t// For other keys (characters, space, backspace, delete), let the input field process them.\n\t\t\tif (event.key !== 'ArrowDown' && event.key !== 'ArrowUp' &&\n\t\t\t    event.key !== 'Escape' && event.key !== 'Enter' && event.key !== 'Tab' &&\n\t\t\t    event.key !== 'Home' && event.key !== 'End') {\n\t\t\t\t// If it's a character key and we are NOT type-to-searching (because search has focus)\n\t\t\t\t// then let the input field handle it for its own value.\n\t\t\t\t// The search module's 'input' event will handle filtering based on the input's value.\n\t\t\t\tbuffer.clear(); // Clear type-to-search buffer when typing in search field\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// For Enter specifically in search input, we might want to select the focused option or submit search.\n\t\t\t// This is handled later in the switch.\n\t\t}\n\n\t\t// Ignore modifier keys (except for specific combinations if added later)\n\t\tif (event.altKey || event.ctrlKey || event.metaKey) return;\n\n\t\t// Type-to-search: only for single char keys, when search input does not have focus\n\t\tif (event.key.length === 1 && !event.repeat && !event.key.match(/\\s/) && document.activeElement !== this._searchInputElement) {\n\t\t\tbuffer.push(event.key);\n\t\t\tconst str = buffer.getBuffer();\n\t\t\tif (isOpen) {\n\t\t\tfocusManager.focusByString(str);\n\t\t\t} else {\n\t\t\t\t// If closed, type-to-search could potentially open and select.\n\t\t\t\t// For now, let's assume it only works when open or opens it first.\n\t\t\t\t// Or, we could find the matching option and set it directly without opening.\n\t\t\t}\n\t\t\treturn; // Type-to-search handles the event\n\t\t}\n\n\t\tswitch (event.key) {\n\t\t\tcase 'ArrowDown':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (!isOpen) {\n\t\t\t\t\tthis.openDropdown();\n\t\t\t\t} else {\n\t\t\t\t\tfocusManager.focusNext();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowUp':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (!isOpen) {\n\t\t\t\t\tthis.openDropdown();\n\t\t\t\t} else {\n\t\t\t\t\tfocusManager.focusPrevious();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'Home':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (isOpen) focusManager.focusFirst();\n\t\t\t\tbreak;\n\t\t\tcase 'End':\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (isOpen) focusManager.focusLast();\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\tcase ' ': // Space\n\t\t\t\tif (isOpen) {\n\t\t\t\t\tconst focusedOptionEl = this._focusManager.getFocusedOption();\n\t\t\t\t\tif (focusedOptionEl) {\n\t\t\t\t\t\tconst val = focusedOptionEl.dataset.value;\n\t\t\t\t\t\t// If single select, and the item is already selected, just close.\n\t\t\t\t\t\tif (val !== undefined && !this._config.multiple && this._state.isSelected(val)) {\n\t\t\t\t\t\t\tif (this._config.debug) console.log('Enter on already selected item in single-select mode. Closing.');\n\t\t\t\t\t\t\tthis.closeDropdown();\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Proceed with selection if not handled above\n\t\t\t\t\tthis.selectFocusedOption();\n\n\t\t\t\t\t// Close dropdown if configured to do so (for new selections)\n\t\t\t\t\tif (!this._config.multiple) {\n\t\t\t\t\t\t// This will also be true for the case handled above, but closeDropdown is idempotent.\n\t\t\t\t\t\t// However, the break above prevents this from being reached for that specific case.\n\t\t\t\t\t\tthis.closeDropdown();\n\t\t\t\t\t}\n\t\t\t\t\tevent.preventDefault(); // Prevent form submission or other default actions\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tthis.openDropdown();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'Escape':\n\t\t\t\tif (isOpen) {\n\t\t\t\t\tthis.closeDropdown();\n\t\t\t\t\t(event.target as HTMLElement).blur();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'Tab':\n\t\t\t\t// Let Tab propagate for normal focus movement\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tpublic renderDisplayTemplateForSelected(selectedValues: string[]): string {\n\t\tconst optionsConfig = this._config.optionsConfig as any || {};\n\t\tconst displaySeparator = this._config.displaySeparator || ', ';\n\t\tconst contentArray = Array.from(new Set(\n\t\t\tselectedValues.map(value => {\n\t\t\t\tconst option = Array.from(this._options).find(opt => opt.getAttribute('data-value') === value);\n\t\t\t\tif (!option) return '';\n\n\t\t\t\tlet displayTemplate = this._config.displayTemplate;\n\t\t\t\tconst text = option.getAttribute('data-text') || '';\n\n\t\t\t\t// Replace all {{varname}} in option.innerHTML with values from _config\n\t\t\t\tObject.entries(optionsConfig[value] || {}).forEach(([key, val]) => {\n\t\t\t\t\tif ([\"string\", \"number\", \"boolean\"].includes(typeof val)) {\n\t\t\t\t\t\tdisplayTemplate = displayTemplate.replace(new RegExp(`{{${key}}}`, 'g'), String(val));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn renderTemplateString(displayTemplate, {\n\t\t\t\t\tselectedCount: selectedValues.length || 0,\n\t\t\t\t\tselectedTexts: this.getSelectedOptionsText() || '',\n\t\t\t\t\ttext,\n\t\t\t\t});\n\t\t\t}).filter(Boolean)\n\t\t));\n\t\treturn contentArray.join(displaySeparator);\n\t}\n\n\tpublic getDisplayElement(): HTMLElement {\n\t\treturn this._displayElement;\n\t}\n\n\tprivate _observeNativeSelect() {\n\t\tif (this._mutationObserver) return; // Prevent double observers\n\t\tthis._mutationObserver = new MutationObserver((mutations) => {\n\t\t\tlet needsRebuild = false;\n\t\t\tlet needsSelectionSync = false;\n\n\t\t\tfor (const mutation of mutations) {\n\t\t\t\tif (mutation.type === 'childList') {\n\t\t\t\t\t// Option(s) added or removed\n\t\t\t\t\tneedsRebuild = true;\n\t\t\t\t} else if (mutation.type === 'attributes' && mutation.target instanceof HTMLOptionElement) {\n\t\t\t\t\tif (mutation.attributeName === 'selected') {\n\t\t\t\t\t\tneedsSelectionSync = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (needsRebuild) {\n\t\t\t\t// Rebuild the custom dropdown options\n\t\t\t\tthis._rebuildOptionsFromNative();\n\t\t\t}\n\t\t\tif (needsSelectionSync) {\n\t\t\t\tthis._syncSelectionFromNative();\n\t\t\t}\n\t\t});\n\n\t\tthis._mutationObserver.observe(this._element, {\n\t\t\tchildList: true,\n\t\t\tattributes: true,\n\t\t\tsubtree: true,\n\t\t\tattributeFilter: ['selected'],\n\t\t});\n\t}\n\n\tprivate _rebuildOptionsFromNative() {\n\t\t// Remove and rebuild the custom dropdown options from the native select\n\t\tif (this._dropdownContentElement) {\n\t\t\tconst optionsContainer = this._dropdownContentElement.querySelector('[data-kt-select-options]');\n\t\t\tif (optionsContainer) {\n\t\t\t\toptionsContainer.innerHTML = '';\n\t\t\t\tconst options = Array.from(this._element.querySelectorAll('option'));\n\t\t\t\toptions.forEach((optionElement) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\toptionElement.value === '' &&\n\t\t\t\t\t\toptionElement.textContent.trim() === ''\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst selectOption = new KTSelectOption(optionElement, this._config);\n\t\t\t\t\tconst renderedOption = selectOption.render();\n\t\t\t\t\toptionsContainer.appendChild(renderedOption);\n\t\t\t\t});\n\t\t\t\t// Update internal references\n\t\t\t\tthis._options = this._wrapperElement.querySelectorAll('[data-kt-select-option]') as NodeListOf<HTMLElement>;\n\t\t\t}\n\t\t}\n\t\t// Sync selection after rebuilding\n\t\tthis._syncSelectionFromNative();\n\t\tthis.updateSelectedOptionDisplay();\n\t\tthis._updateSelectedOptionClass();\n\t}\n\n\tprivate _syncSelectionFromNative() {\n\t\t// Sync internal state from the native select's selected options\n\t\tconst selected = Array.from(this._element.querySelectorAll('option:checked')).map(opt => (opt as HTMLOptionElement).value);\n\t\tthis._state.setSelectedOptions(this._config.multiple ? selected : selected[0] || '');\n\t\tthis.updateSelectedOptionDisplay();\n\t\tthis._updateSelectedOptionClass();\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTSelectConfigInterface } from './config';\nimport { KTSelect } from './select';\nimport { defaultTemplates } from './templates';\nimport { EventManager } from './utils';\n\n/**\n * KTSelectTags - Handles tags-specific functionality for KTSelect\n */\nexport class KTSelectTags {\n\tprivate _select: KTSelect;\n\tprivate _config: KTSelectConfigInterface;\n\tprivate _valueDisplayElement: HTMLElement;\n\tprivate _eventManager: EventManager;\n\n\t/**\n\t * Constructor: Initializes the tags component\n\t */\n\tconstructor(select: KTSelect) {\n\t\tthis._select = select;\n\t\tthis._config = select.getConfig();\n\t\tthis._valueDisplayElement = select.getValueDisplayElement();\n\t\tthis._eventManager = new EventManager();\n\n\t\tif (this._config.debug) console.log('KTSelectTags initialized');\n\t}\n\n\t/**\n\t * Update selected tags display\n\t * Renders selected options as tags in the display element\n\t */\n\tpublic updateTagsDisplay(selectedOptions: string[]): void {\n\t\t// Remove any existing tag elements\n\t\tconst wrapper = this._valueDisplayElement.parentElement;\n\t\tif (!wrapper) return;\n\n\t\t// Remove all previous tags\n\t\tArray.from(wrapper.querySelectorAll('[data-kt-select-tag]')).forEach(tag => tag.remove());\n\n\t\t// If no options selected, do nothing (let display show placeholder)\n\t\tif (selectedOptions.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Insert each tag before the display element\n\t\tselectedOptions.forEach((optionValue) => {\n\t\t\t// Find the original option element (in dropdown or select)\n\t\t\tlet optionElement: HTMLOptionElement | null = null;\n\t\t\tconst optionElements = this._select.getOptionsElement();\n\t\t\tfor (const opt of Array.from(optionElements)) {\n\t\t\t\tif ((opt as HTMLElement).dataset.value === optionValue) {\n\t\t\t\t\toptionElement = opt as HTMLOptionElement;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!optionElement) {\n\t\t\t\tconst originalOptions = this._select.getElement().querySelectorAll('option');\n\t\t\t\tfor (const opt of Array.from(originalOptions)) {\n\t\t\t\t\tif ((opt as HTMLOptionElement).value === optionValue) {\n\t\t\t\t\t\toptionElement = opt as HTMLOptionElement;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst tag = defaultTemplates.tag(optionElement, this._config);\n\n\t\t\t// Add event listener to the close button\n\t\t\tconst closeButton = tag.querySelector('[data-kt-select-remove-button]') as HTMLElement;\n\t\t\tif (closeButton) {\n\t\t\t\tthis._eventManager.addListener(closeButton, 'click', (event: Event) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tthis._removeTag(optionValue);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Insert tag before the display element\n\t\t\twrapper.insertBefore(tag, this._valueDisplayElement);\n\t\t});\n\t}\n\n\t/**\n\t * Remove a tag and its selection\n\t */\n\tprivate _removeTag(optionValue: string): void {\n\t\t// Delegate to the select component to handle state changes\n\t\tthis._select.toggleSelection(optionValue);\n\t}\n\n\t/**\n\t * Clean up resources used by this module\n\t */\n\tpublic destroy(): void {\n\t\tthis._eventManager.removeAllListeners(null);\n\t}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTSelectConfigInterface, KTSelectOption } from './config';\nimport { renderTemplateString } from './utils';\n\n/**\n * Default HTML string templates for KTSelect. All UI structure is defined here.\n * Users can override any template by providing a matching key in the config.templates object.\n */\nexport const coreTemplateStrings = {\n\tdropdown: `<div data-kt-select-dropdown class=\"kt-select-dropdown hidden {{class}}\" style=\"z-index: {{zindex}};\"></div>`,\n\toptions: `<ul role=\"listbox\" aria-label=\"{{label}}\" class=\"kt-select-options {{class}}\" data-kt-select-options=\"true\"></ul>`,\n\terror: `<li class=\"kt-select-error\" role=\"alert\"></li>`,\n\twrapper: `<div data-kt-select-wrapper class=\"kt-select-wrapper {{class}}\"></div>`,\n\tcombobox: `\n\t\t<div data-kt-select-combobox data-kt-select-display class=\"kt-select-combobox {{class}}\">\n\t\t\t<div data-kt-select-combobox-values=\"true\" class=\"kt-select-combobox-values\"></div>\n\t\t\t<input class=\"kt-input kt-select-combobox-input\" data-kt-select-search=\"true\" type=\"text\" placeholder=\"{{placeholder}}\" role=\"searchbox\" aria-label=\"{{label}}\" {{disabled}} />\n\t\t\t<button type=\"button\" data-kt-select-clear-button=\"true\" class=\"kt-select-combobox-clear-btn\" aria-label=\"Clear selection\">\n\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n\t\t\t\t\t<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n\t\t\t\t\t<line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t`,\n\tplaceholder: `<div data-kt-select-placeholder class=\"kt-select-placeholder {{class}}\"></div>`,\n\tdisplay: `\n\t\t<div data-kt-select-display class=\"kt-select-display {{class}}\" tabindex=\"{{tabindex}}\" role=\"button\" data-selected=\"0\" aria-haspopup=\"listbox\" aria-expanded=\"false\" aria-label=\"{{label}}\" {{disabled}}>\n\t\t\t<div class=\"kt-select-option-text\" data-kt-text-container=\"true\">{{text}}</div>\n\t\t</div>\n\t`,\n\toption: `\n\t\t<li data-kt-select-option data-value=\"{{value}}\" data-text=\"{{text}}\" class=\"kt-select-option {{class}}\" role=\"option\" {{selected}} {{disabled}}>\n\t\t\t<div class=\"kt-select-option-text\" data-kt-text-container=\"true\">{{text}}</div><svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"size-3.5 ms-auto hidden text-primary kt-select-option-selected:block\"><path d=\"M20 6 9 17l-5-5\"/></svg>\n\t\t</li>\n\t`,\n\tsearch: `<div data-kt-select-search class=\"kt-select-search {{class}}\"><input type=\"text\" data-kt-select-search=\"true\" placeholder=\"{{searchPlaceholder}}\" class=\"kt-input kt-input-ghost\" role=\"searchbox\" aria-label=\"{{searchPlaceholder}}\"/></div>`,\n\tsearchEmpty: `<div data-kt-select-search-empty class=\"kt-select-search-empty {{class}}\"></div>`,\n\tloading: `<li class=\"kt-select-loading {{class}}\" role=\"status\" aria-live=\"polite\"></li>`,\n\ttag: `<div data-kt-select-tag=\"true\" class=\"kt-select-tag {{class}}\"></div>`,\n\tloadMore: `<li class=\"kt-select-load-more {{class}}\" data-kt-select-load-more=\"true\"></li>`,\n\ttagRemoveButton: `<button type=\"button\" data-kt-select-remove-button class=\"kt-select-tag-remove\" aria-label=\"Remove tag\" tabindex=\"0\"><svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><line x1=\"3\" y1=\"3\" x2=\"9\" y2=\"9\"/><line x1=\"9\" y1=\"3\" x2=\"3\" y2=\"9\"/></svg></button>`,\n};\n\n/**\n * Template interface for KTSelect component\n * Each method returns an HTML string or HTMLElement\n */\nexport interface KTSelectTemplateInterface {\n\t/**\n\t * Renders the dropdown content container\n\t */\n\tdropdown: (\n\t\tconfig: KTSelectConfigInterface & { zindex?: number; content?: string },\n\t) => HTMLElement;\n\t/**\n\t * Renders the options container\n\t */\n\toptions: (\n\t\tconfig: KTSelectConfigInterface & { options?: string },\n\t) => HTMLElement;\n\t/**\n\t * Renders the load more button for pagination\n\t */\n\tloadMore: (config: KTSelectConfigInterface) => HTMLElement;\n\t/**\n\t * Renders an error message in the dropdown\n\t */\n\terror: (\n\t\tconfig: KTSelectConfigInterface & { errorMessage: string },\n\t) => HTMLElement;\n\n\t// Main components\n\twrapper: (config: KTSelectConfigInterface) => HTMLElement;\n\tdisplay: (config: KTSelectConfigInterface) => HTMLElement;\n\n\t// Option rendering\n\toption: (\n\t\toption: KTSelectOption | HTMLOptionElement,\n\t\tconfig: KTSelectConfigInterface,\n\t) => HTMLElement;\n\n\t// Search and empty states\n\tsearch: (config: KTSelectConfigInterface) => HTMLElement;\n\tnoresults: (config: KTSelectConfigInterface) => HTMLElement;\n\tloading: (\n\t\tconfig: KTSelectConfigInterface,\n\t\tloadingMessage: string,\n\t) => HTMLElement;\n\n\t// Multi-select\n\ttag: (\n\t\toption: HTMLOptionElement,\n\t\tconfig: KTSelectConfigInterface,\n\t) => HTMLElement;\n\n\tplaceholder: (config: KTSelectConfigInterface) => HTMLElement;\n}\n\n/**\n * Default templates for KTSelect component\n */\nfunction stringToElement(html: string): HTMLElement {\n\tconst template = document.createElement('template');\n\ttemplate.innerHTML = html.trim();\n\treturn template.content.firstElementChild as HTMLElement;\n}\n\n/**\n * User-supplied template overrides. Use setTemplateStrings() to add or update.\n */\nlet userTemplateStrings: Partial<typeof coreTemplateStrings> = {};\n\n/**\n * Register or update user template overrides.\n * @param templates Partial template object to merge with defaults.\n */\nexport function setTemplateStrings(\n\ttemplates: Partial<typeof coreTemplateStrings>,\n): void {\n\tuserTemplateStrings = { ...userTemplateStrings, ...templates };\n}\n\n/**\n * Get the complete template set, merging defaults, user overrides, and config templates.\n * @param config Optional config object with a \"templates\" property.\n */\nexport function getTemplateStrings(\n\tconfig?: KTSelectConfigInterface,\n): typeof coreTemplateStrings {\n\tconst templates =\n\t\tconfig && typeof config === 'object' && 'templates' in config\n\t\t\t? (config as any).templates\n\t\t\t: undefined;\n\n\tif (templates) {\n\t\treturn { ...coreTemplateStrings, ...userTemplateStrings, ...templates };\n\t}\n\n\treturn { ...coreTemplateStrings, ...userTemplateStrings };\n}\n\n/**\n * Default templates for KTSelect component\n */\nexport const defaultTemplates: KTSelectTemplateInterface = {\n\t/**\n\t * Renders the dropdown content\n\t */\n\tdropdown: (\n\t\tconfig: KTSelectConfigInterface & { zindex?: number; content?: string },\n\t) => {\n\t\tlet template = getTemplateStrings(config).dropdown;\n\t\t// If a custom dropdownTemplate is provided, it's responsible for its own content.\n\t\t// Otherwise, the base template is used, and content is appended later.\n\t\tif (config.dropdownTemplate) {\n\t\t\tconst renderedCustomTemplate = renderTemplateString(\n\t\t\t\tconfig.dropdownTemplate,\n\t\t\t\t{\n\t\t\t\t\tzindex: config.zindex ? String(config.zindex) : '',\n\t\t\t\t\t// content: config.content || '', // No longer pass content to custom template directly here\n\t\t\t\t\tclass: config.dropdownClass || '',\n\t\t\t\t},\n\t\t\t);\n\t\t\t// The custom template IS the dropdown element\n\t\t\tconst customDropdownEl = stringToElement(renderedCustomTemplate);\n\t\t\tif (config.zindex) customDropdownEl.style.zIndex = String(config.zindex);\n\t\t\tif (config.dropdownClass)\n\t\t\t\tcustomDropdownEl.classList.add(...config.dropdownClass.split(' '));\n\t\t\treturn customDropdownEl;\n\t\t}\n\n\t\tconst html = template\n\t\t\t.replace('{{zindex}}', config.zindex ? String(config.zindex) : '')\n\t\t\t// .replace('{{content}}', '') // Content is no longer part of the base template string\n\t\t\t.replace('{{class}}', config.dropdownClass || '');\n\t\treturn stringToElement(html);\n\t},\n\n\t/**\n\t * Renders the options container for the dropdown\n\t */\n\toptions: (config: KTSelectConfigInterface & { options?: string }) => {\n\t\tconst template = getTemplateStrings(config).options;\n\t\tconst html = template\n\t\t\t.replace('{{label}}', config.label || 'Options')\n\t\t\t.replace('{{height}}', config.height ? String(config.height) : '250')\n\t\t\t// .replace('{{options}}', '') // Options are now appended dynamically\n\t\t\t.replace('{{class}}', config.optionsClass || '');\n\t\treturn stringToElement(html);\n\t},\n\n\t/**\n\t * Renders the load more button for pagination\n\t */\n\tloadMore: (config: KTSelectConfigInterface): HTMLElement => {\n\t\tlet html = getTemplateStrings(config)\n\t\t\t.loadMore // .replace('{{loadMoreText}}', config.loadMoreText || 'Load more...') // Content is no longer in template string\n\t\t\t.replace('{{class}}', config.loadMoreClass || '');\n\t\tconst element = stringToElement(html);\n\t\telement.textContent = config.loadMoreText || 'Load more...';\n\t\treturn element;\n\t},\n\t/**\n\t * Renders an error message in the dropdown\n\t */\n\terror: (\n\t\tconfig: KTSelectConfigInterface & { errorMessage: string },\n\t): HTMLElement => {\n\t\t// Changed return type to HTMLElement\n\t\tconst template = getTemplateStrings(config).error;\n\t\tconst html = template\n\t\t\t// .replace('{{errorMessage}}', config.errorMessage || 'An error occurred') // Content is no longer in template string\n\t\t\t.replace('{{class}}', config.errorClass || '');\n\t\tconst element = stringToElement(html);\n\t\telement.textContent = config.errorMessage || 'An error occurred';\n\t\treturn element;\n\t},\n\n\t/**\n\t * Renders the main container for the select component\n\t */\n\twrapper: (config: KTSelectConfigInterface): HTMLElement => {\n\t\tconst html = getTemplateStrings(config).wrapper.replace(\n\t\t\t'{{class}}',\n\t\t\tconfig.wrapperClass || '',\n\t\t);\n\t\tconst element = stringToElement(html);\n\t\treturn element;\n\t},\n\n\t/**\n\t * Renders the display element (trigger) for the select\n\t */\n\tdisplay: (config: KTSelectConfigInterface): HTMLElement => {\n\t\tlet html = getTemplateStrings(config)\n\t\t\t.display.replace('{{tabindex}}', config.disabled ? '-1' : '0')\n\t\t\t.replace('{{label}}', config.label || config.placeholder || 'Select...')\n\t\t\t.replace('{{disabled}}', config.disabled ? 'aria-disabled=\"true\"' : '')\n\t\t\t.replace('{{placeholder}}', config.placeholder || 'Select...')\n\t\t\t.replace('{{class}}', config.displayClass || '');\n\n\t\tconst element = stringToElement(html);\n\n\t\t// Add data-multiple attribute if in multiple select mode\n\t\tif (config.multiple) {\n\t\t\telement.setAttribute('data-multiple', 'true');\n\t\t}\n\n\t\treturn element;\n\t},\n\n\t/**\n\t * Renders a single option\n\t */\n\toption: (\n\t\toption: KTSelectOption | HTMLOptionElement,\n\t\tconfig: KTSelectConfigInterface,\n\t): HTMLElement => {\n\t\tconst isHtmlOption = option instanceof HTMLOptionElement;\n\t\tlet optionData: Record<string, any>;\n\n\t\tif (isHtmlOption) {\n\t\t\t// If it's a plain HTMLOptionElement, construct data similarly to how KTSelectOption would\n\t\t\t// This branch might be less common if KTSelectOption instances are always used for rendering.\n\t\t\tconst el = option as HTMLOptionElement;\n\t\t\tconst textContent = el.textContent || '';\n\t\t\toptionData = {\n\t\t\t\tvalue: el.value,\n\t\t\t\ttext: textContent,\n\t\t\t\tselected: el.selected,\n\t\t\t\tdisabled: el.disabled, // This captures original disabled state\n\t\t\t\tcontent: textContent, // Default content to text\n\t\t\t\t// Attempt to get custom config for this specific option value if available\n\t\t\t\t...(config.optionsConfig?.[el.value] || {}),\n\t\t\t};\n\t\t} else {\n\t\t\t// If it's a KTSelectOption class instance (from './option')\n\t\t\t// which should have the getOptionDataForTemplate method.\n\t\t\toptionData = (\n\t\t\t\toption as import('./option').KTSelectOption\n\t\t\t).getOptionDataForTemplate();\n\t\t}\n\n\t\tlet content = optionData?.text?.trim(); // Default content to option's text\n\n\t\tif (config.optionTemplate) {\n\t\t\t// Use the user-provided template string, rendering with the full optionData.\n\t\t\t// renderTemplateString will replace {{key}} with values from optionData.\n\t\t\tcontent = renderTemplateString(config.optionTemplate, optionData);\n\t\t} else {\n\t\t\tcontent = optionData.text || optionData.content; // Prefer explicit text, fallback to content\n\t\t}\n\n\t\t// Use the core option template string as the base structure.\n\t\tconst baseTemplate = getTemplateStrings(config).option;\n\n\t\tconst optionClasses = [config.optionClass || ''];\n\t\tif (optionData.disabled) {\n\t\t\toptionClasses.push('disabled');\n\t\t}\n\n\t\t// Populate the base template for the <li> attributes.\n\t\t// The actual display content (text or custom HTML) will be set on the inner span later.\n\t\tconst html = renderTemplateString(baseTemplate, {\n\t\t\t...optionData, // Pass all data for {{value}}, {{text}}, {{selected}}, {{disabled}}, etc.\n\t\t\tclass: optionClasses.join(' ').trim() || '',\n\t\t\tselected: optionData.selected\n\t\t\t\t? 'aria-selected=\"true\"'\n\t\t\t\t: 'aria-selected=\"false\"',\n\t\t\tdisabled: optionData.disabled ? 'aria-disabled=\"true\"' : '',\n\t\t\tcontent: content, // This is for the {{content}} placeholder within the option template string itself\n\t\t});\n\n\t\tconst element = stringToElement(html);\n\n\t\t// If a custom option template is provided, replace the element's innerHTML with the content.\n\t\tif (config.optionTemplate) {\n\t\t\telement.innerHTML = content;\n\t\t}\n\n\t\t// Ensure data-text attribute is set to the original, clean text for searching/filtering\n\t\telement.setAttribute('data-text', optionData?.text?.trim() || '');\n\n\t\treturn element;\n\t},\n\n\t/**\n\t * Renders the search input\n\t */\n\tsearch: (config: KTSelectConfigInterface): HTMLElement => {\n\t\tlet html = getTemplateStrings(config)\n\t\t\t.search.replace(\n\t\t\t\t'{{searchPlaceholder}}',\n\t\t\t\tconfig.searchPlaceholder || 'Search...',\n\t\t\t)\n\t\t\t.replace('{{class}}', config.searchClass || '');\n\t\treturn stringToElement(html);\n\t},\n\n\t/**\n\t * Renders the no results message\n\t */\n\tnoresults: (config: KTSelectConfigInterface): HTMLElement => {\n\t\tlet html = getTemplateStrings(config).searchEmpty.replace(\n\t\t\t'{{class}}',\n\t\t\tconfig.noresultsClass || '',\n\t\t);\n\n\t\tlet content = config.noresults || 'No results';\n\n\t\tif (config.noresultsTemplate) {\n\t\t\tcontent = renderTemplateString(config.noresultsTemplate, {\n\t\t\t\tclass: config.noresultsClass || '',\n\t\t\t});\n\t\t\tconst element = stringToElement(html);\n\t\t\telement.innerHTML = content; // For templates, content can be HTML\n\t\t\treturn element;\n\t\t} else {\n\t\t\tconst element = stringToElement(html);\n\t\t\telement.textContent = content; // For simple text, use textContent\n\t\t\treturn element;\n\t\t}\n\t},\n\n\t/**\n\t * Renders the loading state\n\t */\n\tloading: (\n\t\tconfig: KTSelectConfigInterface,\n\t\tloadingMessage: string,\n\t): HTMLElement => {\n\t\tlet html = getTemplateStrings(config).loading.replace(\n\t\t\t'{{class}}',\n\t\t\tconfig.loadingClass || '',\n\t\t);\n\t\tconst element = stringToElement(html);\n\t\telement.textContent = loadingMessage || 'Loading options...';\n\t\treturn element;\n\t},\n\n\t/**\n\t * Renders a tag for multi-select\n\t */\n\ttag: (\n\t\toption: HTMLOptionElement,\n\t\tconfig: KTSelectConfigInterface,\n\t): HTMLElement => {\n\t\tlet template = getTemplateStrings(config).tag;\n\t\tlet preparedContent = option.title; // Default content is the option's title\n\n\t\tif (config.tagTemplate) {\n\t\t\tlet tagTemplateString = config.tagTemplate;\n\t\t\tconst optionValue = option.getAttribute('data-value') || option.value;\n\n\t\t\t// Replace all {{varname}} in option.innerHTML with values from _config.optionsConfig\n\t\t\tObject.entries(\n\t\t\t\t(config.optionsConfig as any)?.[optionValue] || {},\n\t\t\t).forEach(([key, val]) => {\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'string' ||\n\t\t\t\t\ttypeof val === 'number' ||\n\t\t\t\t\ttypeof val === 'boolean'\n\t\t\t\t) {\n\t\t\t\t\ttagTemplateString = tagTemplateString.replace(\n\t\t\t\t\t\tnew RegExp(`{{${key}}}`, 'g'),\n\t\t\t\t\t\tString(val),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Render the custom tag template with option data\n\t\t\tpreparedContent = renderTemplateString(tagTemplateString, {\n\t\t\t\ttitle: option.title,\n\t\t\t\tid: option.id,\n\t\t\t\tclass: config.tagClass || '', // This class is for content, not the main tag div\n\t\t\t\t// content: option.innerHTML, // Avoid direct innerHTML from option due to potential XSS\n\t\t\t\ttext: option.innerText || option.textContent || '',\n\t\t\t\tvalue: optionValue,\n\t\t\t});\n\t\t}\n\n\t\t// Append the remove button HTML string to the prepared content\n\t\tpreparedContent += getTemplateStrings(config).tagRemoveButton;\n\n\t\tconst html = template\n\t\t\t// .replace('{{title}}', option.title) // Title is part of preparedContent if using custom template\n\t\t\t// .replace('{{id}}', option.id)       // ID is part of preparedContent if using custom template\n\t\t\t.replace('{{class}}', config.tagClass || ''); // Class for the main tag div\n\n\t\tconst element = stringToElement(html);\n\t\telement.innerHTML = preparedContent; // Set the fully prepared content (text/HTML + remove button)\n\t\treturn element;\n\t},\n\n\t/**\n\t * Renders the placeholder for the select\n\t */\n\tplaceholder: (config: KTSelectConfigInterface): HTMLElement => {\n\t\tlet html = getTemplateStrings(config).placeholder.replace(\n\t\t\t'{{class}}',\n\t\t\tconfig.placeholderClass || '',\n\t\t);\n\n\t\tlet content = config.placeholder || 'Select...';\n\n\t\tif (config.placeholderTemplate) {\n\t\t\tcontent = renderTemplateString(config.placeholderTemplate, {\n\t\t\t\tplaceholder: config.placeholder || 'Select...',\n\t\t\t\tclass: config.placeholderClass || '',\n\t\t\t});\n\t\t\tconst element = stringToElement(html);\n\t\t\telement.innerHTML = content; // For templates, content can be HTML\n\t\t\treturn element;\n\t\t} else {\n\t\t\tconst element = stringToElement(html);\n\t\t\telement.textContent = content; // For simple text, use textContent\n\t\t\treturn element;\n\t\t}\n\t},\n};\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n// utils.ts\n\nimport { defaultTemplates } from './templates';\nimport { KTSelectConfigInterface } from './config';\n\n/**\n * Format a number as a currency string\n */\nexport function formatCurrency(value: number): string {\n\treturn new Intl.NumberFormat('en-US', {\n\t\tstyle: 'currency',\n\t\tcurrency: 'USD',\n\t}).format(value);\n}\n\n/**\n * Filter options based on a search query\n */\nexport function filterOptions(\n\toptions: HTMLElement[],\n\tquery: string,\n\tconfig: KTSelectConfigInterface,\n\tdropdownElement: HTMLElement,\n\tonVisibleCount?: (count: number) => void,\n): number {\n\tlet visibleOptionsCount = 0;\n\n\t// For empty query, make all options visible\n\t// The KTSelectSearch class is now responsible for restoring original content before calling this.\n\tif (!query || query.trim() === '') {\n\t\tfor (const option of options) {\n\t\t\toption.classList.remove('hidden');\n\t\t\t// Remove inline display style if it was used to hide\n\t\t\tif (option.style.display === 'none') {\n\t\t\t\toption.style.display = '';\n\t\t\t}\n\t\t\t// At this point, option.innerHTML should be its original.\n\t\t\tvisibleOptionsCount++;\n\t\t}\n\n\t\tif (onVisibleCount) {\n\t\t\tonVisibleCount(visibleOptionsCount);\n\t\t}\n\t\treturn visibleOptionsCount;\n\t}\n\n\tconst queryLower = query.toLowerCase();\n\n\tfor (const option of options) {\n\t\t// Use data-text for matching if available, otherwise fall back to textContent\n\t\tconst optionText = (option.dataset.text || option.textContent || '').toLowerCase();\n\t\tconst isMatch = optionText.includes(queryLower);\n\n\t\tif (isMatch) {\n\t\t\toption.classList.remove('hidden');\n\t\t\tif (option.style.display === 'none') option.style.display = ''; // Ensure visible\n\t\t\tvisibleOptionsCount++;\n\n\t\t} else {\n\t\t\toption.classList.add('hidden');\n\t\t}\n\n\t\t// Early exit if maxItems limit is reached (optional)\n\t\t// if (config.searchMaxItems && visibleOptionsCount >= config.searchMaxItems) {\n\t\t// \tbreak;\n\t\t// }\n\t}\n\n\tif (onVisibleCount) {\n\t\tonVisibleCount(visibleOptionsCount);\n\t}\n\n\treturn visibleOptionsCount;\n}\n\n/**\n * Focus manager for keyboard navigation\n * Consolidates redundant focus management logic into shared functions\n */\nexport class FocusManager {\n\tprivate _element: HTMLElement;\n\tprivate _optionsSelector: string;\n\tprivate _focusedOptionIndex: number | null = null;\n\tprivate _focusClass: string;\n\tprivate _hoverClass: string;\n\tprivate _eventManager: EventManager;\n\tprivate _onFocusChange: ((option: HTMLElement | null, index: number | null) => void) | null = null;\n\n\tconstructor(\n\t\telement: HTMLElement,\n\t\toptionsSelector: string = '[data-kt-select-option]',\n\t\tconfig?: KTSelectConfigInterface,\n\t) {\n\t\tthis._element = element;\n\t\tthis._optionsSelector = optionsSelector;\n\t\tthis._eventManager = new EventManager();\n\n\t\t// Add click handler to update focus state when options are clicked\n\t\tthis._setupOptionClickHandlers();\n\n\t\tthis._focusClass = 'focus'; // or whatever your intended class is\n\t\tthis._hoverClass = 'hover'; // or your intended class\n\t}\n\n\t/**\n\t * Set up click handlers for all options to update focus state\n\t */\n\tprivate _setupOptionClickHandlers(): void {\n\t\t// Add click handler to the options container\n\t\tthis._eventManager.addListener(this._element, 'click', (e: Event) => {\n\t\t\tconst target = e.target as HTMLElement;\n\t\t\tconst optionElement = target.closest(this._optionsSelector);\n\n\t\t\tif (optionElement) {\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Get all visible options\n\t */\n\tpublic getVisibleOptions(): HTMLElement[] {\n\t\treturn Array.from(\n\t\t\tthis._element.querySelectorAll(this._optionsSelector),\n\t\t).filter((option) => {\n\t\t\tconst element = option as HTMLElement;\n\t\t\t// Check only for hidden class\n\t\t\tif (element.classList.contains('hidden')) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Also check inline styles for backward compatibility\n\t\t\tif (element.style.display === 'none') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}) as HTMLElement[];\n\t}\n\n\t/**\n\t * Focus the first visible option\n\t */\n\tpublic focusFirst(): HTMLElement | null {\n\t\tconst options = this.getVisibleOptions();\n\t\tif (options.length === 0) return null;\n\t\tfor (let i = 0; i < options.length; i++) {\n\t\t\tconst option = options[i];\n\t\t\tif (!option.classList.contains('disabled') && option.getAttribute('aria-disabled') !== 'true') {\n\t\t\t\tthis.resetFocus();\n\t\t\t\tthis._focusedOptionIndex = i;\n\t\t\t\tthis.applyFocus(option);\n\t\t\t\tthis.scrollIntoView(option);\n\t\t\t\treturn option;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Focus the last visible option\n\t */\n\tpublic focusLast(): HTMLElement | null {\n\t\tconst options = this.getVisibleOptions();\n\t\tif (options.length === 0) return null;\n\t\tfor (let i = options.length - 1; i >= 0; i--) {\n\t\t\tconst option = options[i];\n\t\t\tif (!option.classList.contains('disabled') && option.getAttribute('aria-disabled') !== 'true') {\n\t\t\t\tthis.resetFocus();\n\t\t\t\tthis._focusedOptionIndex = i;\n\t\t\t\tthis.applyFocus(option);\n\t\t\t\tthis.scrollIntoView(option);\n\t\t\t\treturn option;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Focus the next visible option that matches the search string\n\t */\n\tpublic focusByString(str: string): HTMLElement | null {\n\t\tconst options = this.getVisibleOptions();\n\t\tif (options.length === 0) return null;\n\t\tconst lowerStr = str.toLowerCase();\n\t\tconst startIdx = (this._focusedOptionIndex ?? -1) + 1;\n\t\tfor (let i = 0; i < options.length; i++) {\n\t\t\tconst idx = (startIdx + i) % options.length;\n\t\t\tconst option = options[idx];\n\t\t\tif (\n\t\t\t\t!option.classList.contains('disabled') &&\n\t\t\t\toption.getAttribute('aria-disabled') !== 'true' &&\n\t\t\t\t(option.textContent?.toLowerCase().startsWith(lowerStr) || option.dataset.value?.toLowerCase().startsWith(lowerStr))\n\t\t\t) {\n\t\t\t\tthis.resetFocus();\n\t\t\t\tthis._focusedOptionIndex = idx;\n\t\t\t\tthis.applyFocus(option);\n\t\t\t\tthis.scrollIntoView(option);\n\t\t\t\treturn option;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * Focus the next visible option\n\t */\n\tpublic focusNext(): HTMLElement | null {\n\t\tconst options = this.getVisibleOptions();\n\t\tif (options.length === 0) return null;\n\t\tlet idx = this._focusedOptionIndex === null ? 0 : (this._focusedOptionIndex + 1) % options.length;\n\t\tlet startIdx = idx;\n\t\tdo {\n\t\t\tconst option = options[idx];\n\t\t\tif (!option.classList.contains('disabled') && option.getAttribute('aria-disabled') !== 'true') {\n\t\t\t\tthis.resetFocus();\n\t\t\t\tthis._focusedOptionIndex = idx;\n\t\t\t\tthis.applyFocus(option);\n\t\t\t\tthis.scrollIntoView(option);\n\t\t\t\treturn option;\n\t\t\t}\n\t\t\tidx = (idx + 1) % options.length;\n\t\t} while (idx !== startIdx);\n\t\treturn null;\n\t}\n\n\t/**\n\t * Focus the previous visible option\n\t */\n\tpublic focusPrevious(): HTMLElement | null {\n\t\tconst options = this.getVisibleOptions();\n\t\tif (options.length === 0) return null;\n\t\tlet idx = this._focusedOptionIndex === null ? options.length - 1 : (this._focusedOptionIndex - 1 + options.length) % options.length;\n\t\tlet startIdx = idx;\n\t\tdo {\n\t\t\tconst option = options[idx];\n\t\t\tif (!option.classList.contains('disabled') && option.getAttribute('aria-disabled') !== 'true') {\n\t\t\t\tthis.resetFocus();\n\t\t\t\tthis._focusedOptionIndex = idx;\n\t\t\t\tthis.applyFocus(option);\n\t\t\t\tthis.scrollIntoView(option);\n\t\t\t\treturn option;\n\t\t\t}\n\t\t\tidx = (idx - 1 + options.length) % options.length;\n\t\t} while (idx !== startIdx);\n\t\treturn null;\n\t}\n\n\t/**\n\t * Apply focus to a specific option\n\t */\n\tpublic applyFocus(option: HTMLElement): void {\n\t\tif (!option) return;\n\t\t// Ensure it's not disabled\n\t\tif (option.classList.contains('disabled') || option.getAttribute('aria-disabled') === 'true') {\n\t\t\treturn;\n\t\t}\n\t\t// DO NOT CALL resetFocus() here. Caller's responsibility.\n\t\toption.classList.add(this._focusClass);\n\t\toption.classList.add(this._hoverClass);\n\t\t// _triggerFocusChange needs _focusedOptionIndex to be set by the caller before this.\n\t\tthis._triggerFocusChange();\n\t}\n\n\t/**\n\t * Reset focus on all options\n\t */\n\tpublic resetFocus(): void {\n\t\tconst focusedElements = this._element.querySelectorAll(`.${this._focusClass}, .${this._hoverClass}`);\n\n\t\t// Remove focus and hover classes from all options\n\t\tfocusedElements.forEach((element) => {\n\t\t\telement.classList.remove(this._focusClass, this._hoverClass);\n\t\t});\n\n\t\tthis._focusedOptionIndex = null; // Always reset the index\n\t}\n\n\t/**\n\t * Ensure the focused option is visible in the scrollable container\n\t */\n\tpublic scrollIntoView(option: HTMLElement): void {\n\t\tif (!option) return;\n\n\t\tconst container = this._element.querySelector(\n\t\t\t'[data-kt-select-options]',\n\t\t);\n\t\tif (!container) return;\n\n\t\tconst optionRect = option.getBoundingClientRect();\n\t\tconst containerRect = container.getBoundingClientRect();\n\n\t\t// Check if option is below the visible area\n\t\tif (optionRect.bottom > containerRect.bottom) {\n\t\t\toption.scrollIntoView({ block: 'end', behavior: 'smooth' });\n\t\t}\n\t\t// Check if option is above the visible area\n\t\telse if (optionRect.top < containerRect.top) {\n\t\t\toption.scrollIntoView({ block: 'start', behavior: 'smooth' });\n\t\t}\n\t}\n\n\t/**\n\t * Focus a specific option by its value\n\t */\n\tpublic focusOptionByValue(value: string): boolean {\n\t\tconst options = this.getVisibleOptions();\n\t\tconst index = options.findIndex((option) => option.dataset.value === value);\n\n\t\tif (index >= 0) {\n\t\t\tconst optionToFocus = options[index];\n\t\t\tif (!optionToFocus.classList.contains('disabled') && optionToFocus.getAttribute('aria-disabled') !== 'true'){\n\t\t\t\tthis.resetFocus();\n\t\t\t\tthis._focusedOptionIndex = index;\n\t\t\t\tthis.applyFocus(optionToFocus);\n\t\t\t\tthis.scrollIntoView(optionToFocus);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Get the currently focused option\n\t */\n\tpublic getFocusedOption(): HTMLElement | null {\n\t\tconst options = this.getVisibleOptions();\n\n\t\tif (\n\t\t\tthis._focusedOptionIndex !== null &&\n\t\t\tthis._focusedOptionIndex < options.length\n\t\t) {\n\t\t\treturn options[this._focusedOptionIndex];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Get the index of the currently focused option\n\t */\n\tpublic getFocusedIndex(): number | null {\n\t\treturn this._focusedOptionIndex;\n\t}\n\n\t/**\n\t * Set the focused option index directly\n\t */\n\tpublic setFocusedIndex(index: number | null): void {\n\t\tthis._focusedOptionIndex = index;\n\t}\n\n\t/**\n\t * Set a callback to be called when focus changes\n\t */\n\tpublic setOnFocusChange(cb: (option: HTMLElement | null, index: number | null) => void) {\n\t\tthis._onFocusChange = cb;\n\t}\n\n\tprivate _triggerFocusChange() {\n\t\tif (this._onFocusChange) {\n\t\t\tthis._onFocusChange(this.getFocusedOption(), this._focusedOptionIndex);\n\t\t}\n\t}\n\n\t/**\n\t * Clean up event listeners\n\t */\n\tpublic dispose(): void {\n\t\tif (this._eventManager) {\n\t\t\tthis._eventManager.removeAllListeners(this._element);\n\t\t}\n\t}\n}\n\n/**\n * Centralized event listener management\n */\nexport class EventManager {\n\tprivate _boundHandlers: Map<\n\t\tstring,\n\t\tMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject>\n\t> = new Map();\n\n\t/**\n\t * Add an event listener with a bound context\n\t */\n\tpublic addListener(\n\t\telement: HTMLElement,\n\t\tevent: string,\n\t\thandler: EventListenerOrEventListenerObject,\n\t\tcontext?: any,\n\t): void {\n\t\tif (!element) return;\n\n\t\t// Create a bound version of the handler if context provided\n\t\tconst boundHandler: EventListenerOrEventListenerObject =\n\t\t\tcontext && typeof handler === 'function'\n\t\t\t\t? handler.bind(context)\n\t\t\t\t: handler;\n\n\t\t// Store the relationship between original and bound handler\n\t\tif (!this._boundHandlers.has(event)) {\n\t\t\tthis._boundHandlers.set(event, new Map());\n\t\t}\n\n\t\tconst eventMap = this._boundHandlers.get(event)!;\n\t\teventMap.set(handler, boundHandler);\n\n\t\t// Add the event listener\n\t\telement.addEventListener(event, boundHandler);\n\t}\n\n\t/**\n\t * Remove an event listener\n\t */\n\tpublic removeListener(\n\t\telement: HTMLElement,\n\t\tevent: string,\n\t\thandler: EventListenerOrEventListenerObject,\n\t): void {\n\t\tif (!element) return;\n\n\t\tconst eventMap = this._boundHandlers.get(event);\n\t\tif (!eventMap) return;\n\n\t\t// Get the bound version of the handler\n\t\tconst boundHandler = eventMap.get(handler);\n\t\tif (!boundHandler) return;\n\n\t\t// Remove the event listener\n\t\telement.removeEventListener(event, boundHandler);\n\n\t\t// Clean up the map\n\t\teventMap.delete(handler);\n\t\tif (eventMap.size === 0) {\n\t\t\tthis._boundHandlers.delete(event);\n\t\t}\n\t}\n\n\t/**\n\t * Remove all event listeners\n\t */\n\tpublic removeAllListeners(element: HTMLElement): void {\n\t\tif (!element) return;\n\n\t\t// Go through each event type\n\t\tthis._boundHandlers.forEach((eventMap, event) => {\n\t\t\t// For each event type, go through each handler\n\t\t\teventMap.forEach((boundHandler) => {\n\t\t\t\telement.removeEventListener(event, boundHandler);\n\t\t\t});\n\t\t});\n\n\t\t// Clear the maps\n\t\tthis._boundHandlers.clear();\n\t}\n}\n\n/**\n * Debounce function to limit how often a function can be called\n */\nexport function debounce(\n\tfunc: (...args: any[]) => void,\n\tdelay: number,\n): (...args: any[]) => void {\n\tlet timeout: ReturnType<typeof setTimeout>;\n\n\treturn function (...args: any[]) {\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(() => func(...args), delay);\n\t};\n}\n\n/**\n * Replaces all {{key}} in the template with the corresponding value from the data object.\n * If a key is missing in data, replaces with an empty string.\n */\nexport function renderTemplateString(template: string, data: Record<string, any>): string {\n\treturn template.replace(/{{(\\w+)}}/g, (_, key) =>\n\t\tdata[key] !== undefined && data[key] !== null ? String(data[key]) : ''\n\t);\n}\n\n// Type-to-search buffer utility for keyboard navigation\nexport class TypeToSearchBuffer {\n\tprivate buffer: string = '';\n\tprivate lastTime: number = 0;\n\tprivate timeout: number;\n\n\tconstructor(timeout: number = 500) {\n\t\tthis.timeout = timeout;\n\t}\n\n\tpublic push(char: string) {\n\t\tconst now = Date.now();\n\t\tif (now - this.lastTime > this.timeout) {\n\t\t\tthis.buffer = '';\n\t\t}\n\t\tthis.buffer += char;\n\t\tthis.lastTime = now;\n\t}\n\n\tpublic getBuffer() {\n\t\treturn this.buffer;\n\t}\n\n\tpublic clear() {\n\t\tthis.buffer = '';\n\t}\n}\n\nexport function stringToElement(html: string): HTMLElement {\n\tconst template = document.createElement('template');\n\ttemplate.innerHTML = html.trim();\n\treturn template.content.firstElementChild as HTMLElement;\n}","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTStepper } from './stepper';\nexport type { KTStepperConfigInterface, KTStepperInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTComponent from '../component';\nimport { KTStepperInterface, KTStepperConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_STEPPER_INITIALIZED: boolean;\n\t\tKTStepper: typeof KTStepper;\n\t}\n}\n\nexport class KTStepper extends KTComponent implements KTStepperInterface {\n\tprotected override _name: string = 'stepper';\n\tprotected override _defaultConfig: KTStepperConfigInterface = {\n\t\thiddenClass: 'hidden',\n\t\tactiveStep: 1,\n\t};\n\tprotected override _config: KTStepperConfigInterface = this._defaultConfig;\n\tprotected _activeStep: number = 0;\n\tprotected _nextElement: HTMLElement | null = null;\n\tprotected _backElement: HTMLElement | null = null;\n\n\tconstructor(\n\t\telement: HTMLElement,\n\t\tconfig: KTStepperConfigInterface | null = null,\n\t) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tif (!this._element) return;\n\t\tthis._nextElement = this._element.querySelector('[data-kt-stepper-next]');\n\t\tthis._backElement = this._element.querySelector('[data-kt-stepper-back]');\n\n\t\tthis._activeStep = 1;\n\t\tif (this._getOption('activeStep') !== this._activeStep) {\n\t\t\tthis._go(this._getOption('activeStep') as number);\n\t\t}\n\n\t\tthis._update();\n\t\tthis._handlers();\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._nextElement) {\n\t\t\tconsole.error('data-kt-stepper-next not found');\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._nextElement) {\n\t\t\tthis._nextElement.addEventListener('click', (event: Event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._goNext();\n\t\t\t});\n\t\t}\n\n\t\tif (this._backElement) {\n\t\t\tthis._backElement.addEventListener('click', (event: Event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._goBack();\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected _update(): void {\n\t\tif (!this._element) return;\n\t\tlet state = '';\n\n\t\tif (this._activeStep === this._getTotalSteps()) {\n\t\t\tstate = 'last';\n\t\t} else if (this._activeStep === 1) {\n\t\t\tstate = 'first';\n\t\t} else {\n\t\t\tstate = 'between';\n\t\t}\n\n\t\tthis._element.classList.remove('first');\n\t\tthis._element.classList.remove('last');\n\t\tthis._element.classList.remove('between');\n\t\tthis._element.classList.add(state);\n\n\t\tthis._getItemElements().forEach((element, index) => {\n\t\t\tconst contentElement = KTDom.getElement(\n\t\t\t\telement.getAttribute('data-kt-stepper-item'),\n\t\t\t);\n\t\t\tif (!contentElement) return;\n\n\t\t\telement.classList.remove('active');\n\t\t\telement.classList.remove('completed');\n\t\t\telement.classList.remove('pending');\n\n\t\t\tconst numberElement = element.querySelector('[data-kt-stepper-number]');\n\t\t\tif (numberElement) numberElement.innerHTML = String(index + 1);\n\n\t\t\tif (index + 1 == this._activeStep) {\n\t\t\t\telement.classList.add('active');\n\t\t\t\tcontentElement.classList.remove(\n\t\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcontentElement.classList.add(this._getOption('hiddenClass') as string);\n\t\t\t\tif (index + 1 < this._activeStep) {\n\t\t\t\t\telement.classList.add('completed');\n\t\t\t\t} else {\n\t\t\t\t\telement.classList.add('pending');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected _getItemElements(): Array<HTMLElement> {\n\t\tconst elements: Array<HTMLElement> = [];\n\n\t\tthis._element\n\t\t\t.querySelectorAll('[data-kt-stepper-item]')\n\t\t\t.forEach((element) => {\n\t\t\t\tif (KTDom.isVisible(element as HTMLElement)) {\n\t\t\t\t\telements.push(element as HTMLElement);\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn elements;\n\t}\n\n\tprotected _go(step: number): void {\n\t\tif (step === this._activeStep || step > this._getTotalSteps() || step < 0)\n\t\t\treturn;\n\n\t\tconst payload = { step: step, cancel: false };\n\t\tthis._fireEvent('change', payload);\n\t\tthis._dispatchEvent('change', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._activeStep = step;\n\t\tthis._update();\n\n\t\tthis._fireEvent('changed');\n\t\tthis._dispatchEvent('changed');\n\t}\n\n\tprotected _goTo(itemElement: HTMLElement): void {\n\t\tconst step = this._getStep(itemElement);\n\t\tthis._go(step);\n\t}\n\n\tprotected _getStep(itemElement: HTMLElement): number {\n\t\tlet step = -1;\n\n\t\tthis._getItemElements().forEach((element, index) => {\n\t\t\tif (element === itemElement) {\n\t\t\t\tstep = index + 1;\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\n\t\treturn step;\n\t}\n\n\tprotected _getItemElement(step: number) {\n\t\treturn this._getItemElements()[step - 1];\n\t}\n\n\tprotected _getTotalSteps(): number {\n\t\treturn this._getItemElements().length;\n\t}\n\n\tprotected _goNext(): void {\n\t\tlet step;\n\n\t\tif (this._getTotalSteps() >= this._activeStep + 1) {\n\t\t\tstep = this._activeStep + 1;\n\t\t} else {\n\t\t\tstep = this._getTotalSteps();\n\t\t}\n\n\t\tthis._go(step);\n\t}\n\n\tprotected _goBack(): void {\n\t\tlet step;\n\n\t\tif (this._activeStep - 1 > 1) {\n\t\t\tstep = this._activeStep - 1;\n\t\t} else {\n\t\t\tstep = 1;\n\t\t}\n\n\t\tthis._go(step);\n\t}\n\n\tprotected _goLast(): void {\n\t\tconst step = this._getTotalSteps();\n\t\tthis._go(step);\n\t}\n\n\tprotected _goFirst(): void {\n\t\tconst step = 1;\n\t\tthis._go(step);\n\t}\n\n\tprotected _isLast(): boolean {\n\t\treturn this._getTotalSteps() === this._activeStep + 1;\n\t}\n\n\tprotected _isFirst(): boolean {\n\t\treturn this._activeStep === 1;\n\t}\n\n\tpublic isLast(): boolean {\n\t\treturn this._isLast();\n\t}\n\n\tpublic isFirst(): boolean {\n\t\treturn this._isFirst();\n\t}\n\n\tpublic go(step: number): void {\n\t\tthis._go(step);\n\t}\n\n\tpublic goTo(itemElement: HTMLElement): void {\n\t\tthis.goTo(itemElement);\n\t}\n\n\tpublic goFirst(): void {\n\t\tthis._goFirst();\n\t}\n\n\tpublic goLast(): void {\n\t\tthis._goLast();\n\t}\n\n\tpublic goNext(): void {\n\t\tthis._goNext();\n\t}\n\n\tpublic goBack(): void {\n\t\tthis._goBack();\n\t}\n\n\tpublic update(): void {\n\t\tthis._update();\n\t}\n\n\tpublic getStep(itemElement: HTMLElement): number {\n\t\treturn this._getStep(itemElement);\n\t}\n\n\tpublic getItemElement(step: number): HTMLElement {\n\t\treturn this._getItemElement(step);\n\t}\n\n\tpublic getTotalSteps(): number {\n\t\treturn this._getTotalSteps();\n\t}\n\n\tpublic getItemElements(): Array<HTMLElement> {\n\t\treturn this._getItemElements();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTStepper {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'stepper')) {\n\t\t\treturn KTData.get(element, 'stepper') as KTStepper;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-stepper')) {\n\t\t\treturn new KTStepper(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTStepperConfigInterface,\n\t): KTStepper | null {\n\t\treturn this.getInstance(element) || new KTStepper(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-stepper]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTStepper(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTStepper.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTStepper = KTStepper;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTSticky } from './sticky';\nexport type { KTStickyConfigInterface, KTStickyInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTUtils from '../../helpers/utils';\nimport KTComponent from '../component';\nimport { KTStickyInterface, KTStickyConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_STICKY_INITIALIZED: boolean;\n\t\tKTSticky: typeof KTSticky;\n\t}\n}\n\nexport class KTSticky extends KTComponent implements KTStickyInterface {\n\tprotected override _name: string = 'sticky';\n\tprotected override _defaultConfig: KTStickyConfigInterface = {\n\t\ttarget: 'body',\n\t\tname: '',\n\t\tclass: '',\n\t\ttop: '',\n\t\tstart: '',\n\t\tend: '',\n\t\twidth: '',\n\t\tzindex: '',\n\t\toffset: 0,\n\t\treverse: false,\n\t\trelease: '',\n\t\tactivate: '',\n\t};\n\tprotected override _config: KTStickyConfigInterface = this._defaultConfig;\n\tprotected _targetElement: HTMLElement | Document | null = null;\n\n\tprotected _attributeRoot: string;\n\tprotected _eventTriggerState: boolean;\n\tprotected _lastScrollTop: number;\n\tprotected _releaseElement: HTMLElement;\n\tprotected _activateElement: HTMLElement;\n\tprotected _wrapperElement: HTMLElement;\n\n\tconstructor(\n\t\telement: HTMLElement,\n\t\tconfig: KTStickyConfigInterface | null = null,\n\t) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tthis._releaseElement = KTDom.getElement(\n\t\t\tthis._getOption('release') as string,\n\t\t);\n\t\tthis._activateElement = KTDom.getElement(\n\t\t\tthis._getOption('activate') as string,\n\t\t);\n\t\tthis._wrapperElement = this._element.closest('[data-kt-sticky-wrapper]');\n\t\tthis._attributeRoot = `data-kt-sticky-${this._getOption('name')}`;\n\t\tthis._eventTriggerState = true;\n\t\tthis._lastScrollTop = 0;\n\n\t\tconst targetElement =\n\t\t\tthis._getTarget() === 'body'\n\t\t\t\t? document\n\t\t\t\t: KTDom.getElement(this._getTarget());\n\t\tif (!targetElement) return;\n\n\t\tthis._targetElement = targetElement;\n\n\t\tthis._handlers();\n\t\tthis._process();\n\t\tthis._update();\n\t}\n\n\tprivate _getTarget(): string {\n\t\treturn (\n\t\t\t(this._element.getAttribute('data-kt-sticky-target') as string) ||\n\t\t\t(this._getOption('target') as string)\n\t\t);\n\t}\n\n\tprotected _handlers(): void {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tlet timer;\n\n\t\t\tKTUtils.throttle(\n\t\t\t\ttimer,\n\t\t\t\t() => {\n\t\t\t\t\tthis._update();\n\t\t\t\t},\n\t\t\t\t200,\n\t\t\t);\n\t\t});\n\n\t\tthis._targetElement.addEventListener('scroll', () => {\n\t\t\tthis._process();\n\t\t});\n\t}\n\n\tprotected _process(): void {\n\t\tconst reverse = this._getOption('reverse');\n\t\tconst offset = this._getOffset();\n\n\t\tif (offset < 0) {\n\t\t\tthis._disable();\n\t\t\treturn;\n\t\t}\n\n\t\tconst st =\n\t\t\tthis._getTarget() === 'body'\n\t\t\t\t? KTDom.getScrollTop()\n\t\t\t\t: (this._targetElement as HTMLElement).scrollTop;\n\t\tconst release =\n\t\t\tthis._releaseElement && KTDom.isPartiallyInViewport(this._releaseElement);\n\n\t\t// Release on reverse scroll mode\n\t\tif (reverse === true) {\n\t\t\t// Forward scroll mode\n\t\t\tif (st > offset && !release) {\n\t\t\t\tif (document.body.hasAttribute(this._attributeRoot) === false) {\n\t\t\t\t\tif (this._enable() === false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdocument.body.setAttribute(this._attributeRoot, 'on');\n\t\t\t\t}\n\n\t\t\t\tif (this._eventTriggerState === true) {\n\t\t\t\t\tconst payload = { active: true };\n\t\t\t\t\tthis._fireEvent('change', payload);\n\t\t\t\t\tthis._dispatchEvent('change', payload);\n\t\t\t\t\tthis._eventTriggerState = false;\n\t\t\t\t}\n\t\t\t\t// Back scroll mode\n\t\t\t} else {\n\t\t\t\tif (document.body.hasAttribute(this._attributeRoot) === true) {\n\t\t\t\t\tthis._disable();\n\t\t\t\t\tif (release) {\n\t\t\t\t\t\tthis._element.classList.add('release');\n\t\t\t\t\t}\n\t\t\t\t\tdocument.body.removeAttribute(this._attributeRoot);\n\t\t\t\t}\n\n\t\t\t\tif (this._eventTriggerState === false) {\n\t\t\t\t\tconst payload = { active: false };\n\t\t\t\t\tthis._fireEvent('change', payload);\n\t\t\t\t\tthis._dispatchEvent('change', payload);\n\t\t\t\t\tthis._eventTriggerState = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._lastScrollTop = st;\n\t\t\t// Classic scroll mode\n\t\t} else {\n\t\t\t// Forward scroll mode\n\t\t\tif (st > offset && !release) {\n\t\t\t\tif (document.body.hasAttribute(this._attributeRoot) === false) {\n\t\t\t\t\tif (this._enable() === false) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdocument.body.setAttribute(this._attributeRoot, 'on');\n\t\t\t\t}\n\n\t\t\t\tif (this._eventTriggerState === true) {\n\t\t\t\t\tconst payload = { active: true };\n\t\t\t\t\tthis._fireEvent('change', payload);\n\t\t\t\t\tthis._dispatchEvent('change', payload);\n\t\t\t\t\tthis._eventTriggerState = false;\n\t\t\t\t}\n\t\t\t\t// Back scroll mode\n\t\t\t} else {\n\t\t\t\t// back scroll mode\n\t\t\t\tif (document.body.hasAttribute(this._attributeRoot) === true) {\n\t\t\t\t\tthis._disable();\n\t\t\t\t\tif (release) {\n\t\t\t\t\t\tthis._element.classList.add('release');\n\t\t\t\t\t}\n\t\t\t\t\tdocument.body.removeAttribute(this._attributeRoot);\n\t\t\t\t}\n\n\t\t\t\tif (this._eventTriggerState === false) {\n\t\t\t\t\tconst payload = { active: false };\n\t\t\t\t\tthis._fireEvent('change', payload);\n\t\t\t\t\tthis._dispatchEvent('change', payload);\n\t\t\t\t\tthis._eventTriggerState = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _getOffset(): number {\n\t\tlet offset = parseInt(this._getOption('offset') as string);\n\t\tconst activateElement = KTDom.getElement(\n\t\t\tthis._getOption('activate') as string,\n\t\t);\n\n\t\tif (activateElement) {\n\t\t\toffset = Math.abs(offset - activateElement.offsetTop);\n\t\t}\n\n\t\treturn offset;\n\t}\n\n\tprotected _enable(): boolean {\n\t\tif (!this._element) return false;\n\n\t\tlet width = this._getOption('width') as string;\n\t\tconst top = this._getOption('top') as string;\n\t\tconst start = this._getOption('start') as string;\n\t\tconst end = this._getOption('end') as string;\n\t\tconst height = this._calculateHeight();\n\t\tconst zindex = this._getOption('zindex') as string;\n\t\tconst classList = this._getOption('class') as string;\n\n\t\tif (height + parseInt(top) > KTDom.getViewPort().height) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (width) {\n\t\t\tconst targetElement = document.querySelector(width) as HTMLElement;\n\t\t\tif (targetElement) {\n\t\t\t\twidth = KTDom.getCssProp(targetElement, 'width');\n\t\t\t} else if (width == 'auto') {\n\t\t\t\twidth = KTDom.getCssProp(this._element, 'width');\n\t\t\t}\n\n\t\t\tthis._element.style.width = `${Math.round(parseFloat(width))}px`;\n\t\t}\n\n\t\tif (top) {\n\t\t\tthis._element.style.top = `${top}px`;\n\t\t}\n\n\t\tif (start) {\n\t\t\tif (start === 'auto') {\n\t\t\t\tconst offsetLeft = KTDom.offset(this._element).left;\n\t\t\t\tif (offsetLeft >= 0) {\n\t\t\t\t\tthis._element.style.insetInlineStart = `${offsetLeft}px`;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._element.style.insetInlineStart = `${start}px`;\n\t\t\t}\n\t\t}\n\n\t\tif (end) {\n\t\t\tif (end === 'auto') {\n\t\t\t\tconst offseRight = KTDom.offset(this._element).right;\n\t\t\t\tif (offseRight >= 0) {\n\t\t\t\t\tthis._element.style.insetInlineEnd = `${offseRight}px`;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._element.style.insetInlineEnd = `${end}px`;\n\t\t\t}\n\t\t}\n\n\t\tif (zindex) {\n\t\t\tthis._element.style.zIndex = zindex;\n\t\t\tthis._element.style.position = 'fixed';\n\t\t}\n\n\t\tif (classList) {\n\t\t\tKTDom.addClass(this._element, classList);\n\t\t}\n\n\t\tif (this._wrapperElement) {\n\t\t\tthis._wrapperElement.style.height = `${height}px`;\n\t\t}\n\n\t\tthis._element.classList.add('active');\n\t\tthis._element.classList.remove('release');\n\n\t\treturn true;\n\t}\n\n\tprotected _disable(): void {\n\t\tif (!this._element) return;\n\n\t\tthis._element.style.top = '';\n\t\tthis._element.style.width = '';\n\t\tthis._element.style.left = '';\n\t\tthis._element.style.right = '';\n\t\tthis._element.style.zIndex = '';\n\t\tthis._element.style.position = '';\n\n\t\tconst classList = this._getOption('class') as string;\n\n\t\tif (this._wrapperElement) {\n\t\t\tthis._wrapperElement.style.height = '';\n\t\t}\n\n\t\tif (classList) {\n\t\t\tKTDom.removeClass(this._element, classList);\n\t\t}\n\n\t\tthis._element.classList.remove('active');\n\t}\n\n\tprotected _update(): void {\n\t\tif (this._isActive()) {\n\t\t\tthis._disable();\n\t\t\tthis._enable();\n\t\t} else {\n\t\t\tthis._disable();\n\t\t}\n\t}\n\n\tprotected _calculateHeight(): number {\n\t\tif (!this._element) return 0;\n\n\t\tlet height = parseFloat(KTDom.getCssProp(this._element, 'height'));\n\t\theight += parseFloat(KTDom.getCssProp(this._element, 'margin-top'));\n\t\theight += parseFloat(KTDom.getCssProp(this._element, 'margin-bottom'));\n\n\t\tif (KTDom.getCssProp(this._element, 'border-top')) {\n\t\t\theight =\n\t\t\t\theight + parseFloat(KTDom.getCssProp(this._element, 'border-top'));\n\t\t}\n\n\t\tif (KTDom.getCssProp(this._element, 'border-bottom')) {\n\t\t\theight =\n\t\t\t\theight + parseFloat(KTDom.getCssProp(this._element, 'border-bottom'));\n\t\t}\n\n\t\treturn height;\n\t}\n\n\tprotected _isActive(): boolean {\n\t\treturn this._element.classList.contains('active');\n\t}\n\n\tpublic update(): void {\n\t\tthis._update();\n\t}\n\n\tpublic isActive(): boolean {\n\t\treturn this._isActive();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTSticky {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'sticky')) {\n\t\t\treturn KTData.get(element, 'sticky') as KTSticky;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-sticky')) {\n\t\t\treturn new KTSticky(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTStickyConfigInterface,\n\t): KTSticky {\n\t\treturn this.getInstance(element) || new KTSticky(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-sticky]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTSticky(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTSticky.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTSticky = KTSticky;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTTabs } from './tabs';\nexport type { KTTabsConfigInterface, KTTabsInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTEventHandler from '../../helpers/event-handler';\nimport KTComponent from '../component';\nimport { KTTabsInterface, KTTabsConfigInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_TABS_INITIALIZED: boolean;\n\t\tKTTabs: typeof KTTabs;\n\t}\n}\n\nexport class KTTabs extends KTComponent implements KTTabsInterface {\n\tprotected override _name: string = 'tabs';\n\tprotected override _defaultConfig: KTTabsConfigInterface = {\n\t\thiddenClass: 'hidden',\n\t};\n\tprotected override _config: KTTabsConfigInterface = this._defaultConfig;\n\tprotected _currentTabElement: HTMLElement | null = null;\n\tprotected _currentContentElement: HTMLElement | null = null;\n\tprotected _lastTabElement: HTMLElement | null = null;\n\tprotected _lastContentElement: HTMLElement | null = null;\n\tprotected _tabElements: NodeListOf<HTMLElement> | null = null;\n\tprotected _isTransitioning: boolean = false;\n\n\tconstructor(element: HTMLElement, config?: KTTabsConfigInterface) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tif (!this._element) return;\n\t\tthis._tabElements = this._element.querySelectorAll('[data-kt-tab-toggle]');\n\t\tthis._currentTabElement = this._element.querySelector(\n\t\t\t'.active[data-kt-tab-toggle]',\n\t\t);\n\t\tthis._currentContentElement =\n\t\t\t(this._currentTabElement &&\n\t\t\t\t(KTDom.getElement(\n\t\t\t\t\tthis._currentTabElement.getAttribute('data-kt-tab-toggle'),\n\t\t\t\t) ||\n\t\t\t\t\tKTDom.getElement(this._currentTabElement.getAttribute('href')))) ||\n\t\t\tnull;\n\n\t\tthis._handlers();\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._element) return;\n\n\t\tKTEventHandler.on(\n\t\t\tthis._element,\n\t\t\t'[data-kt-tab-toggle]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis._show(target);\n\t\t\t},\n\t\t);\n\t}\n\n\tprotected _show(tabElement: HTMLElement): void {\n\t\tif (this._isShown(tabElement) || this._isTransitioning) return;\n\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('show', payload);\n\t\tthis._dispatchEvent('show', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._currentTabElement?.classList.remove('active');\n\t\tthis._currentTabElement?.classList.remove('selected');\n\t\tthis._currentContentElement?.classList.add(\n\t\t\tthis._getOption('hiddenClass') as string,\n\t\t);\n\t\tthis._lastTabElement = this._currentTabElement;\n\t\tthis._getDropdownToggleElement(this._lastTabElement)?.classList.remove(\n\t\t\t'active',\n\t\t);\n\n\t\tthis._lastContentElement = this._currentContentElement;\n\t\tthis._currentTabElement = tabElement;\n\t\tthis._currentContentElement =\n\t\t\tKTDom.getElement(tabElement.getAttribute('data-kt-tab-toggle')) ||\n\t\t\tKTDom.getElement(tabElement.getAttribute('href'));\n\t\tthis._currentTabElement?.classList.add('active');\n\t\tthis._currentTabElement?.classList.add('selected');\n\t\tthis._currentContentElement?.classList.remove(\n\t\t\tthis._getOption('hiddenClass') as string,\n\t\t);\n\t\tthis._getDropdownToggleElement(this._currentTabElement)?.classList.add(\n\t\t\t'active',\n\t\t);\n\n\t\tthis._currentContentElement.style.opacity = '0';\n\t\tKTDom.reflow(this._currentContentElement);\n\t\tthis._currentContentElement.style.opacity = '1';\n\n\t\tKTDom.transitionEnd(this._currentContentElement, () => {\n\t\t\tthis._isTransitioning = false;\n\t\t\tthis._currentContentElement.style.opacity = '';\n\n\t\t\tthis._fireEvent('shown');\n\t\t\tthis._dispatchEvent('shown');\n\t\t});\n\t}\n\n\tprotected _getDropdownToggleElement(element: HTMLElement): HTMLElement {\n\t\tconst containerElement = element.closest(\n\t\t\t'[data-kt-dropdown-initialized],[data-kt-menu-initialized]',\n\t\t) as HTMLElement;\n\n\t\tif (containerElement) {\n\t\t\treturn containerElement.querySelector(\n\t\t\t\t'[data-kt-dropdown-toggle], [data-kt-menu-toggle]',\n\t\t\t);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprotected _isShown(tabElement: HTMLElement): boolean {\n\t\treturn tabElement.classList.contains('active');\n\t}\n\n\tpublic isShown(tabElement: HTMLElement): boolean {\n\t\treturn this._isShown(tabElement);\n\t}\n\n\tpublic show(tabElement: HTMLElement): void {\n\t\treturn this._show(tabElement);\n\t}\n\n\tpublic static keyboardArrow(): void {}\n\n\tpublic static keyboardJump(): void {}\n\n\tpublic static handleAccessibility(): void {}\n\n\tpublic static getInstance(element: HTMLElement): KTTabs {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'tabs')) {\n\t\t\treturn KTData.get(element, 'tabs') as KTTabs;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-tabs')) {\n\t\t\treturn new KTTabs(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTTabsConfigInterface,\n\t): KTTabs {\n\t\treturn this.getInstance(element) || new KTTabs(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-tabs]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTTabs(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTTabs.createInstances();\n\n\t\tif (window.KT_TABS_INITIALIZED !== true) {\n\t\t\tKTTabs.handleAccessibility();\n\t\t\twindow.KT_TABS_INITIALIZED = true;\n\t\t}\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTTabs = KTTabs;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTThemeSwitch } from './theme-switch';\nexport type {\n\tKTThemeSwitchConfigInterface,\n\tKTThemeSwitchInterface,\n} from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n/* eslint-disable max-len */\n/* eslint-disable require-jsdoc */\n\nimport KTData from '../../helpers/data';\nimport KTEventHandler from '../../helpers/event-handler';\nimport KTComponent from '../component';\nimport { KTThemeSwitchInterface, KTThemeSwitchConfigInterface } from './types';\nimport { KTThemeSwitchModeType } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_STICKY_INITIALIZED: boolean;\n\t\tKTThemeSwitch: typeof KTThemeSwitch;\n\t}\n}\n\nexport class KTThemeSwitch\n\textends KTComponent\n\timplements KTThemeSwitchInterface\n{\n\tprotected override _name: string = 'theme-swtich';\n\tprotected override _defaultConfig: KTThemeSwitchConfigInterface = {\n\t\tmode: 'light',\n\t};\n\tprotected _mode: KTThemeSwitchModeType | null = null;\n\tprotected _currentMode: KTThemeSwitchModeType | null = null;\n\n\tconstructor(\n\t\telement: HTMLElement | HTMLHtmlElement,\n\t\tconfig: KTThemeSwitchConfigInterface | null = null,\n\t) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement | HTMLHtmlElement, this._name))\n\t\t\treturn;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\t\tthis._setMode(\n\t\t\t(localStorage.getItem('kt-theme') ||\n\t\t\t\tthis._getOption('mode')) as KTThemeSwitchModeType,\n\t\t);\n\t\tthis._handlers();\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._element) return;\n\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-theme-switch-toggle]',\n\t\t\t'click',\n\t\t\t() => {\n\t\t\t\tthis._toggle();\n\t\t\t},\n\t\t);\n\n\t\tKTEventHandler.on(\n\t\t\tdocument.body,\n\t\t\t'[data-kt-theme-switch-set]',\n\t\t\t'click',\n\t\t\t(event: Event, target: HTMLElement) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst mode = target.getAttribute(\n\t\t\t\t\t'data-kt-theme-switch-set',\n\t\t\t\t) as KTThemeSwitchModeType;\n\t\t\t\tthis._setMode(mode);\n\t\t\t},\n\t\t);\n\t}\n\n\tprotected _toggle() {\n\t\tconst mode = this._currentMode === 'light' ? 'dark' : 'light';\n\n\t\tthis._setMode(mode);\n\t}\n\n\tprotected _setMode(mode: KTThemeSwitchModeType): void {\n\t\tif (!this._element) return;\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('change', payload);\n\t\tthis._dispatchEvent('change', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet currentMode: KTThemeSwitchModeType = mode;\n\t\tif (mode === 'system') {\n\t\t\tcurrentMode = this._getSystemMode();\n\t\t}\n\n\t\tthis._mode = mode;\n\t\tthis._currentMode = currentMode;\n\t\tthis._bindMode();\n\t\tthis._updateState();\n\t\tlocalStorage.setItem('kt-theme', this._mode);\n\t\tthis._element.setAttribute('data-kt-theme-switch-mode', mode);\n\n\t\tthis._fireEvent('changed', {});\n\t\tthis._dispatchEvent('changed', {});\n\t}\n\n\tprotected _getMode(): KTThemeSwitchModeType {\n\t\treturn (\n\t\t\t(localStorage.getItem('kt-theme') as KTThemeSwitchModeType) || this._mode\n\t\t);\n\t}\n\n\tprotected _getSystemMode(): KTThemeSwitchModeType {\n\t\treturn window.matchMedia('(prefers-color-scheme: dark)').matches\n\t\t\t? 'dark'\n\t\t\t: 'light';\n\t}\n\n\tprotected _bindMode(): void {\n\t\tif (!this._currentMode || !this._element) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._element.classList.remove('dark');\n\t\tthis._element.classList.remove('light');\n\t\tthis._element.removeAttribute(this._getOption('attribute') as string);\n\t\tthis._element.classList.add(this._currentMode);\n\t}\n\n\tprotected _updateState() {\n\t\tconst elements = document.querySelectorAll<HTMLInputElement>(\n\t\t\t'input[type=\"checkbox\"][data-kt-theme-switch-state]',\n\t\t);\n\t\telements.forEach((element) => {\n\t\t\tif (element.getAttribute('data-kt-theme-switch-state') === this._mode) {\n\t\t\t\telement.checked = true;\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic getMode(): KTThemeSwitchModeType {\n\t\treturn this._getMode();\n\t}\n\n\tpublic setMode(mode: KTThemeSwitchModeType) {\n\t\tthis.setMode(mode);\n\t}\n\n\tpublic static getInstance(): KTThemeSwitch {\n\t\tconst root = document.documentElement;\n\n\t\tif (KTData.has(root, 'theme-switch')) {\n\t\t\treturn KTData.get(root, 'theme-switch') as KTThemeSwitch;\n\t\t}\n\n\t\tif (root) {\n\t\t\treturn new KTThemeSwitch(root);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst root = document.documentElement;\n\t\tif (root) new KTThemeSwitch(root);\n\t}\n\n\tpublic static init(): void {\n\t\tKTThemeSwitch.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTThemeSwitch = KTThemeSwitch;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTToast } from './toast';\nexport type { KTToastConfigInterface, KTToastInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTComponent from '../component';\nimport KTData from '../../helpers/data';\nimport {\n\tKTToastOptions,\n\tKTToastConfig,\n\tKTToastInstance,\n\tKTToastPosition,\n} from './types';\n\nconst DEFAULT_CONFIG: KTToastConfig = {\n\tposition: 'top-end',\n\tduration: 4000,\n\tclassName: '',\n\tmaxToasts: 5,\n\toffset: 15,\n\tgap: 10,\n};\n\nconst DEFAULT_TOAST_OPTIONS: KTToastOptions = {\n\tappearance: 'solid',\n\tprogress: false,\n\tsize: 'md',\n\taction: false,\n\tcancel: false,\n\tdismiss: true,\n};\n\nimport type { KTToastConfigInterface, KTToastInterface } from './types';\n\nexport class KTToast extends KTComponent implements KTToastInterface {\n\tprotected override _name: string = 'toast';\n\tprotected override _defaultConfig: KTToastConfigInterface = DEFAULT_CONFIG;\n\tprotected override _config: KTToastConfigInterface = DEFAULT_CONFIG;\n\tprotected _defaultToastOptions: KTToastOptions = DEFAULT_TOAST_OPTIONS;\n\tprivate static containerMap: Map<KTToastPosition, HTMLElement> = new Map();\n\tprivate static toasts: Map<string, KTToastInstance> = new Map();\n\tprivate static globalConfig: KTToastConfig = { ...DEFAULT_CONFIG };\n\n\t/**\n\t * Creates a new KTToast instance for a specific element (not commonly used; most use static API).\n\t * @param element The target HTML element.\n\t * @param config Optional toast config for this instance.\n\t */\n\tconstructor(element: HTMLElement, config?: Partial<KTToastConfigInterface>) {\n\t\tsuper();\n\t\tif (KTData.has(element, this._name)) return;\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\t\tKTData.set(element, this._name, this);\n\t}\n\n\t/**\n\t * Generates the HTML content for a toast based on the provided options.\n\t * @param options Toast options (message, icon, actions, etc).\n\t * @returns The toast's HTML markup as a string.\n\t */\n\tstatic getContent(options?: KTToastOptions) {\n\t\tconst classNames = {\n\t\t\t...((this.globalConfig.classNames as any) || {}),\n\t\t\t...((options?.classNames as any) || {}),\n\t\t};\n\n\t\tif (options?.content) {\n\t\t\tif (typeof options.content === 'string') {\n\t\t\t\treturn options.content;\n\t\t\t} else if (typeof options.content === 'function') {\n\t\t\t\tconst node = options.content();\n\t\t\t\tif (node instanceof HTMLElement) {\n\t\t\t\t\treturn node.outerHTML;\n\t\t\t\t}\n\t\t\t} else if (options.content instanceof HTMLElement) {\n\t\t\t\treturn options.content.outerHTML;\n\t\t\t}\n\t\t}\n\n\t\tlet template = '';\n\n\t\tif (options?.icon) {\n\t\t\ttemplate +=\n\t\t\t\t'<div class=\"kt-alert-icon ' +\n\t\t\t\t(classNames.icon || '') +\n\t\t\t\t'\">' +\n\t\t\t\toptions.icon +\n\t\t\t\t'</div>';\n\t\t}\n\n\t\tif (options?.message) {\n\t\t\ttemplate +=\n\t\t\t\t'<div class=\"kt-alert-title ' +\n\t\t\t\t(classNames.message || '') +\n\t\t\t\t'\">' +\n\t\t\t\toptions.message +\n\t\t\t\t'</div>';\n\t\t}\n\n\t\tif (\n\t\t\toptions?.action !== false ||\n\t\t\toptions?.dismiss !== false ||\n\t\t\toptions?.cancel !== false\n\t\t) {\n\t\t\ttemplate +=\n\t\t\t\t'<div class=\"kt-alert-toolbar ' + (classNames.toolbar || '') + '\">';\n\t\t\ttemplate +=\n\t\t\t\t'<div class=\"kt-alert-actions ' + (classNames.actions || '') + '\">';\n\n\t\t\tif (options?.action && typeof options.action === 'object') {\n\t\t\t\ttemplate +=\n\t\t\t\t\t'<button data-kt-toast-action=\"true\" class=\"' +\n\t\t\t\t\t(options.action.className || '') +\n\t\t\t\t\t'\">' +\n\t\t\t\t\toptions.action.label +\n\t\t\t\t\t'</button>';\n\t\t\t}\n\n\t\t\tif (options?.cancel && typeof options.cancel === 'object') {\n\t\t\t\ttemplate +=\n\t\t\t\t\t'<button data-kt-toast-cancel=\"true\" class=\"' +\n\t\t\t\t\t(options.cancel.className || '') +\n\t\t\t\t\t'\">' +\n\t\t\t\t\toptions.cancel.label +\n\t\t\t\t\t'</button>';\n\t\t\t}\n\n\t\t\tif (options?.dismiss !== false) {\n\t\t\t\ttemplate +=\n\t\t\t\t\t'<button data-kt-toast-dismiss=\"true\" class=\"kt-alert-close\"><svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 6 6 18\"/><path d=\"m6 6 12 12\"/></svg></button>';\n\t\t\t}\n\n\t\t\ttemplate += '</div>';\n\t\t\ttemplate += '</div>';\n\t\t}\n\n\t\ttemplate += '</div>';\n\n\t\treturn template;\n\t}\n\n\t/**\n\t * Update all toasts in the container with smooth animation.\n\t *\n\t * @param container The toast container element.\n\t * @param offset Optional offset from the edge.\n\t */\n\tstatic update(container: HTMLElement | null, offset?: number) {\n\t\tif (!container) return;\n\t\toffset =\n\t\t\ttypeof offset === 'number' ? offset : (this.globalConfig.offset ?? 15);\n\t\trequestAnimationFrame(() => {\n\t\t\tconst gap = this.globalConfig.gap ?? 8;\n\t\t\t// Group toasts by alignment (top/bottom)\n\t\t\tconst positionGroups: Record<string, HTMLElement[]> = {\n\t\t\t\ttop: [],\n\t\t\t\tbottom: [],\n\t\t\t};\n\t\t\tconst toasts = Array.from(container.children) as HTMLElement[];\n\t\t\ttoasts.forEach((toast) => {\n\t\t\t\tif (\n\t\t\t\t\ttoast.classList.contains('kt-toast-top-end') ||\n\t\t\t\t\ttoast.classList.contains('kt-toast-top-center') ||\n\t\t\t\t\ttoast.classList.contains('kt-toast-top-start')\n\t\t\t\t) {\n\t\t\t\t\tpositionGroups.top.push(toast);\n\t\t\t\t} else {\n\t\t\t\t\tpositionGroups.bottom.push(toast);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Stack top toasts from the top down\n\t\t\tlet currentOffset = offset;\n\t\t\tpositionGroups.top.forEach((toast) => {\n\t\t\t\ttoast.style.top = `${currentOffset}px`;\n\t\t\t\ttoast.style.bottom = '';\n\t\t\t\ttoast.style.transition =\n\t\t\t\t\t'top 0.28s cubic-bezier(.4,0,.2,1), opacity 0.28s cubic-bezier(.4,0,.2,1)';\n\t\t\t\tcurrentOffset += toast.offsetHeight + gap;\n\n\t\t\t\tif (toast.classList.contains('kt-toast-top-start')) {\n\t\t\t\t\ttoast.style.insetInlineStart = `${offset}px`;\n\t\t\t\t}\n\n\t\t\t\tif (toast.classList.contains('kt-toast-top-end')) {\n\t\t\t\t\ttoast.style.insetInlineEnd = `${offset}px`;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Stack bottom toasts from the bottom up\n\t\t\tcurrentOffset = offset;\n\t\t\tfor (let i = positionGroups.bottom.length - 1; i >= 0; i--) {\n\t\t\t\tconst toast = positionGroups.bottom[i];\n\t\t\t\ttoast.style.bottom = `${currentOffset}px`;\n\t\t\t\ttoast.style.top = '';\n\t\t\t\ttoast.style.transition =\n\t\t\t\t\t'bottom 0.28s cubic-bezier(.4,0,.2,1), opacity 0.28s cubic-bezier(.4,0,.2,1)';\n\t\t\t\tcurrentOffset += toast.offsetHeight + gap;\n\n\t\t\t\tif (toast.classList.contains('kt-toast-bottom-start')) {\n\t\t\t\t\ttoast.style.insetInlineStart = `${offset}px`;\n\t\t\t\t}\n\n\t\t\t\tif (toast.classList.contains('kt-toast-bottom-end')) {\n\t\t\t\t\ttoast.style.insetInlineEnd = `${offset}px`;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Set global toast configuration options.\n\t * @param options Partial toast config to merge with global config.\n\t */\n\tstatic config(options: Partial<KTToastConfig>) {\n\t\tthis.globalConfig = { ...this.globalConfig, ...options };\n\t}\n\n\t/**\n\t * Show a toast notification.\n\t * @param inputOptions Toast options (message, duration, variant, etc).\n\t * @returns Toast instance with dismiss method, or undefined if invalid input.\n\t */\n\tstatic show(\n\t\tinputOptions?: KTToastOptions,\n\t): (KTToastInstance & { dismiss: () => void }) | undefined {\n\t\tconst options = { ...DEFAULT_TOAST_OPTIONS, ...inputOptions };\n\n\t\tif (!options || (!options.message && !options.content)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Always resolve the id once and use it everywhere\n\t\tconst id = `kt-toast-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n\n\t\tconst position =\n\t\t\toptions.position || this.globalConfig.position || 'top-end';\n\n\t\tconst classNames = {\n\t\t\t...((this.globalConfig.classNames as any) || {}),\n\t\t\t...((options.classNames as any) || {}),\n\t\t};\n\n\t\tlet container = this.containerMap.get(position);\n\n\t\tif (!container) {\n\t\t\tcontainer = document.createElement('div');\n\t\t\tconst classNames = {\n\t\t\t\t...((this.globalConfig.classNames as any) || {}),\n\t\t\t\t...((options.classNames as any) || {}),\n\t\t\t};\n\t\t\t// Fallback to default hardcoded classes if not provided in options or globalConfig\n\t\t\tcontainer.className =\n\t\t\t\tclassNames.container || `kt-toast-container ${position}`;\n\t\t\tdocument.body.appendChild(container);\n\t\t\tthis.containerMap.set(position, container);\n\t\t}\n\n\t\t// Enforce maxToasts\n\t\tif (\n\t\t\tcontainer.children.length >=\n\t\t\t(this.globalConfig.maxToasts || DEFAULT_CONFIG.maxToasts)\n\t\t) {\n\t\t\tconst firstToast = container.firstElementChild;\n\t\t\tif (firstToast) {\n\t\t\t\tfirstToast.classList.add('kt-toast-closing');\n\t\t\t\tfirstToast.addEventListener('animationend', () => {\n\t\t\t\t\tfirstToast.remove();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Create toast element\n\t\tconst variantMap = {\n\t\t\tinfo: 'kt-alert-info',\n\t\t\tsuccess: 'kt-alert-success',\n\t\t\terror: 'kt-alert-error',\n\t\t\twarning: 'kt-alert-warning',\n\t\t\tprimary: 'kt-alert-primary',\n\t\t\tsecondary: 'kt-alert-secondary',\n\t\t\tdestructive: 'kt-alert-destructive',\n\t\t\tmono: 'kt-alert-mono',\n\t\t};\n\n\t\tconst appearanceMap = {\n\t\t\tsolid: 'kt-alert-solid',\n\t\t\toutline: 'kt-alert-outline',\n\t\t\tlight: 'kt-alert-light',\n\t\t};\n\n\t\tconst sizeMap = {\n\t\t\tsm: 'kt-alert-sm',\n\t\t\tmd: 'kt-alert-md',\n\t\t\tlg: 'kt-alert-lg',\n\t\t};\n\n\t\tconst toast = document.createElement('div');\n\t\ttoast.className = `kt-toast kt-alert ${variantMap[options.variant] || ''} ${appearanceMap[options.appearance] || ''} ${sizeMap[options.size] || ''} ${options.className || ''} ${classNames.toast || ''}`;\n\t\t// ARIA support\n\t\ttoast.setAttribute('role', options.role || 'status');\n\t\ttoast.setAttribute('aria-live', 'polite');\n\t\ttoast.setAttribute('aria-atomic', 'true');\n\t\ttoast.setAttribute('tabindex', '0');\n\n\t\t// Always resolve the id once and use it everywhere\n\t\t// Always resolve id ONCE at the top, use everywhere\n\t\t// (Move this up to replace the previous const id = ... assignment)\n\n\t\t// Populate content via getContent\n\t\tconst contentHtml = KTToast.getContent(options);\n\t\ttoast.innerHTML = contentHtml;\n\n\t\t// Assign event handlers to buttons by data attribute\n\t\tconst actionBtn = toast.querySelector(\n\t\t\t'[data-kt-toast-action]',\n\t\t) as HTMLButtonElement | null;\n\n\t\tif (\n\t\t\tactionBtn &&\n\t\t\toptions.action &&\n\t\t\ttypeof options.action === 'object' &&\n\t\t\toptions.action.onClick\n\t\t) {\n\t\t\tactionBtn.addEventListener('click', (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tif (typeof options.action === 'object' && options.action.onClick) {\n\t\t\t\t\toptions.action.onClick(id);\n\t\t\t\t\tKTToast.close(id);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst cancelBtn = toast.querySelector(\n\t\t\t'[data-kt-toast-cancel]',\n\t\t) as HTMLButtonElement | null;\n\n\t\tif (cancelBtn && options.cancel && typeof options.cancel === 'object') {\n\t\t\tcancelBtn.addEventListener('click', (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tif (typeof options.cancel === 'object' && options.cancel.onClick) {\n\t\t\t\t\toptions.cancel.onClick(id);\n\t\t\t\t\tKTToast.close(id);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Dismiss button handler\n\t\tconst dismissBtn = toast.querySelector(\n\t\t\t'[data-kt-toast-dismiss]',\n\t\t) as HTMLButtonElement | null;\n\n\t\tif (dismissBtn && options.dismiss !== false) {\n\t\t\tdismissBtn.addEventListener('click', (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tKTToast.close(id);\n\t\t\t});\n\t\t}\n\n\t\t// If modal-like, set aria-modal\n\t\tif (options.important) toast.setAttribute('aria-modal', 'true');\n\t\ttoast.style.pointerEvents = 'auto';\n\n\t\t// Progress line\n\t\tconst duration = options.important\n\t\t\t? null\n\t\t\t: (options.duration ??\n\t\t\t\tthis.globalConfig.duration ??\n\t\t\t\tDEFAULT_CONFIG.duration);\n\n\t\tif (duration && options.progress) {\n\t\t\tconst progress = document.createElement('div');\n\t\t\tprogress.className = 'kt-toast-progress ' + (classNames.progress || '');\n\t\t\tprogress.style.animationDuration = duration + 'ms';\n\t\t\tprogress.setAttribute('data-kt-toast-progress', 'true');\n\t\t\ttoast.appendChild(progress);\n\t\t}\n\n\t\t// Assign direction class to the toast itself, not the container\n\t\tconst directionClassMap: Record<string, string> = {\n\t\t\t'top-end': 'kt-toast-top-end',\n\t\t\t'top-center': 'kt-toast-top-center',\n\t\t\t'top-start': 'kt-toast-top-start',\n\t\t\t'bottom-end': 'kt-toast-bottom-end',\n\t\t\t'bottom-center': 'kt-toast-bottom-center',\n\t\t\t'bottom-start': 'kt-toast-bottom-start',\n\t\t};\n\t\tObject.values(directionClassMap).forEach((cls) =>\n\t\t\ttoast.classList.remove(cls),\n\t\t);\n\t\tconst dirClass = directionClassMap[position] || 'kt-toast-top-end';\n\t\ttoast.classList.add(dirClass);\n\n\t\t// Enforce maxToasts: remove oldest if needed\n\t\tconst maxToasts =\n\t\t\toptions.maxToasts ??\n\t\t\tthis.globalConfig.maxToasts ??\n\t\t\tDEFAULT_CONFIG.maxToasts;\n\t\tconst currentToasts = Array.from(container.children) as HTMLElement[];\n\t\tif (currentToasts.length >= maxToasts && currentToasts.length > 0) {\n\t\t\tconst oldestToast = currentToasts[currentToasts.length - 1];\n\t\t\tconst oldestId = oldestToast.getAttribute('data-kt-toast-id');\n\t\t\tif (oldestId) {\n\t\t\t\tKTToast.close(oldestId);\n\t\t\t} else {\n\t\t\t\toldestToast.remove();\n\t\t\t}\n\t\t}\n\n\t\t// Insert toast at the top\n\t\tcontainer.insertBefore(toast, container.firstChild);\n\t\tKTToast.update(container);\n\n\t\t// Play beep if requested\n\t\tif (options.beep) {\n\t\t\ttry {\n\t\t\t\t// Use Web Audio API for a short beep\n\t\t\t\tconst ctx = new (window.AudioContext ||\n\t\t\t\t\t(window as any).webkitAudioContext)();\n\t\t\t\tconst o = ctx.createOscillator();\n\t\t\t\tconst g = ctx.createGain();\n\t\t\t\to.type = 'sine';\n\t\t\t\to.frequency.value = 880;\n\t\t\t\tg.gain.value = 0.09;\n\t\t\t\to.connect(g);\n\t\t\t\tg.connect(ctx.destination);\n\t\t\t\to.start();\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\to.stop();\n\t\t\t\t\tctx.close();\n\t\t\t\t}, 120);\n\t\t\t} catch (e) {\n\t\t\t\t/* ignore */\n\t\t\t}\n\t\t}\n\n\t\tKTToast._fireEventOnElement(toast, 'show', { id });\n\t\tKTToast._dispatchEventOnElement(toast, 'show', { id });\n\t\tconst instance: KTToastInstance = { id, element: toast, timeoutId: 0 };\n\t\tKTToast.toasts.set(id, instance);\n\n\t\t// Auto-dismiss\n\t\tlet timeoutId: number | undefined = undefined;\n\t\tlet remaining = duration;\n\t\tlet startTime: number | undefined;\n\t\tlet paused = false;\n\t\tlet progressEl: HTMLElement | null = null;\n\t\tif (duration) {\n\t\t\tconst startTimer = (ms: number) => {\n\t\t\t\tstartTime = Date.now();\n\t\t\t\ttimeoutId = window.setTimeout(() => {\n\t\t\t\t\toptions.onAutoClose?.(id);\n\t\t\t\t\tKTToast.close(id);\n\t\t\t\t}, ms);\n\t\t\t\tinstance.timeoutId = timeoutId;\n\t\t\t};\n\t\t\tstartTimer(duration);\n\n\t\t\tif (options.pauseOnHover) {\n\t\t\t\tprogressEl = toast.querySelector('[data-kt-toast-progress]');\n\t\t\t\tlet progressPausedAt = 0;\n\t\t\t\tconst pause = () => {\n\t\t\t\t\tif (!paused && timeoutId) {\n\t\t\t\t\t\tpaused = true;\n\t\t\t\t\t\twindow.clearTimeout(timeoutId);\n\t\t\t\t\t\tif (startTime) {\n\t\t\t\t\t\t\tremaining -= Date.now() - startTime;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Pause progress bar\n\t\t\t\t\t\tif (progressEl) {\n\t\t\t\t\t\t\tconst computedStyle = window.getComputedStyle(progressEl);\n\t\t\t\t\t\t\tconst matrix = computedStyle.transform;\n\t\t\t\t\t\t\tlet scaleX = 1;\n\t\t\t\t\t\t\tif (matrix && matrix !== 'none') {\n\t\t\t\t\t\t\t\tconst values = matrix.match(/matrix\\(([^)]+)\\)/);\n\t\t\t\t\t\t\t\tif (values && values[1]) {\n\t\t\t\t\t\t\t\t\tscaleX = parseFloat(values[1].split(',')[0]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprogressPausedAt = scaleX;\n\t\t\t\t\t\t\tprogressEl.style.animation = 'none';\n\t\t\t\t\t\t\tprogressEl.style.transition = 'none';\n\t\t\t\t\t\t\tprogressEl.style.transform = `scaleX(${scaleX})`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst resume = () => {\n\t\t\t\t\tif (paused && remaining > 0) {\n\t\t\t\t\t\tpaused = false;\n\t\t\t\t\t\tstartTimer(remaining);\n\t\t\t\t\t\t// Resume progress bar\n\t\t\t\t\t\tif (progressEl) {\n\t\t\t\t\t\t\tprogressEl.style.transition = 'transform 0ms';\n\t\t\t\t\t\t\tprogressEl.style.transform = `scaleX(${progressPausedAt})`;\n\t\t\t\t\t\t\tprogressEl.offsetHeight; // force reflow\n\t\t\t\t\t\t\tprogressEl.style.transition = `transform ${remaining}ms linear`;\n\t\t\t\t\t\t\tprogressEl.style.transform = 'scaleX(0)';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\ttoast.addEventListener('mouseenter', pause);\n\t\t\t\ttoast.addEventListener('mouseleave', resume);\n\t\t\t}\n\t\t}\n\n\t\tKTToast._fireEventOnElement(toast, 'shown', { id });\n\t\tKTToast._dispatchEventOnElement(toast, 'shown', { id });\n\n\t\treturn {\n\t\t\t...instance,\n\t\t\tdismiss: () => KTToast.close(id),\n\t\t};\n\t}\n\n\t/**\n\t * Close and remove all active toasts.\n\t */\n\tstatic clearAll() {\n\t\tfor (const id of Array.from(this.toasts.keys())) {\n\t\t\tconsole.log('clearAll:', id);\n\t\t\tthis.close(id);\n\t\t}\n\t}\n\n\t/**\n\t * Close a toast by ID or instance.\n\t * @param idOrInstance Toast ID string or KTToastInstance.\n\t */\n\tstatic close(idOrInstance?: string | KTToastInstance) {\n\t\tlet inst: (KTToastInstance & { _closing?: boolean }) | undefined;\n\t\tlet id: string | undefined;\n\t\tif (!idOrInstance) return;\n\t\tif (typeof idOrInstance === 'string') {\n\t\t\tid = idOrInstance;\n\t\t\tinst = this.toasts.get(id);\n\t\t} else if (typeof idOrInstance === 'object' && idOrInstance.id) {\n\t\t\tid = idOrInstance.id;\n\t\t\tinst = idOrInstance as KTToastInstance & { _closing?: boolean };\n\t\t}\n\n\t\tif (!inst || !id) return;\n\t\tif (inst._closing) return; // Prevent double-close\n\t\tinst._closing = true;\n\n\t\tclearTimeout(inst.timeoutId);\n\n\t\tKTToast._fireEventOnElement(inst.element, 'hide', { id });\n\t\tKTToast._dispatchEventOnElement(inst.element, 'hide', { id });\n\t\t// Remove progress bar instantly if present\n\t\tconst progressEl = inst.element.querySelector('[data-kt-toast-progress]');\n\t\tif (progressEl) progressEl.remove();\n\t\tinst.element.style.animation = 'kt-toast-out 0.25s forwards';\n\n\t\tsetTimeout(() => {\n\t\t\tconst parent = inst?.element.parentElement as HTMLElement | null;\n\t\t\tinst?.element.remove();\n\t\t\tKTToast.toasts.delete(id!);\n\t\t\t// Try to call onDismiss if available in the toast instance (if stored)\n\t\t\tif (typeof (inst as any).options?.onDismiss === 'function') {\n\t\t\t\t(inst as any).options.onDismiss(id);\n\t\t\t}\n\t\t\tKTToast._fireEventOnElement(inst.element, 'hidden', { id });\n\t\t\tKTToast._dispatchEventOnElement(inst.element, 'hidden', { id });\n\t\t\t// update toasts asynchronously after DOM update\n\t\t\tsetTimeout(() => {\n\t\t\t\tKTToast.update(parent);\n\t\t\t}, 0);\n\t\t}, 250);\n\t}\n\n\t/**\n\t * Dispatches a custom 'kt.toast.{eventType}' event on the given element.\n\t * @param element The toast element.\n\t * @param eventType The event type (e.g. 'show', 'hide').\n\t * @param payload Optional event detail payload.\n\t */\n\tprivate static _fireEventOnElement(\n\t\telement: HTMLElement,\n\t\teventType: string,\n\t\tpayload?: object,\n\t) {\n\t\tconst event = new CustomEvent(`kt.toast.${eventType}`, { detail: payload });\n\t\telement.dispatchEvent(event);\n\t}\n\n\t/**\n\t * Dispatches a custom event (not namespaced) on the given element.\n\t * @param element The toast element.\n\t * @param eventType The event type.\n\t * @param payload Optional event detail payload.\n\t */\n\tprivate static _dispatchEventOnElement(\n\t\telement: HTMLElement,\n\t\teventType: string,\n\t\tpayload?: object,\n\t) {\n\t\tconst event = new CustomEvent(eventType, { detail: payload });\n\t\telement.dispatchEvent(event);\n\t}\n\n\t/**\n\t * Initialize toast system (placeholder for future use).\n\t */\n\tpublic static init(): void {}\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTTogglePassword } from './toggle-password';\nexport type {\n\tKTTogglePasswordConfigInterface,\n\tKTTogglePasswordInterface,\n} from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTComponent from '../component';\nimport {\n\tKTTogglePasswordConfigInterface,\n\tKTTogglePasswordInterface,\n} from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKTTogglePassword: typeof KTTogglePassword;\n\t}\n}\n\nexport class KTTogglePassword\n\textends KTComponent\n\timplements KTTogglePasswordInterface\n{\n\tprotected override _name: string = 'toggle-password';\n\tprotected override _defaultConfig: KTTogglePasswordConfigInterface = {\n\t\tpermanent: false,\n\t};\n\tprotected override _config: KTTogglePasswordConfigInterface =\n\t\tthis._defaultConfig;\n\tprotected _triggerElement: HTMLElement;\n\tprotected _inputElement: HTMLInputElement;\n\n\tconstructor(\n\t\telement: HTMLElement,\n\t\tconfig: KTTogglePasswordConfigInterface | null = null,\n\t) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tthis._triggerElement = this._element.querySelector(\n\t\t\t'[data-kt-toggle-password-trigger]',\n\t\t);\n\t\tthis._inputElement = this._element.querySelector('input');\n\n\t\tif (!this._triggerElement || !this._inputElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handlers();\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._element) return;\n\n\t\tthis._triggerElement.addEventListener('click', () => {\n\t\t\tthis._toggle();\n\t\t});\n\n\t\tthis._inputElement.addEventListener('input', () => {\n\t\t\tthis._update();\n\t\t});\n\t}\n\n\tprotected _toggle(): void {\n\t\tif (!this._element) return;\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('toggle', payload);\n\t\tthis._dispatchEvent('toggle', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isVisible()) {\n\t\t\tthis._element.classList.remove('active');\n\t\t\tthis._setVisible(false);\n\t\t} else {\n\t\t\tthis._element.classList.add('active');\n\t\t\tthis._setVisible(true);\n\t\t}\n\n\t\tthis._fireEvent('toggled');\n\t\tthis._dispatchEvent('toggled');\n\t}\n\n\tprotected _update(): void {\n\t\tif (!this._element) return;\n\n\t\tif ((this._getOption('permanent') as boolean) === false) {\n\t\t\tif (this._isVisible()) {\n\t\t\t\tthis._setVisible(false);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _isVisible(): boolean {\n\t\treturn this._inputElement.getAttribute('type') === 'text';\n\t}\n\n\tpublic _setVisible(flag: boolean) {\n\t\tif (flag) {\n\t\t\tthis._inputElement.setAttribute('type', 'text');\n\t\t} else {\n\t\t\tthis._inputElement.setAttribute('type', 'password');\n\t\t}\n\t}\n\n\tpublic toggle(): void {\n\t\tthis._toggle();\n\t}\n\n\tpublic setVisible(flag: boolean): void {\n\t\tthis._setVisible(flag);\n\t}\n\n\tpublic isVisible(): boolean {\n\t\treturn this._isVisible();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTTogglePassword {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'toggle-password')) {\n\t\t\treturn KTData.get(element, 'toggle-password') as KTTogglePassword;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-toggle-password')) {\n\t\t\treturn new KTTogglePassword(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTTogglePasswordConfigInterface,\n\t): KTTogglePassword {\n\t\treturn this.getInstance(element) || new KTTogglePassword(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-toggle-password]');\n\n\t\telements.forEach((element) => {\n\t\t\tnew KTTogglePassword(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTTogglePassword.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTTogglePassword = KTTogglePassword;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTToggle } from './toggle';\nexport type { KTToggleConfigInterface, KTToggleInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTComponent from '../component';\nimport { KTToggleConfigInterface, KTToggleInterface } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKTToggle: typeof KTToggle;\n\t}\n}\n\nexport class KTToggle extends KTComponent implements KTToggleInterface {\n\tprotected override _name: string = 'toggle';\n\tprotected override _defaultConfig: KTToggleConfigInterface = {\n\t\ttarget: '',\n\t\tactiveClass: 'active',\n\t\tclass: '',\n\t\tremoveClass: '',\n\t\tattribute: '',\n\t};\n\tprotected override _config: KTToggleConfigInterface = this._defaultConfig;\n\tprotected _targetElement: HTMLElement;\n\n\tconstructor(\n\t\telement: HTMLElement,\n\t\tconfig: KTToggleConfigInterface | null = null,\n\t) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tthis._targetElement = this._getTargetElement();\n\t\tif (!this._targetElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handlers();\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._element) return;\n\n\t\tthis._element.addEventListener('click', () => {\n\t\t\tthis._toggle();\n\t\t});\n\t}\n\n\tprivate _getTargetElement(): HTMLElement | null {\n\t\treturn (\n\t\t\tKTDom.getElement(\n\t\t\t\tthis._element.getAttribute('data-kt-toggle') as string,\n\t\t\t) || KTDom.getElement(this._getOption('target') as string)\n\t\t);\n\t}\n\n\tprotected _toggle(): void {\n\t\tif (!this._element) return;\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('toggle', payload);\n\t\tthis._dispatchEvent('toggle', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._element.classList.toggle(this._getOption('activeClass') as string);\n\t\tthis._update();\n\n\t\tthis._fireEvent('toggled');\n\t\tthis._dispatchEvent('toggled');\n\t}\n\n\tprotected _update(): void {\n\t\tif (!this._targetElement) return;\n\n\t\tif (this._getOption('removeClass')) {\n\t\t\tKTDom.removeClass(\n\t\t\t\tthis._targetElement,\n\t\t\t\tthis._getOption('removeClass') as string,\n\t\t\t);\n\t\t}\n\n\t\tif (!this._isActive()) {\n\t\t\tif (this._getOption('class')) {\n\t\t\t\tKTDom.addClass(this._targetElement, this._getOption('class') as string);\n\t\t\t}\n\n\t\t\tif (this._getOption('attribute')) {\n\t\t\t\tthis._targetElement.setAttribute(\n\t\t\t\t\tthis._getOption('attribute') as string,\n\t\t\t\t\t'true',\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._getOption('class')) {\n\t\t\t\tKTDom.removeClass(\n\t\t\t\t\tthis._targetElement,\n\t\t\t\t\tthis._getOption('class') as string,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this._getOption('attribute')) {\n\t\t\t\tthis._targetElement.removeAttribute(\n\t\t\t\t\tthis._getOption('attribute') as string,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic _isActive(): boolean {\n\t\tif (!this._element) return false;\n\n\t\treturn (\n\t\t\tKTDom.hasClass(this._targetElement, this._getOption('class') as string) ||\n\t\t\tthis._targetElement.hasAttribute(this._getOption('attribute') as string)\n\t\t);\n\t}\n\n\tpublic toggle(): void {\n\t\tthis._toggle();\n\t}\n\n\tpublic update(): void {\n\t\tthis._update();\n\t}\n\n\tpublic isActive(): boolean {\n\t\treturn this._isActive();\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTToggle {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'toggle')) {\n\t\t\treturn KTData.get(element, 'toggle') as KTToggle;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-toggle')) {\n\t\t\treturn new KTToggle(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTToggleConfigInterface,\n\t): KTToggle {\n\t\treturn this.getInstance(element) || new KTToggle(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tconst elements = document.querySelectorAll('[data-kt-toggle]');\n\t\telements.forEach((element) => {\n\t\t\tnew KTToggle(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTToggle.createInstances();\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTToggle = KTToggle;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nexport { KTTooltip } from './tooltip';\nexport type { KTTooltipConfigInterface, KTTooltipInterface } from './types';\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTData from '../../helpers/data';\nimport KTDom from '../../helpers/dom';\nimport KTComponent from '../component';\nimport { KTTooltipInterface, KTTooltipConfigInterface } from './types';\nimport {\n\tcreatePopper,\n\tPositioningStrategy,\n\tInstance,\n\tPlacement,\n} from '@popperjs/core';\nimport { KTTooltipTriggerType } from './types';\n\ndeclare global {\n\tinterface Window {\n\t\tKT_TOOLTIP_INITIALIZED: boolean;\n\t\tKTTooltip: typeof KTTooltip;\n\t}\n}\n\nexport class KTTooltip extends KTComponent implements KTTooltipInterface {\n\tprotected override _name: string = 'tooltip';\n\tprotected override _defaultConfig: KTTooltipConfigInterface = {\n\t\ttarget: '',\n\t\thiddenClass: 'hidden',\n\t\ttrigger: 'hover',\n\t\tplacement: 'top',\n\t\tplacementRtl: 'top',\n\t\tcontainer: '',\n\t\tstrategy: 'fixed',\n\t\toffset: '0, 5px',\n\t\toffsetRtl: '0, 5px',\n\t\tdelayShow: 0,\n\t\tdelayHide: 0,\n\t\tpermanent: false,\n\t\tzindex: '100',\n\t};\n\tprotected override _config: KTTooltipConfigInterface = this._defaultConfig;\n\tprotected _isOpen: boolean = false;\n\tprotected _targetElement: HTMLElement;\n\tprotected _popper!: Instance;\n\tprotected _transitioning: boolean = false;\n\tprotected _timeout!: ReturnType<typeof setTimeout>;\n\n\tconstructor(\n\t\telement: HTMLElement,\n\t\tconfig: KTTooltipConfigInterface | null = null,\n\t) {\n\t\tsuper();\n\n\t\tif (KTData.has(element as HTMLElement, this._name)) return;\n\n\t\tthis._init(element);\n\t\tthis._buildConfig(config);\n\n\t\tthis._targetElement = this._getTargetElement();\n\t\tif (!this._targetElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handlers();\n\t}\n\n\tprivate _getTargetElement(): HTMLElement | null {\n\t\treturn (\n\t\t\tKTDom.getElement(\n\t\t\t\tthis._element.getAttribute('data-kt-tooltip') as string,\n\t\t\t) ||\n\t\t\tthis._element.querySelector('[data-kt-tooltip-content]') ||\n\t\t\tKTDom.getElement(this._getOption('target') as string)\n\t\t);\n\t}\n\n\tprotected _handlers(): void {\n\t\tif (!this._element) return;\n\n\t\tif (this._getOption('trigger') === 'click') {\n\t\t\tthis._element.addEventListener('click', () => this._toggle());\n\t\t}\n\n\t\tif (this._getOption('trigger') === 'focus') {\n\t\t\tthis._element.addEventListener('focus', () => this._toggle());\n\t\t\tthis._element.addEventListener('blur', () => this._hide());\n\t\t}\n\n\t\tif (this._getOption('trigger') === 'hover') {\n\t\t\tthis._element.addEventListener('mouseenter', () => this._show());\n\t\t\tthis._element.addEventListener('mouseleave', () => this._hide());\n\t\t}\n\t}\n\n\tprotected _show(): void {\n\t\tif (this._timeout) {\n\t\t\tclearTimeout(this._timeout);\n\t\t}\n\n\t\tif (this._isOpen) return;\n\n\t\tthis._timeout = setTimeout(\n\t\t\t() => {\n\t\t\t\tconst payload = { cancel: false };\n\t\t\t\tthis._fireEvent('show', payload);\n\t\t\t\tthis._dispatchEvent('show', payload);\n\t\t\t\tif (payload.cancel === true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this._targetElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!this._element) return;\n\n\t\t\t\tthis._createPopper();\n\t\t\t\tthis._handleContainer();\n\t\t\t\tthis._setZindex();\n\n\t\t\t\tthis._targetElement.classList.add('show');\n\t\t\t\tthis._targetElement.classList.remove(\n\t\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t\t);\n\t\t\t\tthis._targetElement.style.opacity = '0';\n\t\t\t\tKTDom.reflow(this._targetElement);\n\t\t\t\tthis._targetElement.style.opacity = '1';\n\t\t\t\tthis._transitioning = true;\n\t\t\t\tthis._isOpen = true;\n\n\t\t\t\tKTDom.transitionEnd(this._targetElement, () => {\n\t\t\t\t\tthis._targetElement.style.opacity = '';\n\t\t\t\t\tthis._transitioning = false;\n\t\t\t\t\tthis._fireEvent('shown');\n\t\t\t\t\tthis._dispatchEvent('shown');\n\t\t\t\t});\n\t\t\t},\n\t\t\tthis._getOption('delayShow') as number,\n\t\t);\n\t}\n\n\tprotected _hide(): void {\n\t\tif (this._timeout) {\n\t\t\tclearTimeout(this._timeout);\n\t\t}\n\n\t\tif (!this._isOpen) return;\n\n\t\tthis._timeout = setTimeout(\n\t\t\t() => {\n\t\t\t\tconst payload = { cancel: false };\n\t\t\t\tthis._fireEvent('hide', payload);\n\t\t\t\tthis._dispatchEvent('hide', payload);\n\t\t\t\tif (payload.cancel === true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this._targetElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._targetElement.style.opacity = '1';\n\t\t\t\tKTDom.reflow(this._targetElement);\n\t\t\t\tthis._targetElement.style.opacity = '0';\n\t\t\t\tthis._transitioning = true;\n\t\t\t\tthis._isOpen = false;\n\n\t\t\t\tKTDom.transitionEnd(this._targetElement, () => {\n\t\t\t\t\tthis._popper.destroy();\n\t\t\t\t\tthis._targetElement.classList.remove('show');\n\t\t\t\t\tthis._targetElement.classList.add(\n\t\t\t\t\t\tthis._getOption('hiddenClass') as string,\n\t\t\t\t\t);\n\t\t\t\t\tthis._targetElement.style.opacity = '';\n\t\t\t\t\tthis._transitioning = false;\n\t\t\t\t\tthis._fireEvent('hidden');\n\t\t\t\t\tthis._dispatchEvent('hidden');\n\t\t\t\t});\n\t\t\t},\n\t\t\tthis._getOption('delayHide') as number,\n\t\t);\n\t}\n\n\tprotected _toggle(): void {\n\t\tconst payload = { cancel: false };\n\t\tthis._fireEvent('toggle', payload);\n\t\tthis._dispatchEvent('toggle', payload);\n\t\tif (payload.cancel === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isOpen) {\n\t\t\tthis._hide();\n\t\t} else {\n\t\t\tthis._show();\n\t\t}\n\t}\n\n\tprotected _createPopper(): void {\n\t\tif (!this._element) return;\n\n\t\tconst isRtl = KTDom.isRTL();\n\n\t\t// Placement\n\t\tlet placement = this._getOption('placement') as Placement;\n\t\tif (isRtl && this._getOption('placementRtl')) {\n\t\t\tplacement = this._getOption('placementRtl') as Placement;\n\t\t}\n\n\t\t// Offset\n\t\tlet offsetValue = this._getOption('offset');\n\t\tif (isRtl && this._getOption('offsetRtl')) {\n\t\t\toffsetValue = this._getOption('offsetRtl') as Placement;\n\t\t}\n\t\tconst offset = offsetValue\n\t\t\t? offsetValue\n\t\t\t\t\t.toString()\n\t\t\t\t\t.split(',')\n\t\t\t\t\t.map((value) => parseInt(value.trim(), 10))\n\t\t\t: [0, 0];\n\n\t\tif (!this._targetElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._popper = createPopper(this._element, this._targetElement, {\n\t\t\tplacement: placement,\n\t\t\tstrategy: this._getOption('strategy') as PositioningStrategy,\n\t\t\tmodifiers: [\n\t\t\t\t{\n\t\t\t\t\tname: 'offset',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\toffset,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\tprotected _handleContainer(): void {\n\t\tif (this._getOption('container')) {\n\t\t\tif (this._getOption('container') === 'body') {\n\t\t\t\tdocument.body.appendChild(this._targetElement);\n\t\t\t} else {\n\t\t\t\tdocument\n\t\t\t\t\t.querySelector(this._getOption('container') as string)\n\t\t\t\t\t?.appendChild(this._targetElement);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected _setZindex(): void {\n\t\tlet zindex: number = parseInt(this._getOption('zindex') as string);\n\n\t\tif (parseInt(KTDom.getCssProp(this._element, 'z-index')) > zindex) {\n\t\t\tzindex = parseInt(KTDom.getCssProp(this._element, 'z-index'));\n\t\t}\n\n\t\tif (KTDom.getHighestZindex(this._element) > zindex) {\n\t\t\tzindex = KTDom.getHighestZindex(this._element) + 1;\n\t\t}\n\n\t\tthis._targetElement.style.zIndex = String(zindex);\n\t}\n\n\tpublic show(): void {\n\t\tthis._show();\n\t}\n\n\tpublic hide(): void {\n\t\tthis._hide();\n\t}\n\n\tpublic toggle(): void {\n\t\tthis._toggle();\n\t}\n\n\tpublic getContentElement(): HTMLElement | null {\n\t\treturn this._targetElement;\n\t}\n\n\tpublic isOpen(): boolean {\n\t\treturn this._isOpen;\n\t}\n\n\tpublic getTriggerOption(): KTTooltipTriggerType {\n\t\treturn this._getOption('trigger') as KTTooltipTriggerType;\n\t}\n\n\tpublic isPermanent(): boolean {\n\t\treturn this._getOption('permanent') as boolean;\n\t}\n\n\tpublic static initHandlers(): void {\n\t\tdocument.addEventListener('click', (event: Event) => {\n\t\t\tdocument\n\t\t\t\t.querySelectorAll('[data-kt-tooltip-initialized]')\n\t\t\t\t.forEach((tooltipElement) => {\n\t\t\t\t\tconst tooltip = KTTooltip.getInstance(tooltipElement as HTMLElement);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\ttooltip &&\n\t\t\t\t\t\ttooltip.isOpen() &&\n\t\t\t\t\t\ttooltip.getTriggerOption() !== 'hover' &&\n\t\t\t\t\t\t!tooltip.isPermanent()\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst contentElement = tooltip.getContentElement();\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tcontentElement &&\n\t\t\t\t\t\t\t(contentElement === event.target ||\n\t\t\t\t\t\t\t\tcontentElement.contains(event.target as HTMLElement))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttooltip.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t}\n\n\tpublic static getInstance(element: HTMLElement): KTTooltip {\n\t\tif (!element) return null;\n\n\t\tif (KTData.has(element, 'tooltip')) {\n\t\t\treturn KTData.get(element, 'tooltip') as KTTooltip;\n\t\t}\n\n\t\tif (element.getAttribute('data-kt-tooltip')) {\n\t\t\treturn new KTTooltip(element);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tpublic static getOrCreateInstance(\n\t\telement: HTMLElement,\n\t\tconfig?: KTTooltipConfigInterface,\n\t): KTTooltip {\n\t\treturn this.getInstance(element) || new KTTooltip(element, config);\n\t}\n\n\tpublic static createInstances(): void {\n\t\tdocument.querySelectorAll('[data-kt-tooltip]').forEach((element) => {\n\t\t\tnew KTTooltip(element as HTMLElement);\n\t\t});\n\t}\n\n\tpublic static init(): void {\n\t\tKTTooltip.createInstances();\n\n\t\tif (window.KT_TOOLTIP_INITIALIZED !== true) {\n\t\t\tKTTooltip.initHandlers();\n\t\t\twindow.KT_TOOLTIP_INITIALIZED = true;\n\t\t}\n\t}\n}\n\nif (typeof window !== 'undefined') {\n\twindow.KTTooltip = KTTooltip;\n}\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nconst KTElementMap = new Map();\n\nconst KTData = {\n\tset(element: HTMLElement, key: string, value: unknown): void {\n\t\tif (!KTElementMap.has(element)) {\n\t\t\tKTElementMap.set(element, new Map());\n\t\t}\n\n\t\tconst valueMap = KTElementMap.get(element);\n\n\t\tvalueMap.set(key, value);\n\t},\n\n\tget(element: HTMLElement, key: string): unknown {\n\t\tif (KTElementMap.has(element)) {\n\t\t\treturn KTElementMap.get(element).get(key) || null;\n\t\t}\n\n\t\treturn null;\n\t},\n\n\thas(element: HTMLElement, key: string): boolean {\n\t\treturn KTElementMap.has(element) && KTElementMap.get(element).has(key);\n\t},\n\n\tremove(element: HTMLElement, key: string): void {\n\t\tif (!KTElementMap.has(element) || !KTElementMap.get(element).has(key)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst valueMap = KTElementMap.get(element);\n\n\t\tvalueMap.delete(key);\n\n\t\tif (valueMap.size === 0) {\n\t\t\tKTElementMap.delete(element);\n\t\t}\n\t},\n};\n\nexport default KTData;\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\n/* eslint-disable max-len */\nimport KTUtils from './utils';\nimport { KTOffsetType, KTOptionType, KTViewPortType } from '../types';\n\nconst KTDom = {\n\tisRTL(): boolean {\n\t\tconst htmlTag = document.documentElement; // Access the <html> tag\n\n\t\t// Check if the \"dir\" attribute is present and its value is \"rtl\"\n\t\tconst dir = htmlTag.getAttribute('dir');\n\n\t\treturn dir === 'rtl';\n\t},\n\n\tisElement(element: HTMLElement): boolean {\n\t\tif (element && element instanceof HTMLElement) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tgetElement(element: HTMLElement | string): HTMLElement {\n\t\tif (this.isElement(element)) {\n\t\t\treturn element as HTMLElement;\n\t\t}\n\n\t\tif (element && (element as string).length > 0) {\n\t\t\treturn document.querySelector(KTUtils.parseSelector(element as string));\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tremove(element: HTMLElement): void {\n\t\tif (this.isElement(element) && element.parentNode) {\n\t\t\telement.parentNode.removeChild(element);\n\t\t}\n\t},\n\n\thasClass(element: HTMLElement, className: string): boolean {\n\t\t// Split classNames string into an array of individual class names\n\t\tconst classes = className.split(' ');\n\n\t\t// Loop through each class name\n\t\tfor (const className of classes) {\n\t\t\t// Check if the element has the current class name\n\t\t\tif (!element.classList.contains(className)) {\n\t\t\t\t// Return false if any class is missing\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Return true if all classes are present\n\t\treturn true;\n\t},\n\n\taddClass(element: HTMLElement, className: string): void {\n\t\tconst classNames = className.split(' ');\n\n\t\tif (element.classList) {\n\t\t\tfor (let i = 0; i < classNames.length; i++) {\n\t\t\t\tif (classNames[i] && classNames[i].length > 0) {\n\t\t\t\t\telement.classList.add(classNames[i].trim());\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!this.hasClass(element, className)) {\n\t\t\tfor (let x = 0; x < classNames.length; x++) {\n\t\t\t\telement.className += ' ' + classNames[x].trim();\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveClass(element: HTMLElement, className: string): void {\n\t\tconst classNames = className.split(' ');\n\n\t\tif (element.classList) {\n\t\t\tfor (let i = 0; i < classNames.length; i++) {\n\t\t\t\telement.classList.remove(classNames[i].trim());\n\t\t\t}\n\t\t} else if (this.hasClass(element, className)) {\n\t\t\tfor (let x = 0; x < classNames.length; x++) {\n\t\t\t\telement.className = element.className.replace(\n\t\t\t\t\tnew RegExp('\\\\b' + classNames[x].trim() + '\\\\b', 'g'),\n\t\t\t\t\t'',\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n\n\tgetCssProp(element: HTMLElement, prop: string): string {\n\t\treturn (\n\t\t\telement ? window.getComputedStyle(element).getPropertyValue(prop) : ''\n\t\t).replace(' ', '');\n\t},\n\n\tsetCssProp(element: HTMLElement, prop: string, value: string) {\n\t\tif (element) {\n\t\t\twindow.getComputedStyle(element).setProperty(prop, value);\n\t\t}\n\t},\n\n\toffset(element: HTMLElement): KTOffsetType {\n\t\tif (!element) return { top: 0, left: 0, right: 0, bottom: 0 };\n\n\t\tconst rect = element.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: rect.top,\n\t\t\tleft: rect.left,\n\t\t\tright: window.innerWidth - rect.right,\n\t\t\tbottom: window.innerHeight - rect.top,\n\t\t};\n\t},\n\n\tgetIndex(element: HTMLElement): number {\n\t\tconst children = Array.from(element.parentNode?.children || []);\n\t\treturn children.indexOf(element);\n\t},\n\n\tparents(element: HTMLElement, selector: string): Array<HTMLElement> {\n\t\tconst parents: Array<HTMLElement> = [];\n\n\t\t// Push each parent element to the array\n\t\tfor (\n\t\t\telement && element !== document.documentElement;\n\t\t\t(element = element.parentElement as HTMLElement);\n\n\t\t) {\n\t\t\tif (selector) {\n\t\t\t\tif (element.matches(selector)) {\n\t\t\t\t\tparents.push(element as HTMLElement);\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparents.push(element as HTMLElement);\n\t\t}\n\n\t\t// Return our parent array\n\t\treturn parents;\n\t},\n\n\tsiblings(element: HTMLElement) {\n\t\tconst parent = element.parentNode;\n\t\tif (!parent) return [];\n\t\treturn Array.from(parent.children).filter((child) => child !== element);\n\t},\n\n\tchildren(element: HTMLElement, selector: string): Array<HTMLElement> {\n\t\tif (!element || !element.childNodes) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst result: Array<HTMLElement> = [];\n\t\tconst l = element.childNodes.length;\n\t\tlet i = 0;\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tif (\n\t\t\t\telement.childNodes[i].nodeType == 1 &&\n\t\t\t\t(element.childNodes[i] as HTMLElement).matches(selector)\n\t\t\t) {\n\t\t\t\tresult.push(element.childNodes[i] as HTMLElement);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tchild(element: HTMLElement, selector: string): HTMLElement {\n\t\tconst children = KTDom.children(element, selector);\n\n\t\treturn children ? children[0] : null;\n\t},\n\n\tisVisible(element: HTMLElement): boolean {\n\t\tif (!this.isElement(element) || element.getClientRects().length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// eslint-disable-next-line max-len\n\t\treturn (\n\t\t\tgetComputedStyle(element).getPropertyValue('visibility') === 'visible'\n\t\t);\n\t},\n\n\tisDisabled(\n\t\telement: HTMLInputElement | HTMLSelectElement | HTMLButtonElement,\n\t): boolean {\n\t\tif (!element || element.nodeType !== Node.ELEMENT_NODE) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (element.classList.contains('disabled')) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (typeof element.disabled !== 'undefined') {\n\t\t\treturn element.disabled;\n\t\t}\n\n\t\treturn (\n\t\t\telement.hasAttribute('disabled') &&\n\t\t\telement.getAttribute('disabled') !== 'false'\n\t\t);\n\t},\n\n\ttransitionEnd(element: HTMLElement, callback: CallableFunction): void {\n\t\tconst duration: number = this.getCSSTransitionDuration(element);\n\n\t\tsetTimeout(() => {\n\t\t\tcallback();\n\t\t}, duration);\n\t},\n\n\tanimationEnd(element: HTMLElement, callback: CallableFunction): void {\n\t\tconst duration: number = this.getCSSAnimationDuration(element);\n\n\t\tsetTimeout(() => {\n\t\t\tcallback();\n\t\t}, duration);\n\t},\n\n\tgetCSSTransitionDuration(element: HTMLElement): number {\n\t\treturn (\n\t\t\tparseFloat(window.getComputedStyle(element).transitionDuration) * 1000\n\t\t);\n\t},\n\n\tgetCSSAnimationDuration(element: HTMLElement): number {\n\t\treturn (\n\t\t\tparseFloat(window.getComputedStyle(element).animationDuration) * 1000\n\t\t);\n\t},\n\n\treflow(element: HTMLElement): void {\n\t\telement.offsetHeight;\n\t},\n\n\tinsertAfter(element: HTMLElement, referenceNode: HTMLElement) {\n\t\tconst parentNode = referenceNode.parentNode;\n\t\tif (parentNode) {\n\t\t\tparentNode.insertBefore(element, referenceNode.nextSibling);\n\t\t}\n\t},\n\n\tgetHighestZindex(element: HTMLElement): number {\n\t\tlet position: string, value: number;\n\n\t\twhile (element && element !== document.documentElement) {\n\t\t\t// Ignore z-index if position is set to a value where z-index is ignored by the browser\n\t\t\t// This makes behavior of this function consistent across browsers\n\t\t\t// WebKit always returns auto if the element is positioned\n\t\t\tposition = element.style.position;\n\n\t\t\tif (\n\t\t\t\tposition === 'absolute' ||\n\t\t\t\tposition === 'relative' ||\n\t\t\t\tposition === 'fixed'\n\t\t\t) {\n\t\t\t\t// IE returns 0 when zIndex is not specified\n\t\t\t\t// other browsers return a string\n\t\t\t\t// we ignore the case of nested elements with an explicit value of 0\n\t\t\t\t// <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n\t\t\t\tvalue = parseInt(element.style.zIndex);\n\n\t\t\t\tif (!isNaN(value) && value !== 0) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telement = element.parentNode as HTMLElement;\n\t\t}\n\n\t\treturn 1;\n\t},\n\n\tisParentOrElementHidden(element: HTMLElement): boolean {\n\t\tif (!element) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst computedStyle = window.getComputedStyle(element);\n\n\t\tif (computedStyle.display === 'none') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.isParentOrElementHidden(element.parentElement);\n\t},\n\n\tgetViewPort(): KTViewPortType {\n\t\treturn {\n\t\t\twidth: window.innerWidth,\n\t\t\theight: window.innerHeight,\n\t\t};\n\t},\n\n\tgetScrollTop() {\n\t\treturn (document.scrollingElement || document.documentElement).scrollTop;\n\t},\n\n\tisInViewport(element: HTMLElement): boolean {\n\t\tconst rect = element.getBoundingClientRect();\n\n\t\treturn (\n\t\t\trect.top >= 0 &&\n\t\t\trect.left >= 0 &&\n\t\t\trect.bottom <=\n\t\t\t\t(window.innerHeight || document.documentElement.clientHeight) &&\n\t\t\trect.right <= (window.innerWidth || document.documentElement.clientWidth)\n\t\t);\n\t},\n\n\tisPartiallyInViewport(element: HTMLElement): boolean {\n\t\tconst x = element.getBoundingClientRect().left;\n\t\tconst y = element.getBoundingClientRect().top;\n\t\tconst ww = Math.max(\n\t\t\tdocument.documentElement.clientWidth,\n\t\t\twindow.innerWidth || 0,\n\t\t);\n\t\tconst hw = Math.max(\n\t\t\tdocument.documentElement.clientHeight,\n\t\t\twindow.innerHeight || 0,\n\t\t);\n\t\tconst w = element.clientWidth;\n\t\tconst h = element.clientHeight;\n\n\t\treturn y < hw && y + h > 0 && x < ww && x + w > 0;\n\t},\n\n\tisVisibleInParent(child: HTMLElement, parent: HTMLElement): boolean {\n\t\tconst childRect = child.getBoundingClientRect();\n\t\tconst parentRect = parent.getBoundingClientRect();\n\n\t\t// Check if the child element is visible\n\t\tif (\n\t\t\tchild.offsetParent === null ||\n\t\t\tgetComputedStyle(child).visibility === 'hidden' ||\n\t\t\tgetComputedStyle(child).display === 'none'\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check if the child is within the vertical bounds of the parent\n\t\tconst isVisibleVertically =\n\t\t\tchildRect.top >= parentRect.top && childRect.bottom <= parentRect.bottom;\n\n\t\t// Check if the child is within the horizontal bounds of the parent\n\t\tconst isVisibleHorizontally =\n\t\t\tchildRect.left >= parentRect.left && childRect.right <= parentRect.right;\n\n\t\treturn isVisibleVertically && isVisibleHorizontally;\n\t},\n\n\tgetRelativeTopPosition(child: HTMLElement, parent: HTMLElement): number {\n\t\tconst childRect = child.getBoundingClientRect();\n\t\tconst parentRect = parent.getBoundingClientRect();\n\n\t\t// Calculate the relative top position\n\t\tconst relativeTop = childRect.top - parentRect.top;\n\n\t\treturn relativeTop;\n\t},\n\n\tgetDataAttributes(element: HTMLElement, prefix: string): object {\n\t\tif (!element) {\n\t\t\treturn {};\n\t\t}\n\n\t\tprefix = KTUtils.camelCase(prefix);\n\n\t\tconst attributes: { [key: string]: KTOptionType } = {};\n\t\tconst keys = Object.keys(element.dataset).filter((key) =>\n\t\t\tkey.startsWith(prefix),\n\t\t);\n\n\t\tfor (const key of keys) {\n\t\t\tlet normalizedKey = key.replace(prefix, '');\n\t\t\tnormalizedKey = KTUtils.uncapitalize(normalizedKey);\n\t\t\tattributes[normalizedKey] = KTUtils.parseDataAttribute(\n\t\t\t\telement.dataset[key],\n\t\t\t);\n\t\t}\n\n\t\treturn attributes;\n\t},\n\n\tready(callback: CallableFunction): void {\n\t\tif (document.readyState === 'loading') {\n\t\t\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\t\t\tcallback();\n\t\t\t});\n\t\t} else {\n\t\t\tcallback();\n\t\t}\n\t},\n};\n\nexport default KTDom;\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTCallableType } from '../types';\nimport KTUtils from './utils';\n\nexport interface KTDelegatedEventHandlersInterface {\n\t[key: string]: KTCallableType;\n}\n\nconst KTDelegatedEventHandlers: KTDelegatedEventHandlersInterface = {};\n\nconst KTEventHandler = {\n\ton: function (\n\t\telement: HTMLElement,\n\t\tselector: string,\n\t\teventName: string,\n\t\thandler: KTCallableType,\n\t): string {\n\t\tif (element === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst eventId = KTUtils.geUID('event');\n\n\t\tKTDelegatedEventHandlers[eventId] = (\n\t\t\tevent: Event & { target: HTMLElement },\n\t\t) => {\n\t\t\tconst targets = element.querySelectorAll(selector);\n\t\t\tlet target = event.target;\n\n\t\t\twhile (target && target !== element) {\n\t\t\t\tfor (let i = 0, j = targets.length; i < j; i++) {\n\t\t\t\t\tif (target === targets[i]) {\n\t\t\t\t\t\thandler.call(this, event, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttarget = target.parentNode as HTMLElement;\n\t\t\t}\n\t\t};\n\n\t\telement.addEventListener(eventName, KTDelegatedEventHandlers[eventId]);\n\n\t\treturn eventId;\n\t},\n\n\toff(element: HTMLElement, eventName: string, eventId: string) {\n\t\tif (!element || KTDelegatedEventHandlers[eventId] === null) {\n\t\t\treturn;\n\t\t}\n\n\t\telement.removeEventListener(eventName, KTDelegatedEventHandlers[eventId]);\n\n\t\tdelete KTDelegatedEventHandlers[eventId];\n\t},\n};\n\nexport default KTEventHandler;\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport { KTOptionType } from '../types';\n\nconst KTUtils = {\n\tgeUID(prefix: string = ''): string {\n\t\treturn prefix + Math.floor(Math.random() * new Date().getTime());\n\t},\n\n\tgetCssVar(variable: string): string {\n\t\tlet hex = getComputedStyle(document.documentElement).getPropertyValue(\n\t\t\tvariable,\n\t\t);\n\n\t\tif (hex && hex.length > 0) {\n\t\t\thex = hex.trim();\n\t\t}\n\n\t\treturn hex;\n\t},\n\n\tparseDataAttribute(value: string): KTOptionType {\n\t\tif (value === 'true') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (value === 'false') {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (value === Number(value).toString()) {\n\t\t\treturn Number(value);\n\t\t}\n\n\t\tif (value === '' || value === 'null') {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (typeof value !== 'string') {\n\t\t\treturn value;\n\t\t}\n\n\t\ttry {\n\t\t\treturn KTUtils.parseJson(value) as object;\n\t\t} catch {\n\t\t\treturn value;\n\t\t}\n\t},\n\n\tparseJson(value: string): JSON {\n\t\treturn value && value.length > 0\n\t\t\t? JSON.parse(decodeURIComponent(value))\n\t\t\t: null;\n\t},\n\n\tparseSelector(selector: string): string {\n\t\tif (selector && window.CSS && window.CSS.escape) {\n\t\t\t// Escape any IDs in the selector using CSS.escape\n\t\t\tselector = selector.replace(\n\t\t\t\t/#([^\\s\"#']+)/g,\n\t\t\t\t(match, id) => `#${window.CSS.escape(id)}`,\n\t\t\t);\n\t\t}\n\n\t\treturn selector;\n\t},\n\n\tcapitalize(value: string): string {\n\t\treturn value.charAt(0).toUpperCase() + value.slice(1);\n\t},\n\n\tuncapitalize(value: string): string {\n\t\treturn value.charAt(0).toLowerCase() + value.slice(1);\n\t},\n\n\tcamelCase(value: string): string {\n\t\treturn value.replace(/-([a-z])/g, (match, letter) => {\n\t\t\treturn letter.toUpperCase();\n\t\t});\n\t},\n\n\tcamelReverseCase(str: string): string {\n\t\treturn str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\t},\n\n\tisRTL(): boolean {\n\t\tconst htmlElement = document.querySelector('html');\n\t\treturn Boolean(\n\t\t\thtmlElement && htmlElement.getAttribute('direction') === 'rtl',\n\t\t);\n\t},\n\n\tthrottle(\n\t\ttimer: undefined | ReturnType<typeof setTimeout>,\n\t\tfunc: CallableFunction,\n\t\tdelay: number,\n\t): void {\n\t\t// If setTimeout is already scheduled, no need to do anything\n\t\tif (timer) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Schedule a setTimeout after delay seconds\n\t\ttimer = setTimeout(() => {\n\t\t\tfunc();\n\n\t\t\t// Once setTimeout function execution is finished, timerId = undefined so that in <br>\n\t\t\t// the next scroll event function execution can be scheduled by the setTimeout\n\t\t\tclearTimeout(timer);\n\t\t}, delay);\n\t},\n\n\tchecksum(value: string): string {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\thash = ((hash << 5) - hash + value.charCodeAt(i)) | 0;\n\t\t}\n\n\t\treturn ('0000000' + (hash >>> 0).toString(16)).slice(-8);\n\t},\n\n\tstringToBoolean: (value: KTOptionType): boolean | null => {\n\t\tif (typeof value === 'boolean') return value;\n\t\tif (typeof value !== 'string') return null;\n\n\t\tconst cleanedStr = value.toLowerCase().trim();\n\t\tif (cleanedStr === 'true') return true;\n\t\tif (cleanedStr === 'false') return false;\n\t\treturn null;\n\t},\n\n\tstringToObject: <T>(value: KTOptionType): T | null => {\n\t\ttry {\n\t\t\tconst parsed = JSON.parse(value.toString() as string);\n\t\t\tif (parsed && typeof parsed === 'object' && !Array.isArray(parsed)) {\n\t\t\t\treturn parsed as T;\n\t\t\t}\n\t\t\treturn null;\n\t\t} catch (error) {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tstringToInteger: (value: KTOptionType | number): number | null => {\n\t\t// If already a number, return it as an integer\n\t\tif (typeof value === 'number' && !isNaN(value)) {\n\t\t\treturn Math.floor(value);\n\t\t}\n\n\t\t// If not a string, return null\n\t\tif (typeof value !== 'string') return null;\n\n\t\tconst cleanedStr = value.trim();\n\t\tconst num = parseInt(cleanedStr, 10);\n\t\tif (!isNaN(num) && cleanedStr !== '') {\n\t\t\treturn num;\n\t\t}\n\t\treturn null;\n\t},\n\n\tstringToFloat: (value: KTOptionType | number): number | null => {\n\t\t// If already a number, return it as is\n\t\tif (typeof value === 'number' && !isNaN(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\t// If not a string, return null\n\t\tif (typeof value !== 'string') return null;\n\n\t\tconst cleanedStr = value.trim();\n\t\tconst num = parseFloat(cleanedStr);\n\t\tif (!isNaN(num) && cleanedStr !== '') {\n\t\t\treturn num;\n\t\t}\n\t\treturn null;\n\t},\n};\n\nexport default KTUtils;\n","/**\n * KTUI - Free & Open-Source Tailwind UI Components by Keenthemes\n * Copyright 2025 by Keenthemes Inc\n */\n\nimport KTDom from './helpers/dom';\nimport KTUtils from './helpers/utils';\nimport KTEventHandler from './helpers/event-handler';\nimport { KTDropdown } from './components/dropdown';\nimport { KTModal } from './components/modal';\nimport { KTDrawer } from './components/drawer';\nimport { KTCollapse } from './components/collapse';\nimport { KTDismiss } from './components/dismiss';\nimport { KTTabs } from './components/tabs';\nimport { KTAccordion } from './components/accordion';\nimport { KTScrollspy } from './components/scrollspy';\nimport { KTScrollable } from './components/scrollable';\nimport { KTScrollto } from './components/scrollto';\nimport { KTSticky } from './components/sticky';\nimport { KTReparent } from './components/reparent';\nimport { KTToggle } from './components/toggle';\nimport { KTTooltip } from './components/tooltip';\nimport { KTStepper } from './components/stepper';\nimport { KTThemeSwitch } from './components/theme-switch';\nimport { KTImageInput } from './components/image-input';\nimport { KTTogglePassword } from './components/toggle-password';\nimport { KTDataTable } from './components/datatable';\nimport { KTDatepicker } from './components/datepicker';\nimport { KTSelect } from './components/select';\nimport { KTToast } from './components/toast';\n\nexport { KTDropdown } from './components/dropdown';\nexport { KTModal } from './components/modal';\nexport { KTDrawer } from './components/drawer';\nexport { KTCollapse } from './components/collapse';\nexport { KTDismiss } from './components/dismiss';\nexport { KTTabs } from './components/tabs';\nexport { KTAccordion } from './components/accordion';\nexport { KTScrollspy } from './components/scrollspy';\nexport { KTScrollable } from './components/scrollable';\nexport { KTScrollto } from './components/scrollto';\nexport { KTSticky } from './components/sticky';\nexport { KTReparent } from './components/reparent';\nexport { KTToggle } from './components/toggle';\nexport { KTTooltip } from './components/tooltip';\nexport { KTStepper } from './components/stepper';\nexport { KTThemeSwitch } from './components/theme-switch';\nexport { KTImageInput } from './components/image-input';\nexport { KTTogglePassword } from './components/toggle-password';\nexport { KTDataTable } from './components/datatable';\nexport { KTDatepicker } from './components/datepicker';\nexport { KTSelect } from './components/select';\nexport { KTToast } from './components/toast';\n\nconst KTComponents = {\n\tinit(): void {\n\t\tKTDropdown.init();\n\t\tKTModal.init();\n\t\tKTDrawer.init();\n\t\tKTCollapse.init();\n\t\tKTDismiss.init();\n\t\tKTTabs.init();\n\t\tKTAccordion.init();\n\t\tKTScrollspy.init();\n\t\tKTScrollable.init();\n\t\tKTScrollto.init();\n\t\tKTSticky.init();\n\t\tKTReparent.init();\n\t\tKTToggle.init();\n\t\tKTTooltip.init();\n\t\tKTStepper.init();\n\t\tKTThemeSwitch.init();\n\t\tKTImageInput.init();\n\t\tKTTogglePassword.init();\n\t\tKTDataTable.init();\n\t\tKTDatepicker.init();\n\t\tKTSelect.init();\n\t\tKTToast.init();\n\t},\n};\n\ndeclare global {\n\tinterface Window {\n\t\tKTUtils: typeof KTUtils;\n\t\tKTDom: typeof KTDom;\n\t\tKTEventHandler: typeof KTEventHandler;\n\t\tKTDropdown: typeof KTDropdown;\n\t\tKTModal: typeof KTModal;\n\t\tKTDrawer: typeof KTDrawer;\n\t\tKTCollapse: typeof KTCollapse;\n\t\tKTDismiss: typeof KTDismiss;\n\t\tKTTabs: typeof KTTabs;\n\t\tKTAccordion: typeof KTAccordion;\n\t\tKTScrollspy: typeof KTScrollspy;\n\t\tKTScrollable: typeof KTScrollable;\n\t\tKTScrollto: typeof KTScrollto;\n\t\tKTSticky: typeof KTSticky;\n\t\tKTReparent: typeof KTReparent;\n\t\tKTToggle: typeof KTToggle;\n\t\tKTTooltip: typeof KTTooltip;\n\t\tKTStepper: typeof KTStepper;\n\t\tKTThemeSwitch: typeof KTThemeSwitch;\n\t\tKTImageInput: typeof KTImageInput;\n\t\tKTTogglePassword: typeof KTTogglePassword;\n\t\tKTDataTable: typeof KTDataTable;\n\t\tKTDatepicker: typeof KTDatepicker;\n\t\tKTSelect: typeof KTSelect;\n\t\tKTToast: typeof KTToast;\n\t\tKTComponents: typeof KTComponents;\n\t}\n}\n\nexport default KTComponents;\n\nKTDom.ready(() => {\n\tKTComponents.init();\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n"],"names":["root","factory","exports","module","define","amd","a","i","self","DEFAULT_OPTIONS","placement","modifiers","strategy","areValidElements","_len","arguments","length","args","Array","_key","some","element","getBoundingClientRect","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","reference","popper","options","state","orderedModifiers","Object","assign","modifiersData","elements","attributes","styles","effectCleanupFns","isDestroyed","instance","setOptions","setOptionsAction","cleanupModifierEffects","scrollParents","isElement","contextElement","concat","filter","m","enabled","forEach","_ref","name","_ref$options","effect","cleanupFn","noopFn","push","update","forceUpdate","_state$elements","rects","reset","modifier","data","index","_state$orderedModifie","fn","_state$orderedModifie2","_options","Promise","resolve","destroy","then","onFirstUpdate","createPopper","contains","parent","child","rootNode","getRootNode","isShadowRoot","next","isSameNode","parentNode","host","includeScale","isFixedStrategy","clientRect","scaleX","scaleY","isHTMLElement","offsetWidth","round","width","offsetHeight","height","visualViewport","window","addVisualOffsets","x","left","offsetLeft","y","top","offsetTop","right","bottom","getClientRectFromMixedType","clippingParent","viewport","rect","clientTop","clientLeft","clientHeight","clientWidth","getInnerBoundingClientRect","getClippingRect","boundary","rootBoundary","mainClippingParents","clippingParents","clipperElement","indexOf","position","getClippingParents","firstClippingParent","clippingRect","reduce","accRect","max","min","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","isOffsetParentAnElement","offsetParentIsScaled","isElementScaled","documentElement","scroll","scrollLeft","scrollTop","offsets","getComputedStyle","getDocumentElement","ownerDocument","document","getDocumentRect","_element$ownerDocumen","html","winScroll","body","scrollWidth","scrollHeight","direction","getHTMLElementScroll","getLayoutRect","Math","abs","getNodeName","nodeName","toLowerCase","getNodeScroll","node","getTrueOffsetParent","getOffsetParent","isFirefox","test","currentNode","css","transform","perspective","contain","willChange","getContainingBlock","getParentNode","assignedSlot","getScrollParent","getViewportRect","win","layoutViewport","getWindow","toString","defaultView","getWindowScroll","pageXOffset","pageYOffset","getWindowScrollBarX","Element","HTMLElement","ShadowRoot","isLayoutViewport","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","isTableElement","listScrollParents","list","scrollParent","isBody","target","updatedList","auto","basePlacements","start","end","variationPlacements","acc","placements","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","phase","keys","style","value","removeAttribute","setAttribute","_ref2","initialStyles","margin","arrow","hasOwnProperty","property","attribute","requires","_state$modifiersData$","arrowElement","popperOffsets","basePlacement","axis","len","paddingObject","padding","toPaddingObject","arrowRect","minProp","maxProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","center","offset","within","axisProp","centerOffset","_options$element","querySelector","requiresIfExists","unsetSides","mapToStyles","_Object$assign2","popperRect","variation","gpuAcceleration","adaptive","roundOffsets","_offsets$x","_offsets$y","_ref3","hasX","hasY","sideX","sideY","heightProp","widthProp","_Object$assign","commonStyles","_ref4","dpr","devicePixelRatio","roundOffsetsByDPR","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","passive","_options$scroll","_options$resize","resize","addEventListener","removeEventListener","_skip","_options$mainAxis","mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","specifiedFallbackPlacements","fallbackPlacements","altBoundary","_options$flipVariatio","flipVariations","allowedAutoPlacements","preferredPlacement","oppositePlacement","getExpandedFallbackPlacements","referenceRect","checksMap","Map","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","isVertical","mainVariationSide","altVariationSide","checks","every","check","set","_loop","_i","fittingPlacement","find","get","slice","getSideOffsets","preventedOffsets","isAnySideFullyClipped","side","preventOverflow","referenceOverflow","elementContext","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","distanceAndSkiddingToXY","invertDistance","skidding","distance","_options$offset","_data$state$placement","_options$tether","tether","_options$tetherOffset","tetherOffset","isBasePlacement","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","minLen","maxLen","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_offset","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","withinMaxClamp","computeAutoPlacement","_options$allowedAutoP","allowedPlacements","overflows","sort","b","computeOffsets","commonX","commonY","debounce","pending","undefined","detectOverflow","_options$placement","_options$strategy","_options$boundary","_options$rootBoundary","_options$elementConte","_options$altBoundary","_options$padding","altContext","clippingClientRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","key","multiply","expandToHashMap","hashMap","getAltAxis","getBasePlacement","split","getFreshSideObject","getMainAxisFromPlacement","hash","getOppositePlacement","replace","matched","getOppositeVariationPlacement","getVariation","mergeByName","merged","current","existing","map","mergePaddingObject","order","visited","Set","result","add","dep","has","depModifier","orderModifiers","rectToClientRect","getUAString","uaData","navigator","userAgentData","brands","isArray","item","brand","version","join","userAgent","v","config","_name","_defaultConfig","hiddenClass","activeClass","expandAll","_config","_init","_buildConfig","_handlers","on","this","_element","event","preventDefault","accordionElement","closest","_toggle","payload","cancel","_fireEvent","_dispatchEvent","classList","_hide","_show","hasAttribute","_getOption","toggleElement","contentElement","getElement","getAttribute","_hideSiblings","remove","reflow","transitionEnd","siblings","sibling","show","hide","toggle","getInstance","KTAccordion","getOrCreateInstance","createInstances","querySelectorAll","init","_isAnimating","_targetElement","_getTargetElement","_isOpen","_expand","_collapse","expand","collapse","isOpen","KTCollapse","_dataOptionPrefix","_uid","_events","geUID","eventType","callable","CustomEvent","detail","bubbles","cancelable","composed","dispatchEvent","getCssProp","camelReverseCase","_getGlobalConfig","KTGlobalComponentsConfig","getDataAttributes","dispose","callback","eventId","off","delete","getOption","fireEvent","headerChecked","headerCheckElement","targetElements","preserveSelection","checkbox","getSelectedRows","_state","selectedRows","String","setSelectedRows","rows","from","checkboxListener","checkboxToggle","checked","isChecked","change","el","includes","updateHeaderCheckboxState","reapplyCheckedStates","row","checkedClass","total","indeterminate","input","handleRowCheckboxChange","uncheck","getChecked","updateState","theadElement","getState","setState","updateData","toggleSortOrder","currentField","currentOrder","newField","setSortIcon","sortField","sortOrder","sortClass","classes","asc","desc","th","sortElement","base","className","trim","initSort","header","cellIndex","field","sortData","aText","bText","compareValues","_originalTbodyClass","_originalTrClasses","_originalTheadClass","_originalTdClasses","_originalThClasses","_data","_isFetching","_initDefaultConfig","_initElements","_checkbox","createCheckboxHandler","eventName","eventData","_sortHandler","createSortHandler","_theadElement","bind","_updateData","stateSave","_deleteState","_loadState","requestMethod","requestHeaders","info","infoEmpty","pageSizes","pageSize","pageMore","pageMoreLimit","pagination","number","class","text","previous","more","search","delay","values","loading","template","content","table","size","spinner","loadingClass","_tableElement","_tbodyElement","tBodies","createTBody","tHead","_storeOriginalClasses","_infoElement","_sizeElement","_paginationElement","thElements","originalRows","rowIndex","tdElements","td","_showSpinner","apiEndpoint","_fetchDataFromLocal","_finalize","_fetchDataFromServer","_attachSearchEvent","_hideSpinner","tableId","_tableId","searchElement","_debouncedSearch","debouncedSearch","_debounce","page","originalData","_tableConfigInvalidate","_localTableHeaderInvalidate","_localTableContentInvalidate","_localExtractTableContent","originalDataAttributes","_temp","call","endIndex","startIndex","totalItems","_draw","checksum","JSON","stringify","innerHTML","_contentChecksum","restConfig","_configChecksum","ths","dataRow","colName","queryParams","_getQueryParamsForFetchRequest","_performFetchRequest","response","responseData","json","_noticeOnTable","mapResponse","totalCount","filters","URLSearchParams","column","type","mapRequest","requestBody","apiEndpointWithQueryParams","_createUrl","fetch","method","headers","catch","error","pathOrUrl","baseUrl","location","origin","URL","normalizedPath","startsWith","totalPages","ceil","_dispose","_updateTable","_updatePagination","_saveState","removeChild","tbodyElement","_updateTableContent","fragment","createDocumentFragment","textContent","createElement","columns","colIndex","columnDef","render","DocumentFragment","appendChild","createdCell","prototype","attr","message","cell","insertRow","insertCell","colSpan","_removeChildElements","_createPageSizeControls","_createPaginationControls","container","firstChild","setTimeout","option","selected","append","onchange","_reloadPageSize","Number","_setPaginationInfoText","paginationContainer","_createPaginationContainer","_createPaginationButtons","currentPage","createButton","disabled","handleClick","button","onclick","_paginateData","pageMoreEnabled","maxButtons","_calculatePageRange","startPage","endPage","halfMaxButtons","floor","isInteger","_createSpinner","display","ns","_tableNamespace","localStorage","setItem","stateString","getItem","parse","removeItem","stateNamespace","id","func","wait","timeout","clearTimeout","goPage","setPageSize","reload","redraw","showSpinner","hideSpinner","setFilter","f","query","KTDataTable","_instances","stateManager","_calendarContainer","_dropdownElement","_dropdownManager","_isVisible","_stateManager","_eventManager","getEventManager","now","Date","_currentViewMonth","getMonth","_currentViewYear","getFullYear","_initializeCalendar","_setupEventListeners","getConfig","getLocaleConfig","headerElement","leftNavButton","_navigateMonth","headerCenter","rightNavButton","footerElement","todayButton","_goToToday","clearButton","_clearSelection","applyButton","_applySelection","rightFooter","_initDropdownManager","_renderCalendarView","displayElement","inputElement","triggerElement","KTDatepickerDropdown","e","setOpen","prevMonthBtn","nextMonthBtn","buttons","todayBtn","clearBtn","applyBtn","btn","btnText","monthYearText","_toggleMonthYearView","dayButton","dateIdAttr","part","parseInt","year","month","day","clickedDate","setHours","_handleDateSelection","dateAttr","_handleDaySelection","range","selectedDateRange","startDate","endDate","_clearRangeHoverClasses","hoverDate","_applyRangeHoverEffect","currentDate","setDate","KTDatepickerEventName","STATE_CHANGE","isRangeSelectionInProgress","_updateCalendarView","VIEW_CHANGE","_updateViewMode","OPEN","CLOSE","UPDATE","timeContainer","hourInput","minuteInput","secondInput","amButton","pmButton","am","pm","_handleTimeChange","_setAmPm","locale","visibleMonths","viewMode","tempDate","setMonth","monthContainer","monthHeader","monthNames","calendarGridTemplate","weekDays","calendarMatrix","generateCalendarMonth","daysBody","_renderDays","_updateMonthYearDisplay","currentMonth","monthSelectionTemplate","monthIdx","_selectMonth","currentYear","visibleYears","yearSelectionTemplate","_selectYear","prevYearsBtn","newYear","newDate","setFullYear","setCurrentDate","nextYearsBtn","today","week","date","isCurrentMonth","isToday","isSameDay","isSelected","isRangeStart","isRangeEnd","isInRange","selectedDate","isDateBetween","multiDateSelection","selectedDates","d","isDisabled","isDateDisabled","isWeekendDay","isWeekend","actualMonth","actualYear","dayTemplate","getDate","calendarHeader","monthYearSelectTemplate","monthSelector","yearSelector","setViewMode","clickedButton","console","log","toISOString","localSelectedDate","enableTime","selectedTime","hours","minutes","seconds","currentRange","isStartingNewRange","selectedMonth","currentViewMonth","isInDifferentMonth","setSelectedDate","updatedRange","earlierDate","dayButtons","parentCell","dayOfMonth","newMode","isValidHours","isNaN","isValidMinutes","isValidSeconds","isPM","setSelectedTime","ampm","updatedDate","period","keepViewModeOnSelection","_updateTimeDisplay","isAM","getHours","getMinutes","getSeconds","displayHours","timeFormat","forceLeadingZero","open","close","updatePosition","startDateMidnight","hoverDateMidnight","rangeEnd","dateRangeISOStrings","padStart","dateStr","KTDatepickerCalendar","DefaultConfig","locales","DefaultLocales","format","hourStep","rangeSeparator","maxDates","disabledDates","enableNaturalLanguage","animationDuration","animationEasing","animationEnterClass","animationExitClass","_mergeConfig","_initializeState","KTDatepickerEventManager","isFocused","isRangeSelectionStart","prevIsOpen","_dispatchChangeEvent","existingIndex","findIndex","splice","time","mode","onOpen","onClose","setFocused","resetState","dispatchDateChangeEvent","onChange","KTDatepickerStateManager","_dateInputElement","_startDateInputElement","_endDateInputElement","_displayElement","_useSegmentedDisplay","_displayWrapper","_displayText","_currentDate","_currentRange","_segmentFocused","_initializeInputElements","_createDisplayElement","_calendar","_keyboard","KTDatepickerKeyboard","_initializeDefaultValues","tabIndex","placeholder","displayContainer","segmentedDateRangeInputTemplate","segmentedDateInputTemplate","segment","stopPropagation","segmentType","_handleSegmentClick","dispatchKeyboardOpenEvent","_removeSegmentHighlights","_syncDisplayWithSelectedDate","DATE_CHANGE","_handleDateChange","_handleSegmentKeydown","_navigateSegments","currentSegment","segments","currentIndex","newIndex","newSegment","focus","daySegment","monthSegment","yearSegment","startDay","startMonth","startYear","endDay","endMonth","endYear","formatDate","formattedDate","Event","_updateDisplayElement","displayValue","endFormatted","_updateRangeDisplayElement","placeholderTemplate","displayText","_handleInputChange","inputValue","rangeParts","parseDate","setDateRange","singleDate","parsedDate","minDateAttr","maxDateAttr","minDate","setMinDate","maxDate","setMaxDate","getDateRange","warn","KTDatepicker","_focusableSelector","getVisibleOptions","applyFocus","focusNext","currentFocused","activeElement","nextIndex","focusPrevious","prevIndex","scrollIntoView","block","behavior","_listeners","addListener","handler","elementListeners","handlers","removeAllListeners","_focusableElements","_firstFocusableElement","_lastFocusableElement","_update","focusableElements","handleTab","keyCode","shiftKey","focusFirstElement","dropdownElement","_isTransitioning","_popperInstance","_focusTrap","_activeElement","_toggleElement","EventManager","_focusManager","FocusManager","_handleToggleClick","_handleKeyDown","_handleOutsideClick","firstOption","visibleOptions","lastOption","datepickerElement","_setDropdownWidth","spacing","totalWidth","minWidth","_initPopper","_destroyPopper","_parseOffset","triggerRect","dropdownRect","viewportHeight","innerHeight","viewportWidth","innerWidth","spaceBelow","spaceAbove","overflowRight","beforeShowEvent","defaultPrevented","zIndex","_focusFirstInteractiveElement","afterShowEvent","currentMonthDay","beforeHideEvent","opacity","afterHideEvent","listener","dispatchOpenEvent","dispatchCloseEvent","dispatchUpdateEvent","KEYBOARD_OPEN","dispatchViewChangeEvent","dispatchTimeChangeEvent","timeData","TIME_CHANGE","dispatchInputChangeEvent","DatepickerTypes","_focusedDay","_isListening","_handleDaysViewKeyNavigation","_handleMonthsViewKeyNavigation","_handleYearsViewKeyNavigation","_activateKeyboardNavigation","_deactivateKeyboardNavigation","_focusDay","daysInMonth","firstDayOffset","getDay","firstDayOfWeek","lastDayPrevMonth","dayPosition","lastRowStart","prevMonthDate","prevMonthDays","nextMonthDate","nextMonthDays","yearsPerPage","yearsPerPageUp","yearsPerPageDown","dropdown","selector","currentDay","dateId","generateLocaleConfig","_","toLocaleString","monthNamesShort","dayNames","weekday","dayNamesShort","dayNamesMin","parseFormatString","currentType","currentValue","addSegment","char","getSegmentWidthClass","getSegmentLabel","charAt","toUpperCase","formatSegments","separators","seg","getDefaultSegmentedRangeTemplate","weekDayFormat","getDayNames","firstDay","headerCells","hoverAttributes","monthStr","dayStr","months","idx","years","isCurrentYear","yearClass","datepickerContainerTemplate","inputWrapperTemplate","KTDatepickerEvents","naturalDate","normalized","yesterday","tomorrow","relativeMatch","match","unit","parseNaturalLanguageDate","formatParts","formatRegex","p1","p2","token","repeat","RegExp","exec","yyyy","yy","century","MM","M","MMM","MMMM","monthIndex","shortMonthIndex","dd","HH","H","hh","h","A","mm","setMinutes","ss","s","setSeconds","isValidDate","getTime","getDaysInMonth","getFirstDayOfMonth","padZero","num","date1","date2","isLeadingZero","monthNum","dayOfWeek","hours12","timezoneOffset","getTimezoneOffset","timezoneOffsetHours","timezoneOffsetMinutes","formattedTimezone","dateTime","normalizedDate","parts","disabledDate","firstDayOfMonth","calendar","startTime","endTime","interrupt","_dismiss","getTargetElement","dismiss","KTDismiss","zindex","enable","shownClass","backdrop","backdropClass","backdropStatic","keyboard","disableScroll","persistent","_backdropElement","_relatedTarget","_handleClose","_handleContainer","relatedTarget","KTDrawer","_createBackdrop","_autoFocus","_deleteBackdrop","isEnabled","addClass","removeClass","_isEnabled","stringToBoolean","getRelatedTarget","drawer","handleResize","throttle","timer","handleToggle","drawerEl","handleDismiss","modalElement","modal","handleClickAway","handleKeyword","ctrlKey","altKey","code","metaKey","KT_DRAWER_INITIALIZED","hoverTimeout","placementRtl","permanent","trigger","attach","offsetRtl","_disabled","_menuElement","_setupNestedDropdowns","subToggle","subItem","subMenu","KTDropdown","_click","_mouseover","_mouseout","parentZindex","getHighestZindex","isRTL","_getPopperConfig","_isDropdownOpen","isRtl","offsetValue","_getToggleElement","_getContentElement","click","mouseover","mouseout","getToggleElement","getContentElement","isPermanent","disable","findElement","skipElement","handleKeyboard","dropdownEl","handleMouseover","handleMouseout","initHandlers","KT_DROPDOWN_INITIALIZED","_previewUrl","_inputElement","_hiddenElement","_removeElement","_previewElement","_change","_remove","reader","FileReader","onload","backgroundImage","readAsDataURL","files","_lastMode","_setPreviewUrl","_getPreviewUrl","url","isEmpty","isChanged","setPreviewUrl","getPreviewUrl","KTImageInput","KTModal","targetElement","_setZindex","KT_MODAL_INITIALIZED","KTReparent","targetEl","prepend","reparent","KT_REPARENT_INITIALIZED","KTScrollable","save","dependencies","wrappers","_elementId","_setupHeight","_setupState","heightType","_getHeightType","_getHeight","setProperty","stateEnabled","elementIdExists","Boolean","storedPosition","pos","_getHeightOption","_getAutoHeight","getViewPort","_getElementSpacing","_getElementHeight","computedStyle","marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","getHeight","KT_SCROLLABLE_INITIALIZED","KTScrollspy","smooth","_anchorElements","_getTarget","anchorElement","_updateAnchor","_scrollTo","sectionElement","scrollTo","isVisible","scrollPosition","parentAnchorElements","parents","parentAnchorElement","_isActive","updateAnchor","isActive","KTScrollto","_scroll","select","_select","getDisplayElement","_searchInputElement","_clearButtonElement","_valuesContainerElement","_boundInputHandler","_handleComboboxInput","_boundClearHandler","_handleClearButtonClick","_attachEventListeners","multiple","displayTemplate","updateDisplay","getSelectedOptions","_toggleClearButtonVisibility","debug","_removeEventListeners","isDropdownOpen","openDropdown","_filterOptionsForCombobox","clearSelection","showAllOptions","hasSelectedItems","getOptionsElement","getDropdownElement","filterOptions","focusFirst","selectedOptions","tags","optionElement","CSS","escape","tagElement","defaultTemplates","tag","renderDisplayTemplateForSelected","optionEl","selectedValue","KTSelectCombobox","loadMoreText","items","isLoading","onFetch","remote","dataUrl","apiDataProperty","remoteErrorMessage","dataValueField","dataFieldText","searchParam","searchDebounce","paginationLimit","paginationPageParam","paginationLimitParam","paginationTotalParam","allowClear","maxSelections","isRequired","enableSearch","searchPlaceholder","searchAutofocus","searchMinLength","searchMaxItems","noresults","clearSearchOnClose","selectAllText","clearAllText","showSelectedCount","renderSelected","label","dropdownZindex","dropdownContainer","dropdownPlacement","dropdownFlip","dropdownPreventOverflow","dropdownStrategy","dropdownWidth","dropdownTemplate","_selectedOptions","setItems","reject","_fetchRemoteData","finally","encodeURIComponent","getItems","setItemsFromOptions","title","setSelectedOptions","toggleSelectedOptions","modifyConfig","KTSelectState","ktSelectInstance","_ktSelectInstance","_resolveDropdownContainer","parentElement","closeDropdown","toggleWidth","flip","zIndexToApply","currentDropdownZIndexStr","currentDropdownZIndex","toggleParentContextZindex","transitionComplete","fallbackTimer","completeTransition","containerSelector","containerElement","KTSelectDropdown","KTSelect","KTSelectRemote","KTSelectSearch","KTSelectTags","TypeToSearchBuffer","_globalConfig","optionsConfig","getHTMLOptionElement","getOptionDataForTemplate","KTSelectOption","_isLoading","_hasError","_errorMessage","_currentPage","_totalPages","_lastQuery","fetchData","_buildUrl","ok","Error","status","_processData","hasError","errorMessage","params","limitParam","pageParam","limit","paramsString","processedData","total_pages","mappedData","mappedItem","_mapItemToOption","nestedValue","expectedValue","valueField","labelField","substring","getValue","obj","path","random","substr","loadNextPage","hasMorePages","getErrorMessage","setElement","_noResultsElement","_originalOptionContents","_searchInput","getSearchInput","handleSearchInput","_handleSearchInput","_cacheOriginalOptionContents","_handleSearchKeyDown","_resetAllOptions","clearSearch","resetFocus","refreshOptionCache","getWrapperElement","_clearNoResultsMessage","_filterOptions","firstAvailableOption","optionValue","toggleSelection","clear","_restoreOptionContentsBeforeFilter","originalContent","count","_handleNoResults","visibleOptionsCount","_showNoResultsMessage","optionsContainer","optionsToClear","refreshAfterSearch","_dropdownIsOpen","_comboboxModule","_tagsModule","_dropdownModule","_loadMoreIndicator","_typeToSearchBuffer","_mutationObserver","_searchDebounceTimeout","_originalOptionsHtml","_remoteModule","_initializeRemoteData","_setupComponent","_renderLoadingState","_clearExistingOptions","_generateOptionsHtml","_addLoadMoreButton","_renderErrorState","_showDropdownMessage","_dropdownContentElement","_wrapperElement","loadMore","_handleLoadMore","newItems","existingItems","_updateOptionsInDropdown","loadMoreButton","selectOption","insertBefore","_createHtmlStructure","_setupElementReferences","_preSelectOptions","_applyInitialDisabledState","_initializeSearchModule","combobox","_updateDisplayAndAriaAttributes","updateSelectedOptionDisplay","_setAriaAttributes","_observeNativeSelect","wrapperElement","wrapper","originalClasses","classesForWrapper","classesForDisplay","renderedOption","after","nextElementSibling","_handleDocumentClick","_handleDropdownOptionClick","_handleKeyboardEvent","_searchModule","_handleRemoteSearch","extractedValue","_getValueByKey","extractedLabel","o","k","_selectOption","preSelectedValues","_focusSelectedOption","updateDropdownPosition","focusOptionByValue","_isOptionDisabled","opt","_updateSelectedOptionClass","tagsEnabled","valueDisplayEl","getValueDisplayElement","updateTagsDisplay","placeholderEl","replaceChildren","getSelectedOptionsText","_isOptionOriginallyDisabled","originalOption","allOptions","selectedValues","maxReached","isOriginallyDisabled","selectFocusedOption","focusedOption","getFocusedOption","dataset","titleElement","_handleOptionClick","clickedOption","styleAttr","enableMultiSelect","disableMultiSelect","_renderSearchLoadingState","_updateSearchResults","_renderSearchErrorState","noResultsElement","displaySeparator","dropdownOption","isDropdownDisabled","isNativeDisabled","focusManager","buffer","focusLast","focusedOptionEl","val","blur","str","getBuffer","focusByString","entries","renderTemplateString","selectedCount","selectedTexts","MutationObserver","mutations","needsRebuild","needsSelectionSync","mutation","HTMLOptionElement","attributeName","_rebuildOptionsFromNative","_syncSelectionFromNative","observe","childList","subtree","attributeFilter","_valueDisplayElement","optionElements","originalOptions","closeButton","_removeTag","templates","userTemplateStrings","stringToElement","firstElementChild","coreTemplateStrings","searchEmpty","tagRemoveButton","getTemplateStrings","customDropdownEl","dropdownClass","optionsClass","loadMoreClass","errorClass","wrapperClass","displayClass","optionData","optionTemplate","baseTemplate","optionClasses","optionClass","searchClass","noresultsClass","noresultsTemplate","loadingMessage","preparedContent","tagTemplate","tagClass","innerText","placeholderClass","Intl","NumberFormat","currency","onVisibleCount","queryLower","optionsSelector","_focusedOptionIndex","_onFocusChange","_optionsSelector","_setupOptionClickHandlers","_focusClass","_hoverClass","lowerStr","startIdx","_triggerFocusChange","optionRect","containerRect","optionToFocus","getFocusedIndex","setFocusedIndex","setOnFocusChange","cb","_boundHandlers","context","boundHandler","removeListener","eventMap","lastTime","KTStepper","activeStep","_activeStep","_nextElement","_backElement","_go","_goNext","_goBack","_getTotalSteps","_getItemElements","numberElement","step","_goTo","itemElement","_getStep","_getItemElement","_goLast","_goFirst","_isLast","_isFirst","isLast","isFirst","go","goTo","goFirst","goLast","goNext","goBack","getStep","getItemElement","getTotalSteps","getItemElements","KTSticky","reverse","release","activate","_releaseElement","_activateElement","_attributeRoot","_eventTriggerState","_lastScrollTop","_process","_getOffset","_disable","st","getScrollTop","isPartiallyInViewport","_enable","active","activateElement","_calculateHeight","parseFloat","insetInlineStart","offseRight","insetInlineEnd","KTTabs","_currentTabElement","_currentContentElement","_lastTabElement","_lastContentElement","_tabElements","tabElement","_isShown","_getDropdownToggleElement","isShown","keyboardArrow","keyboardJump","handleAccessibility","KT_TABS_INITIALIZED","KTThemeSwitch","_mode","_currentMode","_setMode","currentMode","_getSystemMode","_bindMode","_updateState","_getMode","matchMedia","matches","getMode","setMode","KTToast","DEFAULT_CONFIG","duration","maxToasts","gap","DEFAULT_TOAST_OPTIONS","appearance","progress","action","_defaultToastOptions","getContent","classNames","globalConfig","outerHTML","icon","toolbar","actions","requestAnimationFrame","positionGroups","children","toast","currentOffset","transition","inputOptions","containerMap","success","warning","primary","secondary","destructive","mono","variant","solid","outline","light","sm","md","lg","role","contentHtml","actionBtn","onClick","cancelBtn","dismissBtn","important","pointerEvents","directionClassMap","cls","dirClass","currentToasts","oldestToast","oldestId","beep","AudioContext","webkitAudioContext","createOscillator","g","createGain","frequency","gain","connect","destination","stop","_fireEventOnElement","_dispatchEventOnElement","timeoutId","toasts","remaining","paused","progressEl","ms","onAutoClose","pauseOnHover","matrix","animation","clearAll","idOrInstance","inst","_closing","onDismiss","KTTogglePassword","_triggerElement","_setVisible","flag","setVisible","KTToggle","hasClass","KTTooltip","delayShow","delayHide","_transitioning","_timeout","_createPopper","_popper","getTriggerOption","tooltipElement","tooltip","KT_TOOLTIP_INITIALIZED","KTElementMap","KTData","valueMap","KTDom","parseSelector","prop","getPropertyValue","setCssProp","getIndex","childNodes","l","nodeType","getClientRects","Node","ELEMENT_NODE","getCSSTransitionDuration","animationEnd","getCSSAnimationDuration","transitionDuration","insertAfter","referenceNode","nextSibling","isParentOrElementHidden","scrollingElement","isInViewport","ww","hw","w","isVisibleInParent","childRect","parentRect","visibility","isVisibleVertically","isVisibleHorizontally","getRelativeTopPosition","prefix","camelCase","normalizedKey","uncapitalize","parseDataAttribute","ready","readyState","KTDelegatedEventHandlers","KTEventHandler","targets","j","KTUtils","getCssVar","variable","hex","parseJson","decodeURIComponent","capitalize","letter","htmlElement","charCodeAt","cleanedStr","stringToObject","parsed","stringToInteger","stringToFloat","KTComponents","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","defineProperty","enumerable","r","Symbol","toStringTag"],"sourceRoot":""}